[{"title":"AI+Figma","path":"2025/11/13/AI+Figma/","text":"AI+Figmaå‰ç½®æ¡ä»¶ ä¸‹è½½å¹¶å®‰è£…äº†ï¼šTrae CN https://www.trae.cn/ æ³¨å†Œäº†Figmaè´¦å·ï¼ˆå¥½åƒå¾—ç§‘å­¦ä¸Šç½‘ï¼‰ https://www.figma.com/ å®‰è£…å¥½äº†nodejsç‰ˆæœ¬20+ å®‰è£…MCP ç™»å½•Figmaï¼Œå·¦ä¸Šè§’ç‚¹å‡»å¤´åƒ-&gt; è®¾ç½®-&gt; å®‰å…¨-&gt;ç”Ÿæˆå¯†é’¥-&gt;å‹¾é€‰éœ€è¦çš„æƒé™ï¼ˆä¸æ¸…æ¥šå°±å…¨éƒ¨å‹¾é€‰ï¼Œåæ­£æ˜¯ç»™AIè°ƒç”¨çš„ï¼‰ï¼Œå¤åˆ¶å¤‡ç”¨ åœ¨ç¼–è¾‘å™¨ä¸­æ‰¾åˆ°MCPå¸‚åœºï¼Œæœç´¢Figmaå®‰è£… æç¤ºä½ è¾“å…¥å¯†é’¥ï¼Œç²˜è´´ä¸Šä¸€æ­¥å¤åˆ¶çš„å¯†é’¥ï¼Œç‚¹å‡»ç¡®å®šè¿›è¡Œå®‰è£… å¯åŠ¨æ—¶å¯èƒ½ä¼šå‡ºç°æŠ¥é”™ win+rè¾“å…¥cmdæ‰“å¼€ç»ˆç«¯ä¾æ¬¡è¾“å…¥ 12345npm cache clean --forcenpm install --include=optional sharpnpm install --os=win32 --cpu=x64 sharp ä¿®æ”¹ç¼–è¾‘å™¨çš„æ¨¡å‹ï¼ˆä¸ªäººæµ‹è¯•ä¼¼ä¹å¾—è¦å›¾ç‰‡ç†è§£çš„ï¼Œæˆ‘é€‰æ‹©äº†Doubao-Seed-Codeï¼‰ åˆ›å»ºä¸€ä¸ªç©ºç™½çš„è®¾è®¡ï¼Œå»ç¤¾åŒºå¤åˆ¶ä¸€ä¸ªæ¨¡æ¿åˆ°ä½ åˆ›å»ºçš„ç©ºç™½è®¾è®¡ä¸­ çœ‹çœ‹ä½ çš„é“¾æ¥æ˜¯ä¸æ˜¯ï¼šhttps://www.figma.com/design å¼€å¤´çš„ï¼ŒMCPä¼¼ä¹ç°åœ¨åªæ”¯æŒ design è¿™ç§ï¼Œå…¶ä»–çš„å¯èƒ½æ˜¯æ²¡å¼€å‘APIä¹Ÿå¯èƒ½æ˜¯MCPæš‚æ—¶è¿˜æ²¡æ›´æ–° é€‰æ‹©ä½ éœ€è¦å†™çš„é¡µé¢ï¼Œå³å‡» Copy/Paste as -&gt; Copy link to selection è¿›å…¥ç¼–è¾‘å™¨å¯¹è¯æ¡†ï¼Œé€‰æ‹©æ”¯æŒMCPçš„æ™ºèƒ½ä½“ï¼Œé€‰æ‹©æ¨¡å‹ï¼Œç²˜è´´åœ°å€ï¼Œå¹¶è¾“å…¥æç¤ºè¯ï¼šâ€œè®¿é—®Figmaçš„è¿™ä¸ªåœ°å€ï¼Œä½¿ç”¨htmlå¸®æˆ‘å†™xxxé¡µé¢â€ï¼Œå›è½¦ç­‰å¾…å®Œæˆ xxxå¯¹åº”é¡µé¢ä¸Šé¢çš„æ ‡é¢˜ï¼ˆæœ€å¥½æ˜¯å”¯ä¸€çš„ï¼Œæ–¹ä¾¿AIè¯»å–ï¼‰ ä¸€æ¬¡æˆåŠŸå‡ ä¹æ˜¯ä¸å¯èƒ½çš„ï¼Œå¾—åå¤å¯¹è¯è°ƒæ•´ï¼Œè€Œä¸”AIä¼¼ä¹ä¸‹å›¾ç‰‡å›¾æ ‡å¤ªéš¾æˆåŠŸäº†ï¼Œæˆ‘æ˜¯è®©ä»–ä½¿ç”¨ä¸€ä¸ªæˆ‘æœ¬åœ°çš„æµ‹è¯•å›¾å ä½ï¼Œåé¢å†å»æ›¿æ¢çš„ å…¨ç¨‹å…è´¹ï¼Œæ™ºèƒ½ä½“å¯ä»¥è‡ªå®šä¹‰ï¼Œè®°å¾—åœ¨MCPä¸­å‹¾é€‰å¥½ï¼Œæç¤ºè¯è‡ªè¡Œä¼˜åŒ–"},{"title":"ğŸ”¥Knife4j vs Swaggerï¼šNode.js å¼€å‘è€…çš„APIæ–‡æ¡£é©å‘½ï¼","path":"2025/10/20/ğŸ”¥Knife4j vs Swaggerï¼šNode.js å¼€å‘è€…çš„APIæ–‡æ¡£é©å‘½ï¼/","text":"ğŸ”¥Knife4j vs Swaggerï¼šNode.js å¼€å‘è€…çš„APIæ–‡æ¡£é©å‘½ï¼ğŸŒŸ ä¸ºä»€ä¹ˆé€‰æ‹© node-knife4j-uiï¼Ÿ å¡«è¡¥ç”Ÿæ€ç©ºç™½ Knife4j ä½œä¸ºJavaç”Ÿæ€æ ‡æ†çº§APIæ–‡æ¡£å·¥å…·ï¼Œå®˜æ–¹ä»æœªæä¾›Node.js æ”¯æŒã€‚æœ¬åŒ…çªç ´æŠ€æœ¯æ ˆé™åˆ¶ï¼Œå°†Knife4jçš„æè‡´ä½“éªŒé¦–æ¬¡å¸¦å…¥Node.js ä¸–ç•Œï¼š ä¿ç•™åŸç‰ˆæ™ºèƒ½å‚æ•°æŠ˜å /å¤šä¸»é¢˜åˆ‡æ¢/ç¦»çº¿å¯¼å‡ºç­‰æ ¸å¿ƒåŠŸèƒ½ æ–°å¢JWTè‡ªåŠ¨æ³¨å…¥/æƒé™æ§åˆ¶ç­‰ä¼ä¸šçº§ç‰¹æ€§ æ€§èƒ½ç¢¾å‹æ€§ä¼˜åŠ¿ åœºæ™¯ Swagger UI node-knife4j-ui ä¸‡çº§æ¥å£åŠ è½½é€Ÿåº¦ &gt;5s &lt;2s ï¸ å†…å­˜å ç”¨ é«˜ ä½ï¼ˆæ‡’åŠ è½½ä¼˜åŒ–ï¼‰ å¾®æœåŠ¡æ”¯æŒ ç¢ç‰‡åŒ– ç½‘å…³èšåˆæ–‡æ¡£ ğŸš€ æé€Ÿä½“éªŒ npmåœ°å€ï¼šhttps://www.npmjs.com/package/node-knife4j-ui GitHubåœ°å€ï¼šhttps://github.com/766187397/node-knife4j-ui 1npm install node-knife4j-ui CommonJS12345const &#123; Knife4jDoc &#125; = require(&#x27;node-knife4j-ui&#x27;);const knife4jDoc = new Knife4jDoc(swaggerSpec);// æˆ–è€…const Knife4jDoc = require(&#x27;node-knife4j-ui&#x27;).default;const knife4jDoc = new Knife4jDoc(swaggerSpec); ES Modules12345import Knife4jDoc from &#x27;node-knife4j-ui&#x27;;const knife4jDoc = new Knife4jDoc(swaggerSpec);// æˆ–è€…import &#123; Knife4jDoc &#125; from &#x27;node-knife4j-ui&#x27;;const knife4jDoc = new Knife4jDoc(swaggerSpec); å¿«é€Ÿå¼€å§‹expressç‰ˆæœ¬ä½¿ç”¨ ä¸ªäººæµ‹è¯•nodeç‰ˆæœ¬16 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102import express from &#x27;express&#x27;;import swaggerJsdoc from &#x27;swagger-jsdoc&#x27;;import swaggerUi from &#x27;swagger-ui-express&#x27;;import Knife4jDoc from &#x27;node-knife4j-ui&#x27;;const app = express();const PORT = process.env.PORT || 3000;// ä¸­é—´ä»¶app.use(express.json());app.use(express.urlencoded(&#123; extended: true &#125;));// Swaggeré…ç½®é€‰é¡¹const swaggerOptions = &#123; definition: &#123; openapi: &#x27;3.0.0&#x27;, info: &#123; title: &#x27;Expressæµ‹è¯•API&#x27;, version: &#x27;1.0.0&#x27;, description: &#x27;ä¸€ä¸ªç®€å•çš„Express APIæµ‹è¯•æœåŠ¡&#x27;, contact: &#123; name: &#x27;APIæ”¯æŒ&#x27;, email: &#x27;support@example.com&#x27; &#125; &#125;, servers: [ &#123; url: `http://localhost:$&#123;PORT&#125;`, description: &#x27;å¼€å‘æœåŠ¡å™¨&#x27; &#125; ] &#125;, apis: [&#x27;./app.js&#x27;] // æŒ‡å®šåŒ…å«JSDocæ³¨é‡Šçš„æ–‡ä»¶&#125;;// ç”ŸæˆSwaggerè§„èŒƒconst swaggerSpec = swaggerJsdoc(swaggerOptions);// æä¾›Swagger UIapp.use(&#x27;/swagger&#x27;, swaggerUi.serve, swaggerUi.setup(swaggerSpec));// æä¾› Knife4j æ–‡æ¡£const knife4jDoc = new Knife4jDoc(swaggerSpec);const knife4jDocPath = knife4jDoc.getKnife4jUiPath();// æš´éœ²é™æ€æ–‡ä»¶æœåŠ¡app.use(&#x27;/doc&#x27;, knife4jDoc.serveExpress(&#x27;/doc&#x27;), express.static(knife4jDocPath));/** * @swagger * /test: * get: * summary: æµ‹è¯•æ¥å£ * description: è¿”å›ç®€å•çš„é—®å€™ä¿¡æ¯ * tags: * - æµ‹è¯• * responses: * 200: * description: æˆåŠŸè¿”å›é—®å€™ä¿¡æ¯ * content: * application/json: * schema: * type: object * properties: * message: * type: string * example: ä½ å¥½ï¼ */app.get(&#x27;/test&#x27;, (req, res) =&gt; &#123; res.json(&#123; message: &#x27;ä½ å¥½ï¼&#x27; &#125;);&#125;);/** * @swagger * /getSwaggerSpec: * get: * summary: è·å–Swaggerè§„èŒƒ * description: è¿”å›å®Œæ•´çš„Swaggerè§„èŒƒå¯¹è±¡ * tags: * - Swagger * responses: * 200: * description: æˆåŠŸè¿”å›Swaggerè§„èŒƒ * content: * application/json: * schema: * type: object * properties: * swaggerSpec: * type: object * description: Swaggerè§„èŒƒå¯¹è±¡ */app.get(&#x27;/getSwaggerSpec&#x27;, (req, res) =&gt; &#123; res.json(&#123; swaggerSpec &#125;);&#125;);// å¯åŠ¨æœåŠ¡å™¨app.listen(PORT, () =&gt; &#123; console.log(`æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:$&#123;PORT&#125;`); console.log(`Swaggeræ–‡æ¡£åœ°å€: http://localhost:$&#123;PORT&#125;/swagger`); console.log(`Knife4jæ–‡æ¡£åœ°å€: http://localhost:$&#123;PORT&#125;/doc`);&#125;);export default app; koaç‰ˆæœ¬ä½¿ç”¨ ä¸ªäººæµ‹è¯•nodeç‰ˆæœ¬20ï¼Œkoaé™æ€æ–‡ä»¶å¾—ä½¿ç”¨18+æ‰èƒ½æ­£å¸¸ä½¿ç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121import Koa from &#x27;koa&#x27;;import Router from &#x27;koa-router&#x27;;import bodyParser from &#x27;koa-bodyparser&#x27;;import cors from &#x27;@koa/cors&#x27;;import swaggerJsdoc from &#x27;swagger-jsdoc&#x27;;import koaSwagger from &#x27;koa2-swagger-ui&#x27;;import Knife4jDoc from &#x27;node-knife4j-ui&#x27;;import serve from &#x27;koa-static&#x27;;const app = new Koa();const router = new Router();const PORT = process.env.PORT || 3001;// ä¸­é—´ä»¶app.use(cors());app.use(bodyParser());// Swaggeré…ç½®é€‰é¡¹const swaggerOptions = &#123; definition: &#123; openapi: &#x27;3.0.0&#x27;, info: &#123; title: &#x27;Koaæµ‹è¯•API&#x27;, version: &#x27;1.0.0&#x27;, description: &#x27;ä¸€ä¸ªç®€å•çš„Koa APIæµ‹è¯•æœåŠ¡&#x27;, contact: &#123; name: &#x27;APIæ”¯æŒ&#x27;, email: &#x27;support@example.com&#x27; &#125; &#125;, servers: [ &#123; url: `http://localhost:$&#123;PORT&#125;`, description: &#x27;å¼€å‘æœåŠ¡å™¨&#x27; &#125; ] &#125;, apis: [&#x27;./koa-app.js&#x27;] // æŒ‡å®šåŒ…å«JSDocæ³¨é‡Šçš„æ–‡ä»¶&#125;;// ç”ŸæˆSwaggerè§„èŒƒconst swaggerSpec = swaggerJsdoc(swaggerOptions);// æä¾›Swagger UIconst swaggerUi = koaSwagger.koaSwagger(&#123; routePrefix: &#x27;/swagger&#x27;, swaggerOptions: &#123; spec: swaggerSpec &#125;,&#125;);// æä¾› Knife4j æ–‡æ¡£const knife4jDoc = new Knife4jDoc(swaggerSpec);const knife4jDocPath = knife4jDoc.getKnife4jUiPath();app.use(knife4jDoc.serveKoa());// æš´éœ²é™æ€æ–‡ä»¶æœåŠ¡app.use(serve(knife4jDocPath));/** * @swagger * /test: * get: * summary: æµ‹è¯•æ¥å£ * description: è¿”å›ç®€å•çš„é—®å€™ä¿¡æ¯ * tags: * - æµ‹è¯• * responses: * 200: * description: æˆåŠŸè¿”å›é—®å€™ä¿¡æ¯ * content: * application/json: * schema: * type: object * properties: * message: * type: string * example: ä½ å¥½ï¼ */router.get(&#x27;/test&#x27;, (ctx) =&gt; &#123; ctx.body = &#123; message: &#x27;ä½ å¥½ï¼&#x27; &#125;;&#125;);/** * @swagger * /getSwaggerSpec: * get: * summary: è·å–Swaggerè§„èŒƒ * description: è¿”å›å®Œæ•´çš„Swaggerè§„èŒƒå¯¹è±¡ * tags: * - Swagger * responses: * 200: * description: æˆåŠŸè¿”å›Swaggerè§„èŒƒ * content: * application/json: * schema: * type: object * properties: * swaggerSpec: * type: object * description: Swaggerè§„èŒƒå¯¹è±¡ */router.get(&#x27;/getSwaggerSpec&#x27;, (ctx) =&gt; &#123; ctx.body = &#123; swaggerSpec &#125;;&#125;);// åº”ç”¨è·¯ç”±app.use(router.routes());app.use(router.allowedMethods());// åº”ç”¨Swagger UIapp.use(swaggerUi);// å¯åŠ¨æœåŠ¡å™¨app.listen(PORT, () =&gt; &#123; console.log(`KoaæœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:$&#123;PORT&#125;`); console.log(`Swaggeræ–‡æ¡£åœ°å€: http://localhost:$&#123;PORT&#125;/swagger`); console.log(`Knife4jæ–‡æ¡£åœ°å€: http://localhost:$&#123;PORT&#125;/doc`);&#125;);export default app; ğŸ’¡ å°è´´å£«ï¼šåœ¨GitHubä»“åº“ç‚¹å‡»å³ä¸Šè§’ â˜… Star æŒ‰é’®å³å¯å®ŒæˆåŠ æ˜Ÿï¼Œæ•´ä¸ªè¿‡ç¨‹ä»…éœ€3ç§’ï¼æ‚¨çš„æ¯ä¸ªStaréƒ½æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›ğŸ”¥"},{"title":"ä¸€æ–‡ææ‡‚WebWorker","path":"2025/10/20/ä¸€æ–‡ææ‡‚WebWorker/","text":"ğŸ§  ä¸€ã€ä»€ä¹ˆæ˜¯ Web Workerï¼Ÿ Web Worker æ˜¯æµè§ˆå™¨æä¾›çš„ä¸€ç§ åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œ JavaScript çš„æœºåˆ¶ï¼Œå®ƒå…è®¸æˆ‘ä»¬æŠŠä¸€äº›è€—æ—¶çš„è®¡ç®—ä»ä¸»çº¿ç¨‹ä¸­åˆ†ç¦»å‡ºæ¥æ‰§è¡Œï¼Œä»è€Œé¿å… é˜»å¡é¡µé¢æ¸²æŸ“ å’Œ é™ä½ç”¨æˆ·ä½“éªŒã€‚ åœ¨æµè§ˆå™¨ä¸­ï¼š æ™®é€š JS ä»£ç ã€DOM æ“ä½œã€äº‹ä»¶å¤„ç†ã€æ¸²æŸ“ ç­‰éƒ½æ˜¯åœ¨ ä¸»çº¿ç¨‹ï¼ˆMain Threadï¼‰ ä¸­æ‰§è¡Œçš„ï¼› è€Œ Web Worker è¿è¡Œåœ¨ ç‹¬ç«‹çš„çº¿ç¨‹ ä¸­ï¼› ä¸¤è€…é€šè¿‡ æ¶ˆæ¯ä¼ é€’ï¼ˆpostMessageï¼‰ é€šä¿¡ï¼Œä¸å…±äº«ä½œç”¨åŸŸï¼Œä¹Ÿä¸èƒ½ç›´æ¥è®¿é—® DOMã€‚ ğŸ”§ äºŒã€æ€ä¹ˆä½¿ç”¨ Web Workerï¼Ÿä½¿ç”¨éå¸¸ç®€å•ï¼Œä¸»è¦åˆ†ä¸ºä¸‰æ­¥ï¼š âœ… 1. åˆ›å»ºä¸€ä¸ª Worker æ–‡ä»¶ï¼ˆä¾‹å¦‚ worker.jsï¼‰1234567// worker.jsself.onmessage = function (e) &#123; console.log(&#x27;Worker æ”¶åˆ°æ¶ˆæ¯:&#x27;, e.data); const result = e.data * 2; // å‘ä¸»çº¿ç¨‹å‘é€ç»“æœ self.postMessage(result);&#125;; æ³¨æ„ï¼šWorker çº¿ç¨‹ä¸­æ²¡æœ‰ window å¯¹è±¡ï¼Œç”¨ self ä»£è¡¨å…¨å±€ä¸Šä¸‹æ–‡ã€‚ âœ… 2. åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºå¹¶ä½¿ç”¨ Worker12345678// main.jsconst worker = new Worker(&#x27;worker.js&#x27;);worker.postMessage(10); // å‘é€æ¶ˆæ¯ç»™ Workerworker.onmessage = function (e) &#123; console.log(&#x27;ä¸»çº¿ç¨‹æ”¶åˆ°:&#x27;, e.data); // è¾“å‡º 20&#125;; âœ… 3. ç»ˆæ­¢ Worker12worker.terminate(); // ä¸»çº¿ç¨‹ä¸­ç»ˆæ­¢ worker// æˆ–åœ¨ worker å†…è°ƒç”¨ self.close(); ğŸ’¡ ä¸‰ã€ä½¿ç”¨åœºæ™¯Web Worker éå¸¸é€‚åˆç”¨äº è®¡ç®—å¯†é›†å‹ä»»åŠ¡ æˆ– é•¿æ—¶é—´è¿è¡Œçš„é€»è¾‘ï¼Œä¾‹å¦‚ï¼š åœºæ™¯ ç¤ºä¾‹ ğŸ§® å¤§é‡æ•°æ®è®¡ç®— å›¾åƒå¤„ç†ã€éŸ³é¢‘è§£ç ã€æ•°æ®åŠ å¯†è§£å¯† ğŸ“ˆ å¤§æ•°ç»„æ’åº / è¿‡æ»¤ å¤æ‚çš„æ•°æ®åˆ†æã€æ—¥å¿—è§£æ ğŸ—ºï¸ åœ°å›¾æ¸²æŸ“ / è·¯å¾„è§„åˆ’ WebGISã€è·¯å¾„è®¡ç®— ğŸ§¬ WebAssembly ç»“åˆ è¿è¡Œ C++/Rust æ¨¡å—æ—¶ç”¨ Worker ç®¡ç†çº¿ç¨‹ ğŸ¨ å¤æ‚åŠ¨ç”»è®¡ç®— Canvas ç²’å­ç‰¹æ•ˆã€3D æ¸²æŸ“é€»è¾‘ç­‰ ğŸ‘‰ æ€»ä¹‹ï¼šåªè¦æ˜¯â€œçº¯è®¡ç®—â€ã€ä¸æ¶‰åŠ DOM çš„é€»è¾‘ï¼Œéƒ½é€‚åˆæ”¾è¿› Workerã€‚ âš™ï¸ å››ã€åŸç†è§£ææµè§ˆå™¨åœ¨å®ç°ä¸Šï¼Œæ¯ä¸ª Worker å…¶å®æ˜¯ä¸€ä¸ª ç‹¬ç«‹çš„çº¿ç¨‹ï¼ˆæˆ–è½»é‡çº§è¿›ç¨‹ï¼‰ï¼š ä¸»çº¿ç¨‹ä¸ Worker é€šè¿‡ æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼‰ è¿›è¡Œé€šä¿¡ï¼› é€šä¿¡æ–¹å¼æ˜¯ æ‹·è´ä¼ å€¼ï¼ˆstructured cloneï¼‰ï¼Œä¸ä¼šå…±äº«å†…å­˜ï¼› ä» Chrome 60+ å¼€å§‹ï¼Œä¹Ÿæ”¯æŒ SharedArrayBuffer å…±äº«å†…å­˜ï¼Œå®ç°æ›´é«˜æ•ˆçš„æ•°æ®ä¼ é€’ï¼› Worker æ— æ³•è®¿é—® DOMã€windowã€documentã€parentï¼› Worker å¯ä»¥ä½¿ç”¨éƒ¨åˆ†æµè§ˆå™¨ APIï¼Œå¦‚ï¼šfetchã€setTimeoutã€XMLHttpRequestã€IndexedDBã€‚ ğŸ§© æ¶æ„ç¤ºæ„å›¾ï¼š 123Main Thread â”€â”€ postMessage(data) â”€â”€â–¶ Worker Thread â–² â”‚ â””â”€â”€â”€â”€â”€ onmessage(event) â—€â”€â”€ postMessage(result) ğŸ§° äº”ã€æ‰©å±•ï¼šWorker çš„å‡ ç§ç±»å‹ ç±»å‹ è¯´æ˜ ç‰¹ç‚¹ Dedicated Worker ç‹¬ç«‹å·¥ä½œè€… é»˜è®¤ï¼Œåªèƒ½è¢«åˆ›å»ºå®ƒçš„é¡µé¢ä½¿ç”¨ Shared Worker å…±äº«å·¥ä½œè€… å¯è¢«å¤šä¸ªé¡µé¢æˆ– iframe å…±äº« Service Worker ç¦»çº¿/ç¼“å­˜ä»£ç† ä¸“é—¨ç”¨äºç½‘ç»œè¯·æ±‚æ‹¦æˆªã€PWA ç¼“å­˜ã€ç¦»çº¿åŠŸèƒ½ ğŸ§© å…­ã€ç®€å•ç¤ºä¾‹ï¼šè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—worker.js 12345self.onmessage = function (e) &#123; const n = e.data; const fib = (n) =&gt; (n &lt;= 1 ? n : fib(n - 1) + fib(n - 2)); self.postMessage(fib(n));&#125;; main.js 123const worker = new Worker(&#x27;worker.js&#x27;);worker.postMessage(40);worker.onmessage = (e) =&gt; console.log(&#x27;ç»“æœï¼š&#x27;, e.data); å³ä½¿ fib(40) è®¡ç®—å¾ˆæ…¢ï¼Œä¹Ÿä¸ä¼šå¡ä½ UIã€‚ ğŸ§¾ æ€»ç»“ æ–¹é¢ è¯´æ˜ å®šä¹‰ æµè§ˆå™¨ä¸­çš„å¤šçº¿ç¨‹æœºåˆ¶ ä½œç”¨ é˜²æ­¢ä¸»çº¿ç¨‹è¢«è€—æ—¶ä»»åŠ¡é˜»å¡ é€šä¿¡æ–¹å¼ postMessage + onmessage é™åˆ¶ ä¸èƒ½æ“ä½œ DOMã€ä¸èƒ½è®¿é—® window é€‚ç”¨åœºæ™¯ æ•°æ®å¤„ç†ã€å›¾åƒè®¡ç®—ã€åŠ å¯†ã€WebAssembly ç­‰ åŸç† ä¸»çº¿ç¨‹ä¸ Worker é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡ï¼Œæ•°æ®ç»“æ„åŒ–å…‹éš†ä¼ é€’"},{"title":"Node.js å‡½æ•°æ‰“åŒ…ä¸º npm åŒ…çš„è§„èŒƒæµç¨‹","path":"2025/10/16/Node.js å‡½æ•°æ‰“åŒ…ä¸º npm åŒ…çš„è§„èŒƒæµç¨‹/","text":"Node.js å‡½æ•°æ‰“åŒ…ä¸º npm åŒ…çš„è§„èŒƒæµç¨‹æ¦‚è¿°æœ¬æ•™ç¨‹æä¾›ä»é›¶å¼€å§‹åˆ›å»ºå’Œå‘å¸ƒ npm åŒ…çš„æ ‡å‡†åŒ–æµç¨‹ï¼Œéµå¾ªæœ€ä½³å®è·µå’Œè¡Œä¸šè§„èŒƒã€‚ ç¬¬ä¸€æ­¥ï¼šé¡¹ç›®åˆå§‹åŒ–1. åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„12mkdir my-packagecd my-package 2. åˆå§‹åŒ– package.json1npm init -y 3. æ ‡å‡†é¡¹ç›®ç»“æ„1234567891011my-package/â”œâ”€â”€ src/ # æºä»£ç ç›®å½•â”‚ â””â”€â”€ index.ts # ä¸»å…¥å£æ–‡ä»¶â”œâ”€â”€ static/ # é™æ€èµ„æºâ”œâ”€â”€ test/ # æµ‹è¯•æ–‡ä»¶â”œâ”€â”€ package.json # åŒ…é…ç½®â”œâ”€â”€ tsconfig.json # TypeScript é…ç½®â”œâ”€â”€ .gitignore # Git å¿½ç•¥è§„åˆ™â”œâ”€â”€ .npmignore # NPM å‘å¸ƒå¿½ç•¥è§„åˆ™â”œâ”€â”€ README.md # æ–‡æ¡£â””â”€â”€ LICENSE # è®¸å¯è¯ ç¬¬äºŒæ­¥ï¼šå¼€å‘ç¯å¢ƒé…ç½®1. å®‰è£…å¼€å‘ä¾èµ–æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ TypeScript ç¼–è¯‘å™¨ (tsc)123npm install -D typescript @types/nodenpm install -D rimraf # æ¸…ç†å·¥å…·npm install -D jest @types/jest # æµ‹è¯•æ¡†æ¶ï¼ˆå¯é€‰ï¼‰ æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ tsup æ„å»ºå·¥å…·ï¼ˆæ¨èï¼‰1234npm install -D tsupnpm install -D @types/nodenpm install -D rimraf # æ¸…ç†å·¥å…·npm install -D jest @types/jest # æµ‹è¯•æ¡†æ¶ï¼ˆå¯é€‰ï¼‰ tsup ä¼˜åŠ¿ï¼š é›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨ æ”¯æŒ ES Modules å’Œ CommonJS åŒæ ¼å¼è¾“å‡º è‡ªåŠ¨ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶ æ›´å¿«çš„æ„å»ºé€Ÿåº¦ æ›´å¥½çš„ Tree Shaking 2. é…ç½® TypeScript (tsconfig.json)ä½¿ç”¨ tsc çš„é…ç½®12345678910111213141516171819&#123; &quot;compilerOptions&quot;: &#123; &quot;target&quot;: &quot;ES2020&quot;, &quot;module&quot;: &quot;CommonJS&quot;, &quot;lib&quot;: [&quot;ES2020&quot;], &quot;outDir&quot;: &quot;./dist&quot;, &quot;rootDir&quot;: &quot;./src&quot;, &quot;strict&quot;: true, &quot;esModuleInterop&quot;: true, &quot;skipLibCheck&quot;: true, &quot;forceConsistentCasingInFileNames&quot;: true, &quot;declaration&quot;: true, &quot;declarationMap&quot;: true, &quot;sourceMap&quot;: true, &quot;resolveJsonModule&quot;: true &#125;, &quot;include&quot;: [&quot;src/**/*&quot;], &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;dist&quot;, &quot;test&quot;]&#125; ä½¿ç”¨ tsup çš„ç®€åŒ–é…ç½®12345678910111213&#123; &quot;compilerOptions&quot;: &#123; &quot;target&quot;: &quot;ES2020&quot;, &quot;lib&quot;: [&quot;ES2020&quot;], &quot;strict&quot;: true, &quot;esModuleInterop&quot;: true, &quot;skipLibCheck&quot;: true, &quot;forceConsistentCasingInFileNames&quot;: true, &quot;resolveJsonModule&quot;: true &#125;, &quot;include&quot;: [&quot;src/**/*&quot;], &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;dist&quot;, &quot;test&quot;]&#125; 3. é…ç½®æ„å»ºè„šæœ¬ (package.json)ä½¿ç”¨ tsc çš„é…ç½®123456789101112131415161718&#123; &quot;scripts&quot;: &#123; &quot;clean&quot;: &quot;rimraf dist&quot;, &quot;build&quot;: &quot;npm run clean &amp;&amp; tsc&quot;, &quot;dev&quot;: &quot;tsc -w&quot;, &quot;test&quot;: &quot;jest&quot;, &quot;prepublishOnly&quot;: &quot;npm run build&quot;, &quot;lint&quot;: &quot;eslint src/**/*.ts&quot; &#125;, &quot;main&quot;: &quot;dist/index.js&quot;, &quot;types&quot;: &quot;dist/index.d.ts&quot;, &quot;files&quot;: [ &quot;dist&quot;, &quot;static&quot;, &quot;README.md&quot;, &quot;LICENSE&quot; ]&#125; ä½¿ç”¨ tsup çš„é…ç½®ï¼ˆæ¨èï¼‰1234567891011121314151617181920212223242526&#123; &quot;scripts&quot;: &#123; &quot;clean&quot;: &quot;rimraf dist&quot;, &quot;build&quot;: &quot;npm run clean &amp;&amp; tsup&quot;, &quot;dev&quot;: &quot;tsup --watch&quot;, &quot;test&quot;: &quot;jest&quot;, &quot;prepublishOnly&quot;: &quot;npm run build&quot;, &quot;lint&quot;: &quot;eslint src/**/*.ts&quot; &#125;, &quot;main&quot;: &quot;./dist/index.js&quot;, &quot;module&quot;: &quot;./dist/index.mjs&quot;, &quot;types&quot;: &quot;./dist/index.d.ts&quot;, &quot;exports&quot;: &#123; &quot;.&quot;: &#123; &quot;import&quot;: &quot;./dist/index.mjs&quot;, &quot;require&quot;: &quot;./dist/index.js&quot;, &quot;types&quot;: &quot;./dist/index.d.ts&quot; &#125; &#125;, &quot;files&quot;: [ &quot;dist&quot;, &quot;static&quot;, &quot;README.md&quot;, &quot;LICENSE&quot; ]&#125; 4. é…ç½® tsup (tsup.config.ts æˆ– package.json)æ–¹å¼ä¸€ï¼šåœ¨ package.json ä¸­é…ç½®1234567891011&#123; &quot;tsup&quot;: &#123; &quot;entry&quot;: [&quot;src/index.ts&quot;], &quot;format&quot;: [&quot;cjs&quot;, &quot;esm&quot;], &quot;dts&quot;: true, &quot;clean&quot;: true, &quot;sourcemap&quot;: true, &quot;splitting&quot;: false, &quot;minify&quot;: false &#125;&#125; æ–¹å¼äºŒï¼šåˆ›å»º tsup.config.ts æ–‡ä»¶1234567891011import &#123; defineConfig &#125; from &#x27;tsup&#x27;export default defineConfig(&#123; entry: [&#x27;src/index.ts&#x27;], format: [&#x27;cjs&#x27;, &#x27;esm&#x27;], dts: true, clean: true, sourcemap: true, splitting: false, minify: false&#125;) æ–¹å¼ä¸‰ï¼šå‘½ä»¤è¡Œå‚æ•°ï¼ˆpackage.json scriptsï¼‰12345&#123; &quot;scripts&quot;: &#123; &quot;build&quot;: &quot;tsup src/index.ts --format cjs,esm --dts --clean --sourcemap&quot; &#125;&#125; ç¬¬ä¸‰æ­¥ï¼šä»£ç å¼€å‘è§„èŒƒ1. æºä»£ç ç¼–å†™è§„èŒƒsrc/index.ts - ä¸»å…¥å£æ–‡ä»¶ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839/** * ä¸»ç±» - æä¾›æ ¸å¿ƒåŠŸèƒ½ */export class MyLibrary &#123; private config: any; constructor(config?: any) &#123; this.config = config || &#123;&#125;; &#125; /** * Express ä¸­é—´ä»¶æ–¹æ³• */ serveExpress() &#123; return (req: any, res: any, next: any) =&gt; &#123; // Express ä¸­é—´ä»¶é€»è¾‘ res.json(&#123; message: &#x27;Hello from Express&#x27; &#125;); &#125;; &#125; /** * Koa ä¸­é—´ä»¶æ–¹æ³• */ serveKoa() &#123; return async (ctx: any, next: any) =&gt; &#123; // Koa ä¸­é—´ä»¶é€»è¾‘ ctx.body = &#123; message: &#x27;Hello from Koa&#x27; &#125;; await next(); &#125;; &#125;&#125;// é»˜è®¤å¯¼å‡ºexport default MyLibrary;// CommonJS å…¼å®¹å¯¼å‡ºif (typeof module !== &#x27;undefined&#x27; &amp;&amp; module.exports) &#123; module.exports = MyLibrary;&#125; 2. ç±»å‹å®šä¹‰è§„èŒƒåˆ›å»ºç±»å‹å®šä¹‰æ–‡ä»¶ src/types/index.tsï¼š 12345678910export interface Config &#123; prefix?: string; debug?: boolean;&#125;export interface ApiResponse &#123; success: boolean; data?: any; error?: string;&#125; ç¬¬å››æ­¥ï¼šæ„å»ºå’Œæµ‹è¯•1. æ„å»ºæµç¨‹ä½¿ç”¨ tsc çš„æ„å»ºæµç¨‹12345678# æ¸…ç†å¹¶æ„å»ºnpm run build# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰npm run dev# è¿è¡Œæµ‹è¯•npm test ä½¿ç”¨ tsup çš„æ„å»ºæµç¨‹ï¼ˆæ¨èï¼‰1234567891011121314151617# æ¸…ç†å¹¶æ„å»ºnpm run build# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰npm run dev# è¿è¡Œæµ‹è¯•npm test# ä»…æ„å»º CommonJS æ ¼å¼npx tsup src/index.ts --format cjs --dts# ä»…æ„å»º ES Modules æ ¼å¼npx tsup src/index.ts --format esm --dts# ç”Ÿäº§ç¯å¢ƒæ„å»ºï¼ˆå‹ç¼©ä»£ç ï¼‰npx tsup src/index.ts --format cjs,esm --dts --minify 2. éªŒè¯æ„å»ºç»“æœtsc æ„å»ºç»“æœæ„å»ºå®Œæˆåæ£€æŸ¥ dist ç›®å½•ï¼š 123456dist/â”œâ”€â”€ index.js # ç¼–è¯‘åçš„ JavaScriptâ”œâ”€â”€ index.d.ts # TypeScript ç±»å‹å£°æ˜â”œâ”€â”€ index.js.map # æºç æ˜ å°„æ–‡ä»¶â””â”€â”€ types/ â””â”€â”€ index.d.ts # ç±»å‹å®šä¹‰ tsup æ„å»ºç»“æœæ„å»ºå®Œæˆåæ£€æŸ¥ dist ç›®å½•ï¼š 1234567dist/â”œâ”€â”€ index.js # CommonJS æ ¼å¼è¾“å‡ºâ”œâ”€â”€ index.mjs # ES Modules æ ¼å¼è¾“å‡ºâ”œâ”€â”€ index.d.ts # TypeScript ç±»å‹å£°æ˜â”œâ”€â”€ index.d.mts # ES Modules ç±»å‹å£°æ˜â”œâ”€â”€ index.js.map # CommonJS æºç æ˜ å°„â””â”€â”€ index.mjs.map # ES Modules æºç æ˜ å°„ 3. tsup æ„å»ºé…ç½®è¯¦è§£å¸¸ç”¨é…ç½®é€‰é¡¹12345678910111213141516171819202122232425262728293031# åŸºæœ¬æ„å»ºnpx tsup src/index.ts# å¤šæ ¼å¼è¾“å‡ºnpx tsup src/index.ts --format cjs,esm# ç”Ÿæˆç±»å‹å£°æ˜npx tsup src/index.ts --dts# æ¸…ç†è¾“å‡ºç›®å½•npx tsup src/index.ts --clean# ç”Ÿæˆæºç æ˜ å°„npx tsup src/index.ts --sourcemap# ä»£ç åˆ†å‰²npx tsup src/index.ts --splitting# å‹ç¼©ä»£ç npx tsup src/index.ts --minify# å¤–éƒ¨ä¾èµ–å¤„ç†npx tsup src/index.ts --external react,vue# å¹³å°ç‰¹å®šæ„å»ºnpx tsup src/index.ts --platform nodenpx tsup src/index.ts --platform browser# ç›®æ ‡ç¯å¢ƒnpx tsup src/index.ts --target node16npx tsup src/index.ts --target es2020 é«˜çº§é…ç½®ç¤ºä¾‹1234567891011121314151617# å¤šå…¥å£æ„å»ºnpx tsup src/index.ts src/cli.ts --format cjs,esm --dts# è‡ªå®šä¹‰è¾“å‡ºç›®å½•npx tsup src/index.ts --out-dir build# ç¯å¢ƒå˜é‡æ³¨å…¥npx tsup src/index.ts --env.NODE_ENV production# ç›‘å¬æ¨¡å¼ï¼ˆå¼€å‘ï¼‰npx tsup src/index.ts --watch# æœåŠ¡ç«¯æ¸²æŸ“ä¼˜åŒ–npx tsup src/index.ts --format cjs --platform node --target node16# æµè§ˆå™¨ä¼˜åŒ–npx tsup src/index.ts --format esm --platform browser --target es2020 3. æœ¬åœ°åŒ…å¼€å‘å’Œæµ‹è¯•ï¼ˆnpm linkï¼‰npm link çš„ä½œç”¨ åœ¨æœ¬åœ°å¼€å‘å’Œæµ‹è¯•åŒ…ï¼Œæ— éœ€å‘å¸ƒåˆ° npm æ¨¡æ‹ŸçœŸå®çš„åŒ…å®‰è£…å’Œä½¿ç”¨åœºæ™¯ æ”¯æŒå®æ—¶ä¿®æ”¹å’Œæµ‹è¯• åœ¨åŒ…é¡¹ç›®ä¸­åˆ›å»ºå…¨å±€é“¾æ¥12345# åœ¨åŒ…é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œnpm link# è¾“å‡ºç¤ºä¾‹ï¼š# /usr/local/lib/node_modules/your-package -&gt; /path/to/your/package åœ¨æµ‹è¯•é¡¹ç›®ä¸­ä½¿ç”¨é“¾æ¥çš„åŒ…12345678910# åˆ›å»ºæµ‹è¯•é¡¹ç›®mkdir test-projectcd test-projectnpm init -y# é“¾æ¥åˆ°å…¨å±€åŒ…npm link your-package-name# æˆ–è€…ä½¿ç”¨å®Œæ•´è·¯å¾„npm link /path/to/your/package éªŒè¯é“¾æ¥æ˜¯å¦æˆåŠŸ12345678# åœ¨æµ‹è¯•é¡¹ç›®ä¸­æ£€æŸ¥npm ls your-package-name# æŸ¥çœ‹é“¾æ¥çŠ¶æ€npm ls -g --link# æµ‹è¯•å¯¼å…¥node -e &quot;console.log(require(&#x27;your-package-name&#x27;))&quot; å®æ—¶å¼€å‘å’Œæµ‹è¯•12345# åœ¨åŒ…é¡¹ç›®ä¸­ä¿®æ”¹ä»£ç åï¼Œé‡æ–°æ„å»ºnpm run build# åœ¨æµ‹è¯•é¡¹ç›®ä¸­ä¼šç«‹å³çœ‹åˆ°å˜åŒ–# æ— éœ€é‡æ–°å®‰è£…æˆ–é‡å¯ å–æ¶ˆé“¾æ¥12345678# åœ¨æµ‹è¯•é¡¹ç›®ä¸­å–æ¶ˆé“¾æ¥npm unlink your-package-name# æˆ–è€…ä½¿ç”¨ uninstallnpm uninstall your-package-name# åœ¨åŒ…é¡¹ç›®ä¸­å–æ¶ˆå…¨å±€é“¾æ¥npm unlink npm link çš„é«˜çº§ç”¨æ³•å¤šä¸ªåŒ…ä¹‹é—´çš„é“¾æ¥ 1234567891011# å‡è®¾æœ‰ä¸¤ä¸ªåŒ…ï¼špackage-a å’Œ package-b# åœ¨ package-a ä¸­åˆ›å»ºé“¾æ¥cd package-anpm link# åœ¨ package-b ä¸­é“¾æ¥åˆ° package-acd package-bnpm link package-a# ç°åœ¨ package-b å¯ä»¥ä½¿ç”¨ package-a ä½œä¸ºä¾èµ– ä½¿ç”¨ç›¸å¯¹è·¯å¾„é“¾æ¥ 12# å¦‚æœåŒ…åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­npm link ../my-other-package æŸ¥çœ‹æ‰€æœ‰å…¨å±€é“¾æ¥ 12345# æŸ¥çœ‹æ‰€æœ‰å…¨å±€é“¾æ¥çš„åŒ…npm ls -g --depth=0 --link# æŸ¥çœ‹ç‰¹å®šåŒ…çš„é“¾æ¥ä¿¡æ¯npm ls -g your-package-name npm link çš„å¸¸è§é—®é¢˜è§£å†³é“¾æ¥ä¸ç”Ÿæ•ˆ 1234567# æ£€æŸ¥åŒ…åæ˜¯å¦æ­£ç¡®npm ls your-package-name# é‡æ–°é“¾æ¥npm unlink your-package-name &amp;&amp; npm link your-package-name# æˆ–è€…é‡å¯ç»ˆç«¯ æƒé™é—®é¢˜ 12345# åœ¨ macOS/Linux ä¸Šå¯èƒ½éœ€è¦ sudosudo npm link# æˆ–è€…ä¿®æ”¹ npm å…¨å±€ç›®å½•æƒé™sudo chown -R $(whoami) $(npm config get prefix)/&#123;lib/node_modules,bin,share&#125; Windows ç³»ç»Ÿæ³¨æ„äº‹é¡¹ 1234567# Windows ä¸Šå¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShell æˆ–å‘½ä»¤æç¤ºç¬¦# æ£€æŸ¥å…¨å±€å®‰è£…ç›®å½•npm config get prefix# ç¡®ä¿æœ‰å†™å…¥æƒé™ npm link çš„æœ€ä½³å®è·µ å¼€å‘æµç¨‹ 1234567# 1. åœ¨åŒ…é¡¹ç›®ä¸­å¼€å‘npm run dev# 2. åœ¨æµ‹è¯•é¡¹ç›®ä¸­æµ‹è¯•npm link your-package# 3. ä¿®æ”¹ â†’ æ„å»º â†’ æµ‹è¯•å¾ªç¯ ç‰ˆæœ¬ç®¡ç† 12345# åœ¨å‘å¸ƒå‰ç¡®ä¿å–æ¶ˆæ‰€æœ‰é“¾æ¥npm unlink# æµ‹è¯•æ­£å¼å®‰è£…npm install your-package@latest å›¢é˜Ÿåä½œ 12# ä½¿ç”¨ç›¸å¯¹è·¯å¾„é¿å…å…¨å±€å†²çªnpm link ../team-member-package 4. æµ‹è¯•é…ç½®ï¼ˆå¯é€‰ï¼‰package.json æ·»åŠ æµ‹è¯•é…ç½®ï¼š 1234567&#123; &quot;scripts&quot;: &#123; &quot;test&quot;: &quot;jest&quot;, &quot;test:watch&quot;: &quot;jest --watch&quot;, &quot;test:link&quot;: &quot;npm run build &amp;&amp; cd test-project &amp;&amp; npm test&quot; &#125;&#125; jest.config.jsï¼š 12345module.exports = &#123; preset: &#x27;ts-jest&#x27;, testEnvironment: &#x27;node&#x27;, testMatch: [&#x27;**/test/**/*.test.ts&#x27;]&#125;; ç¬¬äº”æ­¥ï¼šå‘å¸ƒå‰é…ç½®1. å¿½ç•¥æ–‡ä»¶é…ç½®.gitignore - Git ç‰ˆæœ¬æ§åˆ¶å¿½ç•¥è§„åˆ™ï¼š 1234567891011121314151617181920212223# ä¾èµ–ç›®å½•node_modules/# æ„å»ºè¾“å‡ºdist/build/# æ—¥å¿—æ–‡ä»¶*.lognpm-debug.log*# ç¯å¢ƒå˜é‡.env.env.local.env.production# ç³»ç»Ÿæ–‡ä»¶.DS_StoreThumbs.db# IDE é…ç½®.vscode/.idea/ .npmignore - NPM å‘å¸ƒå¿½ç•¥è§„åˆ™ï¼š 123456789101112131415161718192021222324252627# æºä»£ç ç›®å½•src/# é…ç½®æ–‡ä»¶tsconfig.jsonjest.config.js.eslintrc.js# å¼€å‘ä¾èµ–node_modules/# æµ‹è¯•æ–‡ä»¶test/*.test.ts*.spec.ts# Git ç›¸å…³.git/.gitignore# å¼€å‘å·¥å…·é…ç½®.eslintignore.prettierrc# ä¸´æ—¶æ–‡ä»¶*.tmp*.temp 2. æ–‡æ¡£å’Œè®¸å¯è¯README.md - é¡¹ç›®æ–‡æ¡£æ¨¡æ¿ï¼š 1234567# My PackageåŠŸèƒ½æè¿°å’Œä½¿ç”¨è¯´æ˜## å®‰è£…```bashnpm install my-package ä½¿ç”¨123import MyLibrary from &#x27;my-package&#x27;;const lib = new MyLibrary(); API æ–‡æ¡£ serveExpress() - Express ä¸­é—´ä»¶ serveKoa() - Koa ä¸­é—´ä»¶ è®¸å¯è¯MIT 1**LICENSE** - MIT è®¸å¯è¯æ¨¡æ¿ï¼š MIT License Copyright (c) [year] [fullname] Permission is hereby grantedâ€¦ 1234567891011## ç¬¬å…­æ­¥ï¼šå‘å¸ƒæµç¨‹### 1. ç‰ˆæœ¬ç®¡ç†```bash# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬npm version# å‡çº§ç‰ˆæœ¬ï¼ˆéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰npm version patch # ä¿®å¤ bugnpm version minor # æ–°å¢åŠŸèƒ½npm version major # ä¸å…¼å®¹å˜æ›´ 2. å‘å¸ƒå‰æ£€æŸ¥12345678# æ„å»ºé¡¹ç›®npm run build# è¿è¡Œæµ‹è¯•npm test# éªŒè¯åŒ…å†…å®¹npm pack 3. å‘å¸ƒåˆ° NPM1234567891011# ç™»å½• NPMï¼ˆé¦–æ¬¡ï¼‰npm login# å‘å¸ƒæ­£å¼ç‰ˆnpm publish# å‘å¸ƒæµ‹è¯•ç‰ˆnpm publish --tag beta# æ’¤é”€å‘å¸ƒï¼ˆ24å°æ—¶å†…ï¼‰npm unpublish my-package@1.0.0 4. å‘å¸ƒåéªŒè¯12345678# åˆ›å»ºæµ‹è¯•é¡¹ç›®éªŒè¯mkdir test-projectcd test-projectnpm init -ynpm install my-package# æµ‹è¯•å¯¼å…¥node -e &quot;console.log(require(&#x27;my-package&#x27;))&quot; ç¬¬ä¸ƒæ­¥ï¼šé…ç½®å‚æ•°è¯¦è§£package.json å…³é”®å­—æ®µè¯´æ˜ å­—æ®µ ä½œç”¨ é…ç½®æ—¶æœº ç¤ºä¾‹å€¼ name åŒ…åï¼Œå…¨å±€å”¯ä¸€ é¡¹ç›®åˆå§‹åŒ– &quot;my-package&quot; version ç‰ˆæœ¬å·ï¼Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ æ¯æ¬¡å‘å¸ƒ &quot;1.0.0&quot; description åŒ…çš„åŠŸèƒ½æè¿° é¡¹ç›®åˆå§‹åŒ– &quot;A useful library&quot; main CommonJS å…¥å£æ–‡ä»¶ æ„å»ºé…ç½®å &quot;dist/index.js&quot; types TypeScript ç±»å‹æ–‡ä»¶ æ·»åŠ  TS å &quot;dist/index.d.ts&quot; files å‘å¸ƒåˆ° npm çš„æ–‡ä»¶ å‘å¸ƒå‰ç¡®å®š [&quot;dist&quot;, &quot;static&quot;] scripts è‡ªå®šä¹‰è„šæœ¬å‘½ä»¤ å¼€å‘è¿‡ç¨‹ä¸­ &#123;&quot;build&quot;: &quot;tsc&quot;&#125; keywords æœç´¢å…³é”®è¯ é¡¹ç›®åˆå§‹åŒ– [&quot;library&quot;, &quot;tool&quot;] repository ä»£ç ä»“åº“åœ°å€ é¡¹ç›®åˆå§‹åŒ– &#123;&quot;type&quot;: &quot;git&quot;, &quot;url&quot;: &quot;...&quot;&#125; tsconfig.json é…ç½®é¡¹è¯¦è§£ é…ç½®é¡¹ ä½œç”¨ æ¨èå€¼ è¯´æ˜ target ç¼–è¯‘ç›®æ ‡ç‰ˆæœ¬ ES2020 ç°ä»£ JavaScript ç‰¹æ€§ module æ¨¡å—ç³»ç»Ÿ CommonJS Node.js å…¼å®¹æ€§ outDir è¾“å‡ºç›®å½• &quot;./dist&quot; ç¼–è¯‘åæ–‡ä»¶ä½ç½® rootDir æºä»£ç ç›®å½• &quot;./src&quot; æºä»£ç ç»„ç»‡ declaration ç”Ÿæˆç±»å‹æ–‡ä»¶ true TypeScript ç±»å‹æ”¯æŒ sourceMap ç”Ÿæˆæºç æ˜ å°„ true è°ƒè¯•æ”¯æŒ strict ä¸¥æ ¼æ¨¡å¼ true ç±»å‹å®‰å…¨æ£€æŸ¥ esModuleInterop ES æ¨¡å—äº’æ“ä½œ true å…¼å®¹æ€§ä¼˜åŒ– ç¬¬å…«æ­¥ï¼šæ„å»ºæœºåˆ¶è§£æTypeScript ç¼–è¯‘å™¨ (tsc) æ„å»ºè¿‡ç¨‹ æºä»£ç æ‰«æ: æ ¹æ® include æ¨¡å¼åŒ¹é… .ts æ–‡ä»¶ ç±»å‹æ£€æŸ¥: ä½¿ç”¨ strict é…ç½®è¿›è¡Œä¸¥æ ¼ç±»å‹éªŒè¯ ä»£ç è½¬æ¢: å°† TypeScript è½¬æ¢ä¸ºæŒ‡å®š target çš„ JavaScript æ–‡ä»¶è¾“å‡º: ä¿æŒç›®å½•ç»“æ„è¾“å‡ºåˆ° outDir ç›®å½• é™„åŠ æ–‡ä»¶: ç”Ÿæˆ .d.ts ç±»å‹å£°æ˜å’Œ .map æºç æ˜ å°„ tsup æ„å»ºè¿‡ç¨‹ï¼ˆåŸºäº esbuildï¼‰ å…¥å£åˆ†æ: è§£ææŒ‡å®šçš„å…¥å£æ–‡ä»¶åŠå…¶ä¾èµ– ä¾èµ–æ‰“åŒ…: ä½¿ç”¨ esbuild å°†ä¾èµ–æ‰“åŒ…åˆ°å•ä¸ªæ–‡ä»¶ä¸­ æ ¼å¼è½¬æ¢: æ ¹æ®é…ç½®ç”Ÿæˆ CommonJS å’Œ ES Modules æ ¼å¼ ç±»å‹ç”Ÿæˆ: ä½¿ç”¨ TypeScript ç¼–è¯‘å™¨ API ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶ æºç æ˜ å°„: ç”Ÿæˆæºç æ˜ å°„æ–‡ä»¶ç”¨äºè°ƒè¯• è¾“å‡ºä¼˜åŒ–: åº”ç”¨ Tree Shaking å’Œä»£ç å‹ç¼©ï¼ˆå¯é€‰ï¼‰ tsc æ–‡ä»¶æ˜ å°„å…³ç³»12345678src/ dist/â”œâ”€â”€ index.ts â”œâ”€â”€ index.jsâ”œâ”€â”€ utils/ â”œâ”€â”€ index.d.tsâ”‚ â””â”€â”€ helper.ts â”œâ”€â”€ index.js.mapâ””â”€â”€ types/ â””â”€â”€ utils/ â””â”€â”€ api.ts â””â”€â”€ helper.js â””â”€â”€ helper.d.ts â””â”€â”€ helper.js.map tsup æ–‡ä»¶æ˜ å°„å…³ç³»12345678src/ dist/â”œâ”€â”€ index.ts â”œâ”€â”€ index.js # CommonJS æ ¼å¼â”œâ”€â”€ utils/ â”œâ”€â”€ index.mjs # ES Modules æ ¼å¼â”‚ â””â”€â”€ helper.ts â”œâ”€â”€ index.d.ts # ç±»å‹å£°æ˜â””â”€â”€ types/ â”œâ”€â”€ index.d.mts # ES Modules ç±»å‹å£°æ˜ â””â”€â”€ api.ts â”œâ”€â”€ index.js.map # CommonJS æºç æ˜ å°„ â”œâ”€â”€ index.mjs.map # ES Modules æºç æ˜ å°„ â””â”€â”€ (ä¾èµ–è¢«æ‰“åŒ…åˆ°è¾“å‡ºæ–‡ä»¶ä¸­) tsup ä¸ tsc å¯¹æ¯” ç‰¹æ€§ tsc tsup æ„å»ºé€Ÿåº¦ è¾ƒæ…¢ æå¿«ï¼ˆåŸºäº esbuildï¼‰ é…ç½®å¤æ‚åº¦ ä¸­ç­‰ ç®€å•ï¼ˆé›¶é…ç½®ï¼‰ å¤šæ ¼å¼æ”¯æŒ éœ€è¦å¤šæ¬¡æ„å»º å•æ¬¡æ„å»ºæ”¯æŒå¤šæ ¼å¼ Tree Shaking æœ‰é™ ä¼˜ç§€ ä¾èµ–æ‰“åŒ… ä¸æ”¯æŒ æ”¯æŒ æºç æ˜ å°„ æ”¯æŒ æ”¯æŒ ç±»å‹ç”Ÿæˆ æ”¯æŒ æ”¯æŒ ä»£ç åˆ†å‰² ä¸æ”¯æŒ æ”¯æŒ tsup æ„å»ºæµç¨‹è¯¦è§£1. å…¥å£è§£æé˜¶æ®µ åˆ†æå…¥å£æ–‡ä»¶çš„å¯¼å…¥ä¾èµ– æ„å»ºå®Œæ•´çš„ä¾èµ–å›¾ æ’é™¤å¤–éƒ¨ä¾èµ–ï¼ˆé€šè¿‡ â€“external é…ç½®ï¼‰ 2. æ‰“åŒ…é˜¶æ®µ ä½¿ç”¨ esbuild è¿›è¡Œå¿«é€Ÿæ‰“åŒ… åº”ç”¨ Tree Shaking ç§»é™¤æœªä½¿ç”¨ä»£ç  å¤„ç†æ¨¡å—è§£æå’Œè·¯å¾„è½¬æ¢ 3. æ ¼å¼è½¬æ¢é˜¶æ®µ æ ¹æ® â€“format é…ç½®ç”Ÿæˆä¸åŒæ ¼å¼ CommonJS: ä½¿ç”¨ module.exports å’Œ require ES Modules: ä½¿ç”¨ import/export è¯­æ³• 4. ç±»å‹ç”Ÿæˆé˜¶æ®µ ä½¿ç”¨ tsc API ç”Ÿæˆ .d.ts æ–‡ä»¶ ä¸ºä¸åŒæ ¼å¼ç”Ÿæˆå¯¹åº”çš„ç±»å‹å£°æ˜ ä¿æŒç±»å‹å®šä¹‰çš„å‡†ç¡®æ€§ 5. è¾“å‡ºä¼˜åŒ–é˜¶æ®µ ç”Ÿæˆæºç æ˜ å°„æ–‡ä»¶ åº”ç”¨ä»£ç å‹ç¼©ï¼ˆâ€“minifyï¼‰ æ¸…ç†è¾“å‡ºç›®å½•ï¼ˆâ€“cleanï¼‰ ç¬¬ä¹æ­¥ï¼šå¸¸è§é—®é¢˜è§£å†³1. ç±»å‹å£°æ˜ä¸ç”Ÿæ•ˆ åŸå› : declaration é…ç½®ä¸º false æˆ– types å­—æ®µç¼ºå¤± è§£å†³: ç¡®ä¿ tsconfig.json ä¸­ declaration: trueï¼Œpackage.json ä¸­æ­£ç¡®é…ç½® types å­—æ®µ 2. æ¨¡å—å¯¼å…¥é”™è¯¯ åŸå› : æ¨¡å—å¯¼å‡ºé…ç½®ä¸æ­£ç¡® è§£å†³: åŒæ—¶æ”¯æŒ ES6 å’Œ CommonJS å¯¼å‡ºæ–¹å¼ 3. é™æ€èµ„æºè·¯å¾„é—®é¢˜ åŸå› : å‘å¸ƒåè·¯å¾„å˜åŒ– è§£å†³: ä½¿ç”¨ __dirname å’Œ path.join() æ„å»ºç»å¯¹è·¯å¾„ 4. tsup æ„å»ºå¸¸è§é—®é¢˜é—®é¢˜ï¼šCommonJS å¯¼å…¥æ—¶å‡ºç° â€œTypeError: X is not a constructorâ€ åŸå› : tsup å°† ES Modules é»˜è®¤å¯¼å‡ºè½¬æ¢ä¸º module.exports.default è§£å†³: ä½¿ç”¨å‘½åå¯¼å…¥ï¼šconst &#123; Knife4jDoc &#125; = require(&#39;package-name&#39;) ä½¿ç”¨é»˜è®¤å¯¼å…¥ï¼šconst Knife4jDoc = require(&#39;package-name&#39;).default åœ¨ package.json ä¸­é…ç½®æ­£ç¡®çš„ exports å­—æ®µ é—®é¢˜ï¼šæ„å»ºåæ–‡ä»¶è¿‡å¤§ åŸå› : ä¾èµ–è¢«æ‰“åŒ…åˆ°è¾“å‡ºæ–‡ä»¶ä¸­ è§£å†³: ä½¿ç”¨ --external æ’é™¤å¤–éƒ¨ä¾èµ– é…ç½® --splitting å¯ç”¨ä»£ç åˆ†å‰² ä½¿ç”¨ --minify å‹ç¼©ä»£ç  é—®é¢˜ï¼šç±»å‹å£°æ˜æ–‡ä»¶ä¸å®Œæ•´ åŸå› : tsup çš„ç±»å‹ç”Ÿæˆå¯èƒ½ä¸å®Œæ•´ è§£å†³: ç¡®ä¿æºä»£ç æœ‰å®Œæ•´çš„ç±»å‹å®šä¹‰ ä½¿ç”¨ --dts æ ‡å¿—ç”Ÿæˆç±»å‹å£°æ˜ æ£€æŸ¥ tsconfig.json ä¸­çš„ç±»å‹é…ç½® é—®é¢˜ï¼šES Modules å’Œ CommonJS å¯¼å…¥ä¸ä¸€è‡´ åŸå› : exports å­—æ®µé…ç½®ä¸æ­£ç¡® è§£å†³: åœ¨ package.json ä¸­é…ç½®å®Œæ•´çš„ exports å­—æ®µ ç¡®ä¿ import å’Œ require æŒ‡å‘æ­£ç¡®çš„æ–‡ä»¶ æµ‹è¯•ä¸¤ç§å¯¼å…¥æ–¹å¼æ˜¯å¦æ­£å¸¸å·¥ä½œ é—®é¢˜ï¼šæ„å»ºé€Ÿåº¦æ…¢ åŸå› : é…ç½®ä¸å½“æˆ–ä¾èµ–è¿‡å¤š è§£å†³: ä½¿ç”¨ --external æ’é™¤ä¸å¿…è¦çš„ä¾èµ– å¯ç”¨ --minify å‡å°‘æ–‡ä»¶å¤§å° è€ƒè™‘ä½¿ç”¨ç¼“å­˜æˆ–å¢é‡æ„å»º 5. tsup é…ç½®ä¼˜åŒ–å»ºè®®æ€§èƒ½ä¼˜åŒ–12345678# æ’é™¤å¤–éƒ¨ä¾èµ–ï¼Œå‡å°‘æ‰“åŒ…ä½“ç§¯npx tsup src/index.ts --external react,vue,lodash# å¯ç”¨ä»£ç åˆ†å‰²npx tsup src/index.ts --splitting# ç”Ÿäº§ç¯å¢ƒå‹ç¼©npx tsup src/index.ts --minify å…¼å®¹æ€§ä¼˜åŒ–12345678# æŒ‡å®šç›®æ ‡ç¯å¢ƒnpx tsup src/index.ts --target node16# é…ç½®å¹³å°npx tsup src/index.ts --platform node# å¯ç”¨ CommonJS äº’æ“ä½œnpx tsup src/index.ts --cjs-interop å¼€å‘ä½“éªŒä¼˜åŒ–12345678# ç›‘å¬æ¨¡å¼å¼€å‘npx tsup src/index.ts --watch# ç”Ÿæˆæºç æ˜ å°„ä¾¿äºè°ƒè¯•npx tsup src/index.ts --sourcemap# æ¸…ç†è¾“å‡ºç›®å½•npx tsup src/index.ts --clean ç¬¬åæ­¥ï¼šæœ€ä½³å®è·µæ€»ç»“å¼€å‘è§„èŒƒ ä»£ç ç»„ç»‡: ä½¿ç”¨ src/ ç›®å½•ç»„ç»‡æºä»£ç  ç±»å‹å®‰å…¨: å……åˆ†åˆ©ç”¨ TypeScript ç±»å‹ç³»ç»Ÿ æ–‡æ¡£å®Œå–„: æä¾›å®Œæ•´çš„ API æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹ æµ‹è¯•è¦†ç›–: æ·»åŠ å•å…ƒæµ‹è¯•ç¡®ä¿åŠŸèƒ½ç¨³å®š å‘å¸ƒè§„èŒƒ ç‰ˆæœ¬ç®¡ç†: ä¸¥æ ¼éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ æ–‡ä»¶æ§åˆ¶: ç²¾ç¡®æ§åˆ¶å‘å¸ƒå†…å®¹ï¼Œé¿å…æ³„éœ²æºä»£ç  è´¨é‡ä¿è¯: å‘å¸ƒå‰è¿›è¡Œå®Œæ•´æµ‹è¯•å’ŒéªŒè¯ æŒç»­é›†æˆ: è€ƒè™‘æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•å’Œå‘å¸ƒæµç¨‹ ç»´æŠ¤è§„èŒƒ æ›´æ–°æ—¥å¿—: ç»´æŠ¤ CHANGELOG.md è®°å½•å˜æ›´ é—®é¢˜è·Ÿè¸ª: ä½¿ç”¨ GitHub Issues ç®¡ç†é—®é¢˜ ç¤¾åŒºæ”¯æŒ: æä¾›æ¸…æ™°çš„è´¡çŒ®æŒ‡å— ç¬¬åä¸€æ­¥ï¼šå‘å¸ƒåˆ° npm å®˜ç½‘çš„å®Œæ•´æµç¨‹1. è´¦å·å‡†å¤‡é˜¶æ®µæ£€æŸ¥æ˜¯å¦å·²æœ‰ npm è´¦å·12345# æ£€æŸ¥å½“å‰ç™»å½•çŠ¶æ€npm whoami# å¦‚æœæ˜¾ç¤ºç”¨æˆ·åï¼Œè¯´æ˜å·²ç™»å½•# å¦‚æœæ˜¾ç¤ºé”™è¯¯ &quot;Not logged in&quot;ï¼Œè¯´æ˜éœ€è¦ç™»å½• æ³¨å†Œ npm è´¦å·ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰ è®¿é—®å®˜ç½‘: https://www.npmjs.com/signup å¡«å†™ä¿¡æ¯: ç”¨æˆ·åï¼ˆusernameï¼‰: å…¨å±€å”¯ä¸€ï¼Œå°†ä½œä¸ºåŒ…åå‰ç¼€ é‚®ç®±åœ°å€: ç”¨äºéªŒè¯å’Œé€šçŸ¥ å¯†ç : è‡³å°‘8ä¸ªå­—ç¬¦ é‚®ç®±éªŒè¯: æ£€æŸ¥é‚®ç®±å¹¶ç‚¹å‡»éªŒè¯é“¾æ¥ åŒé‡éªŒè¯ï¼ˆæ¨èï¼‰: å¯ç”¨ 2FA å¢å¼ºå®‰å…¨æ€§ è´¦å·éªŒè¯å‡†å¤‡ ç¡®ä¿é‚®ç®±å¯ä»¥æ­£å¸¸æ¥æ”¶é‚®ä»¶ å‡†å¤‡æ‰‹æœºç”¨äº 2FAï¼ˆå¦‚æœå¯ç”¨ï¼‰ è®°å½•ç”¨æˆ·åå’Œå¯†ç åˆ°å®‰å…¨ä½ç½® 2. æœ¬åœ°ç¯å¢ƒé…ç½®æ£€æŸ¥ npm ç‰ˆæœ¬12345# ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ npmnpm -v# å¦‚æœéœ€è¦æ›´æ–°npm install -g npm@latest é…ç½® npm é•œåƒï¼ˆå¦‚æœéœ€è¦ï¼‰1234567891011# æ£€æŸ¥å½“å‰é•œåƒnpm config get registry# å¦‚æœéœ€è¦åˆ‡æ¢å›å®˜æ–¹é•œåƒnpm config set registry https://registry.npmjs.org/# é…ç½®æ·˜å®é•œåƒï¼ˆä»…ç”¨äºå®‰è£…ï¼Œå‘å¸ƒæ—¶å¿…é¡»ç”¨å®˜æ–¹ï¼‰npm config set registry https://registry.npmmirror.com/# å‘å¸ƒå‰åˆ‡æ¢å›å®˜æ–¹é•œåƒnpm config set registry https://registry.npmjs.org/ å¯ä»¥ä½¿ç”¨nrmåˆ‡æ¢npmé•œåƒ 3. ç™»å½• npmå‘½ä»¤è¡Œç™»å½•12345678910# æ‰§è¡Œç™»å½•å‘½ä»¤npm login# æŒ‰æç¤ºè¾“å…¥ä¿¡æ¯Username: your-usernamePassword: ********Email: your-email@example.com# å¦‚æœå¯ç”¨äº† 2FAï¼Œéœ€è¦è¾“å…¥ä¸€æ¬¡æ€§å¯†ç Enter one-time password: 123456 ç™»å½•éªŒè¯123456# éªŒè¯ç™»å½•çŠ¶æ€npm whoami# åº”è¯¥æ˜¾ç¤ºä½ çš„ç”¨æˆ·å# æŸ¥çœ‹å½“å‰ç”¨æˆ·ä¿¡æ¯npm profile get ç™»å½•é—®é¢˜æ’æŸ¥ è®¤è¯å¤±è´¥: æ£€æŸ¥ç”¨æˆ·å/å¯†ç ï¼Œæˆ–é‡ç½®å¯†ç  ç½‘ç»œé—®é¢˜: æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½® 2FA é—®é¢˜: ç¡®ä¿æ‰‹æœºæ—¶é—´åŒæ­¥ï¼Œé‡æ–°ç”ŸæˆéªŒè¯ç  4. å‘å¸ƒå‰æœ€ç»ˆæ£€æŸ¥åŒ…åæ£€æŸ¥12345# æ£€æŸ¥åŒ…åæ˜¯å¦å¯ç”¨ï¼Œå¦‚æœå†²çªä¼šè®©ä½ ä½¿ç”¨ä½ çš„ç”¨æˆ·åä½œä¸ºå‰ç¼€npm search your-package-name# æˆ–è€…ç›´æ¥å°è¯•å‘å¸ƒï¼Œå¦‚æœå†²çªä¼šæç¤ºnpm publish --dry-run ç‰ˆæœ¬å·æ£€æŸ¥1234567# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬npm version# å¦‚æœéœ€è¦æ›´æ–°ç‰ˆæœ¬npm version patch # ä¿®å¤ bugï¼ˆ1.0.0 â†’ 1.0.1ï¼‰npm version minor # æ–°å¢åŠŸèƒ½ï¼ˆ1.0.0 â†’ 1.1.0ï¼‰npm version major # ä¸å…¼å®¹å˜æ›´ï¼ˆ1.0.0 â†’ 2.0.0ï¼‰ æ–‡ä»¶å†…å®¹æ£€æŸ¥12345678# ç”Ÿæˆå‘å¸ƒåŒ…é¢„è§ˆnpm pack# æŸ¥çœ‹åŒ…å†…å®¹tar -tzf your-package-1.0.0.tgz# åº”è¯¥åªåŒ…å« dist/, static/, README.md, LICENSE ç­‰å¿…è¦æ–‡ä»¶# ä¸åº”è¯¥åŒ…å« src/, test/, é…ç½®æ–‡ä»¶ç­‰ 5. æ­£å¼å‘å¸ƒæµç¨‹ç¬¬ä¸€æ¬¡å‘å¸ƒ12345# æ‰§è¡Œå‘å¸ƒå‘½ä»¤npm publish# è¾“å‡ºç¤ºä¾‹+ your-package@1.0.0 å‘å¸ƒåéªŒè¯1234567891011# æŸ¥çœ‹åŒ…ä¿¡æ¯npm info your-package# åˆ›å»ºæµ‹è¯•é¡¹ç›®éªŒè¯mkdir test-packagecd test-packagenpm init -ynpm install your-package# æµ‹è¯•å¯¼å…¥node -e &quot;console.log(require(&#x27;your-package&#x27;))&quot; å‘å¸ƒåˆ°ç‰¹å®šæ ‡ç­¾12345678# å‘å¸ƒåˆ° beta æ ‡ç­¾npm publish --tag beta# å®‰è£…ç‰¹å®šæ ‡ç­¾npm install your-package@beta# å°† beta æ ‡ç­¾è®¾ç½®ä¸ºæœ€æ–°npm dist-tag add your-package@1.0.0 latest 6. å‘å¸ƒåç®¡ç†ç‰ˆæœ¬ç®¡ç†1234567891011# æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬npm view your-package versions# æŸ¥çœ‹æ ‡ç­¾npm dist-tag ls your-package# åˆ é™¤ç‰¹å®šç‰ˆæœ¬ï¼ˆ24å°æ—¶å†…ï¼‰npm unpublish your-package@1.0.0# åˆ é™¤æ•´ä¸ªåŒ…ï¼ˆ72å°æ—¶å†…ï¼Œéœ€è¦æ”¯æŒï¼‰npm unpublish your-package --force åŒ…ä¿¡æ¯æ›´æ–°123456789# æ›´æ–°åŒ…æè¿°npm pkg set description=&quot;New description&quot;# æ›´æ–°å…³é”®è¯npm pkg set keywords=&#x27;[&quot;new&quot;, &quot;keywords&quot;]&#x27;# æ›´æ–°ä»“åº“ä¿¡æ¯npm pkg set repository.type=gitnpm pkg set repository.url=https://github.com/your/repo ç»´æŠ¤æ›´æ–°123456# å‘å¸ƒæ–°ç‰ˆæœ¬npm version patch &amp;&amp; npm publish# æˆ–è€…æ‰‹åŠ¨æ›´æ–°ç‰ˆæœ¬å·åå‘å¸ƒ# ä¿®æ”¹ package.json ä¸­çš„ versionï¼Œç„¶ånpm publish 7. å¸¸è§å‘å¸ƒé—®é¢˜è§£å†³åŒ…åå†²çª1234# é”™è¯¯ä¿¡æ¯ï¼šPackage name already exists# è§£å†³æ–¹æ¡ˆï¼šä¿®æ”¹åŒ…åæˆ–ä½¿ç”¨ä½œç”¨åŸŸåŒ…npm init --scope=your-username# åŒ…åå˜ä¸ºï¼š@your-username/package-name æƒé™é—®é¢˜1234# é”™è¯¯ä¿¡æ¯ï¼šE403# è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥ç™»å½•çŠ¶æ€å’ŒåŒ…æƒé™npm whoaminpm owner ls your-package ç½‘ç»œè¶…æ—¶123# é”™è¯¯ä¿¡æ¯ï¼šETIMEDOUT# è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥ç½‘ç»œï¼Œé‡è¯•å‘å¸ƒnpm publish --retry 3 2FA è¦æ±‚123# é”™è¯¯ä¿¡æ¯ï¼šOTP required# è§£å†³æ–¹æ¡ˆï¼šå¯ç”¨ 2FA æˆ–ä½¿ç”¨ä¸€æ¬¡æ€§å¯†ç npm profile enable-2fa auth-only 8. æœ€ä½³å®è·µå»ºè®®å®‰å…¨æ€§ å¯ç”¨ 2FA ä¿æŠ¤è´¦å· ä½¿ç”¨å¼ºå¯†ç å¹¶å®šæœŸæ›´æ¢ ä¸è¦åœ¨å…¬å…±ä»£ç ä¸­æ³„éœ²ä»¤ç‰Œ ç‰ˆæœ¬ç®¡ç† ä¸¥æ ¼éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ ä¸ºé‡å¤§å˜æ›´æä¾›è¿ç§»æŒ‡å— ç»´æŠ¤è¯¦ç»†çš„æ›´æ–°æ—¥å¿— è´¨é‡æ§åˆ¶ å‘å¸ƒå‰è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ ä½¿ç”¨ CI/CD è‡ªåŠ¨åŒ–æµ‹è¯•å’Œå‘å¸ƒ æä¾›æ¸…æ™°çš„æ–‡æ¡£å’Œç¤ºä¾‹ ç¤¾åŒºç»´æŠ¤ åŠæ—¶å›å¤ issue å’Œ PR å®šæœŸæ›´æ–°ä¾èµ–é¡¹ è€ƒè™‘æ·»åŠ è´¡çŒ®æŒ‡å— å®Œæ•´æµç¨‹æ€»ç»“é€šè¿‡ä»¥ä¸Šæ ‡å‡†åŒ–æµç¨‹ï¼Œæ‚¨å¯ä»¥ï¼š ä»é›¶å¼€å§‹åˆ›å»ºä¸“ä¸šçš„ npm åŒ… ç¡®ä¿ä»£ç è´¨é‡å’Œç±»å‹å®‰å…¨ æ”¯æŒå¤šç§ä½¿ç”¨åœºæ™¯å’Œæ¡†æ¶ è§„èŒƒå‘å¸ƒå’Œç»´æŠ¤æµç¨‹ æä¾›è‰¯å¥½çš„å¼€å‘è€…ä½“éªŒ è¿™ä¸ªæµç¨‹é€‚ç”¨äºå¤§å¤šæ•° Node.js åº“çš„å¼€å‘ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œè°ƒæ•´å’Œæ‰©å±•ã€‚"},{"title":"ä¸€æ–‡ææ‡‚SSRã€SSGã€CSR","path":"2025/10/11/ä¸€æ–‡ææ‡‚SSRã€SSGã€CSR/","text":"ä¸€æ–‡ææ‡‚SSRã€SSGã€CSR å…ˆçœ‹åç§°æ¥åˆæ­¥äº†è§£ï¼šSSRï¼ˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼‰ã€SSGï¼ˆé™æ€ç«™ç‚¹ç”Ÿæˆï¼‰å’ŒCSRï¼ˆå®¢æˆ·ç«¯æ¸²æŸ“ï¼‰ CSRï¼ˆå®¢æˆ·ç«¯æ¸²æŸ“ï¼‰ ï¼ˆCSRï¼‰æ˜¯ä¸€ç§å°†ç½‘é¡µæœ€åˆä½œä¸ºç©º HTML shell ä¼ é€’ç»™æµè§ˆå™¨çš„æŠ€æœ¯ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯ JavaScript åŠ¨æ€è·å–æ•°æ®å¹¶åœ¨æµè§ˆå™¨ä¸­å‘ˆç°é¡µé¢ã€‚ Vueã€reactè¿™äº›SPAéƒ½æ˜¯å±äºCSRï¼Œç‰¹ç‚¹ï¼šåˆå§‹ HTML å‡ ä¹ä¸ºç©ºï¼Œç”± JS åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“å†…å®¹ ä¼˜ç‚¹ï¼š å“åº”é€Ÿåº¦å¿«ï¼šä¸€æ—¦HTMLæ–‡ä»¶åŠ è½½å®Œæˆï¼Œæµè§ˆå™¨å°±å¯ä»¥å¼€å§‹æ¸²æŸ“é¡µé¢ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨è¿”å›å®Œæ•´çš„æ¸²æŸ“ç»“æœã€‚ åŠ¨æ€æ€§å¼ºï¼šç”±äºé¡µé¢æ¸²æŸ“åœ¨å®¢æˆ·ç«¯è¿›è¡Œï¼Œå› æ­¤å¯ä»¥æ–¹ä¾¿åœ°å®ç°å„ç§åŠ¨æ€äº¤äº’æ•ˆæœã€‚ å‰ç«¯éƒ¨ç½²ç®€å•ï¼šåªéœ€è¦ä¸€ä¸ªé™æ€æœåŠ¡å³å¯éƒ¨ç½²å‰ç«¯ä»£ç ï¼Œé™ä½äº†éƒ¨ç½²æˆæœ¬ã€‚ ç¼ºç‚¹ï¼š é¦–å±åŠ è½½æ—¶é—´é•¿ï¼šç”±äºéœ€è¦åŠ è½½æ•´ä¸ªJavaScriptåŒ…ï¼Œå¯èƒ½å¯¼è‡´é¦–å±åŠ è½½æ—¶é—´è¾ƒé•¿ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤æ‚çš„å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ã€‚ ä¸åˆ©äºSEOï¼šæœç´¢å¼•æ“çˆ¬è™«å¯èƒ½æ— æ³•å¾ˆå¥½åœ°è§£æç”±JavaScriptåŠ¨æ€ç”Ÿæˆçš„é¡µé¢å†…å®¹ï¼Œå¯¼è‡´SEOæ•ˆæœè¾ƒå·®ã€‚ ç™½å±æ—¶é—´ï¼šåœ¨JavaScriptä»£ç åŠ è½½å’Œæ‰§è¡ŒæœŸé—´ï¼Œç”¨æˆ·å¯èƒ½ä¼šçœ‹åˆ°ç©ºç™½çš„é¡µé¢ï¼Œå³æ‰€è°“çš„â€œç™½å±æ—¶é—´â€ã€‚ SSRï¼ˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼‰ ï¼ˆSSRï¼‰æ˜¯ä¸€ç§åœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“ç½‘é¡µï¼Œç„¶åå°†å®Œå…¨æ¸²æŸ“çš„ HTML é¡µé¢å‘é€åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨çš„æŠ€æœ¯ã€‚ Next.jsã€Nuxt.jsè¿™ç§éƒ½æ˜¯SSRï¼Œç‰¹ç‚¹ï¼šåŠ¨æ€ç”Ÿæˆ HTMLï¼ˆæ¯æ¬¡è¯·æ±‚éƒ½ç”Ÿæˆï¼‰ ä¼˜ç‚¹ï¼š é¦–å±åŠ è½½å¿«ï¼ˆHTML ç›´æ¥è¿”å›ï¼‰ SEO å‹å¥½ï¼ˆæœç´¢å¼•æ“å¯ä»¥ç›´æ¥æŠ“å–å†…å®¹ï¼‰ å¯åŠ¨æ€ç”Ÿæˆå†…å®¹ï¼ˆæ¯”å¦‚æ ¹æ®è¯·æ±‚å‚æ•°æˆ–ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼‰ ç¼ºç‚¹ï¼š æœåŠ¡å™¨è´Ÿè½½å¤§ï¼ˆæ¯æ¬¡è¯·æ±‚éƒ½è¦æ¸²æŸ“é¡µé¢ï¼‰ å“åº”æ—¶é—´å—é™äºç½‘ç»œä¸æœåŠ¡å™¨æ€§èƒ½ å®ç°ä¸éƒ¨ç½²è¾ƒå¤æ‚ï¼ˆéœ€è¦è¿è¡Œ Node.js æœåŠ¡å™¨ï¼‰ SSGï¼ˆé™æ€ç«™ç‚¹ç”Ÿæˆï¼‰ ï¼ˆSSGï¼‰æ˜¯ä¸€ç§åœ¨æ„å»ºæ—¶ç”Ÿæˆç½‘é¡µå¹¶ç”¨ä½œçº¯ HTML æ–‡ä»¶çš„æŠ€æœ¯ã€‚ Hugoã€Gatsbyã€hexoç­‰è¿™äº›éƒ½æ˜¯SSGï¼Œç‰¹ç‚¹ï¼šæå‰ç”Ÿæˆå¥½æ‰€æœ‰ HTML æ–‡ä»¶ ä¼˜ç‚¹ï¼š æ€§èƒ½æå¥½ï¼ˆCDN é™æ€æ–‡ä»¶åŠ è½½ï¼‰ å¯ç¦»çº¿éƒ¨ç½²ï¼Œæ— éœ€æœåŠ¡å™¨é€»è¾‘ å®‰å…¨æ€§é«˜ï¼ˆæ²¡æœ‰åç«¯æ‰§è¡Œç¯å¢ƒï¼‰ ç¼ºç‚¹ï¼š æ— æ³•å®æ—¶æ›´æ–°æ•°æ®ï¼ˆéœ€è¦é‡æ–°æ„å»ºï¼‰ ä¸é€‚åˆé¢‘ç¹å˜åŒ–çš„å†…å®¹ï¼ˆå¦‚ç¤¾äº¤åŠ¨æ€ã€ä¸ªæ€§åŒ–é¡µé¢ï¼‰"},{"title":"JSæ€§èƒ½ä¼˜åŒ–","path":"2025/10/11/JSæ€§èƒ½ä¼˜åŒ–/","text":"JSæ€§èƒ½ä¼˜åŒ– å½“éœ€è¦çš„æ—¶å€™åœ¨åšä¼˜åŒ–ã€è€ƒè™‘å¯ç»´æŠ¤æ€§ã€‚ ä¸€ã€æ€§èƒ½ä¼˜åŒ–1. å‡å°‘ä¸å¿…è¦çš„è®¡ç®— ä½¿ç”¨ç¼“å­˜ï¼ˆmemoizationï¼‰ï¼šå¯¹è®¡ç®—ç»“æœè¿›è¡Œç¼“å­˜ï¼Œå¦‚ Vue ä¸­çš„è®¡ç®—å±æ€§ã€‚ é˜²æŠ–ä¸èŠ‚æµï¼ˆdebounce/throttleï¼‰ï¼šå‡å°‘é«˜é¢‘äº‹ä»¶ï¼ˆå¦‚ scrollã€resizeã€inputï¼‰çš„æ‰§è¡Œé¢‘ç‡ã€‚ **å»¶è¿ŸåŠ è½½ (lazy loading)**ï¼šæŒ‰éœ€åŠ è½½ç»„ä»¶ã€æ¨¡å—æˆ–èµ„æºã€‚ 2. æ•°æ®ç»“æ„ä¸ç®—æ³• åˆç†ä½¿ç”¨ Map / Set æ›¿ä»£æ™®é€šå¯¹è±¡å’Œæ•°ç»„æŸ¥æ‰¾ã€‚ å°½é‡é¿å… O(nÂ²) æ“ä½œï¼ˆä¾‹å¦‚å¾ªç¯åµŒå¥—ï¼‰ã€‚ å¯¹åˆ—è¡¨æ“ä½œä½¿ç”¨ä¸å¯å˜æ›´æ–°çš„åŒæ—¶ï¼Œæ³¨æ„é¿å…ä¸å¿…è¦çš„æ·±æ‹·è´ã€‚ ä¾‹å¦‚ï¼šå¤§é‡çš„æ•°æ®éœ€è¦åŒ¹é…åˆ°å¯¹äºçš„å€¼ï¼Œå¯ä»¥è€ƒè™‘å°†æ•°ç»„æ ¼å¼æ”¹æˆ Map æˆ– å¯¹è±¡ çš„å½¢å¼ï¼Œé¿å…å¾ªç¯æŸ¥æ‰¾ 3. å¼‚æ­¥ä¸å¹¶å‘ä¼˜åŒ– ä½¿ç”¨ Promise.allSettled() / Promise.all() åŒæ­¥å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚ å¯¹ I/O å¯†é›†å‹ä»»åŠ¡ä½¿ç”¨ Worker Threads / Web Workers åˆ†ç¦»çº¿ç¨‹ã€‚ ä¾‹å¦‚ï¼šå¤§æ–‡ä»¶åˆ‡ç‰‡ä¸Šä¼ ä½¿ç”¨ Web Workers è®¡ç®—hash äºŒã€æ„å»ºä¼˜åŒ–1. Tree Shaking ç¡®ä¿ä»£ç æ˜¯ ESM æ¨¡å—æ ¼å¼ï¼ˆimport/exportï¼‰ï¼Œè®©æ„å»ºå·¥å…·ï¼ˆViteã€Webpackã€Rollupï¼‰èƒ½è‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ã€‚ 2. ä»£ç åˆ†å‰² (Code Splitting) å°†å¤§åŒ…æ‹†æˆå¤šä¸ªæŒ‰éœ€åŠ è½½çš„ chunkã€‚ React ä¸­å¯ç”¨ React.lazy() å’Œ Suspenseã€‚ 3. å‹ç¼©ä¸æ··æ·† ä½¿ç”¨ Terser / esbuild / SWC å‹ç¼©ã€‚ CSS ä½¿ç”¨ PostCSSã€cssnano å‹ç¼©ã€‚ 4. æ„å»ºå·¥å…·ä¼˜åŒ– ä½¿ç”¨ esbuild / SWC / Vite æ›¿ä»£ä¼ ç»Ÿ Babel+Webpackï¼Œæ„å»ºé€Ÿåº¦å¯æå‡ 5~10 å€ã€‚ ç¼“å­˜ç¼–è¯‘ç»“æœï¼ˆWebpack 5 çš„ persistent cacheã€Vite çš„ cacheï¼‰ã€‚ ä¸‰ã€ä»£ç è´¨é‡ä¸ç±»å‹ä¼˜åŒ–1. TypeScript ä¼˜åŒ– å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼ˆ&quot;strict&quot;: trueï¼‰ã€‚ å¯ç”¨ &quot;noUnusedLocals&quot;, &quot;noUnusedParameters&quot;, &quot;noImplicitAny&quot;, &quot;strictNullChecks&quot;ã€‚ åœ¨ç±»å‹å¤æ‚æ—¶ï¼Œä½¿ç”¨ ç±»å‹æ¨å¯¼ã€æ³›å‹çº¦æŸï¼Œå‡å°‘ any æ»¥ç”¨ã€‚ 2. Lint &amp; æ ¼å¼åŒ– ESLint + Prettier ä¿æŒä¸€è‡´çš„ç¼–ç è§„èŒƒã€‚ ä½¿ç”¨ eslint-plugin-import ä¼˜åŒ– import é¡ºåºä¸ä¾èµ–ã€‚ 3. é‡æ„ä¸æ¨¡å—åŒ– æ‹†åˆ†å¤§å‹æ¨¡å—ï¼Œä¿æŒæ¯ä¸ªæ–‡ä»¶å•ä¸€èŒè´£ã€‚ ä½¿ç”¨ barrel æ–‡ä»¶ï¼ˆindex.tsï¼‰ç»Ÿä¸€å¯¼å‡ºæ¨¡å—ã€‚ å››ã€è¿è¡Œæ—¶ä¸å†…å­˜ä¼˜åŒ–1. å‡å°‘å¯¹è±¡é¢‘ç¹åˆ›å»ºä¸é”€æ¯ ä½¿ç”¨å¯¹è±¡æ± ã€é‡ç”¨ä¸´æ—¶å˜é‡ã€‚ é¿å…é¢‘ç¹æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æˆ–æ•°ç»„ joinã€‚ 2. å†…å­˜ç®¡ç† åŠæ—¶é‡Šæ”¾ä¸å†ä½¿ç”¨çš„å¼•ç”¨ï¼ˆå¦‚ DOM èŠ‚ç‚¹ã€ç¼“å­˜ï¼‰ã€‚ Node.js ç¯å¢ƒä¸‹ï¼Œç›‘æ§å†…å­˜æ³„æ¼ï¼ˆå¦‚ç”¨ clinic.js, node --inspectï¼‰ã€‚ 3. ç½‘ç»œä¼˜åŒ– å¯ç”¨ HTTP/2 æˆ– HTTP/3ã€‚ ä½¿ç”¨ gzip / brotli å‹ç¼©ã€‚ åˆ©ç”¨ CDN ä¸ç¼“å­˜å¤´ï¼ˆCache-Controlã€ETagï¼‰ã€‚ äº”ã€æ¶æ„ä¸è®¾è®¡ä¼˜åŒ–1. æ¨¡å—åŒ–ä¸è§£è€¦ éµå¾ª SOLID åŸåˆ™ã€‚ ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰é™ä½è€¦åˆã€‚ æå‰å®šä¹‰ domain å±‚ã€service å±‚ä¸ UI å±‚çš„èŒè´£ã€‚ 2. çŠ¶æ€ç®¡ç†ä¼˜åŒ– å¯¹å…¨å±€çŠ¶æ€ä½¿ç”¨å¦‚ Zustandã€Recoilã€Redux Toolkit ç­‰é«˜æ€§èƒ½çŠ¶æ€åº“ã€‚ é¿å…å…¨é‡æ¸²æŸ“ï¼šReact ä¸­ä½¿ç”¨ memoã€useCallbackã€‚ 3. SSR / SSG ä¼˜åŒ– å¯¹ SEO å’Œé¦–å±æ€§èƒ½å…³é”®çš„é¡¹ç›®é‡‡ç”¨ SSRï¼ˆNext.js / Nuxtï¼‰ã€‚ ä½¿ç”¨ getStaticPropsã€ISRï¼ˆå¢é‡é™æ€ç”Ÿæˆï¼‰ä¼˜åŒ–é¦–å±ã€‚ å…­ã€è°ƒè¯•ä¸ç›‘æ§ä¼˜åŒ– ä½¿ç”¨ source map è¾…åŠ©è°ƒè¯•ï¼ˆç”Ÿäº§ç¯å¢ƒå¯ä¸Šä¼ è‡³ Sentryï¼‰ã€‚ é›†æˆæ€§èƒ½ç›‘æ§å·¥å…·ï¼ˆå¦‚ Lighthouseã€Web Vitalsã€Sentryã€Datadogï¼‰ã€‚ Node.js ç«¯å¯ç”¨ clinic.js æˆ– 0x åˆ†ææ€§èƒ½ç“¶é¢ˆã€‚ ä¸ƒã€JSåŠ¨ç”»ä¼˜åŒ– é¿å…å¤§é‡jsåŠ¨ç”» å°½é‡ä½¿ç”¨cssåŠ¨ç”» å°½é‡ä½¿ç”¨canvasåŠ¨ç”» åˆç†ä½¿ç”¨requestAnimationFrameåŠ¨ç”»ä»£æ›¿setTimeoutã€setInterval requestAnimationFrameç¡®ä¿åœ¨æ­£ç¡®çš„æ—¶å€™è¿›è¡Œæ¸²æŸ“ é¡¹ç›®å¼€å‘ä¸­æœ€å¸¸è§å¦‚ä¸‹ é˜²æŠ–ã€èŠ‚æµ ç¼“å­˜ å¼‚æ­¥ä¼˜åŒ– æŒ‰éœ€åŠ è½½ ç§»é™¤å†—ä½™ä¾èµ–ã€ä»£ç åˆ†å‰² å‡å°‘å†…å­˜æ³„æ¼ã€ä¼˜åŒ–å¾ªç¯ ä¸æ˜¯è‡ªå·±å¼€å‘çš„å†…å®¹èƒ½è·‘ä¸å»ºè®®åŠ¨ï¼Œå¯¹äºè‡ªå·±é›¶å¥½å¤„ï¼Œå®¹æ˜“èƒŒé”…ã€‚éæ”¹ä¸å¯è‡ªæ±‚å¤šç¦ï¼"},{"title":"HTMLæ€§èƒ½ä¼˜åŒ–","path":"2025/10/11/HTMLæ€§èƒ½ä¼˜åŒ–/","text":"HTMLæ€§èƒ½ä¼˜åŒ–ç²¾è®²ä»£ç  å‡å°‘åµŒå¥— å‡å°‘èŠ‚ç‚¹ å‡å°‘æ— è¯­ä¹‰ä»£ç  åè®®ä¸€è‡´å¯ä»¥åˆ é™¤åè®®å¤´ åˆ é™¤ç©ºæ ¼ã€æ¢è¡Œã€ç¼©è¿›ã€æ²¡æ„ä¹‰çš„æ³¨é‡Š çœç•¥å†—ä½™çš„æ ‡ç­¾/å±æ€§ ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„URL æ”¾çš„ä½ç½® cssæ–‡ä»¶æ”¾åœ¨å¤´éƒ¨ é˜²æ­¢å µå¡æ¸²æŸ“å’Œjsçš„æ‰§è¡Œï¼ˆé˜²æ­¢ç™½å±ç°è±¡ï¼‰ jsæ–‡ä»¶æ”¾åœ¨åº•éƒ¨ é˜²æ­¢jsåŠ è½½ã€è§£æã€æ‰§è¡Œå¯¹é˜»å¡é¡µé¢åç»­å…ƒç´ çš„æ¸²æŸ“ ä¼˜åŒ–ä½“éªŒ è®¾ç½®favicon.ico ç”¨äºä½“ç°ç½‘ç«™çš„å“ç‰Œ å¢åŠ é¦–å±å¿…è¦çš„jså’Œcss ç›¸å¯¹å‡å°‘ç”¨æˆ·é¦–å±çš„ç­‰å¾…æ—¶é—´ å‹ç¼©ä½¿ç”¨å·¥å…·å‹ç¼©ä»£ç ï¼Œé…åˆæœåŠ¡å™¨ä½¿ç”¨Gzip é¡¹ç›®å¼€å‘é€šå¸¸æ²¡æ€ä¹ˆæƒ³è¿‡htmlä¼˜åŒ–ï¼Ÿ é€šå¸¸é¡¹ç›®å¼€å‘ä¸­ä¸ä¼šè¿™ä¹ˆè€ƒè™‘HTMLï¼Œæ¡†æ¶å’Œæ‰“åŒ…å·¥å…·ä»¥åŠå¤„ç†äº†ï¼ˆéƒ¨åˆ†éœ€è¦å•ç‹¬é…ç½®ï¼‰ï¼Œè€Œä¸”HTMLå¯ä¼˜åŒ–çš„å†…å®¹ç¡®å®å¾ˆå°‘ å¯¹äºreactã€vueçš„HTMLå†…å®¹ä¹Ÿå‡ ä¹æ²¡æœ‰ï¼ˆåªæœ‰åŸºç¡€çš„ç©ºå£³ï¼‰ è‡ªåŠ¨å‹ç¼© index.htmlé›¶é…ç½®ä¸‹ï¼š Vite å†…ç½® html-minify-terserï¼Œé»˜è®¤æŠŠç©ºæ ¼ã€æ³¨é‡Šã€å†—ä½™å±æ€§ã€å¸ƒå°”å±æ€§é•¿å†™æ³•ç­‰å…¨éƒ¨å‹æ‰ã€‚ Webpack ç³»åˆ—ï¼ˆvue-cli / CRAï¼‰é€šè¿‡ HtmlWebpackPlugin é»˜è®¤å¼€å¯åŒæ¬¾å‹ç¼©ï¼Œäº§ç‰©ä½“ç§¯é€šå¸¸ **âˆ’10 % ~ âˆ’15 %**ã€‚ è‡ªåŠ¨æ³¨å…¥å…³é”® &lt;meta&gt; ä¸ &lt;link&gt;æ„å»ºæ—¶ä¼šå¾€ index.html æ’å…¥ï¼š &lt;meta charset=&quot;utf-8&quot;&gt; æ”¾åœ¨ **é¦–è¡Œ &lt;head&gt;**ï¼ˆé¿å…è§£æå›é€€ï¼‰ã€‚ &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;ï¼ˆé˜²æ­¢ç§»åŠ¨ç«¯ç¼©æ”¾ï¼‰ã€‚ &lt;link rel=&quot;icon&quot; href=&quot;...&quot;&gt; ä¸ &lt;link rel=&quot;modulepreload&quot; href=&quot;xxx.js&quot;&gt;ï¼ˆé¢„åŠ è½½å…¥å£æ¨¡å—ï¼‰ã€‚è¿™äº›æ ‡ç­¾æ‰‹å†™å®¹æ˜“æ¼ï¼Œé›¶é…ç½®æ¨¡æ¿ä¿è¯é¡ºåºä¸ä½ç½®æœ€ä¼˜ã€‚ èµ„æºå“ˆå¸Œä¸å†…è”ç­–ç•¥ æ‰€æœ‰å¤–é“¾ JS/CSS æ–‡ä»¶åè‡ªåŠ¨å¸¦ ?v=[hash]ï¼ŒHTML é‡ŒåŒæ­¥æ›´æ–°å¼•ç”¨ï¼›ç”¨æˆ·åˆ·æ–°å³å¯è·æœ€æ–°æ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨æ¸…ç¼“å­˜ã€‚ ä½“ç§¯å°äº 4 kB çš„å°æ–‡ä»¶ï¼ˆå¦‚ runtime.jsï¼‰ä¼šè¢«ç›´æ¥å†…è”åˆ° HTMLï¼Œå‡å°‘ä¸€æ¬¡ HTTP è¯·æ±‚ï¼›è¯¥é˜ˆå€¼å¯åœ¨æ’ä»¶é‡Œè°ƒï¼Œä½†é›¶é…ç½®å·²ç»å¯ç”¨"},{"title":"Cssæ€§èƒ½ä¼˜åŒ–","path":"2025/10/10/Cssæ€§èƒ½ä¼˜åŒ–/","text":"Cssæ€§èƒ½ä¼˜åŒ– å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸­ï¼ŒCSS çš„ä¼˜åŒ–æ˜¯éå¸¸å…³é”®çš„ä¸€ç¯ï¼Œå› ä¸º CSS ä¼šé˜»å¡æ¸²æŸ“ï¼Œå½±å“é¦–å±åŠ è½½æ—¶é—´ã€å¸§ç‡ï¼ˆFPSï¼‰å’Œäº¤äº’å“åº”ã€‚ ä¸€ã€åŠ è½½é˜¶æ®µä¼˜åŒ–ï¼ˆå‡å°‘é˜»å¡ã€åŠ é€Ÿé¦–å±ï¼‰ æµè§ˆå™¨åœ¨æ„å»ºæ¸²æŸ“æ ‘å‰ï¼Œå¿…é¡»ç­‰å¾…æ‰€æœ‰ CSS ä¸‹è½½å¹¶è§£æå®Œæˆï¼ˆCSS æ˜¯æ¸²æŸ“é˜»å¡èµ„æºï¼‰ã€‚ æ¶ˆé™¤æ¸²æŸ“é˜»å¡çš„ CSS123&lt;!-- éå…³é”®æ ·å¼å¼‚æ­¥ --&gt;&lt;link rel=&quot;preload&quot; href=&quot;non-critical.css&quot; as=&quot;style&quot; onload=&quot;this.onload=null;this.rel=&#x27;stylesheet&#x27;&quot;&gt;&lt;noscript&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;non-critical.css&quot;&gt;&lt;/noscript&gt; rel=&quot;preload&quot; å‘Šè¯‰æµè§ˆå™¨ï¼šâ€œè¯·å…ˆä»¥æœ€é«˜ä¼˜å…ˆçº§æŠŠèµ„æºä¸‹è½½åˆ°æœ¬åœ°ç¼“å­˜ï¼Œä½†æš‚æ—¶ä¸è¦åº”ç”¨å®ƒâ€ href=&quot;non-critical.css&quot; æŒ‡å®šè¦ä¸‹è½½çš„æ ·å¼æ–‡ä»¶åœ°å€ as=&quot;style&quot; å‘Šè¯‰æµè§ˆå™¨èµ„æºç±»å‹æ˜¯ style onload=&quot;this.onload=null;this.rel=&#39;stylesheet&#39;&quot; å½“æ–‡ä»¶ä¸‹è½½å®Œæˆåï¼Œæ‰‹åŠ¨æŠŠè¿™æ¡ å˜æˆæ™®é€šæ ·å¼è¡¨ï¼Œè®©æµè§ˆå™¨ç«‹å³åº”ç”¨æ ·å¼ã€‚ noscript æ¸è¿›å¢å¼º / é™çº§ï¼šå½“ç”¨æˆ·ç¦ç”¨ JS æ—¶ï¼Œ preload çš„ onload æ°¸è¿œä¸ä¼šæ‰§è¡Œï¼Œé¡µé¢æ°¸è¿œæ— æ ·å¼ã€‚ é‡Œçš„æ™®é€š ç¡®ä¿æœ€å¼±ç¯å¢ƒä¹Ÿèƒ½æ­£å¸¸å±•ç¤ºã€‚ ä½¿ç”¨ media å±æ€§é¿å…ä¸å¿…è¦çš„é˜»å¡ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ CSS éƒ½ä¼šé˜»å¡æ¸²æŸ“ï¼Œå³ä½¿å®ƒä»¬ä¸é€‚ç”¨äºå½“å‰è®¾å¤‡ã€‚ 12&lt;link rel=&quot;stylesheet&quot; href=&quot;print.css&quot; media=&quot;print&quot;&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;mobile.css&quot; media=&quot;(max-width: 600px)&quot;&gt; åœºæ™¯ ç¤ºä¾‹ å«ä¹‰ è®¾å¤‡å®½åº¦ media=&quot;(max-width: 600px)&quot; 600 px åŠä»¥ä¸‹æ‰åŠ è½½/é˜»å¡ è®¾å¤‡å®½åº¦åŒºé—´ media=&quot;(min-width: 601px) and (max-width: 1024px)&quot; å¹³æ¿åŒºé—´ ç«–æ¨ªå± media=&quot;(orientation: landscape)&quot; æ¨ªå±æ‰åŠ è½½ é«˜åˆ†å± media=&quot;(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)&quot; Retina å± æ‰“å° media=&quot;print&quot; ä»…æ‰“å°/æ‰“å°é¢„è§ˆæ—¶åŠ è½½ï¼Œæ—¥å¸¸å®Œå…¨ä¸é˜»å¡é¦–å± è¯­éŸ³é˜…è¯»å™¨ media=&quot;speech&quot; å±å¹•é˜…è¯»å™¨æ¨¡å¼ æ·±è‰²æ¨¡å¼ media=&quot;(prefers-color-scheme: dark)&quot; ç”¨æˆ·åˆ‡åˆ°æš—é»‘æ‰åŠ è½½ å‡å°‘åŠ¨ç”» media=&quot;(prefers-reduced-motion: reduce)&quot; ç”¨æˆ·å¼€å¯â€œå‡å°‘åŠ¨ç”»â€æ—¶åŠ è½½ ä»»æ„ç»„åˆ media=&quot;screen and (min-width: 960px) and (prefers-color-scheme: dark)&quot; å®½å± + æš—é»‘åŒæ—¶æ»¡è¶³ å‹ç¼©ä¸å»é‡ å‡å°‘ä»£ç å¤§å°ï¼Œä¼šå¿«ä¸€ç‚¹ å‹ç¼©ï¼šä½¿ç”¨å·¥å…·å¦‚ cssnanoã€clean-cssã€esbuild ç­‰å»é™¤ç©ºæ ¼ã€æ³¨é‡Šã€ç¼©çŸ­å±æ€§åã€‚æ‰“åŒ…æ—¶é…åˆæœåŠ¡å™¨ä½¿ç”¨Gzipã€‚ å»é‡ï¼šé¿å…é‡å¤å¼•å…¥ç›¸åŒæ ·å¼ï¼ˆå¦‚å¤šä¸ªç»„ä»¶åº“é‡å¤åŠ è½½ normalize.cssï¼‰ã€‚ ä½¿ç”¨ HTTP/2 æˆ– HTTP/3 å¤šè·¯å¤ç”¨ é¿å… CSS æ–‡ä»¶è¿‡å¤šå¯¼è‡´çš„é˜Ÿå¤´é˜»å¡ï¼ˆHead-of-line blockingï¼‰ã€‚ æ‹†åˆ† CSS ä¸ºå¤šä¸ªå°æ–‡ä»¶ï¼Œåˆ©ç”¨ HTTP/2 çš„å¤šè·¯å¤ç”¨å¹¶è¡ŒåŠ è½½ã€‚ äºŒã€è§£æä¸æ„å»ºé˜¶æ®µä¼˜åŒ–ï¼ˆå‡å°‘ CSS å¤æ‚åº¦ï¼‰å‡å°‘ CSS é€‰æ‹©å™¨å¤æ‚åº¦ å¤æ‚é€‰æ‹©å™¨ï¼ˆå¦‚æ·±åµŒå¥—ã€é€šé…ç¬¦ã€å±æ€§é€‰æ‹©å™¨ï¼‰ä¼šå¢åŠ åŒ¹é…æ—¶é—´ã€‚ è°¨æ…ä½¿ç”¨ä¼ªç±»å’Œå®šä½ å‡å°‘åµŒå¥—å±‚çº§ å‡å°‘ä½¿ç”¨å å†…å­˜å’ŒCPUæ€§èƒ½çš„å±æ€§ ä¾‹å¦‚ï¼štext-indnt: -9999px é¿å…è€—ç”µå¤§çš„å±æ€§ 3Dã€transformsã€transitionsã€opactiy é¿å…ä½¿ç”¨cssè¡¨è¾¾å¼ ä¾‹å¦‚ï¼šexpression(jsè¡¨è¾¾å¼) é¿å…ä½¿ç”¨é€šé…ç¬¦ é¿å…ä½¿ç”¨æ­£åˆ™å±æ€§é€‰æ‹©å™¨ å‡å°‘ CSS æ–‡ä»¶ä½“ç§¯ ç§»é™¤æœªä½¿ç”¨çš„ CSSã€å‡å°‘ CSS æ–‡ä»¶ä½“ç§¯ã€ä½¿ç”¨ contain å±æ€§éš”ç¦»æ ·å¼å½±å“ ç§»é™¤æœªä½¿ç”¨çš„ CSS é¿å…ä½¿ç”¨ * é€šé…ç¬¦ã€‚ é¿å…ä½¿ç”¨æ ‡ç­¾+ç±»+ä¼ªç±»+å±æ€§çš„ç»„åˆï¼ˆå¦‚ div.nav-item:hover[data-active=&quot;true&quot;]ï¼‰ã€‚ ä¼˜å…ˆä½¿ç”¨ç±»é€‰æ‹©å™¨ï¼ˆ.btnï¼‰ï¼Œé¿å…åµŒå¥—è¿‡æ·±ï¼ˆå¦‚ .a .b .c .dï¼‰ã€‚ é¿å…ä½¿ç”¨ :nth-child()ã€:not() ç­‰å¤æ‚ä¼ªç±»ã€‚ å‡å°‘ CSS æ–‡ä»¶ä½“ç§¯ ç§»é™¤æœªä½¿ç”¨çš„ CSS é¿å…å†—ä½™æ ·å¼ ä½¿ç”¨ CSS å˜é‡å‡å°‘é‡å¤å€¼ ä½¿ç”¨ contain å±æ€§éš”ç¦»æ ·å¼å½±å“ åŸå­å€¼ å¼€å¯åæµè§ˆå™¨å¾—åˆ°ä»€ä¹ˆæ‰¿è¯º è‹¥è¿èƒŒæ‰¿è¯ºçš„åæœ layout 1. å…ƒç´ å†…éƒ¨ä»»ä½•å­å…ƒç´ å¸ƒå±€å˜åŒ–ä¸ä¼šå½±å“åˆ°æœ¬å…ƒç´ å¤–éƒ¨ï¼ˆåä¹‹äº¦ç„¶ï¼‰ã€‚2. æµè§ˆå™¨å¯è·³è¿‡æ•´æ£µå¤–éƒ¨æ ‘çš„é‡æ’è®¡ç®—ã€‚ å¦‚æœä½ æ‰‹åŠ¨æŠŠå†…éƒ¨å…ƒç´ æ”¹æˆ position: fixed å¹¶è´´åˆ°è§†å£è¾¹ç¼˜ï¼Œå°±ç ´åäº†æ‰¿è¯ºï¼Œå¯èƒ½å‡ºç°é”™ä½ã€‚ paint è¯¥å…ƒç´ ä¸ä¼šç»˜åˆ¶åˆ°è‡ªèº«è¾¹æ¡†ç›’ä¹‹å¤–ï¼ˆå³ä¸å¯èƒ½æº¢å‡ºï¼‰ã€‚æµè§ˆå™¨å¯ç›´æ¥è£å‰ªåˆæˆå±‚ï¼Œçœå»çˆ¶å±‚é‡ç»˜ã€‚ å®é™…æº¢å‡ºéƒ¨åˆ†ä¼šè¢«è§†è§‰è£å‰ªï¼ˆç±»ä¼¼ overflow:hidden ä½†ä¸è§¦å‘æ»šåŠ¨æ¡ï¼‰ã€‚ style 1. countersï¼ˆcounter-*ï¼‰å’Œ quotes å˜åŒ–ä¸ä¼šç©¿è¶Šæœ¬å…ƒç´ ã€‚2. æµè§ˆå™¨å¯ä¸é‡æ–°è®¡ç®—å¤–éƒ¨è®¡æ•°å™¨ã€‚ è‹¥ä½ åœ¨å†…éƒ¨ç”¨ counter-increment å´å¸Œæœ›å¤–éƒ¨ç»§ç»­ç´¯åŠ ï¼Œä¼šå¤±æ•ˆã€‚ size è¯¥å…ƒç´ çš„å°ºå¯¸ä¸å—å­å…ƒç´ æ’‘å¼€ï¼ˆç±»ä¼¼æ›¿æ¢å…ƒç´ ï¼‰ã€‚æµè§ˆå™¨å¯åœ¨å­æ ‘å¸ƒå±€å®Œæˆå‰å°±ç¡®å®šçˆ¶å±‚å°ºå¯¸ã€‚ è‹¥å­å…ƒç´ æ¯”æ˜¾å¼å°ºå¯¸é«˜/å®½ï¼Œç›´æ¥æº¢å‡ºè¢«è£ï¼›çˆ¶ç›’ä¸ä¼šè‡ªåŠ¨æ’‘å¤§ã€‚ inline-size ä»…æ¨ªå‘å°ºå¯¸ä¸å—å­å…ƒç´ å½±å“ï¼Œé«˜åº¦ä»å¯è¢«å­å…ƒç´ æ’‘å¼€ï¼ˆLevel 3 æ–°å¢ï¼ŒSafari â‰¥ 16 æ”¯æŒï¼‰ã€‚ åŒä¸Šï¼Œä½†ä»…å®½åº¦å›ºå®šã€‚ ä¸‰ã€æ¸²æŸ“é˜¶æ®µä¼˜åŒ–ï¼ˆå‡å°‘é‡æ’/é‡ç»˜/åˆæˆå±‚ï¼‰é¿å…è§¦å‘é‡æ’ï¼ˆReflowï¼‰çš„å±æ€§ ä¼šè§¦å‘é‡æ’çš„å±æ€§ï¼š width, height, margin, padding, border, position, top, left, font-size, display, float, clear, overflow, min-height, line-height ç­‰ã€‚ ä¼˜åŒ–å»ºè®®ï¼š ä½¿ç”¨ transform æ›¿ä»£ top/leftã€‚ ä½¿ç”¨ opacity æ›¿ä»£ visibility æˆ– displayã€‚ é¿å…åœ¨åŠ¨ç”»ä¸­æ”¹å˜å¸ƒå±€å±æ€§ã€‚ ä½¿ç”¨åˆæˆå±‚ï¼ˆComposite Layerï¼‰ä¼˜åŒ–åŠ¨ç”» è§¦å‘åˆæˆå±‚çš„å±æ€§ï¼š transform, opacity, filter, will-change å®æˆ˜æŠ€å·§ï¼š ä½¿ç”¨ transform: translateZ(0) æˆ– will-change: transform å¼ºåˆ¶æå‡ä¸ºåˆæˆå±‚ï¼ˆéœ€è°¨æ…ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨å¯¼è‡´å†…å­˜æš´æ¶¨ï¼‰ã€‚ é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€ JS è¯»å–å¸ƒå±€å±æ€§ï¼ˆå¦‚ offsetWidthï¼‰åç«‹å³ä¿®æ”¹æ ·å¼ï¼Œä¼šå¼ºåˆ¶æµè§ˆå™¨åŒæ­¥è®¡ç®—å¸ƒå±€ã€‚ å¦‚æœç”¨æ¡†æ¶ä¼šå¥½ç‚¹ï¼Œæ‰¹é‡çš„å†™ å››ã€è¿è¡Œæ—¶ä¼˜åŒ–ï¼ˆå‡å°‘æ ·å¼è®¡ç®—ä¸åŒ¹é…ï¼‰å‡å°‘æ ·å¼è®¡ç®—èŒƒå›´ DOM èŠ‚ç‚¹è¶Šå¤šï¼Œæ ·å¼è®¡ç®—è¶Šæ…¢ã€‚ é¿å…åœ¨ body ä¸Šè®¾ç½®å¤æ‚é€‰æ‹©å™¨ï¼ˆå¦‚ body &gt; div:nth-child(3) &gt; ...ï¼‰ã€‚ ä½¿ç”¨ class æ›¿ä»£æ ‡ç­¾+å±æ€§é€‰æ‹©å™¨ã€‚ ä½¿ç”¨ CSS å˜é‡å‡å°‘è¿è¡Œæ—¶è®¡ç®—CSS å˜é‡ï¼ˆ--varï¼‰åœ¨è¿è¡Œæ—¶è®¡ç®—ï¼Œé€‚åˆä¸»é¢˜åˆ‡æ¢ç­‰åœºæ™¯ï¼Œé¿å… JS é¢‘ç¹æ“ä½œæ ·å¼ã€‚ é¿å…ä½¿ç”¨ @import ä¸€èˆ¬æ‰“åŒ…å·¥å…·å’Œæ¡†æ¶ä¼šå¤„ç† @import ä¼šä¸²è¡ŒåŠ è½½ï¼Œé˜»å¡æ¸²æŸ“ã€‚ æ›¿ä»£æ–¹æ¡ˆï¼šä½¿ç”¨ &lt;link&gt; æ ‡ç­¾å¹¶è¡ŒåŠ è½½ï¼Œæˆ–ä½¿ç”¨æ‰“åŒ…å·¥å…·åˆå¹¶ CSSã€‚ äº”ã€è¿›é˜¶ä¼˜åŒ–ç­–ç•¥ä½¿ç”¨ CSS Modules / Scoped CSS é¿å…å…¨å±€æ±¡æŸ“ å‡å°‘å…¨å±€é€‰æ‹©å™¨å†²çªï¼Œé™ä½æ ·å¼åŒ¹é…å¤æ‚åº¦ã€‚ vueã€reactè¿™äº›æ¡†æ¶éƒ½æœ‰ Vue: &lt;style scoped&gt; React: CSS Modulesã€Styled-componentsã€Emotion ä½¿ç”¨ CSS-in-JS éœ€è°¨æ… æ ·å¼æŒ‰éœ€åŠ è½½ã€é¿å…å…¨å±€æ±¡æŸ“ã€‚ è¿è¡Œæ—¶ç”Ÿæˆæ ·å¼ï¼Œå¢åŠ  JS è´Ÿæ‹…ã€‚ å¯èƒ½å¯¼è‡´ SSR æ ·å¼é—ªçƒï¼ˆFOUCï¼‰ã€‚ ç›‘æ§ä¸åº¦é‡ ä¸€èˆ¬æ²¡æ€ä¹ˆç”¨ä¸“ä¸šçš„å·¥å…·çœ‹ï¼Œå°±æ˜¯æµè§ˆå™¨çš„å·¥å…·çœ‹çœ‹ï¼Œæ²¡æ€ä¹ˆæ¥è§¦å¤§é¡¹ç›®ï¼Œè¦æ±‚ä¼˜åŒ–åˆ°è¿™ä¹ˆç»†è‡´çš„ Lighthouseï¼ˆPerformance è¯„åˆ†ï¼‰ Chrome DevTools â†’ Performance â†’ Rendering â†’ Paint flashing CSS Triggersï¼ˆhttps://csstriggers.com/ï¼‰ Web Vitalsï¼ˆCLSã€LCPã€FIDï¼‰ æœåŠ¡å™¨è®¾ç½®ç¼“å­˜ é€šå¸¸æœåŠ¡å™¨ä¼šè®¾ç½®é™æ€æ–‡ä»¶ç¼“å­˜ã€index.htmlï¼ˆé™¤å¤–é˜²æ­¢æ›´æ–°åæ²¡èƒ½åŠæ—¶åŠ è½½æœ€æ–°ç‰ˆæœ¬ï¼‰ é¡¹ç›®å¼€å‘é€šå¸¸æ²¡æ€ä¹ˆæƒ³è¿‡cssä¼˜åŒ–ï¼Ÿ Vue/React è„šæ‰‹æ¶å·²ç»å¸®ä½ å¹²äº†æœ€ç²—çš„é‚£ä¸€å±‚ å‹ç¼©ã€å»ç©ºè¡Œã€åˆæ–‡ä»¶ã€æŠŠ @import æ‹‰å¹³ã€åŠ æŒ‡çº¹å“ˆå¸Œ â†’ ä½ ä¸€è¡Œé…ç½®éƒ½ä¸ç”¨å†™ï¼Œä¸Šçº¿é»˜è®¤å°±æœ‰ã€‚ ç¼“å­˜ æœåŠ¡å™¨æ¥å¤„ç†ä¸ç”¨å‰ç«¯å¤„ç† ä¸è§£å†³é¦–æ¬¡ç™½å±ã€ä¸æ‰å¸§ã€ä¸é˜²é‡æ’ã€‚ å‰©ä¸‹å†…å®¹åˆ™éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼Œæˆ–è€…å¼€å‘çš„æ—¶å€™é¿å… é¦–å± CSS å¤ªå¤š â†’ æŠ½â€œå…³é”® CSSâ€å†…è”ã€‚ æ–‡ä»¶è™½å‹ç¼©äº†ï¼Œä½† 70 % æ ·å¼æ²¡ç”¨åˆ° â†’ PurgeCSS åˆ æ‰ã€‚ åˆ—è¡¨ä¸€ä¸‡è¡Œ â†’ åŠ  contain: layout paint é˜²æ‰å¸§ã€‚ åŠ¨ç”»ç”¨ top/left â†’ æ”¹æˆ transform å°±ä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚"},{"title":"NestJSé¡¹ç›®ä»é›¶åˆ°ä¸€","path":"2025/09/28/Nestjsé¡¹ç›®é‡ç‚¹è®°å½•/","text":"NestJSé¡¹ç›®ä»é›¶åˆ°ä¸€ç›®å½• é¡¹ç›®åˆå§‹åŒ–ä¸è„šæ‰‹æ¶ é¡¹ç›®ç»“æ„è§„åˆ’ æ•°æ®åº“è¿æ¥é…ç½® DTOæ•°æ®éªŒè¯ä¸å°è£… ç»Ÿä¸€è¿”å›ç»“æœå°è£… JWTè®¤è¯ä¸æˆæƒ æ¥å£æ–‡æ¡£ç”Ÿæˆ CRUDæ¥å£å®ç°ç¤ºä¾‹ æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼  è·¯ç”±å®ˆå«ä¸æ‹¦æˆªå™¨ æ—¥å¿—ç³»ç»Ÿ ç¯å¢ƒé…ç½®ç®¡ç† éƒ¨ç½²ä¸ç”Ÿäº§ç¯å¢ƒ 1. é¡¹ç›®åˆå§‹åŒ–ä¸è„šæ‰‹æ¶1.1 å®‰è£…NestJS CLI1npm install -g @nestjs/cli 1.2 åˆ›å»ºæ–°é¡¹ç›®ä½¿ç”¨NestJS CLIåˆ›å»ºé¡¹ç›®ï¼š12nest new nest-servecd nest-serve é¡¹ç›®åˆ›å»ºé€‰é¡¹ï¼šåˆ›å»ºé¡¹ç›®æ—¶ä¼šè¯¢é—®åŒ…ç®¡ç†å™¨é€‰æ‹©ï¼š 1234? Which package manager would you â¤ï¸ to use? â¯ npm yarn pnpm é¡¹ç›®ç»“æ„é¢„è§ˆï¼šåˆ›å»ºå®Œæˆåä¼šè‡ªåŠ¨ç”Ÿæˆæ ‡å‡†é¡¹ç›®ç»“æ„ï¼š 123456789101112nest-serve/â”œâ”€â”€ src/â”‚ â”œâ”€â”€ main.ts # åº”ç”¨å…¥å£â”‚ â”œâ”€â”€ app.module.ts # æ ¹æ¨¡å—â”‚ â”œâ”€â”€ app.controller.ts # æ ¹æ§åˆ¶å™¨â”‚ â””â”€â”€ app.service.ts # æ ¹æœåŠ¡â”œâ”€â”€ test/ # æµ‹è¯•æ–‡ä»¶â”œâ”€â”€ .eslintrc.js # ESLinté…ç½®â”œâ”€â”€ .prettierrc # Prettieré…ç½®â”œâ”€â”€ tsconfig.json # TypeScripté…ç½®â”œâ”€â”€ package.json # é¡¹ç›®ä¾èµ–â””â”€â”€ README.md # é¡¹ç›®è¯´æ˜ éªŒè¯é¡¹ç›®åˆ›å»ºæˆåŠŸï¼š1234# å¯åŠ¨å¼€å‘æœåŠ¡å™¨npm run start:dev# è®¿é—® http://localhost:3000 æŸ¥çœ‹æ¬¢è¿é¡µé¢ 1.3 é¡¹ç›®ç»“æ„è¯´æ˜123456789nest-serve/â”œâ”€â”€ src/â”‚ â”œâ”€â”€ main.ts # åº”ç”¨å…¥å£æ–‡ä»¶â”‚ â”œâ”€â”€ app.module.ts # æ ¹æ¨¡å—â”‚ â”œâ”€â”€ app.controller.ts # æ ¹æ§åˆ¶å™¨â”‚ â””â”€â”€ app.service.ts # æ ¹æœåŠ¡â”œâ”€â”€ test/ # æµ‹è¯•æ–‡ä»¶ç›®å½•â”œâ”€â”€ package.jsonâ””â”€â”€ tsconfig.json 1.4 ç§»é™¤æµ‹è¯•æ¨¡å—ï¼ˆå¯é€‰ï¼‰å¦‚æœä¸éœ€è¦æµ‹è¯•åŠŸèƒ½ï¼Œå¯ä»¥åˆ é™¤testç›®å½•å’Œç›¸å…³çš„æµ‹è¯•ä¾èµ–ï¼š 1rm -rf test/ åœ¨package.jsonä¸­ç§»é™¤æµ‹è¯•ç›¸å…³ä¾èµ–ï¼š 12345678910&#123; &quot;devDependencies&quot;: &#123; // ç§»é™¤ä»¥ä¸‹æµ‹è¯•ç›¸å…³ä¾èµ– // &quot;@nestjs/testing&quot;: &quot;^11.0.1&quot;, // &quot;@types/jest&quot;: &quot;^29.5.14&quot;, // &quot;jest&quot;: &quot;^29.7.0&quot;, // &quot;supertest&quot;: &quot;^7.0.0&quot;, // &quot;ts-jest&quot;: &quot;^29.2.5&quot; &#125;&#125; 2. é¡¹ç›®ç»“æ„è§„åˆ’2.1 æ¨èçš„æ¨¡å—åŒ–ç»“æ„123456789101112131415161718src/â”œâ”€â”€ common/ # å…¬å…±æ¨¡å—â”‚ â”œâ”€â”€ decorator/ # è£…é¥°å™¨â”‚ â”œâ”€â”€ dto/ # æ•°æ®ä¼ è¾“å¯¹è±¡â”‚ â”œâ”€â”€ entities/ # å®ä½“ç±»â”‚ â”œâ”€â”€ filter/ # å¼‚å¸¸è¿‡æ»¤å™¨â”‚ â”œâ”€â”€ guards/ # å®ˆå«â”‚ â”œâ”€â”€ interceptor/ # æ‹¦æˆªå™¨â”‚ â”œâ”€â”€ pipeTransform/ # ç®¡é“â”‚ â”œâ”€â”€ service/ # å…¬å…±æœåŠ¡â”‚ â””â”€â”€ utils/ # å·¥å…·å‡½æ•°â”œâ”€â”€ config/ # é…ç½®æ–‡ä»¶â”œâ”€â”€ module/ # ä¸šåŠ¡æ¨¡å—â”‚ â”œâ”€â”€ auth/ # è®¤è¯æ¨¡å—â”‚ â”œâ”€â”€ users/ # ç”¨æˆ·æ¨¡å—â”‚ â”œâ”€â”€ upload/ # æ–‡ä»¶ä¸Šä¼ æ¨¡å—â”‚ â””â”€â”€ ... # å…¶ä»–ä¸šåŠ¡æ¨¡å—â””â”€â”€ types/ # TypeScriptç±»å‹å®šä¹‰ 2.2 åˆ›å»ºæ¨¡å—ç»“æ„12345# åˆ›å»ºç›®å½•ç»“æ„mkdir -p src/common/&#123;decorator,dto,entities,filter,guards,interceptor,pipeTransform,service,utils&#125;mkdir -p src/configmkdir -p src/module/&#123;auth,users,upload&#125;mkdir -p src/types 3. æ•°æ®åº“è¿æ¥é…ç½®3.1 å®‰è£…æ•°æ®åº“ä¾èµ–12npm install @nestjs/typeorm typeorm mysql2 sqlite3npm install @nestjs/config 3.2 é…ç½®å¤šæ•°æ®åº“è¿æ¥åˆ›å»ºæ•°æ®åº“é…ç½®æ–‡ä»¶ src/config/db.tsï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142import &#123; join &#125; from &quot;path&quot;;// è·å–ç¯å¢ƒå˜é‡const env = process.env;/** æ•°æ®åº“é…ç½®ç±»å‹ */export interface MysqlConfig &#123; DB_TYPE: string; DB_HOST: string; DB_PORT: number; DB_USER: string; DB_PASSWORD: string; DB_DATABASE: string;&#125;/** Sqliteé…ç½®ç±»å‹ */export interface SqliteConfig &#123; DB_TYPE: string; DB_DATABASE: string;&#125;// MySQLé…ç½®const mysqlConfig: MysqlConfig = &#123; DB_TYPE: &quot;mysql&quot;, DB_HOST: env.DB_HOST || &quot;127.0.0.1&quot;, DB_PORT: Number(env.DB_PORT) || 3306, DB_USER: env.DB_USER || &quot;root&quot;, DB_PASSWORD: env.DB_PASSWORD || &quot;123456&quot;, DB_DATABASE: env.DB_DATABASE || &quot;nest-serve&quot;,&#125;;// SQLiteé…ç½®const sqliteConfig: SqliteConfig = &#123; DB_TYPE: &quot;sqlite&quot;, DB_DATABASE: join(process.cwd(), env.DB_DATABASE || &quot;sqlitedata/nest.db&quot;),&#125;;// æ ¹æ®ç¯å¢ƒå˜é‡é€‰æ‹©æ•°æ®åº“é…ç½®const DB_TYPE = env.DB_TYPE;const dbConfig = DB_TYPE === &quot;sqlite&quot; ? sqliteConfig : mysqlConfig;export default &#123; dbConfig &#125;; 3.3 åœ¨ä¸»æ¨¡å—ä¸­é…ç½®æ•°æ®åº“src/app.module.tsï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import &#123; Module &#125; from &quot;@nestjs/common&quot;;import &#123; ConfigModule, ConfigService &#125; from &quot;@nestjs/config&quot;;import &#123; TypeOrmModule &#125; from &quot;@nestjs/typeorm&quot;;import &#123; join &#125; from &quot;path&quot;;import DBConfig from &quot;./config/db&quot;;@Module(&#123; imports: [ // é…ç½®æ¨¡å— ConfigModule.forRoot(&#123; isGlobal: true, envFilePath: `.env.$&#123;process.env.NODE_ENV || &quot;dev&quot;&#125;`, &#125;), // æ•°æ®åº“è¿æ¥ TypeOrmModule.forRootAsync(&#123; imports: [ConfigModule], useFactory: (configService: ConfigService) =&gt; &#123; const dbType = DBConfig.dbConfig.DB_TYPE as &quot;mysql&quot; | &quot;sqlite&quot;; if (dbType === &quot;sqlite&quot;) &#123; return &#123; type: dbType, database: DBConfig.dbConfig.DB_DATABASE, synchronize: process.env.NODE_ENV !== &quot;production&quot;, logging: process.env.NODE_ENV !== &quot;production&quot;, entities: [join(__dirname, &quot;module/**/*.entity.&#123;ts,js&#125;&quot;)], &#125;; &#125; else &#123; return &#123; type: dbType, host: DBConfig.dbConfig.DB_HOST, port: DBConfig.dbConfig.DB_PORT, username: DBConfig.dbConfig.DB_USER, password: DBConfig.dbConfig.DB_PASSWORD, database: DBConfig.dbConfig.DB_DATABASE, synchronize: process.env.NODE_ENV !== &quot;production&quot;, logging: process.env.NODE_ENV !== &quot;production&quot;, entities: [join(__dirname, &quot;module/**/*.entity.&#123;ts,js&#125;&quot;)], &#125;; &#125; &#125;, inject: [ConfigService], &#125;), ], controllers: [], providers: [],&#125;)export class AppModule &#123;&#125; 3.4 ç¯å¢ƒé…ç½®æ–‡ä»¶åˆ›å»º .env.devï¼š 123456789101112131415# æ•°æ®åº“é…ç½®DB_TYPE=mysqlDB_HOST=localhostDB_PORT=3306DB_USER=rootDB_PASSWORD=123456DB_DATABASE=nest-serve# JWTé…ç½®JWT_SECRET=your-secret-keyJWT_EXPIRES_IN=7d# åº”ç”¨é…ç½®PORT=3000NODE_ENV=dev 4. DTOæ•°æ®éªŒè¯ä¸å°è£…4.1 å®‰è£…éªŒè¯ä¾èµ–1npm install class-validator class-transformer 4.2 åˆ›å»ºåŸºç¡€DTOsrc/common/dto/base.dto.tsï¼š 12345678910111213141516171819202122import &#123; IsOptional, IsNumber, Min &#125; from &#x27;class-validator&#x27;;import &#123; Type &#125; from &#x27;class-transformer&#x27;;export class PaginationDto &#123; @IsOptional() @Type(() =&gt; Number) @IsNumber() @Min(1) page?: number = 1; @IsOptional() @Type(() =&gt; Number) @IsNumber() @Min(1) pageSize?: number = 10;&#125;export class IdDto &#123; @IsNumber() @Min(1) id: number;&#125; 4.3 ç”¨æˆ·æ¨¡å—DTOç¤ºä¾‹src/module/users/dto/create-user.dto.tsï¼š 123456789101112131415161718import &#123; IsString, IsEmail, IsNotEmpty, MinLength, MaxLength &#125; from &#x27;class-validator&#x27;;export class CreateUserDto &#123; @IsString() @IsNotEmpty(&#123; message: &#x27;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&#x27; &#125;) @MinLength(2, &#123; message: &#x27;ç”¨æˆ·åè‡³å°‘2ä¸ªå­—ç¬¦&#x27; &#125;) @MaxLength(20, &#123; message: &#x27;ç”¨æˆ·åæœ€å¤š20ä¸ªå­—ç¬¦&#x27; &#125;) username: string; @IsEmail(&#123;&#125;, &#123; message: &#x27;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&#x27; &#125;) @IsNotEmpty(&#123; message: &#x27;é‚®ç®±ä¸èƒ½ä¸ºç©º&#x27; &#125;) email: string; @IsString() @IsNotEmpty(&#123; message: &#x27;å¯†ç ä¸èƒ½ä¸ºç©º&#x27; &#125;) @MinLength(6, &#123; message: &#x27;å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦&#x27; &#125;) password: string;&#125; src/module/users/dto/update-user.dto.tsï¼š 1234import &#123; PartialType &#125; from &#x27;@nestjs/mapped-types&#x27;;import &#123; CreateUserDto &#125; from &#x27;./create-user.dto&#x27;;export class UpdateUserDto extends PartialType(CreateUserDto) &#123;&#125; 5. ç»Ÿä¸€è¿”å›ç»“æœå°è£…5.1 åˆ›å»ºå“åº”æ¥å£src/common/types/public.tsï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243export interface ResponseData&lt;T = any&gt; &#123; code: number; message: string; data?: T; success: boolean;&#125;export interface PaginationData&lt;T = any&gt; &#123; list: T[]; total: number; page: number; pageSize: number; totalPages: number;&#125;export class ResponseResult &#123; static success&lt;T&gt;(data?: T, message = &#x27;æ“ä½œæˆåŠŸ&#x27;): ResponseData&lt;T&gt; &#123; return &#123; code: 200, message, data, success: true, &#125;; &#125; static pagination&lt;T&gt;(list: T[], total: number, page: number, pageSize: number): ResponseData&lt;PaginationData&lt;T&gt;&gt; &#123; return this.success(&#123; list, total, page, pageSize, totalPages: Math.ceil(total / pageSize), &#125;); &#125; static error(message = &#x27;æ“ä½œå¤±è´¥&#x27;, code = 500): ResponseData &#123; return &#123; code, message, success: false, &#125;; &#125;&#125; 5.2 åˆ›å»ºç»Ÿä¸€å“åº”æ‹¦æˆªå™¨src/common/interceptor/response.interceptor.tsï¼š 1234567891011121314151617181920212223242526import &#123; Injectable, NestInterceptor, ExecutionContext, CallHandler &#125; from &#x27;@nestjs/common&#x27;;import &#123; Observable &#125; from &#x27;rxjs&#x27;;import &#123; map &#125; from &#x27;rxjs/operators&#x27;;import &#123; ResponseData &#125; from &#x27;../types/public&#x27;;@Injectable()export class ResponseInterceptor&lt;T&gt; implements NestInterceptor&lt;T, ResponseData&lt;T&gt;&gt; &#123; intercept(context: ExecutionContext, next: CallHandler): Observable&lt;ResponseData&lt;T&gt;&gt; &#123; return next.handle().pipe( map((data) =&gt; &#123; // å¦‚æœå·²ç»æ˜¯ç»Ÿä¸€æ ¼å¼ï¼Œç›´æ¥è¿”å› if (data &amp;&amp; typeof data === &#x27;object&#x27; &amp;&amp; &#x27;code&#x27; in data &amp;&amp; &#x27;success&#x27; in data) &#123; return data; &#125; // ç»Ÿä¸€æ ¼å¼åŒ–å“åº” return &#123; code: 200, message: &#x27;æ“ä½œæˆåŠŸ&#x27;, data: data || null, success: true, &#125;; &#125;), ); &#125;&#125; 6. JWTè®¤è¯ä¸æˆæƒ6.1 å®‰è£…JWTä¾èµ–12npm install @nestjs/jwt bcryptnpm install @types/bcrypt -D 6.2 åˆ›å»ºJWTé…ç½®src/config/jwt.tsï¼š 123456import &#123; registerAs &#125; from &#x27;@nestjs/config&#x27;;export default registerAs(&#x27;jwt&#x27;, () =&gt; (&#123; secret: process.env.JWT_SECRET || &#x27;your-secret-key&#x27;, expiresIn: process.env.JWT_EXPIRES_IN || &#x27;7d&#x27;,&#125;)); 6.3 åˆ›å»ºè®¤è¯å®ˆå«src/common/guards/auth.guard.tsï¼š 12345678910111213141516171819202122232425262728293031import &#123; Injectable, CanActivate, ExecutionContext, UnauthorizedException &#125; from &#x27;@nestjs/common&#x27;;import &#123; JwtService &#125; from &#x27;@nestjs/jwt&#x27;;import &#123; Request &#125; from &#x27;express&#x27;;@Injectable()export class AuthGuard implements CanActivate &#123; constructor(private jwtService: JwtService) &#123;&#125; async canActivate(context: ExecutionContext): Promise&lt;boolean&gt; &#123; const request = context.switchToHttp().getRequest(); const token = this.extractTokenFromHeader(request); if (!token) &#123; throw new UnauthorizedException(&#x27;è¯·å…ˆç™»å½•&#x27;); &#125; try &#123; const payload = await this.jwtService.verifyAsync(token); request.user = payload; &#125; catch &#123; throw new UnauthorizedException(&#x27;ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ&#x27;); &#125; return true; &#125; private extractTokenFromHeader(request: Request): string | undefined &#123; const [type, token] = request.headers.authorization?.split(&#x27; &#x27;) ?? []; return type === &#x27;Bearer&#x27; ? token : undefined; &#125;&#125; 6.4 åˆ›å»ºè§’è‰²å®ˆå«src/common/guards/roles.guard.tsï¼š 123456789101112131415161718import &#123; Injectable, CanActivate, ExecutionContext &#125; from &#x27;@nestjs/common&#x27;;import &#123; Reflector &#125; from &#x27;@nestjs/core&#x27;;@Injectable()export class RolesGuard implements CanActivate &#123; constructor(private reflector: Reflector) &#123;&#125; canActivate(context: ExecutionContext): boolean &#123; const requiredRoles = this.reflector.get&lt;string[]&gt;(&#x27;roles&#x27;, context.getHandler()); if (!requiredRoles) &#123; return true; &#125; const &#123; user &#125; = context.switchToHttp().getRequest(); return requiredRoles.some((role) =&gt; user.roles?.includes(role)); &#125;&#125; 6.5 åˆ›å»ºè§’è‰²è£…é¥°å™¨src/common/decorator/roles.decorator.tsï¼š 1234import &#123; SetMetadata &#125; from &#x27;@nestjs/common&#x27;;export const ROLES_KEY = &#x27;roles&#x27;;export const Roles = (...roles: string[]) =&gt; SetMetadata(ROLES_KEY, roles); 7. æ¥å£æ–‡æ¡£ç”Ÿæˆ7.1 å®‰è£…Swaggerä¾èµ–1npm install @nestjs/swagger swagger-ui-express 7.2 é…ç½®Swaggersrc/main.tsï¼š 12345678910111213141516171819202122232425import &#123; NestFactory &#125; from &#x27;@nestjs/core&#x27;;import &#123; ValidationPipe &#125; from &#x27;@nestjs/common&#x27;;import &#123; SwaggerModule, DocumentBuilder &#125; from &#x27;@nestjs/swagger&#x27;;import &#123; AppModule &#125; from &#x27;./app.module&#x27;;async function bootstrap() &#123; const app = await NestFactory.create(AppModule); // å…¨å±€éªŒè¯ç®¡é“ app.useGlobalPipes(new ValidationPipe()); // Swaggeré…ç½® const config = new DocumentBuilder() .setTitle(&#x27;NestJS APIæ–‡æ¡£&#x27;) .setDescription(&#x27;NestJSé¡¹ç›®APIæ¥å£æ–‡æ¡£&#x27;) .setVersion(&#x27;1.0&#x27;) .addBearerAuth() .build(); const document = SwaggerModule.createDocument(app, config); SwaggerModule.setup(&#x27;api&#x27;, app, document); await app.listen(process.env.PORT || 3000);&#125;bootstrap(); 7.3 åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨Swaggerè£…é¥°å™¨src/module/users/users.controller.tsï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344import &#123; Controller, Get, Post, Body, Patch, Param, Delete, UseGuards &#125; from &#x27;@nestjs/common&#x27;;import &#123; ApiTags, ApiOperation, ApiBearerAuth &#125; from &#x27;@nestjs/swagger&#x27;;import &#123; UsersService &#125; from &#x27;./users.service&#x27;;import &#123; CreateUserDto &#125; from &#x27;./dto/create-user.dto&#x27;;import &#123; UpdateUserDto &#125; from &#x27;./dto/update-user.dto&#x27;;import &#123; AuthGuard &#125; from &#x27;../../common/guards/auth.guard&#x27;;@ApiTags(&#x27;ç”¨æˆ·ç®¡ç†&#x27;)@Controller(&#x27;users&#x27;)@UseGuards(AuthGuard)@ApiBearerAuth()export class UsersController &#123; constructor(private readonly usersService: UsersService) &#123;&#125; @Post() @ApiOperation(&#123; summary: &#x27;åˆ›å»ºç”¨æˆ·&#x27; &#125;) create(@Body() createUserDto: CreateUserDto) &#123; return this.usersService.create(createUserDto); &#125; @Get() @ApiOperation(&#123; summary: &#x27;è·å–ç”¨æˆ·åˆ—è¡¨&#x27; &#125;) findAll() &#123; return this.usersService.findAll(); &#125; @Get(&#x27;:id&#x27;) @ApiOperation(&#123; summary: &#x27;è·å–ç”¨æˆ·è¯¦æƒ…&#x27; &#125;) findOne(@Param(&#x27;id&#x27;) id: string) &#123; return this.usersService.findOne(+id); &#125; @Patch(&#x27;:id&#x27;) @ApiOperation(&#123; summary: &#x27;æ›´æ–°ç”¨æˆ·ä¿¡æ¯&#x27; &#125;) update(@Param(&#x27;id&#x27;) id: string, @Body() updateUserDto: UpdateUserDto) &#123; return this.usersService.update(+id, updateUserDto); &#125; @Delete(&#x27;:id&#x27;) @ApiOperation(&#123; summary: &#x27;åˆ é™¤ç”¨æˆ·&#x27; &#125;) remove(@Param(&#x27;id&#x27;) id: string) &#123; return this.usersService.remove(+id); &#125;&#125; 8. CRUDæ¥å£å®ç°ç¤ºä¾‹8.1 åˆ›å»ºç”¨æˆ·å®ä½“src/module/users/entities/user.entity.tsï¼š 12345678910111213141516171819202122232425262728import &#123; Entity, Column, PrimaryGeneratedColumn, CreateDateColumn, UpdateDateColumn &#125; from &#x27;typeorm&#x27;;@Entity(&#x27;users&#x27;)export class User &#123; @PrimaryGeneratedColumn() id: number; @Column(&#123; unique: true &#125;) username: string; @Column(&#123; unique: true &#125;) email: string; @Column() password: string; @Column(&#123; default: &#x27;user&#x27; &#125;) role: string; @Column(&#123; default: true &#125;) isActive: boolean; @CreateDateColumn() createdAt: Date; @UpdateDateColumn() updatedAt: Date;&#125; 8.2 åˆ›å»ºç”¨æˆ·æœåŠ¡src/module/users/users.service.tsï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import &#123; Injectable, NotFoundException &#125; from &#x27;@nestjs/common&#x27;;import &#123; InjectRepository &#125; from &#x27;@nestjs/typeorm&#x27;;import &#123; Repository &#125; from &#x27;typeorm&#x27;;import * as bcrypt from &#x27;bcrypt&#x27;;import &#123; User &#125; from &#x27;./entities/user.entity&#x27;;import &#123; CreateUserDto &#125; from &#x27;./dto/create-user.dto&#x27;;import &#123; UpdateUserDto &#125; from &#x27;./dto/update-user.dto&#x27;;@Injectable()export class UsersService &#123; constructor( @InjectRepository(User) private usersRepository: Repository&lt;User&gt;, ) &#123;&#125; async create(createUserDto: CreateUserDto): Promise&lt;User&gt; &#123; // å¯†ç åŠ å¯† const hashedPassword = await bcrypt.hash(createUserDto.password, 10); const user = this.usersRepository.create(&#123; ...createUserDto, password: hashedPassword, &#125;); return this.usersRepository.save(user); &#125; async findAll(): Promise&lt;User[]&gt; &#123; return this.usersRepository.find(); &#125; async findOne(id: number): Promise&lt;User&gt; &#123; const user = await this.usersRepository.findOne(&#123; where: &#123; id &#125; &#125;); if (!user) &#123; throw new NotFoundException(`ç”¨æˆ· #$&#123;id&#125; ä¸å­˜åœ¨`); &#125; return user; &#125; async update(id: number, updateUserDto: UpdateUserDto): Promise&lt;User&gt; &#123; const user = await this.findOne(id); // å¦‚æœæ›´æ–°å¯†ç ï¼Œéœ€è¦é‡æ–°åŠ å¯† if (updateUserDto.password) &#123; updateUserDto.password = await bcrypt.hash(updateUserDto.password, 10); &#125; Object.assign(user, updateUserDto); return this.usersRepository.save(user); &#125; async remove(id: number): Promise&lt;void&gt; &#123; const user = await this.findOne(id); await this.usersRepository.remove(user); &#125; async findByUsername(username: string): Promise&lt;User | undefined&gt; &#123; return this.usersRepository.findOne(&#123; where: &#123; username &#125; &#125;); &#125;&#125; 8.3 ä½¿ç”¨NestJS CLIå¿«é€Ÿç”ŸæˆCRUDæ¨¡å—NestJS CLIæä¾›äº†å¼ºå¤§çš„èµ„æºç”Ÿæˆå‘½ä»¤ï¼Œå¯ä»¥å¿«é€Ÿåˆ›å»ºå®Œæ•´çš„CRUDæ¨¡å—ï¼š 12# ç”Ÿæˆå®Œæ•´çš„ç”¨æˆ·æ¨¡å—ï¼ˆåŒ…å«æ§åˆ¶å™¨ã€æœåŠ¡ã€å®ä½“ã€DTOç­‰ï¼‰nest g resource module/users --no-spec è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š 123456789src/module/users/â”œâ”€â”€ users.controller.ts # æ§åˆ¶å™¨â”œâ”€â”€ users.service.ts # æœåŠ¡â”œâ”€â”€ entities/â”‚ â””â”€â”€ user.entity.ts # å®ä½“ç±»â”œâ”€â”€ dto/â”‚ â”œâ”€â”€ create-user.dto.ts # åˆ›å»ºDTOâ”‚ â””â”€â”€ update-user.dto.ts # æ›´æ–°DTOâ””â”€â”€ users.module.ts # æ¨¡å—æ–‡ä»¶ å‘½ä»¤å‚æ•°è¯´æ˜ï¼š resource: ç”Ÿæˆå®Œæ•´çš„èµ„æºæ¨¡å— module/users: æŒ‡å®šæ¨¡å—è·¯å¾„å’Œåç§° --no-spec: ä¸ç”Ÿæˆæµ‹è¯•æ–‡ä»¶ï¼ˆå¦‚æœä¸éœ€è¦æµ‹è¯•ï¼‰ ç”Ÿæˆçš„æ–‡ä»¶ç»“æ„ï¼šsrc/module/users/users.module.tsï¼š 12345678910111213import &#123; Module &#125; from &#x27;@nestjs/common&#x27;;import &#123; TypeOrmModule &#125; from &#x27;@nestjs/typeorm&#x27;;import &#123; UsersService &#125; from &#x27;./users.service&#x27;;import &#123; UsersController &#125; from &#x27;./users.controller&#x27;;import &#123; User &#125; from &#x27;./entities/user.entity&#x27;;@Module(&#123; imports: [TypeOrmModule.forFeature([User])], controllers: [UsersController], providers: [UsersService], exports: [UsersService],&#125;)export class UsersModule &#123;&#125; å…¶ä»–æœ‰ç”¨çš„CLIå‘½ä»¤ï¼š1234567891011121314# å•ç‹¬ç”Ÿæˆæ§åˆ¶å™¨nest g controller module/users/users --no-spec# å•ç‹¬ç”ŸæˆæœåŠ¡nest g service module/users/users --no-spec# ç”Ÿæˆæ¨¡å—nest g module module/users# ç”Ÿæˆå®ä½“ç±»nest g class module/users/entities/user.entity --no-spec# ç”ŸæˆDTOnest g class module/users/dto/create-user.dto --no-spec ä¼˜åŠ¿ï¼š å¿«é€Ÿå¼€å‘ï¼šä¸€é”®ç”Ÿæˆå®Œæ•´æ¨¡å—ç»“æ„ æ ‡å‡†åŒ–ï¼šéµå¾ªNestJSæœ€ä½³å®è·µ ä¸€è‡´æ€§ï¼šæ‰€æœ‰æ¨¡å—ç»“æ„ç»Ÿä¸€ å¯ç»´æŠ¤æ€§ï¼šä¾¿äºå›¢é˜Ÿåä½œå’Œä»£ç ç»´æŠ¤ æ³¨æ„äº‹é¡¹ï¼š ç”Ÿæˆåéœ€è¦æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´å®ä½“å­—æ®µ å¯èƒ½éœ€è¦æ·»åŠ é¢å¤–çš„éªŒè¯è§„åˆ™ æ ¹æ®ä¸šåŠ¡é€»è¾‘å®Œå–„æœåŠ¡å±‚æ–¹æ³• 9. æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½9.1 å®‰è£…æ–‡ä»¶ä¸Šä¼ ä¾èµ–1npm install multer @types/multer 9.2 åˆ›å»ºæ–‡ä»¶ä¸Šä¼ é…ç½®src/config/multer.tsï¼š 12345678910111213141516171819202122232425262728293031323334import &#123; diskStorage &#125; from &#x27;multer&#x27;;import &#123; extname &#125; from &#x27;path&#x27;;import &#123; v4 as uuidv4 &#125; from &#x27;uuid&#x27;;export const multerConfig = &#123; storage: diskStorage(&#123; destination: &#x27;./uploads&#x27;, filename: (req, file, callback) =&gt; &#123; const uniqueName = `$&#123;uuidv4()&#125;$&#123;extname(file.originalname)&#125;`; callback(null, uniqueName); &#125;, &#125;), fileFilter: (req, file, callback) =&gt; &#123; const allowedMimes = [ &#x27;image/jpeg&#x27;, &#x27;image/png&#x27;, &#x27;image/gif&#x27;, &#x27;application/pdf&#x27;, &#x27;application/msword&#x27;, &#x27;application/vnd.openxmlformats-officedocument.wordprocessingml.document&#x27;, ]; if (allowedMimes.includes(file.mimetype)) &#123; callback(null, true); &#125; else &#123; callback(new Error(&#x27;ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹&#x27;), false); &#125; &#125;, limits: &#123; fileSize: 10 * 1024 * 1024, // 10MB &#125;,&#125;; 9.3 åˆ›å»ºæ–‡ä»¶ä¸Šä¼ æ¨¡å—src/module/upload/upload.controller.tsï¼š 12345678910111213141516171819202122232425262728293031323334353637import &#123; Controller, Post, UseInterceptors, UploadedFile, HttpException, HttpStatus &#125; from &#x27;@nestjs/common&#x27;;import &#123; FileInterceptor &#125; from &#x27;@nestjs/platform-express&#x27;;import &#123; ApiTags, ApiOperation, ApiConsumes, ApiBody &#125; from &#x27;@nestjs/swagger&#x27;;import &#123; multerConfig &#125; from &#x27;../../config/multer&#x27;;@ApiTags(&#x27;æ–‡ä»¶ä¸Šä¼ &#x27;)@Controller(&#x27;upload&#x27;)export class UploadController &#123; @Post(&#x27;file&#x27;) @ApiOperation(&#123; summary: &#x27;å•æ–‡ä»¶ä¸Šä¼ &#x27; &#125;) @ApiConsumes(&#x27;multipart/form-data&#x27;) @ApiBody(&#123; schema: &#123; type: &#x27;object&#x27;, properties: &#123; file: &#123; type: &#x27;string&#x27;, format: &#x27;binary&#x27;, &#125;, &#125;, &#125;, &#125;) @UseInterceptors(FileInterceptor(&#x27;file&#x27;, multerConfig)) uploadFile(@UploadedFile() file: Express.Multer.File) &#123; if (!file) &#123; throw new HttpException(&#x27;æ–‡ä»¶ä¸Šä¼ å¤±è´¥&#x27;, HttpStatus.BAD_REQUEST); &#125; return &#123; filename: file.filename, originalname: file.originalname, size: file.size, mimetype: file.mimetype, path: `/uploads/$&#123;file.filename&#125;`, &#125;; &#125;&#125; 10. å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ 10.1 å®‰è£…å¤§æ–‡ä»¶ä¸Šä¼ ä¾èµ–1npm install tus-node-server 10.2 åˆ›å»ºå¤§æ–‡ä»¶ä¸Šä¼ æœåŠ¡src/module/upload/large-file.service.tsï¼š 123456789101112131415161718192021import &#123; Injectable &#125; from &#x27;@nestjs/common&#x27;;import &#123; Server &#125; from &#x27;tus-node-server&#x27;;import &#123; join &#125; from &#x27;path&#x27;;@Injectable()export class LargeFileService &#123; private tusServer: Server; constructor() &#123; this.tusServer = new Server(&#123; path: &#x27;/files&#x27;, datastore: new tus.FileSystemStore(&#123; directory: join(process.cwd(), &#x27;uploads/large-files&#x27;), &#125;), &#125;); &#125; getServer(): Server &#123; return this.tusServer; &#125;&#125; 10.3 åˆ›å»ºå¤§æ–‡ä»¶ä¸Šä¼ æ§åˆ¶å™¨src/module/upload/large-file.controller.tsï¼š 123456789101112131415161718192021222324import &#123; Controller, Post, Req, Res &#125; from &#x27;@nestjs/common&#x27;;import &#123; Request, Response &#125; from &#x27;express&#x27;;import &#123; ApiTags, ApiOperation &#125; from &#x27;@nestjs/swagger&#x27;;import &#123; LargeFileService &#125; from &#x27;./large-file.service&#x27;;@ApiTags(&#x27;å¤§æ–‡ä»¶ä¸Šä¼ &#x27;)@Controller(&#x27;upload/large&#x27;)export class LargeFileController &#123; constructor(private readonly largeFileService: LargeFileService) &#123;&#125; @Post(&#x27;*&#x27;) @ApiOperation(&#123; summary: &#x27;å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ &#x27; &#125;) async handleUpload(@Req() req: Request, @Res() res: Response) &#123; return new Promise&lt;void&gt;((resolve, reject) =&gt; &#123; this.largeFileService.getServer().handle(req, res, (error) =&gt; &#123; if (error) &#123; reject(error); &#125; else &#123; resolve(); &#125; &#125;); &#125;); &#125;&#125; 11. è·¯ç”±å®ˆå«ä¸æ‹¦æˆªå™¨11.1 æ—¥å¿—æ‹¦æˆªå™¨src/common/interceptor/logger.interceptor.tsï¼š 1234567891011121314151617181920212223import &#123; Injectable, NestInterceptor, ExecutionContext, CallHandler &#125; from &#x27;@nestjs/common&#x27;;import &#123; Observable &#125; from &#x27;rxjs&#x27;;import &#123; tap &#125; from &#x27;rxjs/operators&#x27;;@Injectable()export class LoggingInterceptor implements NestInterceptor &#123; intercept(context: ExecutionContext, next: CallHandler): Observable&lt;any&gt; &#123; const request = context.switchToHttp().getRequest(); const &#123; method, url, ip, headers &#125; = request; const userAgent = headers[&#x27;user-agent&#x27;] || &#x27;&#x27;; const now = Date.now(); return next.handle().pipe( tap(() =&gt; &#123; const response = context.switchToHttp().getResponse(); const delay = Date.now() - now; console.log(`$&#123;method&#125; $&#123;url&#125; $&#123;response.statusCode&#125; $&#123;delay&#125;ms - $&#123;ip&#125; $&#123;userAgent&#125;`); &#125;), ); &#125;&#125; 11.2 è¶…æ—¶æ‹¦æˆªå™¨src/common/interceptor/timeout.interceptor.tsï¼š 123456789101112131415161718import &#123; Injectable, NestInterceptor, ExecutionContext, CallHandler, RequestTimeoutException &#125; from &#x27;@nestjs/common&#x27;;import &#123; Observable, throwError, TimeoutError &#125; from &#x27;rxjs&#x27;;import &#123; catchError, timeout &#125; from &#x27;rxjs/operators&#x27;;@Injectable()export class TimeoutInterceptor implements NestInterceptor &#123; intercept(context: ExecutionContext, next: CallHandler): Observable&lt;any&gt; &#123; return next.handle().pipe( timeout(10000), // 10ç§’è¶…æ—¶ catchError(err =&gt; &#123; if (err instanceof TimeoutError) &#123; return throwError(() =&gt; new RequestTimeoutException()); &#125; return throwError(() =&gt; err); &#125;), ); &#125;&#125; 12. æ—¥å¿—ç³»ç»Ÿ12.1 å®‰è£…æ—¥å¿—ä¾èµ–1npm install nest-winston winston winston-daily-rotate-file 12.2 åˆ›å»ºæ—¥å¿—é…ç½®src/config/logger.tsï¼š 1234567891011121314151617181920212223242526272829import &#123; utilities as nestWinstonModuleUtilities &#125; from &#x27;nest-winston&#x27;;import * as winston from &#x27;winston&#x27;;import &#x27;winston-daily-rotate-file&#x27;;export const winstonConfig = &#123; transports: [ new winston.transports.Console(&#123; format: winston.format.combine( winston.format.timestamp(), winston.format.ms(), nestWinstonModuleUtilities.format.nestLike(&#x27;NestJS&#x27;, &#123; colors: true, prettyPrint: true, &#125;), ), &#125;), new winston.transports.DailyRotateFile(&#123; filename: &#x27;logs/application-%DATE%.log&#x27;, datePattern: &#x27;YYYY-MM-DD&#x27;, zippedArchive: true, maxSize: &#x27;20m&#x27;, maxFiles: &#x27;14d&#x27;, format: winston.format.combine( winston.format.timestamp(), winston.format.json(), ), &#125;), ],&#125;; 13. ç¯å¢ƒé…ç½®ç®¡ç†13.1 åˆ›å»ºç¯å¢ƒé…ç½®.env.productionï¼š 12345678910111213NODE_ENV=productionPORT=3000# ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“DB_TYPE=mysqlDB_HOST=production-db-hostDB_PORT=3306DB_USER=prod_userDB_PASSWORD=prod_passwordDB_DATABASE=prod_nest_serveJWT_SECRET=production-secret-keyJWT_EXPIRES_IN=1d .env.testï¼š 123456789NODE_ENV=testPORT=3001# æµ‹è¯•ç¯å¢ƒæ•°æ®åº“DB_TYPE=sqliteDB_DATABASE=test-data/test.dbJWT_SECRET=test-secret-keyJWT_EXPIRES_IN=1h 14. éƒ¨ç½²ä¸ç”Ÿäº§ç¯å¢ƒ14.1 Dockeré…ç½®åˆ›å»º Dockerfileï¼š 123456789101112131415161718192021FROM node:18-alpineWORKDIR /app# å¤åˆ¶packageæ–‡ä»¶COPY package*.json ./# å®‰è£…ä¾èµ–RUN npm ci --only=production# å¤åˆ¶æºä»£ç COPY . .# æ„å»ºåº”ç”¨RUN npm run build# æš´éœ²ç«¯å£EXPOSE 3000# å¯åŠ¨åº”ç”¨CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start:prod&quot;] 14.2 Docker Composeé…ç½®åˆ›å»º docker-compose.ymlï¼š 12345678910111213141516171819202122232425262728version: &#x27;3.8&#x27;services: app: build: . ports: - &quot;3000:3000&quot; environment: - NODE_ENV=production depends_on: - db restart: unless-stopped db: image: mysql:8.0 environment: MYSQL_ROOT_PASSWORD: root_password MYSQL_DATABASE: nest_serve MYSQL_USER: app_user MYSQL_PASSWORD: app_password ports: - &quot;3306:3306&quot; volumes: - db_data:/var/lib/mysql restart: unless-stoppedvolumes: db_data: 14.3 ç”Ÿäº§ç¯å¢ƒå¯åŠ¨è„šæœ¬åœ¨ package.json ä¸­æ·»åŠ ï¼š 123456&#123; &quot;scripts&quot;: &#123; &quot;start:prod&quot;: &quot;cross-env NODE_ENV=production node dist/main&quot;, &quot;build:prod&quot;: &quot;npm run build &amp;&amp; npm prune --production&quot; &#125;&#125; æ€»ç»“æœ¬æ•™ç¨‹è¯¦ç»†ä»‹ç»äº†NestJSé¡¹ç›®ä»é›¶åˆ°ä¸€çš„å®Œæ•´å¼€å‘æµç¨‹ï¼Œæ¶µç›–äº†ï¼š é¡¹ç›®åˆå§‹åŒ– - è„šæ‰‹æ¶åˆ›å»ºå’Œé¡¹ç›®ç»“æ„è§„åˆ’ æ•°æ®åº“é…ç½® - å¤šæ•°æ®åº“è¿æ¥å’Œå®ä½“å®šä¹‰ æ•°æ®éªŒè¯ - DTOå°è£…å’ŒéªŒè¯è§„åˆ™ è®¤è¯æˆæƒ - JWTå®ç°å’Œè§’è‰²æƒé™æ§åˆ¶ æ¥å£æ–‡æ¡£ - Swaggerè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£ æ–‡ä»¶å¤„ç† - æ™®é€šä¸Šä¼ å’Œå¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼  ä¸­é—´ä»¶ - æ‹¦æˆªå™¨ã€å®ˆå«ã€è¿‡æ»¤å™¨çš„ä½¿ç”¨ æ—¥å¿—ç³»ç»Ÿ - ç»“æ„åŒ–æ—¥å¿—è®°å½•å’Œæ—¥å¿—è½®è½¬ ç¯å¢ƒé…ç½® - å¤šç¯å¢ƒé…ç½®ç®¡ç† éƒ¨ç½²è¿ç»´ - Dockerå®¹å™¨åŒ–éƒ¨ç½² å­¦ä¹ å»ºè®® å¾ªåºæ¸è¿›ï¼šæŒ‰ç…§æ•™ç¨‹é¡ºåºé€æ­¥å­¦ä¹ ï¼Œä¸è¦è·³è·ƒ åŠ¨æ‰‹å®è·µï¼šæ¯ä¸ªç« èŠ‚éƒ½è¦å®é™…ç¼–å†™ä»£ç å¹¶è¿è¡Œæµ‹è¯• ç†è§£åŸç†ï¼šä¸ä»…è¦ä¼šä½¿ç”¨ï¼Œè¿˜è¦ç†è§£èƒŒåçš„è®¾è®¡æ€æƒ³ æŸ¥é˜…æ–‡æ¡£ï¼šé‡åˆ°é—®é¢˜æ—¶æŸ¥é˜…NestJSå®˜æ–¹æ–‡æ¡£ ä»£ç è§„èŒƒï¼šå…»æˆè‰¯å¥½çš„ä»£ç ç¼–å†™ä¹ æƒ¯ å¸¸è§é—®é¢˜è§£å†³Q: æ•°æ®åº“è¿æ¥å¤±è´¥A: æ£€æŸ¥æ•°æ®åº“æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼Œé…ç½®ä¿¡æ¯æ˜¯å¦æ­£ç¡® Q: JWTä»¤ç‰Œæ— æ•ˆA: æ£€æŸ¥ä»¤ç‰Œæ˜¯å¦è¿‡æœŸï¼Œå¯†é’¥é…ç½®æ˜¯å¦æ­£ç¡® Q: æ–‡ä»¶ä¸Šä¼ å¤±è´¥A: æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™ï¼Œæ–‡ä»¶å¤§å°é™åˆ¶ Q: Swaggeræ–‡æ¡£æ— æ³•è®¿é—®A: æ£€æŸ¥Swaggeré…ç½®è·¯å¾„æ˜¯å¦æ­£ç¡® æ‰©å±•å­¦ä¹ å®Œæˆæœ¬æ•™ç¨‹åï¼Œå¯ä»¥è¿›ä¸€æ­¥å­¦ä¹ ï¼š å¾®æœåŠ¡æ¶æ„ - ä½¿ç”¨NestJSæ„å»ºå¾®æœåŠ¡ GraphQL - æ›¿ä»£REST APIçš„æŸ¥è¯¢è¯­è¨€ WebSocket - å®æ—¶é€šä¿¡åŠŸèƒ½ æ€§èƒ½ä¼˜åŒ– - ç¼“å­˜ã€æ•°æ®åº“ä¼˜åŒ–ç­‰ æµ‹è¯•é©±åŠ¨å¼€å‘ - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯• èµ„æºæ¨è NestJSå®˜æ–¹æ–‡æ¡£ TypeORMæ–‡æ¡£ Swaggeræ–‡æ¡£ Dockeræ–‡æ¡£ ç»“è¯­æœ¬æ•™ç¨‹é€šè¿‡å®é™…é¡¹ç›®æ¡ˆä¾‹ï¼Œç³»ç»Ÿæ€§åœ°è®²è§£äº†NestJSçš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µã€‚é€šè¿‡è·Ÿéšæ•™ç¨‹å­¦ä¹ ï¼Œä½ å°†èƒ½å¤Ÿï¼š âœ… æŒæ¡NestJSæ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•âœ… ç†è§£æ¨¡å—åŒ–å¼€å‘çš„æ€æƒ³å’Œå®è·µâœ… å­¦ä¼šæ•°æ®åº“è¿æ¥å’ŒORMçš„ä½¿ç”¨âœ… æŒæ¡è®¤è¯æˆæƒå’Œå®‰å…¨é˜²æŠ¤âœ… å­¦ä¼šAPIæ–‡æ¡£çš„è‡ªåŠ¨ç”Ÿæˆâœ… æŒæ¡æ–‡ä»¶ä¸Šä¼ å’Œå¤§æ–‡ä»¶å¤„ç†âœ… äº†è§£ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å’Œè¿ç»´ å¸Œæœ›æœ¬æ•™ç¨‹èƒ½å¤Ÿå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹NestJSå¼€å‘ï¼Œæ„å»ºé«˜è´¨é‡çš„Node.jsåº”ç”¨ï¼ Happy Coding! ğŸš€"},{"title":"Ginå¿«é€Ÿä¸Šæ‰‹","path":"2025/09/28/Ginå¿«é€Ÿä¸Šæ‰‹/","text":"Ginå¿«é€Ÿä¸Šæ‰‹ ä»Express/Koa/NestJSåˆ°Goè¯­è¨€Webå¼€å‘ å‰è¨€å¦‚æœä½ å·²ç»ç†Ÿæ‚‰Expressã€Koaæˆ–NestJSç­‰Node.jsæ¡†æ¶ï¼Œå­¦ä¹ Ginæ¡†æ¶å°†ä¼šéå¸¸é¡ºç•…ã€‚Ginæ˜¯Goè¯­è¨€ä¸­æœ€æµè¡Œçš„Webæ¡†æ¶ä¹‹ä¸€ï¼Œä»¥å…¶é«˜æ€§èƒ½ã€ç®€æ´çš„APIå’Œä¸°å¯Œçš„ä¸­é—´ä»¶ç”Ÿæ€è‘—ç§°ã€‚ ç¯å¢ƒæ­å»º1. Goè¯­è¨€ç¯å¢ƒå®‰è£…12345678# ä¸‹è½½å¹¶å®‰è£…Go (https://golang.org/dl/)# éªŒè¯å®‰è£…$ go versiongo version go1.22.0 darwin/amd64# è®¾ç½®GOPATHå’ŒGOROOTï¼ˆç°ä»£Goç‰ˆæœ¬é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼‰$ go env GOPATH/Users/username/go 2. åˆ›å»ºé¡¹ç›®12345678# åˆ›å»ºé¡¹ç›®ç›®å½•$ mkdir gin-demo &amp;&amp; cd gin-demo# åˆå§‹åŒ–Goæ¨¡å—$ go mod init gin-demo# å®‰è£…Ginæ¡†æ¶ï¼ˆæ¨èä½¿ç”¨Go Modulesï¼‰$ go get github.com/gin-gonic/gin@latest 3. å¼€å‘å·¥å…·æ¨è VS Code + Goæ’ä»¶ GoLand (JetBrains IDE) Goland (ç¤¾åŒºç‰ˆ) Goè¯­è¨€åŸºç¡€ï¼ˆå¯¹æ¯”JavaScript/TypeScriptï¼‰å˜é‡å£°æ˜å·®å¼‚123456789101112131415// Goè¯­è¨€package mainimport &quot;fmt&quot;func main() &#123; // å˜é‡å£°æ˜ï¼ˆç±»å‹åœ¨åï¼‰ var name string = &quot;Gin&quot; age := 25 // ç±»å‹æ¨æ–­ // å¸¸é‡ const version = &quot;1.0.0&quot; fmt.Println(name, age, version)&#125; 123456// JavaScriptå¯¹æ¯”const name = &quot;Gin&quot;;let age = 25;const version = &quot;1.0.0&quot;;console.log(name, age, version); å‡½æ•°å®šä¹‰å·®å¼‚1234567891011121314151617181920// Goè¯­è¨€å‡½æ•°func add(a int, b int) int &#123; return a + b&#125;// å¤šè¿”å›å€¼func divide(a, b float64) (float64, error) &#123; if b == 0 &#123; return 0, fmt.Errorf(&quot;é™¤æ•°ä¸èƒ½ä¸ºé›¶&quot;) &#125; return a / b, nil&#125;// åŒ¿åå‡½æ•°func main() &#123; square := func(x int) int &#123; return x * x &#125; fmt.Println(square(5))&#125; 12345678910111213141516// JavaScriptå‡½æ•°å¯¹æ¯”function add(a, b) &#123; return a + b;&#125;// ç°ä»£JSï¼ˆç®­å¤´å‡½æ•°ï¼‰const divide = (a, b) =&gt; &#123; if (b === 0) &#123; throw new Error(&quot;é™¤æ•°ä¸èƒ½ä¸ºé›¶&quot;); &#125; return a / b;&#125;;// åŒ¿åå‡½æ•°const square = (x) =&gt; x * x;console.log(square(5)); é”™è¯¯å¤„ç†å·®å¼‚123456789101112131415161718// Goè¯­è¨€é”™è¯¯å¤„ç†func readFile(filename string) error &#123; data, err := os.ReadFile(filename) if err != nil &#123; return fmt.Errorf(&quot;è¯»å–æ–‡ä»¶å¤±è´¥: %v&quot;, err) &#125; // å¤„ç†æ•°æ® fmt.Println(string(data)) return nil&#125;// ä½¿ç”¨é”™è¯¯func main() &#123; if err := readFile(&quot;config.yaml&quot;); err != nil &#123; log.Fatal(err) &#125;&#125; 1234567891011121314// JavaScripté”™è¯¯å¤„ç†ï¼ˆasync/awaitï¼‰async function readFile(filename) &#123; try &#123; const data = await fs.promises.readFile(filename, &#x27;utf8&#x27;); console.log(data); &#125; catch (error) &#123; throw new Error(`è¯»å–æ–‡ä»¶å¤±è´¥: $&#123;error.message&#125;`); &#125;&#125;// ä½¿ç”¨readFile(&#x27;config.yaml&#x27;).catch(error =&gt; &#123; console.error(error);&#125;); Ginæ¡†æ¶åŸºç¡€1. ç¬¬ä¸€ä¸ªGinåº”ç”¨12345678910111213141516171819// main.gopackage mainimport &quot;github.com/gin-gonic/gin&quot;func main() &#123; // åˆ›å»ºGinå®ä¾‹ï¼ˆç±»ä¼¼Expressçš„app = express()ï¼‰ r := gin.Default() // å®šä¹‰è·¯ç”±ï¼ˆå¯¹æ¯”Expressçš„app.get()ï¼‰ r.GET(&quot;/&quot;, func(c *gin.Context) &#123; c.JSON(200, gin.H&#123; &quot;message&quot;: &quot;Hello Gin!&quot;, &#125;) &#125;) // å¯åŠ¨æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£8080ï¼‰ r.Run() // ç›¸å½“äº app.listen(8080)&#125; 2. è·¯ç”±å®šä¹‰å¯¹æ¯”123456789101112131415161718192021222324// Ginè·¯ç”±å®šä¹‰r.GET(&quot;/users&quot;, getUsers)r.POST(&quot;/users&quot;, createUser)r.PUT(&quot;/users/:id&quot;, updateUser)r.DELETE(&quot;/users/:id&quot;, deleteUser)// è·¯ç”±ç»„ï¼ˆç±»ä¼¼Expressçš„Routerï¼‰api := r.Group(&quot;/api&quot;)&#123; api.GET(&quot;/users&quot;, getUsers) api.POST(&quot;/users&quot;, createUser)&#125;// è·¯å¾„å‚æ•°r.GET(&quot;/users/:id&quot;, func(c *gin.Context) &#123; id := c.Param(&quot;id&quot;) // ç±»ä¼¼Expressçš„req.params.id c.JSON(200, gin.H&#123;&quot;id&quot;: id&#125;)&#125;)// æŸ¥è¯¢å‚æ•°r.GET(&quot;/search&quot;, func(c *gin.Context) &#123; query := c.Query(&quot;q&quot;) // ç±»ä¼¼Expressçš„req.query.q c.JSON(200, gin.H&#123;&quot;query&quot;: query&#125;)&#125;) 1234567891011121314151617181920212223// Expresså¯¹æ¯”app.get(&#x27;/users&#x27;, getUsers);app.post(&#x27;/users&#x27;, createUser);app.put(&#x27;/users/:id&#x27;, updateUser);app.delete(&#x27;/users/:id&#x27;, deleteUser);// è·¯ç”±ç»„const apiRouter = express.Router();apiRouter.get(&#x27;/users&#x27;, getUsers);apiRouter.post(&#x27;/users&#x27;, createUser);app.use(&#x27;/api&#x27;, apiRouter);// è·¯å¾„å‚æ•°app.get(&#x27;/users/:id&#x27;, (req, res) =&gt; &#123; const id = req.params.id; res.json(&#123; id &#125;);&#125;);// æŸ¥è¯¢å‚æ•°app.get(&#x27;/search&#x27;, (req, res) =&gt; &#123; const query = req.query.q; res.json(&#123; query &#125;);&#125;); 3. è¯·æ±‚å’Œå“åº”å¤„ç†123456789101112131415161718192021222324252627282930313233343536373839404142434445// è¯·æ±‚ä½“è§£æï¼ˆJSONï¼‰type User struct &#123; Name string `json:&quot;name&quot; binding:&quot;required&quot;` Email string `json:&quot;email&quot; binding:&quot;required,email&quot;`&#125;r.POST(&quot;/users&quot;, func(c *gin.Context) &#123; var user User // ç»‘å®šJSONï¼ˆç±»ä¼¼Expressçš„body-parserï¼‰ if err := c.ShouldBindJSON(&amp;user); err != nil &#123; c.JSON(400, gin.H&#123;&quot;error&quot;: err.Error()&#125;) return &#125; c.JSON(201, gin.H&#123;&quot;user&quot;: user&#125;)&#125;)// æ–‡ä»¶ä¸Šä¼ r.POST(&quot;/upload&quot;, func(c *gin.Context) &#123; file, err := c.FormFile(&quot;file&quot;) if err != nil &#123; c.JSON(400, gin.H&#123;&quot;error&quot;: &quot;æ–‡ä»¶ä¸Šä¼ å¤±è´¥&quot;&#125;) return &#125; // ä¿å­˜æ–‡ä»¶ c.SaveUploadedFile(file, &quot;./uploads/&quot;+file.Filename) c.JSON(200, gin.H&#123;&quot;message&quot;: &quot;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ&quot;&#125;)&#125;)// å“åº”ç±»å‹r.GET(&quot;/response&quot;, func(c *gin.Context) &#123; // JSONå“åº” c.JSON(200, gin.H&#123;&quot;type&quot;: &quot;json&quot;&#125;) // å­—ç¬¦ä¸²å“åº” c.String(200, &quot;Hello World&quot;) // HTMLå“åº” c.HTML(200, &quot;index.html&quot;, gin.H&#123;&quot;title&quot;: &quot;Gin&quot;&#125;) // æ–‡ä»¶ä¸‹è½½ c.File(&quot;./downloads/file.zip&quot;)&#125;) ä¸­é—´ä»¶ç³»ç»Ÿ1. å†…ç½®ä¸­é—´ä»¶12345678910111213141516171819202122232425262728293031func main() &#123; r := gin.New() // ä½¿ç”¨é»˜è®¤ä¸­é—´ä»¶ï¼ˆæ—¥å¿—å’Œæ¢å¤ï¼‰ r.Use(gin.Logger(), gin.Recovery()) // é™æ€æ–‡ä»¶æœåŠ¡ï¼ˆç±»ä¼¼Expressçš„express.static()ï¼‰ r.Static(&quot;/static&quot;, &quot;./public&quot;) // å•ä¸ªè·¯ç”±ä¸­é—´ä»¶ r.GET(&quot;/admin&quot;, authMiddleware(), adminHandler) r.Run()&#125;// è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼ˆç±»ä¼¼Expressçš„(req, res, next)ï¼‰func authMiddleware() gin.HandlerFunc &#123; return func(c *gin.Context) &#123; token := c.GetHeader(&quot;Authorization&quot;) if token == &quot;&quot; &#123; c.JSON(401, gin.H&#123;&quot;error&quot;: &quot;æœªæˆæƒ&quot;&#125;) c.Abort() // ç±»ä¼¼Expressçš„next()ä½†ç”¨äºç»ˆæ­¢ return &#125; // éªŒè¯tokené€»è¾‘ c.Set(&quot;user&quot;, &quot;authenticated-user&quot;) // ç±»ä¼¼Expressçš„req.user c.Next() // ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶/å¤„ç†å™¨ &#125;&#125; 2. ä¸­é—´ä»¶æ‰§è¡Œé¡ºåº1234567891011121314151617181920212223func main() &#123; r := gin.New() // å…¨å±€ä¸­é—´ä»¶ï¼ˆæŒ‰æ·»åŠ é¡ºåºæ‰§è¡Œï¼‰ r.Use(loggerMiddleware) r.Use(authMiddleware) // è·¯ç”±ç»„ä¸­é—´ä»¶ admin := r.Group(&quot;/admin&quot;) admin.Use(adminAuthMiddleware) &#123; admin.GET(&quot;/dashboard&quot;, dashboardHandler) &#125; r.Run()&#125;func loggerMiddleware(c *gin.Context) &#123; start := time.Now() c.Next() latency := time.Since(start) log.Printf(&quot;è¯·æ±‚ %s è€—æ—¶ %v&quot;, c.Request.URL.Path, latency)&#125; æ•°æ®åº“æ“ä½œ1. å¤šæ•°æ®åº“è¿æ¥é…ç½®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485// config/database.gopackage configimport ( &quot;gorm.io/driver/mysql&quot; &quot;gorm.io/driver/postgres&quot; &quot;gorm.io/driver/sqlite&quot; &quot;gorm.io/gorm&quot;)type DatabaseConfig struct &#123; Driver string `yaml:&quot;driver&quot;` Host string `yaml:&quot;host&quot;` Port string `yaml:&quot;port&quot;` Username string `yaml:&quot;username&quot;` Password string `yaml:&quot;password&quot;` Database string `yaml:&quot;database&quot;`&#125;func ConnectDB(config DatabaseConfig) (*gorm.DB, error) &#123; var dialector gorm.Dialector switch config.Driver &#123; case &quot;mysql&quot;: dsn := fmt.Sprintf(&quot;%s:%s@tcp(%s:%s)/%s?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;, config.Username, config.Password, config.Host, config.Port, config.Database) dialector = mysql.Open(dsn) case &quot;postgres&quot;: dsn := fmt.Sprintf(&quot;host=%s user=%s password=%s dbname=%s port=%s sslmode=disable&quot;, config.Host, config.Username, config.Password, config.Database, config.Port) dialector = postgres.Open(dsn) case &quot;sqlite&quot;: dialector = sqlite.Open(config.Database) default: return nil, fmt.Errorf(&quot;ä¸æ”¯æŒçš„æ•°æ®åº“é©±åŠ¨: %s&quot;, config.Driver) &#125; return gorm.Open(dialector, &amp;gorm.Config&#123;&#125;)&#125;// å¤šæ•°æ®åº“è¿æ¥var ( PrimaryDB *gorm.DB ReadOnlyDB *gorm.DB AnalyticsDB *gorm.DB)func InitDatabases() error &#123; var err error // ä¸»æ•°æ®åº“ï¼ˆè¯»å†™ï¼‰ PrimaryDB, err = ConnectDB(DatabaseConfig&#123; Driver: &quot;mysql&quot;, Host: &quot;localhost&quot;, Port: &quot;3306&quot;, Username: &quot;root&quot;, Password: &quot;password&quot;, Database: &quot;primary_db&quot;, &#125;) // åªè¯»æ•°æ®åº“å‰¯æœ¬ ReadOnlyDB, err = ConnectDB(DatabaseConfig&#123; Driver: &quot;mysql&quot;, Host: &quot;readonly-host&quot;, Port: &quot;3306&quot;, Username: &quot;readonly_user&quot;, Password: &quot;password&quot;, Database: &quot;primary_db&quot;, &#125;) // åˆ†ææ•°æ®åº“ AnalyticsDB, err = ConnectDB(DatabaseConfig&#123; Driver: &quot;postgres&quot;, Host: &quot;analytics-host&quot;, Port: &quot;5432&quot;, Username: &quot;analytics_user&quot;, Password: &quot;password&quot;, Database: &quot;analytics_db&quot;, &#125;) return err&#125; 2. æ¨¡å‹å®šä¹‰å’ŒCRUDæ“ä½œ1234567891011121314151617181920212223242526272829303132333435// models/user.gopackage modelsimport ( &quot;gorm.io/gorm&quot; &quot;time&quot;)type User struct &#123; ID uint `gorm:&quot;primaryKey&quot; json:&quot;id&quot;` Name string `gorm:&quot;size:100;not null&quot; json:&quot;name&quot;` Email string `gorm:&quot;size:255;uniqueIndex;not null&quot; json:&quot;email&quot;` Password string `gorm:&quot;size:255;not null&quot; json:&quot;-&quot;` // ä¸åºåˆ—åŒ–åˆ°JSON Age int `gorm:&quot;default:0&quot; json:&quot;age&quot;` CreatedAt time.Time `json:&quot;created_at&quot;` UpdatedAt time.Time `json:&quot;updated_at&quot;` DeletedAt gorm.DeletedAt `gorm:&quot;index&quot; json:&quot;-&quot;`&#125;// ç”¨æˆ·è¡¨åfunc (User) TableName() string &#123; return &quot;users&quot;&#125;// ä¸šåŠ¡é€»è¾‘æ–¹æ³•func (u *User) BeforeCreate(tx *gorm.DB) error &#123; u.CreatedAt = time.Now() u.UpdatedAt = time.Now() return nil&#125;func (u *User) BeforeUpdate(tx *gorm.DB) error &#123; u.UpdatedAt = time.Now() return nil&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141// handlers/user.gopackage handlersimport ( &quot;gin-demo/models&quot; &quot;net/http&quot; &quot;strconv&quot; &quot;github.com/gin-gonic/gin&quot; &quot;gorm.io/gorm&quot;)type UserHandler struct &#123; DB *gorm.DB&#125;func NewUserHandler(db *gorm.DB) *UserHandler &#123; return &amp;UserHandler&#123;DB: db&#125;&#125;// è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆGET /usersï¼‰func (h *UserHandler) GetUsers(c *gin.Context) &#123; var users []models.User // åˆ†é¡µå‚æ•° page, _ := strconv.Atoi(c.DefaultQuery(&quot;page&quot;, &quot;1&quot;)) limit, _ := strconv.Atoi(c.DefaultQuery(&quot;limit&quot;, &quot;10&quot;)) offset := (page - 1) * limit // æŸ¥è¯¢ result := h.DB.Offset(offset).Limit(limit).Find(&amp;users) if result.Error != nil &#123; c.JSON(http.StatusInternalServerError, gin.H&#123;&quot;error&quot;: &quot;æŸ¥è¯¢å¤±è´¥&quot;&#125;) return &#125; // è·å–æ€»æ•° var total int64 h.DB.Model(&amp;models.User&#123;&#125;).Count(&amp;total) c.JSON(http.StatusOK, gin.H&#123; &quot;users&quot;: users, &quot;pagination&quot;: gin.H&#123; &quot;page&quot;: page, &quot;limit&quot;: limit, &quot;total&quot;: total, &#125;, &#125;)&#125;// è·å–å•ä¸ªç”¨æˆ·ï¼ˆGET /users/:idï¼‰func (h *UserHandler) GetUser(c *gin.Context) &#123; id, err := strconv.Atoi(c.Param(&quot;id&quot;)) if err != nil &#123; c.JSON(http.StatusBadRequest, gin.H&#123;&quot;error&quot;: &quot;æ— æ•ˆçš„ç”¨æˆ·ID&quot;&#125;) return &#125; var user models.User result := h.DB.First(&amp;user, id) if result.Error != nil &#123; if result.Error == gorm.ErrRecordNotFound &#123; c.JSON(http.StatusNotFound, gin.H&#123;&quot;error&quot;: &quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;&#125;) &#125; else &#123; c.JSON(http.StatusInternalServerError, gin.H&#123;&quot;error&quot;: &quot;æŸ¥è¯¢å¤±è´¥&quot;&#125;) &#125; return &#125; c.JSON(http.StatusOK, gin.H&#123;&quot;user&quot;: user&#125;)&#125;// åˆ›å»ºç”¨æˆ·ï¼ˆPOST /usersï¼‰func (h *UserHandler) CreateUser(c *gin.Context) &#123; var user models.User if err := c.ShouldBindJSON(&amp;user); err != nil &#123; c.JSON(http.StatusBadRequest, gin.H&#123;&quot;error&quot;: err.Error()&#125;) return &#125; // å¯†ç åŠ å¯†ï¼ˆåœ¨å®é™…é¡¹ç›®ä¸­åº”è¯¥ä½¿ç”¨bcryptï¼‰ // user.Password = hashPassword(user.Password) result := h.DB.Create(&amp;user) if result.Error != nil &#123; c.JSON(http.StatusInternalServerError, gin.H&#123;&quot;error&quot;: &quot;åˆ›å»ºç”¨æˆ·å¤±è´¥&quot;&#125;) return &#125; c.JSON(http.StatusCreated, gin.H&#123;&quot;user&quot;: user&#125;)&#125;// æ›´æ–°ç”¨æˆ·ï¼ˆPUT /users/:idï¼‰func (h *UserHandler) UpdateUser(c *gin.Context) &#123; id, err := strconv.Atoi(c.Param(&quot;id&quot;)) if err != nil &#123; c.JSON(http.StatusBadRequest, gin.H&#123;&quot;error&quot;: &quot;æ— æ•ˆçš„ç”¨æˆ·ID&quot;&#125;) return &#125; var user models.User result := h.DB.First(&amp;user, id) if result.Error != nil &#123; c.JSON(http.StatusNotFound, gin.H&#123;&quot;error&quot;: &quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;&#125;) return &#125; var updateData map[string]interface&#123;&#125; if err := c.ShouldBindJSON(&amp;updateData); err != nil &#123; c.JSON(http.StatusBadRequest, gin.H&#123;&quot;error&quot;: err.Error()&#125;) return &#125; // æ›´æ–°ç”¨æˆ· h.DB.Model(&amp;user).Updates(updateData) c.JSON(http.StatusOK, gin.H&#123;&quot;user&quot;: user&#125;)&#125;// åˆ é™¤ç”¨æˆ·ï¼ˆDELETE /users/:idï¼‰func (h *UserHandler) DeleteUser(c *gin.Context) &#123; id, err := strconv.Atoi(c.Param(&quot;id&quot;)) if err != nil &#123; c.JSON(http.StatusBadRequest, gin.H&#123;&quot;error&quot;: &quot;æ— æ•ˆçš„ç”¨æˆ·ID&quot;&#125;) return &#125; result := h.DB.Delete(&amp;models.User&#123;&#125;, id) if result.Error != nil &#123; c.JSON(http.StatusInternalServerError, gin.H&#123;&quot;error&quot;: &quot;åˆ é™¤å¤±è´¥&quot;&#125;) return &#125; if result.RowsAffected == 0 &#123; c.JSON(http.StatusNotFound, gin.H&#123;&quot;error&quot;: &quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;&#125;) return &#125; c.JSON(http.StatusOK, gin.H&#123;&quot;message&quot;: &quot;ç”¨æˆ·åˆ é™¤æˆåŠŸ&quot;&#125;)&#125; JWTè®¤è¯å’ŒåŠ å¯†1. JWTå·¥å…·ç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960// utils/jwt.gopackage utilsimport ( &quot;time&quot; &quot;github.com/golang-jwt/jwt/v5&quot;)var jwtSecret = []byte(&quot;your-secret-key&quot;)type Claims struct &#123; UserID uint `json:&quot;user_id&quot;` jwt.RegisteredClaims&#125;// ç”ŸæˆJWT Tokenfunc GenerateToken(userID uint) (string, error) &#123; nowTime := time.Now() expireTime := nowTime.Add(24 * time.Hour) claims := Claims&#123; UserID: userID, RegisteredClaims: jwt.RegisteredClaims&#123; ExpiresAt: jwt.NewNumericDate(expireTime), IssuedAt: jwt.NewNumericDate(nowTime), Issuer: &quot;gin-demo&quot;, &#125;, &#125; tokenClaims := jwt.NewWithClaims(jwt.SigningMethodHS256, claims) token, err := tokenClaims.SignedString(jwtSecret) return token, err&#125;// è§£æJWT Tokenfunc ParseToken(token string) (*Claims, error) &#123; tokenClaims, err := jwt.ParseWithClaims(token, &amp;Claims&#123;&#125;, func(token *jwt.Token) (interface&#123;&#125;, error) &#123; return jwtSecret, nil &#125;) if tokenClaims != nil &#123; if claims, ok := tokenClaims.Claims.(*Claims); ok &amp;&amp; tokenClaims.Valid &#123; return claims, nil &#125; &#125; return nil, err&#125;// éªŒè¯Tokenfunc ValidateToken(token string) bool &#123; claims, err := ParseToken(token) if err != nil &#123; return false &#125; // æ£€æŸ¥tokenæ˜¯å¦è¿‡æœŸ return claims.ExpiresAt.Time.After(time.Now())&#125; 2. å¯†ç åŠ å¯†å·¥å…·123456789101112131415161718// utils/password.gopackage utilsimport ( &quot;golang.org/x/crypto/bcrypt&quot;)// åŠ å¯†å¯†ç func HashPassword(password string) (string, error) &#123; bytes, err := bcrypt.GenerateFromPassword([]byte(password), bcrypt.DefaultCost) return string(bytes), err&#125;// éªŒè¯å¯†ç func CheckPasswordHash(password, hash string) bool &#123; err := bcrypt.CompareHashAndPassword([]byte(hash), []byte(password)) return err == nil&#125; 3. è®¤è¯ä¸­é—´ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142// middleware/auth.gopackage middlewareimport ( &quot;gin-demo/utils&quot; &quot;net/http&quot; &quot;strings&quot; &quot;github.com/gin-gonic/gin&quot;)func JWTAuth() gin.HandlerFunc &#123; return func(c *gin.Context) &#123; // ä»Headerè·å–token authHeader := c.GetHeader(&quot;Authorization&quot;) if authHeader == &quot;&quot; &#123; c.JSON(http.StatusUnauthorized, gin.H&#123;&quot;error&quot;: &quot;è¯·æä¾›è®¤è¯token&quot;&#125;) c.Abort() return &#125; // æ£€æŸ¥Beareræ ¼å¼ parts := strings.SplitN(authHeader, &quot; &quot;, 2) if !(len(parts) == 2 &amp;&amp; parts[0] == &quot;Bearer&quot;) &#123; c.JSON(http.StatusUnauthorized, gin.H&#123;&quot;error&quot;: &quot;tokenæ ¼å¼é”™è¯¯&quot;&#125;) c.Abort() return &#125; // è§£ætoken claims, err := utils.ParseToken(parts[1]) if err != nil &#123; c.JSON(http.StatusUnauthorized, gin.H&#123;&quot;error&quot;: &quot;æ— æ•ˆçš„token&quot;&#125;) c.Abort() return &#125; // å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥ä¸Šä¸‹æ–‡ c.Set(&quot;userID&quot;, claims.UserID) c.Next() &#125;&#125; 4. è®¤è¯è·¯ç”±123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125// handlers/auth.gopackage handlersimport ( &quot;gin-demo/models&quot; &quot;gin-demo/utils&quot; &quot;net/http&quot; &quot;github.com/gin-gonic/gin&quot; &quot;gorm.io/gorm&quot;)type AuthHandler struct &#123; DB *gorm.DB&#125;func NewAuthHandler(db *gorm.DB) *AuthHandler &#123; return &amp;AuthHandler&#123;DB: db&#125;&#125;// æ³¨å†Œfunc (h *AuthHandler) Register(c *gin.Context) &#123; var user models.User if err := c.ShouldBindJSON(&amp;user); err != nil &#123; c.JSON(http.StatusBadRequest, gin.H&#123;&quot;error&quot;: err.Error()&#125;) return &#125; // æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨ var existingUser models.User if err := h.DB.Where(&quot;email = ?&quot;, user.Email).First(&amp;existingUser).Error; err == nil &#123; c.JSON(http.StatusBadRequest, gin.H&#123;&quot;error&quot;: &quot;é‚®ç®±å·²å­˜åœ¨&quot;&#125;) return &#125; // åŠ å¯†å¯†ç  hashedPassword, err := utils.HashPassword(user.Password) if err != nil &#123; c.JSON(http.StatusInternalServerError, gin.H&#123;&quot;error&quot;: &quot;å¯†ç åŠ å¯†å¤±è´¥&quot;&#125;) return &#125; user.Password = hashedPassword // åˆ›å»ºç”¨æˆ· if err := h.DB.Create(&amp;user).Error; err != nil &#123; c.JSON(http.StatusInternalServerError, gin.H&#123;&quot;error&quot;: &quot;åˆ›å»ºç”¨æˆ·å¤±è´¥&quot;&#125;) return &#125; c.JSON(http.StatusCreated, gin.H&#123; &quot;message&quot;: &quot;æ³¨å†ŒæˆåŠŸ&quot;, &quot;user&quot;: gin.H&#123; &quot;id&quot;: user.ID, &quot;name&quot;: user.Name, &quot;email&quot;: user.Email, &#125;, &#125;)&#125;// ç™»å½•func (h *AuthHandler) Login(c *gin.Context) &#123; var loginData struct &#123; Email string `json:&quot;email&quot; binding:&quot;required,email&quot;` Password string `json:&quot;password&quot; binding:&quot;required&quot;` &#125; if err := c.ShouldBindJSON(&amp;loginData); err != nil &#123; c.JSON(http.StatusBadRequest, gin.H&#123;&quot;error&quot;: err.Error()&#125;) return &#125; // æŸ¥æ‰¾ç”¨æˆ· var user models.User if err := h.DB.Where(&quot;email = ?&quot;, loginData.Email).First(&amp;user).Error; err != nil &#123; c.JSON(http.StatusUnauthorized, gin.H&#123;&quot;error&quot;: &quot;é‚®ç®±æˆ–å¯†ç é”™è¯¯&quot;&#125;) return &#125; // éªŒè¯å¯†ç  if !utils.CheckPasswordHash(loginData.Password, user.Password) &#123; c.JSON(http.StatusUnauthorized, gin.H&#123;&quot;error&quot;: &quot;é‚®ç®±æˆ–å¯†ç é”™è¯¯&quot;&#125;) return &#125; // ç”Ÿæˆtoken token, err := utils.GenerateToken(user.ID) if err != nil &#123; c.JSON(http.StatusInternalServerError, gin.H&#123;&quot;error&quot;: &quot;tokenç”Ÿæˆå¤±è´¥&quot;&#125;) return &#125; c.JSON(http.StatusOK, gin.H&#123; &quot;message&quot;: &quot;ç™»å½•æˆåŠŸ&quot;, &quot;token&quot;: token, &quot;user&quot;: gin.H&#123; &quot;id&quot;: user.ID, &quot;name&quot;: user.Name, &quot;email&quot;: user.Email, &#125;, &#125;)&#125;// è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯func (h *AuthHandler) GetCurrentUser(c *gin.Context) &#123; userID, exists := c.Get(&quot;userID&quot;) if !exists &#123; c.JSON(http.StatusUnauthorized, gin.H&#123;&quot;error&quot;: &quot;æœªè®¤è¯&quot;&#125;) return &#125; var user models.User if err := h.DB.First(&amp;user, userID).Error; err != nil &#123; c.JSON(http.StatusNotFound, gin.H&#123;&quot;error&quot;: &quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;&#125;) return &#125; c.JSON(http.StatusOK, gin.H&#123; &quot;user&quot;: gin.H&#123; &quot;id&quot;: user.ID, &quot;name&quot;: user.Name, &quot;email&quot;: user.Email, &#125;, &#125;)&#125; é¡¹ç›®ç»“æ„å’Œé…ç½®1. å®Œæ•´çš„é¡¹ç›®ç»“æ„123456789101112131415161718192021222324252627gin-demo/â”œâ”€â”€ main.go # åº”ç”¨å…¥å£â”œâ”€â”€ go.mod # Goæ¨¡å—æ–‡ä»¶â”œâ”€â”€ go.sum # ä¾èµ–æ ¡éªŒâ”œâ”€â”€ config/â”‚ â”œâ”€â”€ config.go # é…ç½®æ–‡ä»¶â”‚ â””â”€â”€ database.go # æ•°æ®åº“é…ç½®â”œâ”€â”€ models/â”‚ â”œâ”€â”€ user.go # ç”¨æˆ·æ¨¡å‹â”‚ â””â”€â”€ product.go # äº§å“æ¨¡å‹â”œâ”€â”€ handlers/â”‚ â”œâ”€â”€ user.go # ç”¨æˆ·å¤„ç†å™¨â”‚ â”œâ”€â”€ auth.go # è®¤è¯å¤„ç†å™¨â”‚ â””â”€â”€ product.go # äº§å“å¤„ç†å™¨â”œâ”€â”€ middleware/â”‚ â”œâ”€â”€ auth.go # è®¤è¯ä¸­é—´ä»¶â”‚ â”œâ”€â”€ logger.go # æ—¥å¿—ä¸­é—´ä»¶â”‚ â””â”€â”€ cors.go # CORSä¸­é—´ä»¶â”œâ”€â”€ utils/â”‚ â”œâ”€â”€ jwt.go # JWTå·¥å…·â”‚ â”œâ”€â”€ password.go # å¯†ç å·¥å…·â”‚ â””â”€â”€ response.go # å“åº”å·¥å…·â”œâ”€â”€ routes/â”‚ â””â”€â”€ routes.go # è·¯ç”±å®šä¹‰â””â”€â”€ tests/ â”œâ”€â”€ user_test.go # ç”¨æˆ·æµ‹è¯• â””â”€â”€ auth_test.go # è®¤è¯æµ‹è¯• 2. é…ç½®æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839// config/config.gopackage configimport ( &quot;log&quot; &quot;os&quot; &quot;strconv&quot; &quot;github.com/joho/godotenv&quot;)type Config struct &#123; AppPort string DatabaseURL string JWTSecret string DebugMode bool&#125;func LoadConfig() *Config &#123; // åŠ è½½.envæ–‡ä»¶ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ if err := godotenv.Load(); err != nil &#123; log.Println(&quot;æœªæ‰¾åˆ°.envæ–‡ä»¶ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡&quot;) &#125; debugMode, _ := strconv.ParseBool(getEnv(&quot;DEBUG&quot;, &quot;false&quot;)) return &amp;Config&#123; AppPort: getEnv(&quot;APP_PORT&quot;, &quot;8080&quot;), DatabaseURL: getEnv(&quot;DATABASE_URL&quot;, &quot;root:password@tcp(localhost:3306)/gin_demo&quot;), JWTSecret: getEnv(&quot;JWT_SECRET&quot;, &quot;your-secret-key&quot;), DebugMode: debugMode, &#125;&#125;func getEnv(key, defaultValue string) string &#123; if value := os.Getenv(key); value != &quot;&quot; &#123; return value &#125; return defaultValue&#125; 3. è·¯ç”±å®šä¹‰1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253// routes/routes.gopackage routesimport ( &quot;gin-demo/config&quot; &quot;gin-demo/handlers&quot; &quot;gin-demo/middleware&quot; &quot;github.com/gin-gonic/gin&quot; &quot;gorm.io/gorm&quot;)func SetupRoutes(router *gin.Engine, db *gorm.DB, cfg *config.Config) &#123; // åˆå§‹åŒ–å¤„ç†å™¨ userHandler := handlers.NewUserHandler(db) authHandler := handlers.NewAuthHandler(db) // å…¬å…±è·¯ç”± public := router.Group(&quot;/api&quot;) &#123; // è®¤è¯è·¯ç”± auth := public.Group(&quot;/auth&quot;) &#123; auth.POST(&quot;/register&quot;, authHandler.Register) auth.POST(&quot;/login&quot;, authHandler.Login) &#125; // å…¬å¼€çš„ç”¨æˆ·è·¯ç”± public.GET(&quot;/users&quot;, userHandler.GetUsers) public.GET(&quot;/users/:id&quot;, userHandler.GetUser) &#125; // éœ€è¦è®¤è¯çš„è·¯ç”± protected := public.Group(&quot;&quot;) protected.Use(middleware.JWTAuth()) &#123; // ç”¨æˆ·ç®¡ç† users := protected.Group(&quot;/users&quot;) &#123; users.POST(&quot;&quot;, userHandler.CreateUser) users.PUT(&quot;/:id&quot;, userHandler.UpdateUser) users.DELETE(&quot;/:id&quot;, userHandler.DeleteUser) &#125; // è·å–å½“å‰ç”¨æˆ· protected.GET(&quot;/me&quot;, authHandler.GetCurrentUser) &#125; // å¥åº·æ£€æŸ¥ router.GET(&quot;/health&quot;, func(c *gin.Context) &#123; c.JSON(200, gin.H&#123;&quot;status&quot;: &quot;ok&quot;&#125;) &#125;)&#125; 4. ä¸»ç¨‹åºå…¥å£1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// main.gopackage mainimport ( &quot;gin-demo/config&quot; &quot;gin-demo/models&quot; &quot;gin-demo/routes&quot; &quot;log&quot; &quot;github.com/gin-gonic/gin&quot; &quot;gorm.io/gorm&quot;)func main() &#123; // åŠ è½½é…ç½® cfg := config.LoadConfig() // è®¾ç½®Ginæ¨¡å¼ if cfg.DebugMode &#123; gin.SetMode(gin.DebugMode) &#125; else &#123; gin.SetMode(gin.ReleaseMode) &#125; // åˆ›å»ºGinå®ä¾‹ router := gin.Default() // è¿æ¥æ•°æ®åº“ db, err := config.ConnectDB() if err != nil &#123; log.Fatal(&quot;æ•°æ®åº“è¿æ¥å¤±è´¥:&quot;, err) &#125; // è‡ªåŠ¨è¿ç§»ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ if cfg.DebugMode &#123; err = db.AutoMigrate(&amp;models.User&#123;&#125;) if err != nil &#123; log.Fatal(&quot;æ•°æ®åº“è¿ç§»å¤±è´¥:&quot;, err) &#125; &#125; // è®¾ç½®è·¯ç”± routes.SetupRoutes(router, db, cfg) // å¯åŠ¨æœåŠ¡å™¨ log.Printf(&quot;æœåŠ¡å™¨å¯åŠ¨åœ¨ç«¯å£ %s&quot;, cfg.AppPort) if err := router.Run(&quot;:&quot; + cfg.AppPort); err != nil &#123; log.Fatal(&quot;æœåŠ¡å™¨å¯åŠ¨å¤±è´¥:&quot;, err) &#125;&#125; æµ‹è¯•å’Œéƒ¨ç½²1. å•å…ƒæµ‹è¯•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566// tests/user_test.gopackage testsimport ( &quot;gin-demo/handlers&quot; &quot;gin-demo/models&quot; &quot;net/http&quot; &quot;net/http/httptest&quot; &quot;testing&quot; &quot;github.com/gin-gonic/gin&quot; &quot;github.com/stretchr/testify/assert&quot; &quot;gorm.io/driver/sqlite&quot; &quot;gorm.io/gorm&quot;)func setupTestDB() *gorm.DB &#123; db, err := gorm.Open(sqlite.Open(&quot;:memory:&quot;), &amp;gorm.Config&#123;&#125;) if err != nil &#123; panic(&quot;æµ‹è¯•æ•°æ®åº“è¿æ¥å¤±è´¥&quot;) &#125; // è¿ç§»è¡¨ db.AutoMigrate(&amp;models.User&#123;&#125;) return db&#125;func TestGetUsers(t *testing.T) &#123; // è®¾ç½®æµ‹è¯•æ•°æ®åº“ db := setupTestDB() // åˆ›å»ºæµ‹è¯•æ•°æ® db.Create(&amp;models.User&#123;Name: &quot;æµ‹è¯•ç”¨æˆ·&quot;, Email: &quot;test@example.com&quot;&#125;) // åˆ›å»ºå¤„ç†å™¨ handler := handlers.NewUserHandler(db) // åˆ›å»ºGinæµ‹è¯•ä¸Šä¸‹æ–‡ w := httptest.NewRecorder() c, _ := gin.CreateTestContext(w) // æ‰§è¡Œå¤„ç†å™¨ handler.GetUsers(c) // éªŒè¯å“åº” assert.Equal(t, http.StatusOK, w.Code) assert.Contains(t, w.Body.String(), &quot;æµ‹è¯•ç”¨æˆ·&quot;)&#125;func TestCreateUser(t *testing.T) &#123; db := setupTestDB() handler := handlers.NewUserHandler(db) w := httptest.NewRecorder() c, _ := gin.CreateTestContext(w) // è®¾ç½®JSONè¯·æ±‚ä½“ c.Request = httptest.NewRequest(&quot;POST&quot;, &quot;/users&quot;, strings.NewReader(`&#123;&quot;name&quot;:&quot;æ–°ç”¨æˆ·&quot;,&quot;email&quot;:&quot;new@example.com&quot;&#125;`)) c.Request.Header.Set(&quot;Content-Type&quot;, &quot;application/json&quot;) handler.CreateUser(c) assert.Equal(t, http.StatusCreated, w.Code) assert.Contains(t, w.Body.String(), &quot;æ–°ç”¨æˆ·&quot;)&#125; 2. é›†æˆæµ‹è¯•1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// tests/integration_test.gopackage testsimport ( &quot;bytes&quot; &quot;encoding/json&quot; &quot;net/http&quot; &quot;net/http/httptest&quot; &quot;testing&quot; &quot;gin-demo/main&quot; &quot;github.com/stretchr/testify/assert&quot;)func TestUserCRUDIntegration(t *testing.T) &#123; // å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨ router := main.SetupRouter() // æµ‹è¯•åˆ›å»ºç”¨æˆ· userData := map[string]interface&#123;&#125;&#123; &quot;name&quot;: &quot;é›†æˆæµ‹è¯•ç”¨æˆ·&quot;, &quot;email&quot;: &quot;integration@test.com&quot;, &#125; jsonData, _ := json.Marshal(userData) req, _ := http.NewRequest(&quot;POST&quot;, &quot;/api/users&quot;, bytes.NewBuffer(jsonData)) req.Header.Set(&quot;Content-Type&quot;, &quot;application/json&quot;) w := httptest.NewRecorder() router.ServeHTTP(w, req) assert.Equal(t, http.StatusCreated, w.Code) // è§£æå“åº”è·å–ç”¨æˆ·ID var response map[string]interface&#123;&#125; json.Unmarshal(w.Body.Bytes(), &amp;response) user := response[&quot;user&quot;].(map[string]interface&#123;&#125;) userID := user[&quot;id&quot;].(float64) // æµ‹è¯•è·å–ç”¨æˆ· req, _ = http.NewRequest(&quot;GET&quot;, fmt.Sprintf(&quot;/api/users/%.0f&quot;, userID), nil) w = httptest.NewRecorder() router.ServeHTTP(w, req) assert.Equal(t, http.StatusOK, w.Code) assert.Contains(t, w.Body.String(), &quot;é›†æˆæµ‹è¯•ç”¨æˆ·&quot;)&#125; 3. Dockeréƒ¨ç½²é…ç½®1234567891011121314151617181920212223242526272829303132333435363738# DockerfileFROM golang:1.22-alpine AS builder# å®‰è£…å¿…è¦çš„å·¥å…·RUN apk add --no-cache git# è®¾ç½®å·¥ä½œç›®å½•WORKDIR /app# å¤åˆ¶ä¾èµ–æ–‡ä»¶COPY go.mod go.sum ./# ä¸‹è½½ä¾èµ–RUN go mod download# å¤åˆ¶æºä»£ç COPY . .# æ„å»ºåº”ç”¨RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main .# è¿è¡Œé˜¶æ®µFROM alpine:latestRUN apk --no-cache add ca-certificatesWORKDIR /root/# ä»æ„å»ºé˜¶æ®µå¤åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶COPY --from=builder /app/main .# å¤åˆ¶é…ç½®æ–‡ä»¶COPY config/config.yaml ./# æš´éœ²ç«¯å£EXPOSE 8080# è¿è¡Œåº”ç”¨CMD [&quot;./main&quot;] 12345678910111213141516171819202122232425262728# docker-compose.ymlversion: &#x27;3.8&#x27;services: app: build: . ports: - &quot;8080:8080&quot; environment: - DATABASE_URL=mysql://user:password@db:3306/gin_demo - JWT_SECRET=your-secret-key depends_on: - db db: image: mysql:8.0 environment: MYSQL_ROOT_PASSWORD: rootpassword MYSQL_DATABASE: gin_demo MYSQL_USER: user MYSQL_PASSWORD: password ports: - &quot;3306:3306&quot; volumes: - db_data:/var/lib/mysqlvolumes: db_data: 4. ç¯å¢ƒé…ç½®1234567891011121314151617181920# config/config.yamlapp: port: &quot;8080&quot; env: &quot;production&quot; debug: falsedatabase: host: &quot;localhost&quot; port: &quot;3306&quot; username: &quot;user&quot; password: &quot;password&quot; name: &quot;gin_demo&quot;jwt: secret: &quot;your-production-secret-key&quot; expires_in: &quot;24h&quot;logging: level: &quot;info&quot; file: &quot;./logs/app.log&quot; 12345# .env.exampleAPP_PORT=8080DATABASE_URL=mysql://user:password@localhost:3306/gin_demoJWT_SECRET=your-secret-keyDEBUG=false æ€§èƒ½ä¼˜åŒ–å’Œæœ€ä½³å®è·µ1. è¿æ¥æ± é…ç½®1234567891011121314151617181920212223242526272829303132// config/database.go (æ‰©å±•)import &quot;gorm.io/gorm&quot;import &quot;gorm.io/driver/mysql&quot;func ConnectDBWithPool(config DatabaseConfig) (*gorm.DB, error) &#123; dsn := fmt.Sprintf(&quot;%s:%s@tcp(%s:%s)/%s?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;, config.Username, config.Password, config.Host, config.Port, config.Database) db, err := gorm.Open(mysql.Open(dsn), &amp;gorm.Config&#123; // ç¦ç”¨é»˜è®¤äº‹åŠ¡ï¼ˆæé«˜æ€§èƒ½ï¼‰ SkipDefaultTransaction: true, // é¢„ç¼–è¯‘SQL PrepareStmt: true, &#125;) if err != nil &#123; return nil, err &#125; // è·å–åº•å±‚sql.DBè®¾ç½®è¿æ¥æ±  sqlDB, err := db.DB() if err != nil &#123; return nil, err &#125; // è®¾ç½®è¿æ¥æ± å‚æ•° sqlDB.SetMaxIdleConns(10) // æœ€å¤§ç©ºé—²è¿æ¥æ•° sqlDB.SetMaxOpenConns(100) // æœ€å¤§æ‰“å¼€è¿æ¥æ•° sqlDB.SetConnMaxLifetime(time.Hour) // è¿æ¥æœ€å¤§ç”Ÿå‘½å‘¨æœŸ return db, nil&#125; 2. ç¼“å­˜ç­–ç•¥12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152// utils/cache.gopackage utilsimport ( &quot;context&quot; &quot;time&quot; &quot;github.com/go-redis/redis/v8&quot;)type Cache struct &#123; client *redis.Client ctx context.Context&#125;func NewCache(addr, password string, db int) *Cache &#123; client := redis.NewClient(&amp;redis.Options&#123; Addr: addr, Password: password, DB: db, &#125;) return &amp;Cache&#123; client: client, ctx: context.Background(), &#125;&#125;// è®¾ç½®ç¼“å­˜func (c *Cache) Set(key string, value interface&#123;&#125;, expiration time.Duration) error &#123; return c.client.Set(c.ctx, key, value, expiration).Err()&#125;// è·å–ç¼“å­˜func (c *Cache) Get(key string) (string, error) &#123; return c.client.Get(c.ctx, key).Result()&#125;// åˆ é™¤ç¼“å­˜func (c *Cache) Delete(key string) error &#123; return c.client.Del(c.ctx, key).Err()&#125;// ç¼“å­˜ç”¨æˆ·ä¿¡æ¯ç¤ºä¾‹func CacheUser(user models.User, cache *Cache) error &#123; userJSON, err := json.Marshal(user) if err != nil &#123; return err &#125; return cache.Set(&quot;user:&quot;+strconv.FormatUint(uint64(user.ID), 10), userJSON, 30*time.Minute)&#125; 3. æ€§èƒ½ç›‘æ§123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263// middleware/metrics.gopackage middlewareimport ( &quot;github.com/gin-gonic/gin&quot; &quot;github.com/prometheus/client_golang/prometheus&quot; &quot;github.com/prometheus/client_golang/prometheus/promhttp&quot; &quot;time&quot;)var ( requestDuration = prometheus.NewHistogramVec( prometheus.HistogramOpts&#123; Name: &quot;http_request_duration_seconds&quot;, Help: &quot;HTTPè¯·æ±‚è€—æ—¶&quot;, &#125;, []string&#123;&quot;method&quot;, &quot;endpoint&quot;&#125;, ) requestCount = prometheus.NewCounterVec( prometheus.CounterOpts&#123; Name: &quot;http_requests_total&quot;, Help: &quot;HTTPè¯·æ±‚æ€»æ•°&quot;, &#125;, []string&#123;&quot;method&quot;, &quot;endpoint&quot;, &quot;status&quot;&#125;, ))func init() &#123; prometheus.MustRegister(requestDuration, requestCount)&#125;func MetricsMiddleware() gin.HandlerFunc &#123; return func(c *gin.Context) &#123; start := time.Now() // ç»§ç»­å¤„ç†è¯·æ±‚ c.Next() duration := time.Since(start).Seconds() status := c.Writer.Status() // è®°å½•æŒ‡æ ‡ requestDuration.WithLabelValues( c.Request.Method, c.FullPath(), ).Observe(duration) requestCount.WithLabelValues( c.Request.Method, c.FullPath(), strconv.Itoa(status), ).Inc() &#125;&#125;// æš´éœ²æŒ‡æ ‡ç«¯ç‚¹func MetricsHandler() gin.HandlerFunc &#123; h := promhttp.Handler() return func(c *gin.Context) &#123; h.ServeHTTP(c.Writer, c.Request) &#125;&#125; æ€»ç»“Ginæ¡†æ¶ä¼˜åŠ¿ é«˜æ€§èƒ½: åŸºäºGoè¯­è¨€çš„å¹¶å‘ç‰¹æ€§ï¼Œæ€§èƒ½è¿œè¶…Node.jsæ¡†æ¶ ç®€æ´API: ç±»ä¼¼Expressçš„ç›´è§‚APIè®¾è®¡ï¼Œå­¦ä¹ æˆæœ¬ä½ ä¸°å¯Œä¸­é—´ä»¶: å†…ç½®å¸¸ç”¨ä¸­é—´ä»¶ï¼Œç”Ÿæ€å®Œå–„ å¼ºç±»å‹: Goè¯­è¨€çš„ç±»å‹å®‰å…¨å‡å°‘è¿è¡Œæ—¶é”™è¯¯ ä»Node.jsè¿ç§»å»ºè®® é”™è¯¯å¤„ç†: Goä½¿ç”¨æ˜¾å¼é”™è¯¯è¿”å›ï¼Œæ›¿ä»£JSçš„try-catch å¹¶å‘æ¨¡å‹: ç†è§£goroutineå’Œchannelï¼Œæ›¿ä»£async/await ç±»å‹ç³»ç»Ÿ: å……åˆ†åˆ©ç”¨Goçš„å¼ºç±»å‹ä¼˜åŠ¿ ä¾èµ–ç®¡ç†: ä½¿ç”¨Go Modulesæ›¿ä»£npm ä¸‹ä¸€æ­¥å­¦ä¹  å¾®æœåŠ¡æ¶æ„: å­¦ä¹ gRPCå’Œå¾®æœåŠ¡é€šä¿¡ å®¹å™¨åŒ–éƒ¨ç½²: æŒæ¡Dockerå’ŒKubernetes ç›‘æ§å‘Šè­¦: é›†æˆPrometheuså’ŒGrafana CI/CD: å»ºç«‹è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹ è¿™ä»½ç¬”è®°æ¶µç›–äº†Ginæ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µå’Œå®é™…åº”ç”¨ï¼Œå¸®åŠ©ä½ å¿«é€Ÿä»Node.jså¼€å‘è½¬å‘Goè¯­è¨€Webå¼€å‘ã€‚é€šè¿‡å®é™…é¡¹ç›®ç»ƒä¹ ï¼Œä½ å°†èƒ½å¤Ÿç†Ÿç»ƒæŒæ¡Ginæ¡†æ¶å¹¶æ„å»ºé«˜æ€§èƒ½çš„Webåº”ç”¨ã€‚"},{"title":"Vue3åŸºç¡€å¤ä¹ ","path":"2025/09/28/Vue3åŸºç¡€å¤ä¹ /","text":"Vue3åŸºç¡€å¤ä¹ Vue3ä»‹ç»ä¸æè¿°ï¼ˆä¸ªäººç†è§£ï¼‰ Vue3ç›¸æ¯”Vue2æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œæ›´å°çš„æ‰“åŒ…ä½“ç§¯ é‡‡ç”¨Composition APIï¼Œæä¾›æ›´å¥½çš„é€»è¾‘å¤ç”¨å’Œä»£ç ç»„ç»‡ æ›´å¥½çš„TypeScriptæ”¯æŒ ä½¿ç”¨Proxyæ›¿ä»£Object.definePropertyï¼Œå“åº”å¼ç³»ç»Ÿæ›´å¼ºå¤§ æ”¯æŒTree-shakingï¼ŒæŒ‰éœ€å¼•å…¥å‡å°‘æ‰“åŒ…ä½“ç§¯ æ–°çš„ç»„ä»¶ï¼šFragmentã€Teleportã€Suspense Vue3åŸºç¡€è¯­æ³•åˆ›å»ºVueåº”ç”¨12345import &#123; createApp &#125; from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;const app = createApp(App)app.mount(&#x27;#app&#x27;) å“åº”å¼ç³»ç»Ÿrefå’Œreactive1234567891011121314151617&lt;template&gt; &lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt; &lt;div&gt;&#123;&#123; state.name &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; ref, reactive &#125; from &#x27;vue&#x27;// refç”¨äºåŸºæœ¬ç±»å‹const count = ref(0)// reactiveç”¨äºå¯¹è±¡const state = reactive(&#123; name: &#x27;Vue3&#x27;, version: &#x27;3.0&#x27;&#125;)&lt;/script&gt; computedè®¡ç®—å±æ€§1234567891011&lt;script setup&gt;import &#123; ref, computed &#125; from &#x27;vue&#x27;const firstName = ref(&#x27;å¼ &#x27;)const lastName = ref(&#x27;ä¸‰&#x27;)// è®¡ç®—å±æ€§const fullName = computed(() =&gt; &#123; return firstName.value + lastName.value&#125;)&lt;/script&gt; watchå’ŒwatchEffect12345678910111213141516&lt;script setup&gt;import &#123; ref, watch, watchEffect &#125; from &#x27;vue&#x27;const count = ref(0)const message = ref(&#x27;&#x27;)// watchç›‘å¬ç‰¹å®šæ•°æ®æºwatch(count, (newValue, oldValue) =&gt; &#123; console.log(&#x27;countå˜åŒ–:&#x27;, oldValue, &#x27;-&gt;&#x27;, newValue)&#125;)// watchEffectè‡ªåŠ¨è¿½è¸ªä¾èµ–watchEffect(() =&gt; &#123; console.log(&#x27;countçš„å€¼:&#x27;, count.value)&#125;)&lt;/script&gt; Composition API&lt;script setup&gt;è¯­æ³•ç³–123456789101112131415&lt;template&gt; &lt;div&gt;&#123;&#123; title &#125;&#125;&lt;/div&gt; &lt;button @click=&quot;increment&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;const title = ref(&#x27;Vue3 Composition API&#x27;)const count = ref(0)const increment = () =&gt; &#123; count.value++&#125;&lt;/script&gt; ç”Ÿå‘½å‘¨æœŸé’©å­123456789101112131415&lt;script setup&gt;import &#123; onMounted, onUpdated, onUnmounted &#125; from &#x27;vue&#x27;onMounted(() =&gt; &#123; console.log(&#x27;ç»„ä»¶æŒ‚è½½å®Œæˆ&#x27;)&#125;)onUpdated(() =&gt; &#123; console.log(&#x27;ç»„ä»¶æ›´æ–°å®Œæˆ&#x27;)&#125;)onUnmounted(() =&gt; &#123; console.log(&#x27;ç»„ä»¶å¸è½½å®Œæˆ&#x27;)&#125;)&lt;/script&gt; è‡ªå®šä¹‰Hooks1234567891011121314151617// useCounter.jsimport &#123; ref &#125; from &#x27;vue&#x27;export function useCounter(initialValue = 0) &#123; const count = ref(initialValue) const increment = () =&gt; count.value++ const decrement = () =&gt; count.value-- const reset = () =&gt; count.value = initialValue return &#123; count, increment, decrement, reset &#125;&#125; 123456789101112&lt;template&gt; &lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt; &lt;button @click=&quot;increment&quot;&gt;+&lt;/button&gt; &lt;button @click=&quot;decrement&quot;&gt;-&lt;/button&gt; &lt;button @click=&quot;reset&quot;&gt;é‡ç½®&lt;/button&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; useCounter &#125; from &#x27;./useCounter&#x27;const &#123; count, increment, decrement, reset &#125; = useCounter(0)&lt;/script&gt; ç»„ä»¶é€šä¿¡Propsï¼ˆçˆ¶ä¼ å­ï¼‰123456789101112131415161718192021222324252627282930&lt;!-- å­ç»„ä»¶ Child.vue --&gt;&lt;template&gt; &lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt; &lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; defineProps &#125; from &#x27;vue&#x27;const props = defineProps(&#123; message: String, count: Number&#125;)console.log(props.message)console.log(props.count)&lt;/script&gt;&lt;!-- çˆ¶ç»„ä»¶ Parent.vue --&gt;&lt;template&gt; &lt;Child :message=&quot;msg&quot; :count=&quot;num&quot; /&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;import Child from &#x27;./Child.vue&#x27;const msg = ref(&#x27;Hello Vue3&#x27;)const num = ref(100)&lt;/script&gt; Emitsï¼ˆå­ä¼ çˆ¶ï¼‰123456789101112131415161718192021222324252627&lt;!-- å­ç»„ä»¶ Child.vue --&gt;&lt;template&gt; &lt;button @click=&quot;sendMessage&quot;&gt;å‘é€æ¶ˆæ¯&lt;/button&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; defineEmits &#125; from &#x27;vue&#x27;const emit = defineEmits([&#x27;message&#x27;])const sendMessage = () =&gt; &#123; emit(&#x27;message&#x27;, &#x27;æ¥è‡ªå­ç»„ä»¶çš„æ¶ˆæ¯&#x27;)&#125;&lt;/script&gt;&lt;!-- çˆ¶ç»„ä»¶ Parent.vue --&gt;&lt;template&gt; &lt;Child @message=&quot;handleMessage&quot; /&gt;&lt;/template&gt;&lt;script setup&gt;import Child from &#x27;./Child.vue&#x27;const handleMessage = (msg) =&gt; &#123; console.log(&#x27;æ”¶åˆ°æ¶ˆæ¯:&#x27;, msg)&#125;&lt;/script&gt; provide/injectï¼ˆè·¨å±‚çº§é€šä¿¡ï¼‰1234567891011&lt;!-- ç¥–å…ˆç»„ä»¶ --&gt;&lt;script setup&gt;import &#123; provide, ref &#125; from &#x27;vue&#x27;const theme = ref(&#x27;dark&#x27;)const user = ref(&#123; name: &#x27;å¼ ä¸‰&#x27;, age: 25 &#125;)// æä¾›æ•°æ®provide(&#x27;theme&#x27;, theme)provide(&#x27;user&#x27;, user)&lt;/script&gt; 1234567891011&lt;!-- åä»£ç»„ä»¶ --&gt;&lt;script setup&gt;import &#123; inject &#125; from &#x27;vue&#x27;// æ³¨å…¥æ•°æ®const theme = inject(&#x27;theme&#x27;)const user = inject(&#x27;user&#x27;)console.log(theme.value)console.log(user.value.name)&lt;/script&gt; æ’æ§½1234567891011121314151617181920212223242526272829&lt;!-- å­ç»„ä»¶ --&gt;&lt;template&gt; &lt;div class=&quot;container&quot;&gt; &lt;header&gt; &lt;slot name=&quot;header&quot;&gt;é»˜è®¤å¤´éƒ¨&lt;/slot&gt; &lt;/header&gt; &lt;main&gt; &lt;slot&gt;é»˜è®¤å†…å®¹&lt;/slot&gt; &lt;/main&gt; &lt;footer&gt; &lt;slot name=&quot;footer&quot;&gt;é»˜è®¤åº•éƒ¨&lt;/slot&gt; &lt;/footer&gt; &lt;/div&gt;&lt;/template&gt;&lt;!-- çˆ¶ç»„ä»¶ --&gt;&lt;template&gt; &lt;ChildComponent&gt; &lt;template #header&gt; &lt;h1&gt;è‡ªå®šä¹‰å¤´éƒ¨&lt;/h1&gt; &lt;/template&gt; &lt;p&gt;è¿™æ˜¯ä¸»è¦å†…å®¹&lt;/p&gt; &lt;template #footer&gt; &lt;footer&gt;è‡ªå®šä¹‰åº•éƒ¨&lt;/footer&gt; &lt;/template&gt; &lt;/ChildComponent&gt;&lt;/template&gt; æ–°ç»„ä»¶ç‰¹æ€§Fragmentï¼ˆç‰‡æ®µï¼‰Vue3æ”¯æŒå¤šä¸ªæ ¹å…ƒç´ ï¼š 12345&lt;template&gt; &lt;header&gt;å¤´éƒ¨&lt;/header&gt; &lt;main&gt;ä¸»ä½“&lt;/main&gt; &lt;footer&gt;åº•éƒ¨&lt;/footer&gt;&lt;/template&gt; Teleportï¼ˆä¼ é€ï¼‰12345678910111213141516&lt;template&gt; &lt;button @click=&quot;showModal = true&quot;&gt;æ‰“å¼€æ¨¡æ€æ¡†&lt;/button&gt; &lt;Teleport to=&quot;body&quot;&gt; &lt;div v-if=&quot;showModal&quot; class=&quot;modal&quot;&gt; &lt;h2&gt;æ¨¡æ€æ¡†æ ‡é¢˜&lt;/h2&gt; &lt;button @click=&quot;showModal = false&quot;&gt;å…³é—­&lt;/button&gt; &lt;/div&gt; &lt;/Teleport&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;const showModal = ref(false)&lt;/script&gt; Suspenseï¼ˆå¼‚æ­¥ç»„ä»¶ï¼‰123456789101112131415161718&lt;template&gt; &lt;Suspense&gt; &lt;template #default&gt; &lt;AsyncComponent /&gt; &lt;/template&gt; &lt;template #fallback&gt; &lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt; &lt;/template&gt; &lt;/Suspense&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; defineAsyncComponent &#125; from &#x27;vue&#x27;const AsyncComponent = defineAsyncComponent(() =&gt; import(&#x27;./AsyncComponent.vue&#x27;))&lt;/script&gt; è·¯ç”±ï¼šVue Router 4åŸºæœ¬é…ç½®123456789101112131415161718192021222324// router/index.jsimport &#123; createRouter, createWebHistory &#125; from &#x27;vue-router&#x27;import Home from &#x27;../views/Home.vue&#x27;import About from &#x27;../views/About.vue&#x27;const routes = [ &#123; path: &#x27;/&#x27;, name: &#x27;Home&#x27;, component: Home &#125;, &#123; path: &#x27;/about&#x27;, name: &#x27;About&#x27;, component: About &#125;]const router = createRouter(&#123; history: createWebHistory(), routes&#125;)export default router 12345678// main.jsimport &#123; createApp &#125; from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;import router from &#x27;./router&#x27;const app = createApp(App)app.use(router)app.mount(&#x27;#app&#x27;) è·¯ç”±ä½¿ç”¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&lt;template&gt; &lt;nav&gt; &lt;router-link to=&quot;/&quot;&gt;é¦–é¡µ&lt;/router-link&gt; &lt;router-link to=&quot;/about&quot;&gt;å…³äº&lt;/router-link&gt; &lt;router-link to=&quot;/dynamic&quot;&gt;åŠ¨æ€è·¯ç”±&lt;/router-link&gt; &lt;/nav&gt; &lt;router-view /&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; useRouter, useRoute &#125; from &#x27;vue-router&#x27;const router = useRouter()const route = useRoute()const goToAbout = () =&gt; &#123; router.push(&#x27;/about&#x27;)&#125;// åŠ¨æ€æ·»åŠ è·¯ç”±const addDynamicRoute = () =&gt; &#123; router.addRoute(&#123; path: &#x27;/dynamic&#x27;, name: &#x27;Dynamic&#x27;, component: () =&gt; import(&#x27;../views/Dynamic.vue&#x27;) &#125;) // è·³è½¬åˆ°æ–°æ·»åŠ çš„è·¯ç”± router.push(&#x27;/dynamic&#x27;)&#125;// è·å–å½“å‰è·¯ç”±ä¿¡æ¯console.log(&#x27;å½“å‰è·¯ç”±:&#x27;, route.path)console.log(&#x27;è·¯ç”±å‚æ•°:&#x27;, route.params)console.log(&#x27;æŸ¥è¯¢å‚æ•°:&#x27;, route.query)// è·¯ç”±å¯¼èˆªæ–¹æ³•const navigate = &#123; // ç¼–ç¨‹å¼å¯¼èˆª goToHome: () =&gt; router.push(&#x27;/&#x27;), goToAbout: () =&gt; router.push(&#x27;/about&#x27;), // å¸¦å‚æ•°å¯¼èˆª goToUser: (id) =&gt; router.push(&#123; name: &#x27;User&#x27;, params: &#123; id &#125; &#125;), // å¸¦æŸ¥è¯¢å‚æ•° goToSearch: (keyword) =&gt; router.push(&#123; path: &#x27;/search&#x27;, query: &#123; q: keyword &#125; &#125;), // æ›¿æ¢å½“å‰è·¯ç”±ï¼ˆä¸è®°å½•å†å²ï¼‰ replaceHome: () =&gt; router.replace(&#x27;/&#x27;), // å‰è¿›åé€€ goBack: () =&gt; router.go(-1), goForward: () =&gt; router.go(1), // æ£€æŸ¥è·¯ç”±æ˜¯å¦å­˜åœ¨ hasRoute: (name) =&gt; router.hasRoute(name), // è·å–è·¯ç”±åˆ—è¡¨ getRoutes: () =&gt; router.getRoutes()&#125;// åŠ¨æ€è·¯ç”±æ“ä½œconst dynamicRoutes = &#123; // æ·»åŠ åµŒå¥—è·¯ç”± addNestedRoute: () =&gt; &#123; router.addRoute(&#x27;Home&#x27;, &#123; path: &#x27;settings&#x27;, component: () =&gt; import(&#x27;../views/Settings.vue&#x27;) &#125;) &#125;, // åˆ é™¤è·¯ç”± removeRoute: (name) =&gt; &#123; router.removeRoute(name) &#125;, // æ·»åŠ è·¯ç”±å®ˆå« addGuard: () =&gt; &#123; router.beforeEach((to, from, next) =&gt; &#123; console.log(`è·¯ç”±å®ˆå«: $&#123;from.path&#125; -&gt; $&#123;to.path&#125;`) next() &#125;) &#125;&#125;&lt;/script&gt; è·¯ç”±å®ˆå«12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152// å…¨å±€å‰ç½®å®ˆå«router.beforeEach((to, from, next) =&gt; &#123; // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½• if (to.meta.requiresAuth &amp;&amp; !isLoggedIn()) &#123; next(&#x27;/login&#x27;) &#125; else &#123; next() &#125;&#125;)// å…¨å±€åç½®å®ˆå«router.afterEach((to, from) =&gt; &#123; // é¡µé¢è®¿é—®ç»Ÿè®¡ console.log(`ä» $&#123;from.path&#125; è·³è½¬åˆ° $&#123;to.path&#125;`)&#125;)// è·¯ç”±ç‹¬äº«å®ˆå«const routes = [ &#123; path: &#x27;/admin&#x27;, component: Admin, beforeEnter: (to, from, next) =&gt; &#123; // æ£€æŸ¥ç®¡ç†å‘˜æƒé™ if (hasAdminPermission()) &#123; next() &#125; else &#123; next(&#x27;/unauthorized&#x27;) &#125; &#125; &#125;]// ç»„ä»¶å†…å®ˆå«const UserProfile = &#123; template: `...`, beforeRouteEnter(to, from, next) &#123; // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«éªŒè¯å‰è°ƒç”¨ next(vm =&gt; &#123; // é€šè¿‡ `vm` è®¿é—®ç»„ä»¶å®ä¾‹ console.log(vm.user) &#125;) &#125;, beforeRouteUpdate(to, from) &#123; // åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨ this.userData = fetchUser(to.params.id) &#125;, beforeRouteLeave(to, from) &#123; // åœ¨å¯¼èˆªç¦»å¼€è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨ const answer = window.confirm(&#x27;ç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ&#x27;) if (!answer) return false &#125;&#125; çŠ¶æ€ç®¡ç†ï¼šPiniaå®‰è£…å’Œé…ç½®1npm install pinia 12345678910// main.jsimport &#123; createApp &#125; from &#x27;vue&#x27;import &#123; createPinia &#125; from &#x27;pinia&#x27;import App from &#x27;./App.vue&#x27;const app = createApp(App)const pinia = createPinia()app.use(pinia)app.mount(&#x27;#app&#x27;) å®šä¹‰StoreOptions APIå†™æ³•1234567891011121314151617181920212223242526272829303132// stores/counter.jsimport &#123; defineStore &#125; from &#x27;pinia&#x27;export const useCounterStore = defineStore(&#x27;counter&#x27;, &#123; state: () =&gt; (&#123; count: 0, name: &#x27;è®¡æ•°å™¨&#x27; &#125;), getters: &#123; doubleCount: (state) =&gt; state.count * 2, doubleCountPlusOne() &#123; return this.doubleCount + 1 &#125; &#125;, actions: &#123; increment() &#123; this.count++ &#125;, async incrementAsync() &#123; // æ”¯æŒå¼‚æ­¥æ“ä½œ await new Promise(resolve =&gt; setTimeout(resolve, 1000)) this.count++ &#125;, reset() &#123; this.count = 0 &#125; &#125;&#125;) Composition APIå†™æ³•12345678910111213141516171819202122232425262728293031323334// stores/counter.jsimport &#123; defineStore &#125; from &#x27;pinia&#x27;import &#123; ref, computed &#125; from &#x27;vue&#x27;export const useCounterStore = defineStore(&#x27;counter&#x27;, () =&gt; &#123; const count = ref(0) const name = ref(&#x27;è®¡æ•°å™¨&#x27;) const doubleCount = computed(() =&gt; count.value * 2) const doubleCountPlusOne = computed(() =&gt; doubleCount.value + 1) function increment() &#123; count.value++ &#125; async function incrementAsync() &#123; await new Promise(resolve =&gt; setTimeout(resolve, 1000)) count.value++ &#125; function reset() &#123; count.value = 0 &#125; return &#123; count, name, doubleCount, doubleCountPlusOne, increment, incrementAsync, reset &#125;&#125;) ä½¿ç”¨Store12345678910111213141516&lt;template&gt; &lt;div&gt;&#123;&#123; counterStore.count &#125;&#125;&lt;/div&gt; &lt;div&gt;&#123;&#123; counterStore.doubleCount &#125;&#125;&lt;/div&gt; &lt;button @click=&quot;counterStore.increment()&quot;&gt;+&lt;/button&gt; &lt;button @click=&quot;counterStore.reset()&quot;&gt;é‡ç½®&lt;/button&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; useCounterStore &#125; from &#x27;../stores/counter&#x27;import &#123; storeToRefs &#125; from &#x27;pinia&#x27;const counterStore = useCounterStore()// å“åº”å¼è§£æ„ï¼ˆä¿æŒå“åº”æ€§ï¼‰const &#123; count, doubleCount &#125; = storeToRefs(counterStore)&lt;/script&gt; Storeç»„åˆä½¿ç”¨12345678910111213141516171819202122// stores/user.jsimport &#123; defineStore &#125; from &#x27;pinia&#x27;export const useUserStore = defineStore(&#x27;user&#x27;, &#123; state: () =&gt; (&#123; user: null, isLoggedIn: false &#125;), actions: &#123; async login(credentials) &#123; // ç™»å½•é€»è¾‘ this.user = &#123; name: &#x27;ç”¨æˆ·&#x27;, id: 1 &#125; this.isLoggedIn = true &#125;, logout() &#123; this.user = null this.isLoggedIn = false &#125; &#125;&#125;) 12345678910111213141516// åœ¨å¦ä¸€ä¸ªstoreä¸­ä½¿ç”¨import &#123; useUserStore &#125; from &#x27;./user&#x27;export const useCartStore = defineStore(&#x27;cart&#x27;, &#123; actions: &#123; async checkout() &#123; const userStore = useUserStore() if (!userStore.isLoggedIn) &#123; throw new Error(&#x27;è¯·å…ˆç™»å½•&#x27;) &#125; // ç»“è´¦é€»è¾‘ &#125; &#125;&#125;) PiniaæŒä¹…åŒ–æ’ä»¶ (pinia-plugin-persistedstate)å®‰è£…å’Œé…ç½®1npm install pinia-plugin-persistedstate 123456789101112131415161718192021222324// main.jsimport &#123; createApp &#125; from &#x27;vue&#x27;import &#123; createPinia &#125; from &#x27;pinia&#x27;import &#123; createPersistedState &#125; from &#x27;pinia-plugin-persistedstate&#x27;import App from &#x27;./App.vue&#x27;const app = createApp(App)const pinia = createPinia()// ä½¿ç”¨æŒä¹…åŒ–æ’ä»¶pinia.use(createPersistedState(&#123; // å…¨å±€é…ç½® storage: localStorage, // é»˜è®¤ä½¿ç”¨localStorage key: id =&gt; `__persisted__$&#123;id&#125;`, // å­˜å‚¨é”®åæ ¼å¼ beforeRestore: (context) =&gt; &#123; console.log(&#x27;å¼€å§‹æ¢å¤çŠ¶æ€:&#x27;, context.store.$id) &#125;, afterRestore: (context) =&gt; &#123; console.log(&#x27;çŠ¶æ€æ¢å¤å®Œæˆ:&#x27;, context.store.$id) &#125;&#125;))app.use(pinia)app.mount(&#x27;#app&#x27;) Storeçº§åˆ«çš„æŒä¹…åŒ–é…ç½®12345678910111213141516171819202122232425262728293031323334353637383940414243// stores/user.jsimport &#123; defineStore &#125; from &#x27;pinia&#x27;export const useUserStore = defineStore(&#x27;user&#x27;, &#123; state: () =&gt; (&#123; user: null, isLoggedIn: false, preferences: &#123; theme: &#x27;light&#x27;, language: &#x27;zh-CN&#x27; &#125; &#125;), persist: &#123; // å¯ç”¨æŒä¹…åŒ– enabled: true, // è‡ªå®šä¹‰å­˜å‚¨ç­–ç•¥ strategies: [ &#123; key: &#x27;user-store&#x27;, // è‡ªå®šä¹‰å­˜å‚¨é”®å storage: localStorage, // å­˜å‚¨ä»‹è´¨ paths: [&#x27;user&#x27;, &#x27;isLoggedIn&#x27;, &#x27;preferences&#x27;], // æŒ‡å®šè¦æŒä¹…åŒ–çš„å­—æ®µ &#125; ] &#125;, actions: &#123; async login(credentials) &#123; this.user = &#123; name: &#x27;ç”¨æˆ·&#x27;, id: 1 &#125; this.isLoggedIn = true &#125;, logout() &#123; this.user = null this.isLoggedIn = false &#125;, updatePreferences(newPrefs) &#123; this.preferences = &#123; ...this.preferences, ...newPrefs &#125; &#125; &#125;&#125;) ç»„åˆå¼Storeçš„æŒä¹…åŒ–1234567891011121314151617181920212223242526272829303132333435// stores/settings.jsimport &#123; defineStore &#125; from &#x27;pinia&#x27;import &#123; ref, computed &#125; from &#x27;vue&#x27;export const useSettingsStore = defineStore(&#x27;settings&#x27;, () =&gt; &#123; const theme = ref(&#x27;light&#x27;) const language = ref(&#x27;zh-CN&#x27;) const fontSize = ref(14) const isDark = computed(() =&gt; theme.value === &#x27;dark&#x27;) function toggleTheme() &#123; theme.value = theme.value === &#x27;light&#x27; ? &#x27;dark&#x27; : &#x27;light&#x27; &#125; function setLanguage(lang) &#123; language.value = lang &#125; return &#123; theme, language, fontSize, isDark, toggleTheme, setLanguage &#125;&#125;, &#123; // æŒä¹…åŒ–é…ç½® persist: &#123; key: &#x27;app-settings&#x27;, storage: localStorage, paths: [&#x27;theme&#x27;, &#x27;language&#x27;, &#x27;fontSize&#x27;] &#125;&#125;) å¤šç§å­˜å‚¨ç­–ç•¥1234567891011121314151617181920212223242526272829303132333435363738394041// stores/cart.jsimport &#123; defineStore &#125; from &#x27;pinia&#x27;export const useCartStore = defineStore(&#x27;cart&#x27;, &#123; state: () =&gt; (&#123; items: [], total: 0, lastUpdated: null &#125;), persist: &#123; strategies: [ &#123; // è´­ç‰©è½¦æ•°æ®ä½¿ç”¨sessionStorageï¼Œå…³é—­æµè§ˆå™¨åæ¸…é™¤ key: &#x27;cart-session&#x27;, storage: sessionStorage, paths: [&#x27;items&#x27;, &#x27;total&#x27;] &#125;, &#123; // æœ€åæ›´æ–°æ—¶é—´ä½¿ç”¨localStorageé•¿æœŸä¿å­˜ key: &#x27;cart-last-updated&#x27;, storage: localStorage, paths: [&#x27;lastUpdated&#x27;] &#125; ] &#125;, actions: &#123; addItem(item) &#123; this.items.push(item) this.total += item.price this.lastUpdated = new Date().toISOString() &#125;, clearCart() &#123; this.items = [] this.total = 0 this.lastUpdated = new Date().toISOString() &#125; &#125;&#125;) è‡ªå®šä¹‰åºåˆ—åŒ–1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// stores/complex.jsimport &#123; defineStore &#125; from &#x27;pinia&#x27;export const useComplexStore = defineStore(&#x27;complex&#x27;, &#123; state: () =&gt; (&#123; // åŒ…å«Dateå¯¹è±¡å’ŒSetå¯¹è±¡çš„å¤æ‚çŠ¶æ€ createdAt: new Date(), tags: new Set([&#x27;vue&#x27;, &#x27;pinia&#x27;]), metadata: new Map([[&#x27;version&#x27;, &#x27;1.0.0&#x27;]]) &#125;), persist: &#123; serializer: &#123; // è‡ªå®šä¹‰åºåˆ—åŒ– serialize: (value) =&gt; &#123; return JSON.stringify(value, (key, value) =&gt; &#123; if (value instanceof Date) &#123; return &#123; __type: &#x27;Date&#x27;, value: value.toISOString() &#125; &#125; if (value instanceof Set) &#123; return &#123; __type: &#x27;Set&#x27;, value: Array.from(value) &#125; &#125; if (value instanceof Map) &#123; return &#123; __type: &#x27;Map&#x27;, value: Array.from(value.entries()) &#125; &#125; return value &#125;) &#125;, // è‡ªå®šä¹‰ååºåˆ—åŒ– deserialize: (value) =&gt; &#123; return JSON.parse(value, (key, value) =&gt; &#123; if (value &amp;&amp; value.__type === &#x27;Date&#x27;) &#123; return new Date(value.value) &#125; if (value &amp;&amp; value.__type === &#x27;Set&#x27;) &#123; return new Set(value.value) &#125; if (value &amp;&amp; value.__type === &#x27;Map&#x27;) &#123; return new Map(value.value) &#125; return value &#125;) &#125; &#125; &#125;&#125;) æ¡ä»¶æŒä¹…åŒ–123456789101112131415161718192021222324252627// stores/conditional.jsimport &#123; defineStore &#125; from &#x27;pinia&#x27;export const useConditionalStore = defineStore(&#x27;conditional&#x27;, &#123; state: () =&gt; (&#123; publicData: &#x27;æ‰€æœ‰äººéƒ½èƒ½çœ‹åˆ°&#x27;, privateData: &#x27;æ•æ„Ÿä¿¡æ¯&#x27;, shouldPersist: true &#125;), persist: &#123; enabled: true, // æ¡ä»¶æŒä¹…åŒ– filter: (persistedState) =&gt; &#123; // åªæŒä¹…åŒ–publicDataï¼Œè¿‡æ»¤æ‰privateData const &#123; privateData, ...publicState &#125; = persistedState return publicState &#125;, // è¿è¡Œæ—¶æ¡ä»¶ condition: (store) =&gt; &#123; // åªæœ‰å½“shouldPersistä¸ºtrueæ—¶æ‰æŒä¹…åŒ– return store.shouldPersist &#125; &#125;&#125;) æŒ‡ä»¤å’Œä¿®é¥°ç¬¦è‡ªå®šä¹‰æŒ‡ä»¤123456789101112131415161718192021222324252627&lt;template&gt; &lt;input v-focus /&gt; &lt;div v-color=&quot;&#x27;red&#x27;&quot;&gt;çº¢è‰²æ–‡å­—&lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; directive &#125; from &#x27;vue&#x27;export default &#123; directives: &#123; focus: &#123; mounted(el) &#123; el.focus() &#125; &#125;, color: &#123; mounted(el, binding) &#123; el.style.color = binding.value &#125;, updated(el, binding) &#123; el.style.color = binding.value &#125; &#125; &#125;&#125;&lt;/script&gt; å…¨å±€æŒ‡ä»¤123456// main.jsapp.directive(&#x27;focus&#x27;, &#123; mounted(el) &#123; el.focus() &#125;&#125;) å·¥å…·å‡½æ•°å“åº”å¼å·¥å…·123456import &#123; isRef, unref, toRef, toRefs &#125; from &#x27;vue&#x27;// isRef: æ£€æŸ¥æ˜¯å¦ä¸ºrefå¯¹è±¡// unref: å¦‚æœæ˜¯refè¿”å›å…¶å€¼ï¼Œå¦åˆ™è¿”å›å‚æ•°æœ¬èº«// toRef: ä¸ºå“åº”å¼å¯¹è±¡çš„å±æ€§åˆ›å»ºref// toRefs: å°†å“åº”å¼å¯¹è±¡è½¬æ¢ä¸ºæ™®é€šå¯¹è±¡ï¼Œå…¶ä¸­æ¯ä¸ªå±æ€§éƒ½æ˜¯ref ç”Ÿå‘½å‘¨æœŸå·¥å…·12345import &#123; onMounted, onUpdated, onUnmounted, nextTick &#125; from &#x27;vue&#x27;// nextTick: DOMæ›´æ–°åæ‰§è¡Œå›è°ƒawait nextTick()// DOMå·²ç»æ›´æ–° æ€§èƒ½ä¼˜åŒ–å“åº”å¼ä¼˜åŒ–12345import &#123; shallowRef, shallowReactive, markRaw &#125; from &#x27;vue&#x27;// shallowRef: æµ…å±‚refï¼Œä¸æ·±åº¦å“åº”// shallowReactive: æµ…å±‚reactiveï¼Œåªå“åº”æ ¹çº§å±æ€§// markRaw: æ ‡è®°å¯¹è±¡æ°¸è¿œä¸ä¼šè¢«è½¬ä¸ºå“åº”å¼ä»£ç† ç»„ä»¶ä¼˜åŒ–123456789101112131415161718192021&lt;template&gt; &lt;HeavyComponent v-if=&quot;show&quot; /&gt;&lt;/template&gt;&lt;script&gt;import &#123; defineAsyncComponent &#125; from &#x27;vue&#x27;// å¼‚æ­¥ç»„ä»¶const HeavyComponent = defineAsyncComponent(() =&gt; import(&#x27;./HeavyComponent.vue&#x27;))export default &#123; components: &#123; HeavyComponent &#125;, setup() &#123; const show = ref(false) return &#123; show &#125; &#125;&#125;&lt;/script&gt; TypeScriptæ”¯æŒç»„ä»¶ç±»å‹å®šä¹‰123456789101112131415161718192021222324252627282930313233343536&lt;template&gt; &lt;div&gt;&#123;&#123; title &#125;&#125;&lt;/div&gt; &lt;button @click=&quot;increment&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot;&gt;import &#123; defineComponent, ref &#125; from &#x27;vue&#x27;export default defineComponent(&#123; name: &#x27;MyComponent&#x27;, props: &#123; initialCount: &#123; type: Number, default: 0 &#125;, title: &#123; type: String, required: true &#125; &#125;, setup(props) &#123; const count = ref(props.initialCount) const increment = () =&gt; &#123; count.value++ &#125; return &#123; count, increment &#125; &#125;&#125;)&lt;/script&gt; Storeç±»å‹å®šä¹‰1234567891011121314151617181920212223242526// stores/counter.tsimport &#123; defineStore &#125; from &#x27;pinia&#x27;interface CounterState &#123; count: number name: string&#125;export const useCounterStore = defineStore(&#x27;counter&#x27;, &#123; state: (): CounterState =&gt; (&#123; count: 0, name: &#x27;è®¡æ•°å™¨&#x27; &#125;), getters: &#123; doubleCount(state): number &#123; return state.count * 2 &#125; &#125;, actions: &#123; increment(): void &#123; this.count++ &#125; &#125;&#125;) æ€»ç»“Vue3å¸¦æ¥äº†è®¸å¤šæ”¹è¿›å’Œæ–°ç‰¹æ€§ï¼š æ›´å¥½çš„æ€§èƒ½ï¼šæ›´å¿«çš„æ¸²æŸ“é€Ÿåº¦ï¼Œæ›´å°çš„æ‰“åŒ…ä½“ç§¯ Composition APIï¼šæ›´å¥½çš„é€»è¾‘å¤ç”¨å’Œä»£ç ç»„ç»‡ æ›´å¥½çš„TypeScriptæ”¯æŒï¼šå®Œæ•´çš„ç±»å‹æ¨æ–­ æ–°çš„å“åº”å¼ç³»ç»Ÿï¼šåŸºäºProxyï¼Œæ›´å¼ºå¤§ æ–°çš„å†…ç½®ç»„ä»¶ï¼šFragmentã€Teleportã€Suspense æ”¹è¿›çš„å·¥å…·é“¾ï¼šViteæ„å»ºå·¥å…·ï¼Œå¼€å‘ä½“éªŒæ›´å¥½ Vue3çš„å­¦ä¹ æ›²çº¿ç›¸å¯¹å¹³ç¼“ï¼Œç‰¹åˆ«æ˜¯å¯¹äºæœ‰Vue2ç»éªŒçš„å¼€å‘è€…ã€‚å»ºè®®ä»Composition APIå¼€å§‹å­¦ä¹ ï¼Œé€æ­¥æŒæ¡æ–°çš„ç‰¹æ€§å’Œæœ€ä½³å®è·µã€‚"},{"title":"TSè·å–å‡½æ•°ç»„ä»¶ç±»å‹","path":"2025/09/26/TSè·å–å‡½æ•°ç»„ä»¶ç±»å‹/","text":"TSè·å–å‡½æ•°ç»„ä»¶ç±»å‹ è·å–å‡½æ•°å‚æ•°çš„ç±»å‹ è·å–å‡½æ•°è¿”å›å€¼çš„ç±»å‹ è·å–ç»„ä»¶çš„ props ç±»å‹ å¯ä»¥ä½¿ç”¨å†…ç½®çš„ å·¥å…·ç±»å‹ å’Œ ç±»å‹æ¨å¯¼æœºåˆ¶ã€‚ä¸‹é¢æ˜¯å…·ä½“æ–¹æ³•ï¼š âœ… 1. è·å–å‡½æ•°å‚æ•°çš„ç±»å‹ï¼šParameters&lt;T&gt;123456function greet(name: string, age: number): string &#123; return `Hello $&#123;name&#125;, age $&#123;age&#125;`;&#125;type Params = Parameters&lt;typeof greet&gt;;// type Params = [string, number] âœ… 2. è·å–å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼šReturnType&lt;T&gt;123456function greet(name: string, age: number): string &#123; return `Hello $&#123;name&#125;, age $&#123;age&#125;`;&#125;type Return = ReturnType&lt;typeof greet&gt;;// type Return = string âœ… 3. è·å–ç»„ä»¶çš„ props ç±»å‹ï¼ˆReact åœºæ™¯ï¼‰å¯¹äºå‡½æ•°ç»„ä»¶ï¼š 12345678910111213import React from &#x27;react&#x27;;interface MyProps &#123; title: string; count?: number;&#125;const MyComponent: React.FC&lt;MyProps&gt; = (&#123; title, count &#125;) =&gt; &#123; return &lt;div&gt;&#123;title&#125; - &#123;count&#125;&lt;/div&gt;;&#125;;type Props = React.ComponentProps&lt;typeof MyComponent&gt;;// type Props = MyProps å¯¹äºç±»ç»„ä»¶ï¼š 12345678class MyClassComponent extends React.Component&lt;MyProps&gt; &#123; render() &#123; return &lt;div&gt;&#123;this.props.title&#125;&lt;/div&gt;; &#125;&#125;type Props = React.ComponentProps&lt;typeof MyClassComponent&gt;;// type Props = MyProps âœ… 4. è·å–ç»„ä»¶çš„ props ç±»å‹ï¼ˆVue åœºæ™¯ï¼‰ç»„ä»¶å†…éƒ¨ 123456789&lt;!-- MyButton.vue --&gt;&lt;script setup lang=&quot;ts&quot;&gt;interface Props &#123; // 1. å…ˆå†™æ¥å£ type: &#x27;primary&#x27; | &#x27;ghost&#x27; size?: &#x27;sm&#x27; | &#x27;lg&#x27; disabled?: boolean&#125;const props = defineProps&lt;Props&gt;() // 2. ç›´æ¥æ³›å‹æ¨å¯¼&lt;/script&gt; å¤–éƒ¨ä½¿ç”¨ 1234import MyButton from &#x27;./MyButton.vue&#x27;type BtnProps = InstanceType&lt;typeof MyButton&gt;[&#x27;$props&#x27;]// BtnProps â‰¡ &#123; type: &#x27;primary&#x27;|&#x27;ghost&#x27;; size?: &#x27;sm&#x27;|&#x27;lg&#x27;; disabled?: boolean &#125; âœ… æ€»ç»“å·¥å…·ç±»å‹é€ŸæŸ¥è¡¨ï¼š ç›®çš„ å·¥å…·ç±»å‹ è·å–å‡½æ•°å‚æ•°ç±»å‹ Parameters&lt;typeof fn&gt; è·å–å‡½æ•°è¿”å›å€¼ç±»å‹ ReturnType&lt;typeof fn&gt; è·å–ç»„ä»¶ props ç±»å‹ï¼ˆReactï¼‰ React.ComponentProps&lt;typeof C&gt; è·å–ç»„ä»¶ props ç±»å‹ï¼ˆVueï¼‰ InstanceType&lt;typeof MyButton&gt;[&#39;$props&#39;] å¦‚æœä½ æœ‰å…·ä½“çš„å‡½æ•°æˆ–ç»„ä»¶ä»£ç ï¼Œæˆ‘å¯ä»¥å¸®ä½ ç›´æ¥æ¨å¯¼å‡ºç±»å‹ã€‚"},{"title":"Vue2æ‰“åŒ…ä¼˜åŒ–æ–¹æ¡ˆ","path":"2025/09/15/Vue2æ‰“åŒ…ä¼˜åŒ–æ–¹æ¡ˆ/","text":"Vue2æ‰“åŒ…ä¼˜åŒ–æ–¹æ¡ˆ è®°å½•ä¸€äº›Vue2æ‰“åŒ…ä¼˜åŒ–æ–¹æ¡ˆï¼Œæ–¹ä¾¿åç»­å¤ç”¨ å½“å‰ä¼˜åŒ–æ–¹æ¡ˆä¼šæ•´ç†åˆ°ä¸€ä¸ªdemoä¸­æ–¹ä¾¿å¤ç”¨ demoä½¿ç”¨åˆ°çš„ç‰ˆæœ¬ node 16.20.2 @vue/cli 5.0.9 &#x77;&#x65;&#98;&#112;&#97;&#x63;&#x6b;&#64;&#53;&#x2e;&#49;&#x30;&#49;&#x2e;&#x33; npm 8.19.4 é•œåƒtaobao â€”â€”- https://registry.npmmirror.com/ ç”Ÿäº§ç¯å¢ƒå…³é—­source-map ä»£ç é”™è¯¯å®šä½çš„åŠŸèƒ½ï¼Œå¦‚æœå…³é—­äº†å°±æ²¡æ³•å®šä½åˆ°é”™è¯¯çš„ä»£ç ä½ç½®ï¼Œä¸æ–¹ä¾¿è°ƒè¯• å»ºè®®åªåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å…³é—­ï¼Œæˆ–è€…ç”Ÿäº§ç¯å¢ƒè¿è¡Œä¸€æ®µæ—¶é—´åå…³é—­ ä»£ç vue.config.js 1234567891011const &#123; defineConfig &#125; = require(&#x27;@vue/cli-service&#x27;)const isProd = process.env.NODE_ENV === &#x27;production&#x27;module.exports = defineConfig(&#123; /** å…¼å®¹ä½ç‰ˆæœ¬ */ transpileDependencies: true, /** ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è·¯å¾„ */ publicPath: &#x27;/&#x27;, /** ç”Ÿäº§ç¯å¢ƒä¸ç”Ÿæˆé”™è¯¯å®šä½ */ productionSourceMap: isProd,&#125;) CDNåŠ é€Ÿ CDNï¼ˆContent Delivery Networkï¼Œå†…å®¹åˆ†å‘ç½‘ç»œï¼‰æ˜¯ä¸€ç»„åœ°ç†ä½ç½®åˆ†æ•£çš„ Web æœåŠ¡å™¨ï¼Œé€šè¿‡æ™ºèƒ½è°ƒåº¦æŠŠç”¨æˆ·è¯·æ±‚å¯¼å‘æœ€è¿‘/æœ€ä¼˜èŠ‚ç‚¹ ç¼©çŸ­ç‰©ç†ä¼ è¾“è·ç¦» â†’ é™ä½ RTT é¿å¼€å…¬ç½‘æ‹¥å¡ â†’ æé«˜ååé‡ è¾¹ç¼˜ç¼“å­˜é™æ€èµ„æº â†’ å‡å°‘å›æºæµé‡ éšè—æºç«™çœŸå® IP â†’ æŠ— DDoS æœ€ç›´æ¥çš„å°±æ˜¯ï¼šå…¬å…±çš„CNDå¤šä¸ªç½‘ç«™å…±ç”¨ä¸€ä¸ªï¼Œå…±ç”¨ä¸€ä¸ªç¼“å­˜ï¼›å°±è¿‘æœåŠ¡å™¨è¯·æ±‚ã€‚ é€šå¸¸å‰ç«¯åªå¤„ç†ä½¿ç”¨çš„åº“ï¼švueã€vuexã€vue-routerã€axiosã€element-uiç­‰ ä¼˜åŒ–å‰åå¯¹æ¯” vue2demoï¼švueã€vuexã€vue-routerã€axiosã€element-uï¼Œä¸åŒ…å«å…¶ä»–çš„åº“äº† ç›´æ¥æ‰“åŒ…ï¼š5mbå·¦å³ ä½¿ç”¨cdnåï¼š500kbä¸åˆ° ä»£ç vue.config.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556const &#123; defineConfig &#125; = require(&#x27;@vue/cli-service&#x27;)const isProd = process.env.NODE_ENV === &#x27;production&#x27;const cdnModules = &#123; vue: &#x27;Vue&#x27;, &#x27;vue-router&#x27;: &#x27;VueRouter&#x27;, vuex: &#x27;Vuex&#x27;, axios: &#x27;axios&#x27;, &#x27;element-ui&#x27;: &#x27;ELEMENT&#x27;&#125;// å¯¹åº” CDN é“¾æ¥ï¼ˆç‰ˆæœ¬å†™æ­»ï¼Œå¯è‡ªå·±å‡çº§ï¼‰const cdn = &#123; css: [ &#x27;https://unpkg.com/element-ui@2.15.14/lib/theme-chalk/index.css&#x27; ], js: [ &#x27;https://unpkg.com/vue@2.7.16/dist/vue.js&#x27;, &#x27;https://unpkg.com/vue-router@3.6.5/dist/vue-router.js&#x27;, &#x27;https://unpkg.com/vuex@3.6.2/dist/vuex.js&#x27;, &#x27;https://unpkg.com/axios@1.12.2/dist/axios.min.js&#x27;, &#x27;https://unpkg.com/element-ui@2.15.14/lib/index.js&#x27; ]&#125;module.exports = defineConfig(&#123; /** å…¼å®¹ä½ç‰ˆæœ¬ */ transpileDependencies: true, /** ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è·¯å¾„ */ publicPath: &#x27;/&#x27;, /** ç”Ÿäº§ç¯å¢ƒä¸ç”Ÿæˆé”™è¯¯å®šä½ */ productionSourceMap: isProd, devServer: &#123; historyApiFallback: true, /** ä»£ç†è¯·æ±‚ */ // proxy: &#123; // &#x27;/api&#x27;: &#123; // target: &#x27;http://localhost:8081&#x27;, // changeOrigin: true // &#125; // &#125; &#125;, // webpack å±‚é¢ externals configureWebpack: config =&gt; &#123; if (isProd) &#123; config.externals = cdnModules // ç­‰ä»·äº webpack çš„ externals &#125; &#125;, // é€šè¿‡ html-webpack-plugin é’©å­è‡ªåŠ¨æ’æ ‡ç­¾ chainWebpack: config =&gt; &#123; config.plugin(&#x27;html&#x27;).tap(args =&gt; &#123; args[0].cdn = isProd ? cdn : &#123; css: [], js: [] &#125; // å¼€å‘æ—¶ä¸æ³¨å…¥ return args &#125;) &#125;&#125;) index.html 123456789101112131415161718192021222324252627282930&lt;!DOCTYPE html&gt;&lt;html lang=&quot;&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot; /&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot; /&gt; &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot; /&gt; &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt; &lt;!-- CDN æ ·å¼ --&gt; &lt;% for (var i in htmlWebpackPlugin.options.cdn.css) &#123; %&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;%= htmlWebpackPlugin.options.cdn.css[i] %&gt;&quot; /&gt; &lt;% &#125; %&gt; &lt;!-- CDN è„šæœ¬ï¼ˆæ”¾å‰é¢å¯æå‰åŠ è½½ï¼‰ --&gt; &lt;% for (var i in htmlWebpackPlugin.options.cdn.js) &#123; %&gt; &lt;script src=&quot;&lt;%= htmlWebpackPlugin.options.cdn.js[i] %&gt;&quot;&gt;&lt;/script&gt; &lt;% &#125; %&gt; &lt;/head&gt; &lt;body&gt; &lt;noscript&gt; &lt;strong &gt;We&#x27;re sorry but &lt;%= htmlWebpackPlugin.options.title %&gt; doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.&lt;/strong &gt; &lt;/noscript&gt; &lt;div id=&quot;app&quot;&gt;&lt;/div&gt; &lt;!-- built files will be auto injected --&gt; &lt;/body&gt;&lt;/html&gt; æ³¨æ„ï¼šå¦‚æœä¸ä½¿ç”¨cdnï¼Œindex.htmlä¸­CDNè„šæœ¬ä»£ç éœ€è¦åˆ é™¤ï¼Œwebpackè¯†åˆ«ä¸äº†æ³¨é‡Šï¼Œä¸åˆ é™¤æ‰“åŒ…ä¼šæŠ¥é”™ å…¬å…±cdn æœåŠ¡å•† èŠ‚ç‚¹æ•° HTTP/2 Brotli å›½å†…å¤‡æ¡ˆ å¤‡æ³¨ jsDelivr 750+ (Cloudflare + ç½‘å®¿) âœ… âœ… å… è¢«å¢™æ¦‚ç‡ä½ unpkg Cloudflare å•æ ˆ âœ… âœ… å… å›æº npmï¼Œæ›´æ–°å¿« cdnjs Cloudflare âœ… âœ… å… åº“æœ€å…¨ å¯ç”¨ Gzip ä¼ è¾“ä½“ç§¯å†é™ 60% å·¦å³ï¼Œä¼šç”Ÿæˆä¸€äº›.gzçš„æ–‡ä»¶ï¼Œéœ€è¦æœåŠ¡å™¨é…ç½® 90%çš„é¡¹ç›®å‰ç«¯å¯ä»¥æ— è„‘åŠ ä¸ŠGzipå‹ç¼©ï¼Œå¦‚æœæœåŠ¡å™¨æˆ–ç”¨æˆ·çš„æµè§ˆå™¨ä¸æ”¯æŒä¹Ÿä¼šèµ°é»˜è®¤çš„æ–‡ä»¶ä¸ä¼šå‡ºç°é”™è¯¯ å®‰è£…1npm i compression-webpack-plugin -D vue.config.js 123456789101112131415// å¼•å…¥compression-webpack-pluginconst CompressionPlugin = require(&#x27;compression-webpack-plugin&#x27;)// åœ¨configureWebpackä¸­åŠ å…¥// ç”Ÿäº§ç¯å¢ƒå¼€å¯ gzip å‹ç¼©config.plugins.push( new CompressionPlugin(&#123; filename: &#x27;[path][base].gz&#x27;, algorithm: &#x27;gzip&#x27;, test: /\\.(js|css|html|svg|json)(\\?.*)?$/i, threshold: 10240, minRatio: 0.8, deleteOriginalAssets: false &#125;)) æ‡’åŠ è½½ é€šå¸¸æœ€å¸¸è§çš„å°±æ˜¯è·¯ç”±æ‡’åŠ è½½ï¼Œè¿˜å¯ä»¥ç»™å¼•å…¥çš„ç»„ä»¶åŠ ä¸Šæ‡’åŠ è½½ï¼Œä»¥åŠå¯¹å›¾ç‰‡è¿›è¡Œæ‡’åŠ è½½ æ‡’åŠ è½½ä¸»è¦æ˜¯å‡å°‘é¦–å±åŠ è½½ï¼Œé¿å…æµè§ˆå™¨ç¬¬ä¸€æ—¶é—´åŠ è½½ä¸€äº›æ²¡æœ‰ä½¿ç”¨åˆ°çš„è¯·æ±‚ è·¯ç”±æ‡’åŠ è½½å’Œç»„ä»¶æ‡’åŠ è½½è·¯ç”±æ‡’åŠ è½½å’Œç»„ä»¶æ‡’åŠ è½½åªéœ€è¦å¼•å…¥ä½¿ç”¨ä¸‹é¢è¿™ç§å³å¯ï¼Œä¸€èˆ¬è·¯ç”±æ‡’åŠ è½½å¯ä»¥è€ƒè™‘åŠ ä¸ŠwebpackChunkNameï¼Œæ‰“åŒ…åçš„åç§°å°±ä¼šå¸¦æœ‰homeä½œä¸ºåç§°çš„ä¸€éƒ¨åˆ† 1const Home = () =&gt; import(/* webpackChunkName: &quot;home&quot; */ &#x27;@/views/Home.vue&#x27;) å›¾ç‰‡æ‡’åŠ è½½ å›¾ç‰‡æ²¡æœ‰è¿›å…¥è§†å£ä¸è¿›è¡ŒåŠ è½½ï¼Œç›´æ¥åŠ ä¸Šloading=â€lazyâ€ï¼Œçƒ­é—¨æµè§ˆå™¨æ”¯æŒ 1&lt;img src=&quot;placeholder.jpg&quot; loading=&quot;lazy&quot; alt=&quot;ç¤ºä¾‹&quot; /&gt; vue-lazyload å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨æˆ–å…¶ä»–éçƒ­é—¨æµè§ˆå™¨åˆ™å¯ä»¥ä½¿ç”¨ä¸€äº›å¼€æºçš„ç»„ä»¶åº“ å®‰è£…1npm i vue-lazyload@^1.3.3 -S å…¨å±€æ³¨å†Œ12345678910111213141516171819import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;import VueLazyload from &#x27;vue-lazyload&#x27;/* ä»»æ„ 1Ã—1 é€æ˜ gifï¼Œä¹Ÿå¯æ¢æˆè‡ªå·±çš„ loading å›¾ */import loading from &#x27;@/assets/loading.gif&#x27;import error from &#x27;@/assets/error.png&#x27;Vue.use(VueLazyload, &#123; preLoad: 1.3, // æå‰ 1.3 å±å¼€å§‹åŠ è½½ error, // å¤±è´¥å ä½ loading, // åŠ è½½ä¸­å ä½ attempt: 1, // é‡è¯•æ¬¡æ•° listenEvents: [&#x27;scroll&#x27;, &#x27;wheel&#x27;, &#x27;mousewheel&#x27;, &#x27;resize&#x27;, &#x27;animationend&#x27;, &#x27;transitionend&#x27;]&#125;)new Vue(&#123; render: h =&gt; h(App)&#125;).$mount(&#x27;#app&#x27;) ä½¿ç”¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&lt;template&gt; &lt;div class=&quot;demo&quot;&gt; &lt;h3&gt;vue-lazyload æ¼”ç¤ºï¼ˆVue2ï¼‰&lt;/h3&gt; &lt;!-- æ™®é€šå›¾ç‰‡ï¼Œä¸ä½¿ç”¨é»˜è®¤çš„src --&gt; &lt;img v-lazy=&quot;img.src&quot; :key=&quot;img.src&quot; class=&quot;u-img&quot; v-for=&quot;img in list&quot; :alt=&quot;img.alt&quot; /&gt; &lt;!-- èƒŒæ™¯å›¾ --&gt; &lt;div v-lazy:background-image=&quot;bg&quot; :key=&quot;bg&quot; class=&quot;u-bg&quot; &gt;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; bg: &#x27;https://picsum.photos/800/400?random=0&#x27;, list: Array.from(&#123; length: 30 &#125;, (_, i) =&gt; (&#123; src: `https://picsum.photos/400/300?random=$&#123;i + 1&#125;`, alt: `pic-$&#123;i + 1&#125;` &#125;)) &#125; &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;.demo &#123; max-width: 800px; margin: 0 auto;&#125;.u-img &#123; display: block; width: 100%; height: 300px; object-fit: cover; margin-bottom: 20px; background: #f5f5f5;&#125;.u-bg &#123; width: 100%; height: 300px; background-size: cover; background-position: center;&#125;&lt;/style&gt; ä»£ç åˆ†å‰²ï¼ˆæ‹†åŒ…ï¼‰ å¯ä»¥å°†ä¸€äº›å¤§æ–‡ä»¶åˆ†å‰²æˆä¸€äº›å°ä¸€ç‚¹çš„æ–‡ä»¶ï¼ŒåŠ å¿«è¯·æ±‚é€Ÿåº¦ï¼Œä½†æ˜¯ä¸è¦åˆ†å‰²å¤ªç»†äº†ï¼Œåˆ†å‰²å¤ªç»†äº†åè€Œå¢åŠ äº†è¯·æ±‚æ•°é‡å¾—ä¸å¿å¤± æµè§ˆå™¨æœ‰6-8ä¸ªè¯·æ±‚é€šé“ï¼Œå¦‚æœå› ä¸ºä¸€ä¸ªå¤§ä¸€ç‚¹çš„æ–‡ä»¶å½±å“äº†è¯·æ±‚å°±å¯ä»¥è€ƒè™‘ä»£ç åˆ†å‰²äº†ï¼Œå…·ä½“å¤§å°éœ€è¦æ ¹æ®å®é™…çš„æœåŠ¡å™¨å¸¦å®½ã€ç”¨æˆ·çš„ç½‘ç»œç­‰å¤šç§å› ç´ å†³å®š ä»£ç åˆ†å‰²ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæœ‰äº›æ–‡ä»¶å°±æ˜¯æ‹†ä¸äº†çš„ï¼Œä¸è¦å¤ªæ‰§ç€ ä»£ç vue.config.js 12345678910// configureWebpackä¸­åŠ å…¥// ä»£ç åˆ†å‰²é…ç½®config.optimization = &#123; ...config.optimization, splitChunks: &#123; chunks: &#x27;all&#x27;, minSize: 20 * 1024, // å°äºå¤šå°‘ä¸å†åˆ†å‰² maxSize: 200 * 1024, // å¤§äºå¤šå°‘è¿›è¡Œåˆ†å‰² &#125;&#125; å›¾ç‰‡å‹ç¼© å°†å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼Œä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“å¯ä»¥å‹ç¼©å›¾ç‰‡ï¼Œä½†æ˜¯å¾ˆå¤šåº“ä¸‹è½½éƒ½ç¼ºå°‘å„ç§æ–‡ä»¶ï¼Œè€Œä¸”å¾ˆå¤šè¿˜ä¸‹è½½ä¸ä¸‹æ¥ï¼Œæœ€ç»ˆå‹ç¼©çš„å¤§å°ä¹Ÿä¸€èˆ¬ï¼Œå¤§å›¾è€ƒè™‘åœ¨è®¾è®¡é‚£è¾¹ä¸‹è½½å°ä¸€ç‚¹çš„å›¾ç‰‡ï¼Œæˆ–è€…ä½¿ç”¨åœ¨çº¿çš„å‹ç¼©ç½‘ç«™æ‰‹åŠ¨å‹ç¼©ï¼Œå°å›¾è½¬base64ç›´æ¥åŠ è½½ è½¬base64æ˜¯ä¸ºäº†åŠ å¿«è¯·æ±‚é€Ÿåº¦ï¼Œä½†æ˜¯base64å¯¹åº”ç¨å¾®å¤§ç‚¹çš„å›¾ç‰‡åè€Œä¼šå¢åŠ å¤§å°ï¼Œå»ºè®®ä¸è¦è¶…è¿‡10kb è¿…æ·ï¼šhttps://yasuo.xunjiepdf.com/img/ ä»£ç vue.config.js 123456789101112// chainWebpackä¸­åŠ å…¥...// å°å›¾è½¬base64config.module .rule(&quot;images&quot;) .test(/\\.(png|jpe?g|gif|ico)$/i) .type(&quot;asset&quot;) .parser(&#123; dataUrlCondition: &#123; maxSize: 4 * 1024, // 4kb &#125;,&#125;); åˆ é™¤æ‰“å° é€šå¸¸æ‰“å°åªæ˜¯å¼€å‘é˜¶æ®µä½¿ç”¨ï¼Œç”Ÿäº§é˜¶æ®µä¸éœ€è¦ï¼Œæˆ–è€…æ˜¯è¯´ç¨³å®šè¿è¡Œçš„ç‰ˆæœ¬ä¸éœ€è¦ ä»£ç vue.config.js 1234567891011121314151617// å¼•å…¥terser-webpack-pluginï¼Œè„šæ‰‹æ¶ä»¥åŠæœ‰è¿™ä¸ªäº†ä¸éœ€è¦å•ç‹¬å®‰è£…const TerserPlugin = require(&#x27;terser-webpack-plugin&#x27;)// configureWebpackä¸­åŠ å…¥/** åˆ é™¤console.* å‡½æ•°è°ƒç”¨ */config.optimization.minimizer = [new TerserPlugin(&#123; terserOptions: &#123; compress: &#123; // drop_console: true, // åˆ é™¤æ‰€æœ‰çš„ console è¯­å¥ pure_funcs: [&#x27;console.log&#x27;, &#x27;console.error&#x27;], // ç§»é™¤æŒ‡å®šçš„å‡½æ•°è°ƒç”¨ drop_debugger: true, &#125; &#125; &#125;)] å…¶ä»–æ–¹æ¡ˆ æœåŠ¡å™¨è®¾ç½®é™æ€èµ„æºç¼“å­˜ï¼ŒcdnåŠ é€Ÿç­‰ HTTP/2 + Server Push å¤šæ–‡ä»¶ å¹¶è¡ŒåŠ è½½ å­—ä½“æŠ½ç¦»ï¼Œä¾‹å¦‚æŸäº›å­—ä½“åªä½¿ç”¨äº†å‡ ä¸ªå­—ï¼Œå¯ä»¥æ‰¾ä¸€äº›å·¥å…·è¿›è¡ŒæŠ½ç¦» æˆ–è€…å®‰è£…ä¸€äº›å·¥å…·æŸ¥çœ‹ä½“ç§¯ï¼ŒæŒ‰éœ€ä¼˜åŒ– webpackï¼šwebpack-bundle-analyzer viteï¼šrollup-plugin-visualizer å¦‚æœéƒ½æŠ˜è…¾å®Œäº†è¿˜ä¸è¡Œå°±èŠ±ç‚¹é’±å‡çº§æœåŠ¡å™¨å§"},{"title":"å…è´¹äº‘æœåŠ¡å™¨å’ŒåŸŸå","path":"2025/09/10/å…è´¹äº‘æœåŠ¡å™¨å’ŒåŸŸå/","text":"å…è´¹äº‘æœåŠ¡å™¨å’ŒåŸŸåClawCloudå…è´¹äº‘æœåŠ¡å™¨ï¼ˆæ¯ä¸ªæœˆ5ç¾å…ƒçš„é¢åº¦ï¼‰ï¼šhttps://run.claw.cloud/ digitalplatåŸŸåï¼ˆ2ä¸ªåŸŸåï¼‰ï¼šhttps://domain.digitalplat.org/ å…è´¹åŸŸåç”³è¯·å¤§è‡´æ­¥éª¤ å‰å¾€å®˜ç½‘æ³¨å†Œè´¦å· ç»‘å®šGitHubï¼Œå¹¶ç‚¹ä¸Šæ˜Ÿæ ‡ æ³¨å†ŒåŸŸåçœ‹å®˜ç½‘æç¤º åˆ›å»ºçš„æ—¶å€™nséšä¾¿å¡«åé¢æ”¹å°±å¥½ å‰å¾€cloudflareæ·»åŠ è¿æ¥åŸŸ é€‰æ‹©å…è´¹çš„ä¸€ç›´æ— è„‘ä¸‹ä¸€æ­¥å³å¯ å¤åˆ¶ä¸¤ä¸ªnså›åˆ°digitalplatä¸­æ‰¾åˆ°æˆ‘çš„åŸŸåæ›´æ–°å¤åˆ¶çš„nså³å¯ å…è´¹äº‘æœåŠ¡å™¨å¤§è‡´æ­¥éª¤ æ³¨å†Œè´¦å·ï¼ˆä½¿ç”¨GitHub&gt;180å¤©çš„è´¦å·ï¼‰ å°½é‡ä½¿ç”¨ç¾å›½çš„ï¼Œæ—¥æœ¬å’Œæ–°åŠ å¡è™½ç„¶æ›´è¿‘æ›´å¿«ä½†æ˜¯äººæ•°å¤ªå¤šäº†æ¯æ¬¡æ›´æ–°å¾ˆæ…¢ å¯ä»¥é€šè¿‡dockerå®‰è£…è‡ªå·±å¼€å‘çš„é¡¹ç›®ã€ä¹Ÿå¯ä»¥å»å•†åº—è·å–å®˜ç½‘å¼„å¥½çš„é¡¹ç›® åˆ›å»ºé¡¹ç›® åœ¨ç«¯å£é‚£é‡Œæ‰“å¼€å…¬å¼€ å¤åˆ¶ç”Ÿæˆçš„åœ°å€åˆ°cloudflareä¸­è‡ªå·±çš„åŸŸåä¸­æ·»åŠ NDSè®°å½• é€‰æ‹©ç±»å‹ä¸ºCNAMEï¼Œåç§°ç”¨äºŒçº§åŸŸåï¼Œä¾‹å¦‚ï¼šwww å†…å®¹ä¸ºå¤åˆ¶é¡¹ç›®ç”Ÿæˆçš„å…¬å¼€åœ°å€ ä»£ç†æ¨¡å¼å…ˆå…³æ‰ ä¿å­˜å¯èƒ½è¦ç­‰ä¸€ä¼šæ‰èƒ½åœ¨é¡¹ç›®ç»‘å®šé‚£æˆåŠŸ åˆ°é¡¹ç›®åˆ›å»ºæˆåŠŸåï¼Œå›åˆ°cloudflareæ‰“å¼€DNSä¸­çš„ä»£ç†åŠ å¿«è®¿é—®é€Ÿåº¦"},{"title":"çŸ¥è¯†ç¢ç‰‡","path":"2025/05/12/çŸ¥è¯†ç¢ç‰‡/","text":"çŸ¥è¯†ç¢ç‰‡èƒŒé¢éšè— backface-visibility: hidden; ä¿æŒå®½é«˜æ¯” å®½åº¦è®¾ç½®ç™¾åˆ†æ¯”ï¼Œè®¾ç½®aspect-ratio:16/9;(å®½/é«˜) å®½é«˜éƒ½ä½¿ç”¨vw/vh Csså°æ‰‹æŒ‡ cursor: pointer; è®¾ç½®å…‰æ ‡çš„ç±»å‹ 1234567cursor: pointer; /* å°æ‰‹æŒ‡ */cursor: help; /* é¼ æ ‡å¸¦ï¼Ÿ */cursor: wait; /* é¼ æ ‡å˜åŠ è½½ */cursor: crosshair; /* é¼ æ ‡å˜+ */cursor: not-allowed; /* é¼ æ ‡å˜ç¦æ­¢ */cursor: zoom-in; /* é¼ æ ‡å˜æ”¾å¤§é•œ */cursor: grab; /* é¼ æ ‡å˜æ‹–æ‹½å°æ‰‹ */ æŸ¥çœ‹æ›´å¤š Csså›¾ç‰‡æ¨¡ç³Š filter: blur(npx); 123filter: blur(10px); /* blur()æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‡Œé¢æ•°å€¼è¶Šå¤§ï¼Œå›¾ç‰‡è¶Šæ¨¡ç³Š å•ä½px*/filter: brightness(); /* brightness() å‡½æ•°å°†çº¿æ€§ä¹˜æ³•å™¨åº”ç”¨äºè¾“å…¥å›¾åƒï¼Œä½¿å…¶çœ‹èµ·æ¥æˆ–å¤šæˆ–å°‘åœ°å˜å¾—æ˜äº®ã€‚å•ä½%*/filter: contrast(); /* contrast() å‡½æ•°å¯è°ƒæ•´è¾“å…¥å›¾åƒçš„å¯¹æ¯”åº¦ã€‚å•ä½%*/ æŸ¥çœ‹æ›´å¤š Cssæ»šåŠ¨åŠ¨ç”» scroll-behavior: smooth; å½“ç”¨æˆ·æ‰‹åŠ¨å¯¼èˆªæˆ–è€… CSSOM scrolling API è§¦å‘æ»šåŠ¨æ“ä½œæ—¶ï¼ŒCSS å±æ€§ scroll-behavior ä¸ºä¸€ä¸ªæ»šåŠ¨æ¡†æŒ‡å®šæ»šåŠ¨è¡Œä¸ºï¼Œå…¶ä»–ä»»ä½•çš„æ»šåŠ¨ï¼Œä¾‹å¦‚é‚£äº›ç”±äºç”¨æˆ·è¡Œä¸ºè€Œäº§ç”Ÿçš„æ»šåŠ¨ï¼Œä¸å—è¿™ä¸ªå±æ€§çš„å½±å“ã€‚åœ¨æ ¹å…ƒç´ ä¸­æŒ‡å®šè¿™ä¸ªå±æ€§æ—¶ï¼Œå®ƒåè€Œé€‚ç”¨äºè§†çª—ã€‚ 1scroll-behavior: smooth; æŸ¥çœ‹æ›´å¤š é­”æ³•æ³¨é‡Š JsDocã€é­”æ³•æ³¨é‡Š 12345678910111213141516171819202122232425@param å‚æ•°æ³¨é‡Š/*** @param &#123;String&#125; wording éœ€è¦è¯´çš„å¥å­*/@return è¿”å›å€¼æ³¨é‡Š/** @return &#123;Number&#125; è¿”å›å€¼æè¿°*/@example ç¤ºä¾‹æ³¨é‡Š/** @example* multiply(3, 2);*/@author ä»£ç çš„ä½œè€…ä¿¡æ¯/** * @author Jane Smith &lt;change@change.com&gt; */@versionå½“å‰ä»£ç çš„ç‰ˆæœ¬/** @version 1.2.3*/@fileå¯¹å½“å‰ä»£ç æ–‡ä»¶çš„æè¿°/** * @file Manages the configuration settings for the widget. */ æŸ¥çœ‹æ›´å¤š å¤šé‡æ¡ä»¶åˆ¤æ–­ä¼˜åŒ– æœ€ç®€å•å°±æ˜¯if else if æˆ–switch ä¼˜åŒ–å®ç”¨å¯¹è±¡+??ï¼ˆç©ºå€¼åˆå¹¶ï¼‰ 12345678910111213141516171819// ä¼˜åŒ–å‰let permissions = &#x27;&#x27;const value = &quot;admin&quot;if(value==&quot;admin&quot;)&#123; permissions = &quot;æ™®é€šç®¡ç†å‘˜&quot;&#125;else if(value==&quot;xadmin&quot;)&#123; permissions = &quot;è¶…çº§ç®¡ç†å‘˜&quot;&#125;else&#123; permissions = &quot;éç®¡ç†å‘˜ç”¨æˆ·&quot;&#125;// ä¼˜åŒ–ålet permissions = &#x27;&#x27;const value = &quot;admin&quot;const values = &#123; admin:&quot;æ™®é€šç®¡ç†å‘˜&quot;, xadmin:&quot;è¶…çº§ç®¡ç†å‘˜&quot;&#125;permissions = values[value]??&quot;éç®¡ç†å‘˜ç”¨æˆ·&quot; å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜ä¸ºä»€ä¹ˆæ–‡ç« åˆ—è¡¨æ•°æ®ä¸­çš„å¥½å¤šå›¾ç‰‡èµ„æºè¯·æ±‚å¤±è´¥è¿”å› 403ï¼Ÿ è¿™æ˜¯å› ä¸ºæˆ‘ä»¬é¡¹ç›®çš„æ¥å£æ•°æ®æ˜¯åç«¯é€šè¿‡çˆ¬è™«æŠ“å–çš„ç¬¬ä¸‰æ–¹å¹³å°å†…å®¹ï¼Œè€Œç¬¬ä¸‰æ–¹å¹³å°å¯¹å›¾ç‰‡èµ„æºåšäº†é˜²ç›—é“¾ä¿æŠ¤å¤„ç†ã€‚ ç¬¬ä¸‰æ–¹å¹³å°æ€ä¹ˆå¤„ç†å›¾ç‰‡èµ„æºä¿æŠ¤çš„ï¼Ÿ æœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ Referer è¯·æ±‚å¤´è¯†åˆ«è®¿é—®æ¥æºï¼Œç„¶åå¤„ç†èµ„æºè®¿é—®ã€‚ å…³äºRefererï¼šhttp://www.ruanyifeng.com/blog/2019/06/http-referer.html Referer æ˜¯ HTTP è¯·æ±‚å¤´çš„ä¸€éƒ¨åˆ†ï¼Œå½“æµè§ˆå™¨å‘ Web æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸Š Refererï¼Œå®ƒåŒ…å«äº†å½“å‰è¯·æ±‚èµ„æºçš„æ¥æºé¡µé¢çš„åœ°å€ã€‚æœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ Referer è¯·æ±‚å¤´è¯†åˆ«è®¿é—®æ¥æºï¼Œå¯èƒ½ä¼šä»¥æ­¤è¿›è¡Œç»Ÿè®¡åˆ†æã€æ—¥å¿—è®°å½•ä»¥åŠç¼“å­˜ä¼˜åŒ–ç­‰ã€‚ æ€ä¹ˆè§£å†³ï¼Ÿ ä¸è¦å‘é€ referrer ï¼Œå¯¹æ–¹æœåŠ¡ç«¯å°±ä¸çŸ¥é“ä½ ä»å“ªæ¥çš„äº†ï¼Œå§‘ä¸”è®¤ä¸ºæ˜¯ä½ æ˜¯è‡ªå·±äººå§ã€‚ å¦‚ä½•è®¾ç½®ä¸å‘é€ referrerï¼Ÿ ç”¨ &lt;a&gt;ã€&lt;area&gt;ã€&lt;img&gt;ã€&lt;iframe&gt;ã€&lt;script&gt; æˆ–è€… &lt;link&gt; å…ƒç´ ä¸Šçš„ referrerpolicy å±æ€§ä¸ºå…¶è®¾ç½®ç‹¬ç«‹çš„è¯·æ±‚ç­–ç•¥ï¼Œä¾‹å¦‚ï¼š &lt;img src=&quot;http://â€¦â€¦&quot; referrerPolicy=&quot;no-referrer&quot;&gt; æˆ–è€…ç›´æ¥åœ¨ HTMl é¡µé¢å¤´ä¸­é€šè¿‡ meta å±æ€§å…¨å±€é…ç½®ï¼š &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; æ»šåŠ¨æ¡æ ·å¼ç”¨pngæ ¼å¼èƒŒæ™¯å›¾ç‰‡ï¼Œåˆ‡å›¾çš„æ—¶å€™è°ƒæ•´ç•™ç™½ç„¶åä¿®æ”¹æ»šåŠ¨æ¡æ»‘å—æ ·å¼ 1234567891011121314151617181920/* æ»šåŠ¨æ¡ */.scrollbar &#123; width: 98%; overflow-y: scroll; overflow-x: hidden; max-height: 6.5rem; padding-right: .4rem; box-sizing: border-box;&#125;.scrollbar::-webkit-scrollbar &#123; width: 0.2rem; background: url(../images/scrollbar_bg.png) no-repeat center / 150% 100%;&#125;.scrollbar::-webkit-scrollbar-thumb &#123; /* background: url(../images/scrollbar_thumb_bg.png) no-repeat center / 100% 100%; */ border-radius: .1rem; background: linear-gradient(0deg, #9a2aea, #c868fe);&#125; é¡µé¢å†…å®¹ä½¿ç”¨JSåŠ¨æ€è·å–12345&lt;div&gt; &lt;script&gt; document.write((new Date()).getFullYear()) &lt;/script&gt;&lt;/div&gt; ä¸‹è½½å‘½å é»˜è®¤æ–‡ä»¶åç§°æ”¹ä¸ºè‹±æ–‡æˆ–æ•°å­—ï¼Œå¯ä»¥ä½¿ç”¨aæ ‡ç­¾çš„downloadå±æ€§æŒ‡å®šåç§° ç§»åŠ¨ç«¯æ–‡å­— åœ¨æ¨¡æ‹Ÿå™¨ä¸­è®¾ç½®çš„æ–‡å­—å¤§å°è°ƒæ•´æ—¶æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œä½†æ˜¯åˆ°äº†æ‰‹æœºä¸­å¤§å°å°±æœ‰æ˜æ˜¾çš„å˜åŒ–äº†ï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ä¸èƒ½ä¾é æ¨¡æ‹Ÿå™¨ æ–‡å­—æº¢å‡ºâ€˜â€¦â€™123456/*1. å…ˆå¼ºåˆ¶ä¸€è¡Œå†…æ˜¾ç¤ºæ–‡æœ¬ï¼Œé»˜è®¤ normal è‡ªåŠ¨æ¢è¡Œ*/ white-space: nowrap; /*2. è¶…å‡ºçš„éƒ¨åˆ†éšè—*/ overflow: hidden; /*3. æ–‡å­—ç”¨çœç•¥å·æ›¿ä»£è¶…å‡ºçš„éƒ¨åˆ†*/ text-overflow: ellipsis; 12345678910/*1. è¶…å‡ºçš„éƒ¨åˆ†éšè— */overflow: hidden;/*2. æ–‡å­—ç”¨çœç•¥å·æ›¿ä»£è¶…å‡ºçš„éƒ¨åˆ† */text-overflow: ellipsis;/* 3. å¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º */display: -webkit-box;/* 4. é™åˆ¶åœ¨ä¸€ä¸ªå—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•° */-webkit-line-clamp: 2;/* 5. è®¾ç½®æˆ–æ£€ç´¢ä¼¸ç¼©ç›’å¯¹è±¡çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ */-webkit-box-orient: vertical; è§†é¢‘å°é¢åœ¨videoä¸Šé¢åŠ ä¸Šposterå±æ€§ï¼ŒæŒ‡å®šå°é¢å›¾ç‰‡ 1234&lt;video src=&quot;https://ideal.chinaceotv.com/2023/20230321/dianqiyiliao.mp4&quot; poster=&quot;images/video_1.png&quot; controls width=&quot;100%&quot;height=&quot;100%&quot; preload=&quot;preload&quot; x5-video-player-type=&quot;h5&quot; x5-video-player-fullscreen=&quot;true&quot;webkit-playsinline=&quot;true&quot; playsinline=&quot;true&quot; x5-video-orientation=&quot;portrait&quot;style=&quot;object-fit: cover;&quot;&gt;&lt;/video&gt; å›¾ç‰‡è£å‰ªæ‹‰ä¼¸object-fitï¼šç”¨äº img å’Œ video æ ‡ç­¾ï¼Œä¸€èˆ¬å¯ä»¥å¯¹è¿™äº›å…ƒç´ è¿›è¡Œä¿ç•™åŸå§‹æ¯”ä¾‹çš„å‰ªåˆ‡ã€ç¼©æ”¾æˆ–è€…ç›´æ¥è¿›è¡Œæ‹‰ä¼¸ç­‰ã€‚ fill é»˜è®¤ï¼Œä¸ä¿è¯ä¿æŒåŸæœ‰çš„æ¯”ä¾‹ï¼Œå†…å®¹æ‹‰ä¼¸å¡«å……æ•´ä¸ªå†…å®¹å®¹å™¨ã€‚ contain ä¿æŒåŸæœ‰å°ºå¯¸æ¯”ä¾‹ã€‚å†…å®¹è¢«ç¼©æ”¾ã€‚ cover ä¿æŒåŸæœ‰å°ºå¯¸æ¯”ä¾‹ã€‚ä½†éƒ¨åˆ†å†…å®¹å¯èƒ½è¢«å‰ªåˆ‡ã€‚ none ä¿ç•™åŸæœ‰å…ƒç´ å†…å®¹çš„é•¿åº¦å’Œå®½åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´å†…å®¹ä¸ä¼šè¢«é‡ç½®ã€‚ scale-down ä¿æŒåŸæœ‰å°ºå¯¸æ¯”ä¾‹ã€‚å†…å®¹çš„å°ºå¯¸ä¸ none æˆ– contain ä¸­çš„ä¸€ä¸ªç›¸åŒï¼Œå–å†³äºå®ƒä»¬ä¸¤ä¸ªä¹‹é—´è°å¾—åˆ°çš„å¯¹è±¡å°ºå¯¸ä¼šæ›´å°ä¸€äº›ã€‚ initial è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼Œå…³äºinitial inherit ä»è¯¥å…ƒç´ çš„çˆ¶å…ƒç´ ç»§æ‰¿å±æ€§ã€‚ å…³äºinherit è°·æ­Œæµè§ˆå™¨ç½‘é¡µæˆªå›¾æ‰“å¼€æ§åˆ¶å°ï¼šctrl + shift + pè¾“å…¥ï¼šcfz åˆ¤æ–­æ˜¯ç§»åŠ¨ç«¯è¿˜æ˜¯PCç«¯ é€šè¿‡jsåˆ¤æ–­ 1234567if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) &#123; // ç§»åŠ¨ç«¯ // window.location.href=&quot;http://campus.51job.com/whlkg/&quot;;&#125; else &#123; // PC // window.location.href=&quot;http://campus.51job.com/whlkg/&quot;;&#125; hoverååŠ ä¸Šè¾¹æ¡†å…ƒç´ åç§» é»˜è®¤åŠ ä¸Šè¾¹æ¡†ï¼Œé¢œè‰²è®¾ç½®é€æ˜ Flexå¸ƒå±€çš„é—´è· å…¶ä»–çš„å±æ€§ç…§å¸¸è®¾ç½®ï¼Œå¢åŠ gapå±æ€§ 1gapï¼š10px ç‚¹å‡»ç©¿é€ ç»™éœ€è¦ç©¿é€çš„domè®¾ç½® 1pointer-events:none å°ç¨‹åºè§†é¢‘åœ°å€å¡«å‘ åœ¨å°ç¨‹åºé‡Œé¢ï¼Œå¦‚æœè§†é¢‘çš„åœ°å€åŒ…å«ä¸­æ–‡ä¼šå‡ºç°åœ¨æ¨¡æ‹Ÿå™¨å¯ä»¥æ’­æ”¾ï¼Œä½†æ˜¯çœŸæœºä¸èƒ½æ’­æ”¾ä½¿ç”¨è¿™ä¸ªå‡½æ•°å°†éœ€è¦è½¬æ¢çš„éƒ¨åˆ†å–å‡ºæ¥è¿›è¡Œè½¬æ¢ 12345678910// ç”¨äºç¼–ç URLå‚æ•° encodeUrlParam(param) &#123; // å¯¹å‚æ•°è¿›è¡ŒencodeURIComponentç¼–ç  return encodeURIComponent(param);&#125;,// ç”¨äºè§£ç URLå‚æ•°decodeUrlParam(param) &#123; // å¯¹å‚æ•°è¿›è¡ŒdecodeURIComponentè§£ç  return decodeURIComponent(param);&#125; ç½‘é¡µå¯ç¼–è¾‘1document.designMode = &quot;on&quot;;"},{"title":"é¡¹ç›®å¸¸ç”¨ï¼ˆå‰ç¨‹æ— å¿§ï¼‰","path":"2025/05/12/é¡¹ç›®å¸¸ç”¨å†…å®¹/","text":"é¡¹ç›®å¸¸ç”¨ï¼ˆå‰ç¨‹æ— å¿§ï¼‰ä¸ªäººå…¬å…±æ ·å¼1234567891011121314151617181920212223242526272829303132333435363738394041424344:root &#123; --color: #fff;&#125;img &#123; max-width: 100%; max-height: 100%;&#125;img.title &#123; display: block; margin: 0 auto;&#125;img.center &#123; display: block; margin: 0 auto;&#125;.text_2em &#123; line-height: 2em;&#125;.text_2em_in &#123; text-indent: 2em; line-height: 2em;&#125;.text_ju &#123; text-align: justify; word-wrap: break-word;&#125;.text_center &#123; text-align: center;&#125;.title &#123; font-weight: 900;&#125;.color &#123; color: var(--color);&#125; æ»šåŠ¨æ¡æ ·å¼ç”¨pngæ ¼å¼èƒŒæ™¯å›¾ç‰‡ï¼Œåˆ‡å›¾çš„æ—¶å€™è°ƒæ•´ç•™ç™½ ç„¶åä¿®æ”¹æ»šåŠ¨æ¡æ»‘å—æ ·å¼ 1234567891011121314151617181920/* æ»šåŠ¨æ¡ */.scrollbar &#123; width: 98%; overflow-y: scroll; overflow-x: hidden; max-height: 6.5rem; padding-right: .4rem; box-sizing: border-box;&#125;.scrollbar::-webkit-scrollbar &#123; width: 0.2rem; background: url(../images/scrollbar_bg.png) no-repeat center / 150% 100%;&#125;.scrollbar::-webkit-scrollbar-thumb &#123; /* background: url(../images/scrollbar_thumb_bg.png) no-repeat center / 100% 100%; */ border-radius: .1rem; background: linear-gradient(0deg, #9a2aea, #c868fe);&#125; é”šç‚¹é“¾æ¥1234567html &#123; // åŠ¨ç”» scroll-behavior: smooth;&#125;#xxx:target &#123; // è·³è½¬åçš„åœ°ç‚¹ padding-top: 125px;&#125; ç¬¬ä¸‰æ–¹ç½‘ç«™è·³è½¬12345678910111213141516&lt;script&gt; document .querySelector(&#x27;ç¬¬ä¸‰æ–¹è·³è½¬çš„æ ‡ç­¾é€‰æ‹©å™¨&#x27;) .addEventListener(&#x27;click&#x27;, function (e) &#123; e.preventDefault(); if ( window.confirm( &#x27;æ‚¨å³å°†ç¦»å¼€å‰ç¨‹æ— å¿§å®˜æ–¹æ‹›è˜ç½‘ç«™ï¼Œå‰å¾€ç¬¬ä¸‰æ–¹é¡µé¢ã€‚æ˜¯å¦ç¡®è®¤å‰å¾€ï¼Ÿ&#x27; ) ) &#123; window.location.href = &#x27;&#x27;; &#125; else &#123; return false; &#125; &#125;);&lt;/script&gt; é¡µé¢å†…å®¹ä½¿ç”¨JSåŠ¨æ€è·å–12345&lt;div&gt; &lt;script&gt; document.write((new Date()).getFullYear()) &lt;/script&gt;&lt;/div&gt; ç¡®ä¿å†…å®¹æœ€å°æ»¡å±ä½¿ç”¨cssè®¡ç®—ä¸»ä½“æœ€å°é«˜åº¦ 1min-height: calc(100vh - 625px - 50px - 40px); /*å±å¹•é«˜åº¦ - å¯¼èˆª - banner - å¤–è¾¹è· - ç‰ˆæƒ*/ å…·ä½“çœ‹å®é™…æƒ…å†µ æ–‡å­—ä¸¤ç«¯å¯¹é½æ–‡å­—ä¸¤ç«¯å¯¹é½ + å¼ºåˆ¶æ¢è¡Œ 12text-align: justify;/* æ–‡å­—ä¸¤ç«¯å¯¹é½ */word-wrap: break-word;/* å¼ºåˆ¶æ¢è¡Œ */ ä¸‹è½½å‘½åPCï¼šé»˜è®¤æ–‡ä»¶åç§°æ”¹ä¸ºè‹±æ–‡æˆ–æ•°å­—ï¼Œç„¶åä½¿ç”¨downloadå±æ€§æŒ‡å®šåç§°ï¼›ç»“å°¾è¦å¸¦ä¸Šåç¼€H5ï¼šä¸è¦ä½¿ç”¨download ç§»åŠ¨ç«¯æ–‡å­—åœ¨æ¨¡æ‹Ÿå™¨ä¸­è®¾ç½®çš„æ–‡å­—å¤§å°è°ƒæ•´æ—¶æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œä½†æ˜¯åˆ°äº†æ‰‹æœºä¸­å¤§å°å°±æœ‰æ˜æ˜¾çš„å˜åŒ–äº†ï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ä¸èƒ½ä¾é æ¨¡æ‹Ÿå™¨ æ–‡å­—æº¢å‡ºâ€˜â€¦â€™123456/*1. å…ˆå¼ºåˆ¶ä¸€è¡Œå†…æ˜¾ç¤ºæ–‡æœ¬*/ white-space: nowrap; ï¼ˆ é»˜è®¤ normal è‡ªåŠ¨æ¢è¡Œï¼‰ /*2. è¶…å‡ºçš„éƒ¨åˆ†éšè—*/ overflow: hidden; /*3. æ–‡å­—ç”¨çœç•¥å·æ›¿ä»£è¶…å‡ºçš„éƒ¨åˆ†*/ text-overflow: ellipsis; 12345678910/*1. è¶…å‡ºçš„éƒ¨åˆ†éšè— */overflow: hidden;/*2. æ–‡å­—ç”¨çœç•¥å·æ›¿ä»£è¶…å‡ºçš„éƒ¨åˆ† */text-overflow: ellipsis;/* 3. å¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º */display: -webkit-box;/* 4. é™åˆ¶åœ¨ä¸€ä¸ªå—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•° */-webkit-line-clamp: 2;/* 5. è®¾ç½®æˆ–æ£€ç´¢ä¼¸ç¼©ç›’å¯¹è±¡çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ */-webkit-box-orient: vertical; æ–‡å­—å†…å®¹æ›¿æ¢éƒ¨åˆ†æ•°æ®è¦æ³¨æ„ä¸­è‹±æ–‡ç¬¦å·ï¼Œåˆ«äººç»™åˆ°çš„ä¸ä¸€å®šæ˜¯ä¸€æ ·çš„ï¼Œè¦ä¹ˆæ‰‹åŠ¨æ›¿æ¢ï¼Œè¦ä¹ˆjså¤šå†™ä¸€ç§æ›¿æ¢ 1string = string.replace(/èŒä½æè¿°ï¼š/g, &#x27;&lt;span&gt;èŒä½æè¿°ï¼š&lt;/span&gt;&#x27;) è§†é¢‘å°é¢åœ¨videoä¸Šé¢åŠ ä¸Šposterå±æ€§ï¼ŒæŒ‡å®šå°é¢å›¾ç‰‡ 1234&lt;video src=&quot;xxx.mp4&quot; poster=&quot;images/video.png&quot; controls width=&quot;100%&quot;height=&quot;100%&quot; preload=&quot;preload&quot; x5-video-player-type=&quot;h5&quot; x5-video-player-fullscreen=&quot;true&quot;webkit-playsinline=&quot;true&quot; playsinline=&quot;true&quot; x5-video-orientation=&quot;portrait&quot;style=&quot;object-fit: cover;&quot;&gt;&lt;/video&gt; å¾®ä¿¡åˆ†äº«ä½¿ç”¨å·²ç»å°è£…å¥½çš„çš„åº“ï¼Œå›¾ç‰‡ä¸¢å¤± åœ¨æ–‡ä»¶ä¸­çš„åç§°å¥½åƒæ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”è¦ä½¿ç”¨hpptså¼€å¤´çš„ å›¾ç‰‡è£å‰ªæ‹‰ä¼¸object-fitï¼šç”¨äº img å’Œ video æ ‡ç­¾ï¼Œä¸€èˆ¬å¯ä»¥å¯¹è¿™äº›å…ƒç´ è¿›è¡Œä¿ç•™åŸå§‹æ¯”ä¾‹çš„å‰ªåˆ‡ã€ç¼©æ”¾æˆ–è€…ç›´æ¥è¿›è¡Œæ‹‰ä¼¸ç­‰ã€‚ fill é»˜è®¤ï¼Œä¸ä¿è¯ä¿æŒåŸæœ‰çš„æ¯”ä¾‹ï¼Œå†…å®¹æ‹‰ä¼¸å¡«å……æ•´ä¸ªå†…å®¹å®¹å™¨ã€‚ contain ä¿æŒåŸæœ‰å°ºå¯¸æ¯”ä¾‹ã€‚å†…å®¹è¢«ç¼©æ”¾ã€‚ cover ä¿æŒåŸæœ‰å°ºå¯¸æ¯”ä¾‹ã€‚ä½†éƒ¨åˆ†å†…å®¹å¯èƒ½è¢«å‰ªåˆ‡ã€‚ none ä¿ç•™åŸæœ‰å…ƒç´ å†…å®¹çš„é•¿åº¦å’Œå®½åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´å†…å®¹ä¸ä¼šè¢«é‡ç½®ã€‚ scale-down ä¿æŒåŸæœ‰å°ºå¯¸æ¯”ä¾‹ã€‚å†…å®¹çš„å°ºå¯¸ä¸ none æˆ– contain ä¸­çš„ä¸€ä¸ªç›¸åŒï¼Œå–å†³äºå®ƒä»¬ä¸¤ä¸ªä¹‹é—´è°å¾—åˆ°çš„å¯¹è±¡å°ºå¯¸ä¼šæ›´å°ä¸€äº›ã€‚ initial è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼Œå…³äºinitial inherit ä»è¯¥å…ƒç´ çš„çˆ¶å…ƒç´ ç»§æ‰¿å±æ€§ã€‚ å…³äºinherit è°·æ­Œç½‘é¡µæˆªå›¾æ‰“å¼€æ§åˆ¶å°ï¼šctrl + shift + p è¾“å…¥ï¼šcfz å›è½¦ åˆ¤æ–­æ˜¯ç§»åŠ¨ç«¯è¿˜æ˜¯PCç«¯1234567if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) &#123; // ç§»åŠ¨ç«¯ // window.location.href=&quot;http://campus.51job.com/whlkg/&quot;;&#125; else &#123; // PC // window.location.href=&quot;http://campus.51job.com/whlkg/&quot;;&#125; hoverååŠ ä¸Šè¾¹å¸¦æœ‰æ¡†å…ƒç´ åç§»é»˜è®¤åŠ ä¸Šè¾¹æ¡†ï¼Œé¢œè‰²è®¾ç½®é€æ˜ æˆ–è€… ä½¿ç”¨ç›’æ¨¡å‹"},{"title":"å°ç¨‹åºå°è£…æŠ½ç¦»","path":"2025/05/12/å°ç¨‹åºå°è£…æŠ½ç¦»/","text":"å°ç¨‹åºå°è£…æŠ½ç¦» æ¥æºäºuniappé¡¹ç›® è¯·æ±‚å°è£…å•ä¸€è·¯å¾„ åŸç”Ÿè¯·æ±‚ åªé’ˆå¯¹ä¸€ä¸ªæ ¹è·¯å¾„ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103export const BASE_URL = &quot;https://www.brrfid-pm.cn/WXAPI&quot; // æ¥å£å‰ç¼€export const IMAGE_BASE_URL = &quot;https://www.brrfid-pm.cn/WXAPI/image/&quot; // å›¾ç‰‡å‰ç¼€export const downLoadUrl = &quot;https://www.brrfid-pm.cn/api/download/v2/&quot; // ä¸‹è½½åœ°å€class API &#123; /** * å°è£…çš„è¯·æ±‚ * @param &#123;*&#125; url è¯·æ±‚åœ°å€ * @param &#123;*&#125; method è¯·æ±‚ç±»å‹ * @param &#123;*&#125; data è¯·æ±‚æ•°æ® * @param &#123;*&#125; header è¯·æ±‚å¤´ * @param &#123;*&#125; animation * @returns */ request(url, method, data, header = &#123;&#125;, showLoading = true) &#123; return new Promise((resolve, reject) =&gt; &#123; const token = uni.getStorageSync(&quot;token&quot;); if (token) &#123; header.token = token &#125; console.log(&#x27;è¯·æ±‚å‰æ•°æ® :&gt;&gt;&#x27;, data); // è¯·æ±‚åŠ è½½åŠ¨ç”» showLoading &amp;&amp; uni.showLoading(&#123; title: &#x27;åŠ è½½ä¸­&#x27; &#125;); uni.request(&#123; url: BASE_URL + url, method, header, data, success: (res) =&gt; &#123; console.log(&#x27;è¯·æ±‚åæ•°æ® :&gt;&gt; &#x27;, res.data); if (res.data.code == 401) &#123; uni.navigateTo(&#123; url: &#x27;/pages/managerial/login/login&#x27;, &#125;); &#125; resolve(res.data) &#125;, fail: (err) =&gt; &#123; reject(err) &#125;, complete: () =&gt; &#123; showLoading &amp;&amp; uni.hideLoading(); &#125; &#125;) &#125;) &#125; /** * getè¯·æ±‚ * @param &#123;*&#125; url è¯·æ±‚åœ°å€ * @param &#123;*&#125; data è¯·æ±‚å‚æ•° * @param &#123;*&#125; header è¯·æ±‚å¤´ * @param &#123;*&#125; showLoading æ˜¯å¦æ‰§è¡ŒåŠ è½½åŠ¨ç”» * @returns Promise */ get(url, data, header, showLoading) &#123; return this.request(url, &quot;GET&quot;, data, header, showLoading) &#125; /** * postè¯·æ±‚ * @param &#123;*&#125; url è¯·æ±‚åœ°å€ * @param &#123;*&#125; data è¯·æ±‚å‚æ•° * @param &#123;*&#125; header è¯·æ±‚å¤´ * @param &#123;*&#125; showLoading æ˜¯å¦æ‰§è¡ŒåŠ è½½åŠ¨ç”» * @returns Promise */ post(url, data, header, showLoading) &#123; return this.request(url, &quot;POST&quot;, data, header, showLoading) &#125; /** * putè¯·æ±‚ * @param &#123;*&#125; url è¯·æ±‚åœ°å€ * @param &#123;*&#125; data è¯·æ±‚å‚æ•° * @param &#123;*&#125; header è¯·æ±‚å¤´ * @param &#123;*&#125; showLoading æ˜¯å¦æ‰§è¡ŒåŠ è½½åŠ¨ç”» * @returns Promise */ put(url, data, header, showLoading) &#123; return this.request(url, &quot;PUT&quot;, data, header, showLoading) &#125; /** * deleteè¯·æ±‚ * @param &#123;*&#125; url è¯·æ±‚åœ°å€ * @param &#123;*&#125; data è¯·æ±‚å‚æ•° * @param &#123;*&#125; header è¯·æ±‚å¤´ * @param &#123;*&#125; showLoading æ˜¯å¦æ‰§è¡ŒåŠ è½½åŠ¨ç”» * @returns Promise */ delete(url, data, header, showLoading) &#123; return this.request(url, &quot;DELETE&quot;, data, header, showLoading) &#125;&#125;const request = new API()export default request å¤šä¸ªè·¯å¾„ åœ¨classä¸­åŠ ä¸€ä¸ª 12345678910111213141516171819202122232425262728293031class API &#123; /** * æ„é€ å‡½æ•°ä¸­æ·»åŠ äº†baseUrlå‚æ•°ï¼Œå…è®¸åœ¨åˆ›å»ºAPIå®ä¾‹æ—¶è®¾ç½®åŸºç¡€URLã€‚ * @param &#123;string&#125; [baseUrl=&#x27;https://www.brrfid-pm.cn/WXAPI&#x27;] - APIçš„åŸºç¡€URLã€‚ */ constructor(baseUrl = &#x27;https://www.brrfid-pm.cn/WXAPI&#x27;) &#123; this.baseUrl = baseUrl &#125; // ... å…¶ä»–åŸæœ‰æ–¹æ³•ä¸å˜ ... /** * å°è£…çš„è¯·æ±‚ * æ–°å¢baseUrlKeyå‚æ•°ï¼Œç”¨äºåŠ¨æ€é€‰æ‹©åŸºç¡€URL * @param &#123;*&#125; url è¯·æ±‚åœ°å€ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰ * @param &#123;*&#125; method è¯·æ±‚ç±»å‹ * @param &#123;*&#125; data è¯·æ±‚æ•°æ® * @param &#123;*&#125; header è¯·æ±‚å¤´ * @param &#123;*&#125; showLoading æ˜¯å¦æ˜¾ç¤ºåŠ è½½åŠ¨ç”» * @returns */ request(url, method, data, header = &#123;&#125;, showLoading = true) &#123; const fullUrl = this.baseUrl + url; // ... å…¶ä½™ä»£ç é€»è¾‘ä¿æŒä¸å˜ ... &#125; // ... å…¶ä»–è¯·æ±‚æ–¹æ³•ï¼ˆget, post, put, deleteï¼‰ä¿æŒä¸å˜&#125;const request = new API() // é»˜è®¤è·¯å¾„const customApi = new API(&#x27;https://xxx.xxx.xxx&#x27;) // å…¶ä»–è·¯å¾„ å…¬å…±å‡½æ•°/è¿‡æ»¤å™¨ åœ¨æ ¹è·¯å¾„åˆ›å»ºglobalæ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾å…¨å±€çš„å‡½æ•°ã€å˜é‡ã€è¿‡æ»¤å™¨ç­‰ æ‰€æœ‰çš„æ–‡ä»¶éœ€è¦å†main.jsä¸­å¼•å…¥ ä¾‹å¦‚ï¼šimport â€˜./global/filter.jsâ€™; å…¨å±€è¿‡æ»¤å™¨ filter.js ç”¨äºå­˜æ”¾å…¨å±€çš„è¿‡æ»¤å™¨ 12345678910111213141516171819202122232425262728293031323334353637383940import Vue from &#x27;vue&#x27;// å­—ç¬¦ä¸²æœ‰/næ—¶æ›¿æ¢ä¸º&lt;br/&gt;ï¼Œå¹¶ä¸”åœ¨å‰é¢è¡¥ä¸€æ®µè¯Vue.filter(&#x27;replaceNewlineWithBr&#x27;, function (value) &#123; let str = &quot;äº§å“æè¿°ï¼š&quot;; str += value?.replace(/\\n/g, &quot;&lt;br/&gt;&quot;); return str;&#125;)// ä»·æ ¼å°æ•°ä½è¡¥0Vue.filter(&#x27;formatPrice&#x27;, function (price) &#123; if (!price) &#123; return &#125; // å°†ä»·æ ¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä¾¿äºæ“ä½œ let priceStr = price.toString(); // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥å°æ•°ç‚¹åŠä¹‹åçš„æ•°å­— let match = priceStr.match(/(\\.\\d*)?$/); // å¦‚æœæ²¡æœ‰å°æ•°ç‚¹æˆ–è€…å°æ•°ç‚¹åä¸è¶³ä¸¤ä½ if (!match || match[0].length &lt; 3) &#123; // è¡¥è¶³åˆ°å°æ•°ç‚¹åä¸¤ä½ return price.toFixed(2); &#125; else &#123; // å¦‚æœå°æ•°ç‚¹åå·²ç»ä¸¤ä½æˆ–ä»¥ä¸Šï¼Œç›´æ¥è¿”å›åŸä»· return priceStr; &#125;&#125;)// è®¢å•çŠ¶æ€Vue.filter(&#x27;fnStatus&#x27;, function (value) &#123; const typesObj = &#123; 1: &quot;æœªæ”¯ä»˜&quot;, 2: &quot;å·²æ”¯ä»˜&quot;, 3: &quot;ç”Ÿäº§ä¸­&quot;, 4: &quot;å·²å®Œæˆ&quot;, 5: &quot;å·²å–æ¶ˆ&quot;, &#125;; return typesObj[value];&#125;) å…¨å±€å‡½æ•°ä»¥åŠå˜é‡ç­‰ mixin.js ç”¨äºå­˜æ”¾å…¨å±€çš„å˜é‡å·²ç»å‡½æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119// main.js æˆ–è€…ä½ çš„å…¥å£æ–‡ä»¶import Vue from &#x27;vue&#x27;;import &#123; BASE_URL, downLoadUrl &#125; from &#x27;@/api/request&#x27;;Vue.mixin(&#123; data() &#123; return &#123; navBarHeight: uni.getStorageSync(&quot;navBarHeight&quot;) || 90, // é¡¶éƒ¨é«˜åº¦ tabBarHeight: uni.getStorageSync(&quot;tabBarHeight&quot;) || 80, // åº•éƒ¨é«˜åº¦ imgurl: this.imgurl, // å›¾ç‰‡å‰ç¼€ BASE_URL: BASE_URL, // è¯·æ±‚å‰ç¼€ downLoadUrl: downLoadUrl, // ä¸‹è½½æ–‡ä»¶å‰ç¼€ &#125; &#125;, methods: &#123; // å¤åˆ¶ copy(text) &#123; uni.setClipboardData(&#123; data: text, success: (res) =&gt; &#123; this.$u.toast(&quot;å¤åˆ¶æˆåŠŸ&quot;); &#125;, fail: (err) =&gt; &#123; this.$u.toast(&quot;å¤åˆ¶å¤±è´¥&quot;); &#125;, &#125;); &#125;, // è®¡ç®—è¡¨å•é«˜åº¦ getNavBarHeight(className) &#123; return new Promise((resolve, reject) =&gt; &#123; const query = uni.createSelectorQuery().in(this); query .select(className) .boundingClientRect((data) =&gt; &#123; console.log(&quot;data.height :&gt;&gt; &quot;, data.height); resolve(data.height); &#125;) .exec(); &#125;); &#125;, // è·³è½¬é¡µé¢ goPage(url) &#123; if (!url) &#123; return; &#125; uni.navigateTo(&#123; url: url, &#125;); &#125;, // å›¾ç‰‡ä¸Šä¼  uploadFilePromise(url) &#123; return new Promise((resolve, reject) =&gt; &#123; uni.uploadFile(&#123; url: this.BASE_URL + &quot;/uploadImage&quot;, // ä»…ä¸ºç¤ºä¾‹ï¼ŒéçœŸå®çš„æ¥å£åœ°å€ filePath: url, header: &#123; token: uni.getStorageSync(&#x27;token&#x27;) || &#x27;&#x27; &#125;, name: &quot;file&quot;, success: (res) =&gt; &#123; console.log(&#x27;res :&gt;&gt; &#x27;, res); let data = JSON.parse(res.data).url setTimeout(() =&gt; &#123; resolve(data); &#125;, 1000); &#125;, &#125;); &#125;); &#125;, // æ–‡ä»¶ä¸‹è½½ downloadFilePromise(url) &#123; console.log(&#x27;url :&gt;&gt; &#x27;, url); console.log(&#x27;this.downLoadUrl + url :&gt;&gt; &#x27;, this.downLoadUrl + url); return new Promise((resolve, reject) =&gt; &#123; const downloadTask = uni.downloadFile(&#123; url: this.downLoadUrl + url, // æ–‡ä»¶ä¸‹è½½åœ°å€ success: (res) =&gt; &#123; if (res.statusCode === 200) &#123; // ä¸‹è½½æˆåŠŸå¤„ç† console.log(&#x27;ä¸‹è½½æˆåŠŸ&#x27;); // ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ uni.saveFile(&#123; tempFilePath: res.tempFilePath, //ä¸´æ—¶æ–‡ä»¶è·¯å¾„ filePath: `$&#123;wx.env.USER_DATA_PATH&#125;/$&#123;url&#125;`, // æŒ‡å®šä¿å­˜è·¯å¾„å’Œæ–‡ä»¶å success: (saveRes) =&gt; &#123; console.log(&#x27;æ–‡ä»¶ä¿å­˜æˆåŠŸ&#x27;, saveRes.savedFilePath); resolve(saveRes.savedFilePath) &#125;, fail: (err) =&gt; &#123; console.log(&#x27;ä¿å­˜æ–‡ä»¶å¤±è´¥&#x27;, err); &#125; &#125;); &#125; else &#123; console.log(&#x27;ä¸‹è½½å¤±è´¥&#x27;, res.statusCode); &#125; &#125;, fail: (err) =&gt; &#123; console.log(&#x27;ä¸‹è½½è¿‡ç¨‹ä¸­å‡ºé”™&#x27;, err); &#125; &#125;); downloadTask.onProgressUpdate((res) =&gt; &#123; uni.showLoading(&#123; title: `ä¸‹è½½è¿›åº¦ $&#123;res.progress&#125;%`, mask: true, &#125;); if (res.progress == 100) &#123; uni.hideLoading(); uni.showToast(&#123; title: &quot;ä¸‹è½½æˆåŠŸ&quot;, icon: &quot;success&quot;, duration: 1500, &#125;); &#125; &#125;); &#125;) &#125; &#125;&#125;); è·¯ç”±/åˆ†åŒ…/ç»„ä»¶è·¯ç”±è·¯ç”±ä½¿ç”¨HBuilderXåˆ›å»ºåŸºæœ¬ä¸Šæ²¡æœ‰é—®é¢˜ ä¸ªäººä¸ä¹ æƒ¯åµŒå¥—å¤šä¸ªæ–‡ä»¶å¤¹ åˆ†åŒ…æŒ‰ç…§å®˜æ–¹çš„è¦æ±‚åˆ›å»ºåˆ†åŒ…ï¼Œåé¢åˆ›å»ºé¡µé¢ä¼šè‡ªåŠ¨è¯†åˆ«æ˜¯å“ªä¸€ä¸ªåˆ†åŒ…ï¼Œå¦‚æœèƒ½å¤Ÿç¡®ä¿è‡ªå·±è®¾ç½®çš„æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åˆ›å»ºçš„æ—¶å€™æ²¡æœ‰è¯†åˆ«ï¼Œå°±é‡å¯HBuilderX 1234567891011121314151617&quot;subPackages&quot;: [ &#123; &quot;root&quot;: &quot;products&quot;, &quot;pages&quot;: [ &#123; &quot;path&quot;: &quot;detail/detail&quot;, &quot;style&quot;: &#123; &quot;navigationBarTitleText&quot;: &quot;äº§å“è¯¦æƒ…&quot;, &quot;enablePullDownRefresh&quot;: false, &quot;navigationStyle&quot;: &quot;custom&quot; &#125; &#125; ] &#125;, ] Â·Â·Â·Â·çœç•¥å…¶ä»–å†…å®¹Â·Â·Â· &quot;lazyCodeLoading&quot;: &quot;requiredComponents&quot; ç»„ä»¶ åªè¦ç»„ä»¶å®‰è£…åœ¨é¡¹ç›®çš„ components ç›®å½•ä¸‹ï¼Œå¹¶ç¬¦åˆ components/ç»„ä»¶åç§°/ç»„ä»¶åç§°.vue ç›®å½•ç»“æ„ã€‚å°±å¯ä»¥ä¸ç”¨å¼•ç”¨ã€æ³¨å†Œï¼Œç›´æ¥åœ¨é¡µé¢ä¸­ä½¿ç”¨ã€‚ å®˜æ–¹è¯´æ˜ï¼šhttps://uniapp.dcloud.net.cn/tutorial/vue-components.html#%E5%B1%80%E9%83%A8%E6%B3%A8%E5%86%8C"},{"title":"å¾®ä¿¡å°ç¨‹åº","path":"2025/05/12/å¾®ä¿¡å°ç¨‹åº/","text":"å¾®ä¿¡å°ç¨‹åº å°ç¨‹åºæ˜¯ä¸€ç§ä¸éœ€è¦ä¸‹è½½å®‰è£…å³å¯ä½¿ç”¨çš„åº”ç”¨ï¼Œå®ƒå®ç°äº†åº”ç”¨â€œè§¦æ‰‹å¯åŠâ€çš„æ¢¦æƒ³ï¼Œç”¨æˆ·æ‰«ä¸€æ‰«æˆ–è€…æœä¸€ä¸‹å³å¯æ‰“å¼€åº”ç”¨ æé«˜å°ç¨‹åºçš„é€Ÿåº¦å°ç¨‹åºå¯åŠ¨åŠ è½½æ€§èƒ½ï¼š æ§åˆ¶ä»£ç åŒ…çš„å¤§å° åˆ†åŒ…åŠ è½½ é¦–å±ä½“éªŒï¼ˆé¢„è¯·æ±‚ï¼Œåˆ©ç”¨ç¼“å­˜ï¼Œé¿å…ç™½å±ï¼ŒåŠæ—¶åé¦ˆ å°ç¨‹åºæ¸²æŸ“æ€§èƒ½ï¼š é¿å…ä¸å½“çš„ä½¿ç”¨setData ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶ å°è£…è¯·æ±‚ ä½¿ç”¨Promiseå°è£… 12345678910111213141516171819202122232425262728293031// const BASE_URL = &quot;http://localhost:3000&quot;const BASE_URL = &quot;http://123.207.32.32:9002&quot;class API &#123; request(url, method = &quot;GET&quot;, data) &#123; return new Promise((resolve, reject) =&gt; &#123; wx.request(&#123; url: BASE_URL + url, method, data, success: (res) =&gt; &#123; resolve(res.data) &#125;, fail: (err) =&gt; &#123; reject(err) &#125; &#125;) &#125;) &#125; get(url, data) &#123; return this.request(url, &quot;GET&quot;, data) &#125; post(url, data) &#123; return this.request(url, &quot;POST&quot;, data) &#125;&#125;const axios = new API()export default axios åç»­åˆ›å»ºå¯¹åº”æ¨¡å—çš„æ–‡ä»¶ç®¡ç†æ¥å£ 1234567export function get(å½¢å‚) &#123; return axios.get(è·¯å¾„, &#123;å®å‚&#125;)&#125;export function post(å½¢å‚) &#123; return axios.post(è·¯å¾„, &#123;å®å‚&#125;)&#125; ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…æ‰“å¼€è°ƒè¯•å™¨çš„ç»ˆç«¯ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼Œå¹¶ç”Ÿæˆæ–‡ä»¶ 1npm init -y è€ç‰ˆæœ¬åœ¨æœ¬åœ°è®¾ç½®ä¸­éœ€è¦å‹¾é€‰npm å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¾‹å¦‚ 1npm i @vant/weapp ç‚¹å‡»å·¥å…·æ„å»ºnpmï¼Œç­‰å¾…æ‰§è¡Œç»“æŸ åœ¨éœ€è¦ä½¿ç”¨çš„ä½ç½®å¼•å…¥å³å¯ï¼Œä¾‹å¦‚ 1234// app.json å…¨å±€&quot;usingComponents&quot;: &#123; &quot;van-button&quot;: &quot;@vant/weapp/button/index&quot;&#125; 1234// index.json å±€éƒ¨&quot;usingComponents&quot;: &#123; &quot;van-button&quot;: &quot;@vant/weapp/button/index&quot;&#125; WXS.wxs ä¸ºåç¼€åçš„æ–‡ä»¶ ç±»ä¼¼äºJSï¼Œä¸æ”¯æŒes6ä»¥ä¸Šï¼Œå¯¼å‡ºå¾—ä½¿ç”¨module.exports 12345678var foo = &quot;&#x27;hello world&#x27; from tools.wxs&quot;;var bar = function (d) &#123; return d;&#125;module.exports = &#123; FOO: foo, bar: bar,&#125;; å¼•å…¥/ä½¿ç”¨æ–¹æ³•123&lt;wxs src=&quot;../../utils/format.wxs&quot; module=&quot;format&quot;&gt;&lt;/wxs&gt;&lt;view class=&quot;count&quot;&gt;&#123;&#123;format.formatCount(item.playCount)&#125;&#125;&lt;/view&gt;&lt;view class=&quot;duration&quot;&gt;&#123;&#123;format.formatDuration(item.mv.videos[0].duration)&#125;&#125;&lt;/view&gt; æ¡ˆä¾‹1234567891011121314151617181920212223242526272829303132333435/** * æ•°å­—æ ¼å¼åŒ– * @param count */function formatCount(count) &#123; var counter = parseInt(count) if (counter &gt; 100000000) &#123; return (counter / 100000000).toFixed(1) + &quot;äº¿&quot; &#125; else if (counter &gt; 10000) &#123; return (counter / 10000).toFixed(1) + &quot;ä¸‡&quot; &#125; else &#123; return counter + &quot;&quot; &#125;&#125;/** * å·¦è¾¹è¡¥0 * @param time æ—¶é—´ï¼ˆåˆ†/ç§’ï¼‰ */function padLeftZero(time) &#123; time = time + &quot;&quot; return (&quot;00&quot; + time).slice(time.length)&#125;function formatDuration(duration) &#123; duration = duration / 1000 var minute = (duration / 60) | 0 var second = (duration | 0) % 60 return padLeftZero(minute) + &quot;:&quot; + padLeftZero(second)&#125;module.exports = &#123; formatCount: formatCount, formatDuration: formatDuration&#125; 12345678910111213&lt;wxs src=&quot;../../utils/format.wxs&quot; module=&quot;format&quot;&gt;&lt;/wxs&gt;&lt;view class=&quot;item&quot;&gt; &lt;view class=&quot;album&quot;&gt; &lt;image class=&quot;image&quot; src=&quot;&#123;&#123;item.cover&#125;&#125;&quot; mode=&quot;widthFix&quot;&gt;&lt;/image&gt; &lt;view class=&quot;info&quot;&gt; &lt;view class=&quot;count&quot;&gt;&#123;&#123;format.formatCount(item.playCount)&#125;&#125;&lt;/view&gt; &lt;view class=&quot;duration&quot;&gt;&#123;&#123;format.formatDuration(item.mv.videos[0].duration)&#125;&#125;&lt;/view&gt; &lt;/view&gt; &lt;/view&gt; &lt;view class=&quot;content&quot;&gt; &#123;&#123;item.name&#125;&#125; - &#123;&#123;item.artistName&#125;&#125; &lt;/view&gt;&lt;/view&gt; å°ç¨‹åºslotåœ¨å°ç¨‹åºä¸­æ²¡æœ‰åŠæ³•å®åœ¨åœ¨slotæ ‡ç­¾ä¸­å®ç°é»˜è®¤å€¼çš„ é€šè¿‡cssçš„ä¼ªç±»ï¼šemptyé…åˆå…„å¼Ÿå…ƒç´ é€‰æ‹©å™¨æ¥å®ç° emptyåˆ¤æ–­å­å…ƒç´ çš„å†…å®¹æ˜¯å¦ä¸ºç©º å®ç°æ–¹æ³•ï¼šæŠŠé»˜è®¤å†…å®¹éšè—ï¼Œå½“å­å…ƒç´ ä¸ºç©ºæ˜¯ä¿®æ”¹å…„å¼Ÿå…ƒç´ çš„æ ·å¼ï¼Œå°†é»˜è®¤å†…å®¹æ˜¾ç¤º 1234567.header .slot:empty+.default &#123; display: flex;&#125;.header .default &#123; display: none;&#125;"},{"title":"å¤§å±é€‚é…æ–¹æ¡ˆ","path":"2025/05/12/å¤§å±é€‚é…æ–¹æ¡ˆ/","text":"å¤§å±é€‚é…æ–¹æ¡ˆ é€šè¿‡jsè®¡ç®—æ¯”ä¾‹è¿›è¡Œç¼©æ”¾ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364// å±å¹•é€‚é… mixin å‡½æ•°ï¼Œè®¾ç½®refä¸ºappRef// * é»˜è®¤ç¼©æ”¾å€¼const scale = &#123; width: &#x27;1&#x27;, height: &#x27;1&#x27;,&#125;// * è®¾è®¡ç¨¿å°ºå¯¸ï¼ˆpxï¼‰const baseWidth = 1920const baseHeight = 1080// * éœ€ä¿æŒçš„æ¯”ä¾‹ï¼ˆé»˜è®¤1.77778ï¼‰const baseProportion = parseFloat((baseWidth / baseHeight).toFixed(5))export default &#123; data() &#123; return &#123; // * å®šæ—¶å‡½æ•° drawTiming: null &#125; &#125;, mounted () &#123; // ç¡®ä¿åœ¨æµè§ˆå™¨é‡ç»˜åå†æ‰§è¡Œ this.$nextTick(() =&gt; &#123; requestAnimationFrame(() =&gt; &#123; requestAnimationFrame(() =&gt; &#123; this.calcRate(); &#125;); &#125;); &#125;); window.addEventListener(&#x27;resize&#x27;, this.resize) &#125;, beforeDestroy () &#123; window.removeEventListener(&#x27;resize&#x27;, this.resize) &#125;, methods: &#123; calcRate () &#123; const appRef = this.$refs[&quot;appRef&quot;] if (!appRef) return // å½“å‰å®½é«˜æ¯” const currentRate = parseFloat((window.innerWidth / window.innerHeight).toFixed(5)) if (appRef) &#123; if (currentRate &gt; baseProportion) &#123; // è¡¨ç¤ºæ›´å®½ scale.width = ((window.innerHeight * baseProportion) / baseWidth).toFixed(5) scale.height = (window.innerHeight / baseHeight).toFixed(5) appRef.style.transform = `scale($&#123;scale.width&#125;, $&#123;scale.height&#125;) translate(-50%, -50%)` &#125; else &#123; // è¡¨ç¤ºæ›´é«˜ scale.height = ((window.innerWidth / baseProportion) / baseHeight).toFixed(5) scale.width = (window.innerWidth / baseWidth).toFixed(5) appRef.style.transform = `scale($&#123;scale.width&#125;, $&#123;scale.height&#125;) translate(-50%, -50%)` &#125; &#125; &#125;, resize () &#123; clearTimeout(this.drawTiming) this.drawTiming = setTimeout(() =&gt; &#123; this.calcRate() &#125;, 200) &#125; &#125;,&#125;"},{"title":"å‘å¸ƒè‡ªå·±çš„npmåŒ…","path":"2025/05/12/å‘å¸ƒè‡ªå·±çš„npmåŒ…/","text":"å‘å¸ƒè‡ªå·±çš„npmåŒ… åœ¨npmæ³¨å†Œè´¦å· åˆ›å»ºé¡¹ç›®é¡¹ç›® åœ¨é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œç™»å½• npm login å‘å¸ƒ npm publish æ›´æ–°åŒ… npm version patch æ›´æ–°ç‰ˆæœ¬å· npm publish ä¸Šä¼  å®‰è£…ä½¿ç”¨ å‘å¸ƒçš„åŒ…ï¼ˆè·å–ç›®å½•æ ‘ï¼‰ï¼šhttps://www.npmjs.com/package/@hsk766187397/get-tree 1npm i @hsk766187397/get-tree -g"},{"title":"å…³äºvue.config.js","path":"2025/05/12/å…³äºvue.config.js/","text":"å…³äºvue.config.jsvue.config.jsä¸­å¸¸ç”¨çš„é…ç½®åœ¨é…ç½®ä¸­ç»å¤§å¤šæ•°éƒ½æ˜¯ï¼ˆå¯é€‰é¡¹ï¼‰ å¯¼å‡ºæ¨¡å—å¸¸è§„æ“ä½œè¿˜æ˜¯ç”¨åˆ°äº†commjsè¯­æ³• 123module.exports = &#123;&#125; publicPath éƒ¨ç½²åº”ç”¨åŒ…çš„åŸºæœ¬Urléƒ¨ç½²åº”ç”¨åŒ…çš„åŸºæœ¬Urlï¼Œé»˜è®¤/, å¯ä»¥è®¾ç½®ä¸ºç›¸å¯¹è·¯å¾„./,è¿™æ ·æ‰“å‡ºæ¥çš„åŒ…ï¼Œå¯ä»¥éƒ¨ç½²åˆ°ä»»æ„è·¯å¾„ä¸Š 12345let developmentPath=&#x27;./&#x27;;//å¼€å‘ç¯å¢ƒ-npm run serveæ—¶å¼•ç”¨æ–‡ä»¶è·¯å¾„let productionPath=&#x27;./&#x27;;//ç”Ÿäº§ç¯å¢ƒ-npm run buildæ‰“åŒ…åå¼•ç”¨æ–‡ä»¶è·¯å¾„module.exports = &#123; publicPath: process.env.NODE_ENV === &#x27;production&#x27; ? productionPath: developmentPath, // åŸºæœ¬è·¯å¾„-å¼•ç”¨æ–‡ä»¶çš„è·¯&#125; outputDir è¾“å‡ºæ–‡ä»¶ç›®å½•è¾“å‡ºæ–‡ä»¶ç›®å½•ï¼ˆæ‰“åŒ…åç”Ÿæˆçš„ç›®å½•ï¼Œé»˜è®¤distï¼‰ 1234module.exports = &#123; outputDir: __dirname + &#x27;/server/dist&#x27;, //buildä¹‹åé™æ€æ–‡ä»¶è¾“å‡ºè·¯å¾„ //outputDir: &#x27;dist&#x27;,&#125; assetsDir æ‰“åŒ…åç”Ÿæˆçš„é™æ€èµ„æºç›®å½•æ‰“åŒ…åç”Ÿæˆçš„é™æ€èµ„æºç›®å½•ï¼Œé»˜è®¤â€œ â€ ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰“åŒ…åçš„cssï¼Œjsç­‰å­˜æ”¾çš„ä½ç½® 123module.exports = &#123; assetsDir: &#x27;static&#x27;,&#125; lintOnSaveæ˜¯å¦åœ¨ä¿å­˜çš„æ—¶å€™æ£€æŸ¥ 123module.exports = &#123; lintOnSave: process.env.NODE_ENV !== &#x27;production&#x27;,// eslint-loader &#125; productionSourceMap ç”Ÿäº§ç¯å¢ƒçš„ source mapç”Ÿäº§ç¯å¢ƒçš„ source mapï¼Œå¯ä»¥å°†å…¶è®¾ç½®ä¸º false ä»¥åŠ é€Ÿç”Ÿäº§ç¯å¢ƒæ„å»ºï¼Œé»˜è®¤å€¼æ˜¯true 123module.exports = &#123; productionSourceMap: false,&#125; devServerå¯é€šè¿‡ devServer.proxyè§£å†³å‰åç«¯è·¨åŸŸé—®é¢˜ï¼ˆåå‘ä»£ç†ï¼‰ 1234567891011121314151617181920212223module.exports = &#123;// åå‘ä»£ç† devServer: &#123; index: &#x27;/login.html&#x27;, //é»˜è®¤æ‰“å¼€æ–‡ä»¶ open: true, //è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ host: &#x27;localhost&#x27;, //é»˜è®¤æ‰“å¼€åŸŸå port: 8080, //é»˜è®¤æ‰“å¼€ç«¯å£å· https: false, //å¼€å¯å…³é—­httpsè¯·æ±‚ hotOnly: false, //çƒ­æ›´ proxy: &#123; // é…ç½®è·¨åŸŸ &#x27;/api&#x27;: &#123; target: &#x27;http://dev.aabb.cn:8082/&#x27;, //ä»£ç†åœ°å€ï¼Œè¿™é‡Œè®¾ç½®çš„åœ°å€ä¼šä»£æ›¿axiosä¸­è®¾ç½®çš„baseURL ws: true, //// proxy websockets changeOrigin: true,// å¦‚æœæ¥å£è·¨åŸŸï¼Œéœ€è¦è¿›è¡Œè¿™ä¸ªå‚æ•°é…ç½® pathRewrite: &#123; //pathRewriteæ–¹æ³•é‡å†™url &#x27;^/api&#x27;: &#x27;/&#x27;, &#125;, &#125;, &#125;, &#125;,&#125; æ‰©å±•ï¼š hot å’Œ hotOnly çš„åŒºåˆ«æ˜¯åœ¨æŸäº›æ¨¡å—ä¸æ”¯æŒçƒ­æ›´æ–°çš„æƒ…å†µä¸‹ï¼Œå‰è€…ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢ï¼Œåè€…ä¸ä¼šåˆ·æ–°é¡µé¢ï¼Œè€Œæ˜¯åœ¨æ§åˆ¶å°è¾“å‡ºçƒ­æ›´æ–°å¤±è´¥ æ‰“åŒ…æ—¶å»é™¤æ‰“å°ä¿¡æ¯ä¸Šé¢å·²ç»æåˆ°è¿‡å»æ‰æ‰“å°çš„æ“ä½œï¼ˆconsoleã€debugï¼‰è¿™é‡Œè¯¦ç»†è®²è§£ä¸€ä¸‹ é¦–å…ˆä¸‹è½½ç›¸å…³æ’ä»¶ uglifyjs-webpack-plugin npm i -D uglifyjs-webpack-plugin åœ¨vue.config.jsæ–‡ä»¶ä¸­å¼•å…¥ï¼Œå¹¶åœ¨configureWebpackçš„optimizationä¸­æ·»åŠ å¦‚ä¸‹ä»£ç  123456789101112131415161718192021222324252627282930const UglifyPlugin = require(&#x27;uglifyjs-webpack-plugin&#x27;)module.exports = &#123; configureWebpack: (config) =&gt; &#123; if (process.env.NODE_ENV === &#x27;production&#x27;) &#123; // ä¸ºç”Ÿäº§ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &#x27;production&#x27; // å°†æ¯ä¸ªä¾èµ–åŒ…æ‰“åŒ…æˆå•ç‹¬çš„jsæ–‡ä»¶ let optimization = &#123; /*ä»¥ä¸‹ä»£ç é€‚ç”¨äºuglifyjs-webpack-plugin 2.1.1åŠä»¥å‰çš„ç‰ˆæœ¬*/ minimizer: [new UglifyPlugin(&#123; uglifyOptions: &#123; compress: &#123; warnings: false, drop_console: true, // console drop_debugger: false, pure_funcs: [&#x27;console.log&#x27;] // ç§»é™¤console &#125; &#125; &#125;)] &#125; Object.assign(config, &#123; optimization &#125;) &#125; &#125;&#125; æ–°ç‰ˆuglifyjs-webpack-pluginéœ€å†™æˆä»¥ä¸‹æ–¹å¼ 12345678910minimizer: [new UglifyPlugin(&#123; uglifyOptions: &#123; warnings: false, compress: &#123; drop_console: false, // console drop_debugger: false, pure_funcs: [&#x27;console.log&#x27;] // ç§»é™¤console &#125; &#125;&#125;)] ç§»åŠ¨ç«¯.px2rem å“åº”æ ·å¼å®‰è£… npm i -S lib-flexible postcss-px2rem å¼•å…¥ lib-flexible åœ¨é¡¹ç›®å…¥å£ä¸­main.js ä¸­å¼•å…¥lib-flexible 123import &#x27;lib-flexible&#x27; # æ³¨æ„äº‹é¡¹: ç”±äºflexibleä¼šåŠ¨æ€ç»™é¡µé¢headerä¸­æ·»åŠ &lt;meta name=&#x27;viewport&#x27; &gt;æ ‡ç­¾ï¼Œæ‰€ä»¥åŠ¡å¿…è¯·æŠŠç›®å½• public/index.html ä¸­çš„è¿™ä¸ªæ ‡ç­¾åˆ é™¤ï¼ï¼ é…ç½®postcss-px2rem é¡¹ç›®ä¸­vue.config.jsä¸­è¿›è¡Œå¦‚ä¸‹çš„é…ç½® 1234567891011module.exports = &#123; css: &#123; loaderOptions: &#123; css: &#123;&#125;, postcss: &#123; plugins: [ require(&#x27;postcss-px2rem&#x27;)(&#123; remUnit: 37.5 &#125;) ] &#125; &#125; &#125; &#125; è®¾ç½®é¡µé¢åŠ¨æ€æ ‡é¢˜ä¸‹è½½ vue-wechat-title npm i -S vue-wechat-title main.jsä¸­å…¨å±€å¼•å…¥ 12import VueWechatTitle from &#x27;vue-wechat-title&#x27;Vue.use(VueWechatTitle) App.vueä¸­è®¾ç½® 123456&lt;template&gt;&lt;!-- åŠ¨æ€è®¾ç½®title --&gt; &lt;div id=&quot;app&quot; v-wechat-title=&#x27;$route.meta.title&#x27;&gt; &lt;router-view/&gt; &lt;/div&gt;&lt;/template&gt; å¼€å¯gzipå‹ç¼©gzipå‹ç¼©æ˜¯ä¸€ç§httpè¯·æ±‚ä¼˜åŒ–æ–¹å¼ï¼Œé€šè¿‡å‡å°‘æ–‡ä»¶ä½“ç§¯æ¥æé«˜åŠ è½½é€Ÿåº¦ã€‚htmlã€jsã€cssæ–‡ä»¶ç”šè‡³jsonæ•°æ®éƒ½å¯ä»¥ç”¨å®ƒå‹ç¼©ï¼Œå¯ä»¥å‡å°60%ä»¥ä¸Šçš„ä½“ç§¯ã€‚webpackåœ¨æ‰“åŒ…æ—¶å¯ä»¥å€ŸåŠ© compression webpack plugin å®ç°gzipå‹ç¼©ã€‚ ä¸‹è½½ compression webpack plugin npm i -D compression-webpack-plugin vue.config.jsé…ç½® 1234567891011121314151617181920212223242526const CompressionPlugin = require(&quot;compression-webpack-plugin&quot;);module.exports = &#123; configureWebpack: (config) =&gt; &#123; if (process.env.NODE_ENV === &#x27;production&#x27;) &#123; // ä¸ºç”Ÿäº§ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &#x27;production&#x27;; if(openGzip)&#123; config.plugins = [ ...config.plugins, new CompressionPlugin(&#123; test:/\\.js$|\\.html$|.\\css/, //åŒ¹é…æ–‡ä»¶å threshold: 10240,//å¯¹è¶…è¿‡10kçš„æ•°æ®å‹ç¼© deleteOriginalAssets: false //ä¸åˆ é™¤æºæ–‡ä»¶ &#125;) ] &#125; &#125; else &#123; // ä¸ºå¼€å‘ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &#x27;development&#x27;; &#125; &#125;&#125; package.js é…ç½® 123456&#123; &quot;name&quot;: &quot;demo-cli3&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;openGizp&quot;: false, ...&#125; ä¼˜åŒ–æ‰“åŒ…chunk-vendors.jså½“è¿è¡Œé¡¹ç›®å¹¶ä¸”æ‰“åŒ…çš„æ—¶å€™ï¼Œä¼šå‘ç°chunk-vendors.jsè¿™ä¸ªæ–‡ä»¶éå¸¸å¤§ï¼Œé‚£æ˜¯å› ä¸ºwebpackå°†æ‰€æœ‰çš„ä¾èµ–å…¨éƒ½å‹ç¼©åˆ°äº†è¿™ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥å°†å…¶æ‹†åˆ†ï¼Œå°†æ‰€æœ‰çš„ä¾èµ–éƒ½æ‰“åŒ…æˆå•ç‹¬çš„js; 12345678910111213141516171819202122232425262728293031323334/*åˆ©ç”¨splitChunkså°†æ¯ä¸ªä¾èµ–åŒ…å•ç‹¬æ‰“åŒ…ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹é…ç½®ï¼Œä»£ç å¦‚ä¸‹*/configureWebpack: (config) =&gt; &#123; if (process.env.NODE_ENV === &#x27;production&#x27;) &#123; // ä¸ºç”Ÿäº§ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = &#x27;production&#x27; // å°†æ¯ä¸ªä¾èµ–åŒ…æ‰“åŒ…æˆå•ç‹¬çš„jsæ–‡ä»¶ let optimization = &#123; runtimeChunk: &#x27;single&#x27;, splitChunks: &#123; chunks: &#x27;all&#x27;, maxInitialRequests: Infinity, minSize: 20000, // ä¾èµ–åŒ…è¶…è¿‡20000bitå°†è¢«å•ç‹¬æ‰“åŒ… cacheGroups: &#123; vendor: &#123; test: /[\\\\/]node_modules[\\\\/]/, name (module) &#123; // get the name. E.g. node_modules/packageName/not/this/part.js // or node_modules/packageName const packageName = module.context.match(/[\\\\/]node_modules[\\\\/](.*?)([\\\\/]|$)/)[1] // npm package names are URL-safe, but some servers don&#x27;t like @ symbols return `npm.$&#123;packageName.replace(&#x27;@&#x27;, &#x27;&#x27;)&#125;` &#125; &#125; &#125; &#125; &#125; Object.assign(config, &#123; optimization &#125;) &#125; &#125; vue.config.jså®Œæ•´ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195// æ‰“åŒ…å¤šå…¥å£æ–‡ä»¶åŸºæœ¬é…ç½®let developmentPath = &#x27;./&#x27;;//å¼€å‘ç¯å¢ƒ-npm run serveæ—¶å¼•ç”¨æ–‡ä»¶è·¯å¾„let productionPath = &#x27;./&#x27;;//ç”Ÿäº§ç¯å¢ƒ-npm run buildæ‰“åŒ…åå¼•ç”¨æ–‡ä»¶è·¯å¾„const UglifyJsPlugin = require(&#x27;uglifyjs-webpack-plugin&#x27;)//ç”Ÿäº§ç¯å¢ƒå–æ¶ˆæ‰“å°const CompressionWebpackPlugin = require(&#x27;compression-webpack-plugin&#x27;)//gzipå‹ç¼©const productionGzipExtensions = [&#x27;js&#x27;, &#x27;css&#x27;]const Version = &#x27;V6.1&#x27;const Timestamp = new Date().getTime()function getPagesInfo() &#123; let pages = &#123;&#125; const glob = require(&#x27;glob&#x27;) // å¼•å…¥globæ¨¡å—,ç”¨äºæ‰«æå…¨éƒ¨src/pages/**/main.jsï¼ˆè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼‰ glob.sync(&#x27;src/pages/**/main.js&#x27;).forEach((entry, i) =&gt; &#123; let name = entry.slice(10, -8) pages[name] = &#123; entry: entry, template: &#x27;public.index.html&#x27;, filename: name + &#x27;.html&#x27;, title: &#x27;&#x27;, chunks: [&quot;chunk-vendors&quot;, &quot;chunk-common&quot;, name] &#125; &#125;) return pages&#125;// æ‰“åŒ…ç›¸å…³module.exports = &#123; pages: getPagesInfo(),//å¤šé¡µé¢åº”ç”¨é…ç½® publicPath: process.env.NODE_ENV === &#x27;production&#x27; ? productionPath : developmentPath, // åŸºæœ¬è·¯å¾„-å¼•ç”¨æ–‡ä»¶çš„è·¯ __dirname + &#x27;/server/dist&#x27;, //buildä¹‹åé™æ€æ–‡ä»¶è¾“å‡ºè·¯å¾„ assetsDir: &#x27;static&#x27;,//é™æ€èµ„æºå¤§åŒ…ä½ç½® outputDir: __dirname + &#x27;/server/dist&#x27;, //buildä¹‹åé™æ€æ–‡ä»¶è¾“å‡ºè·¯å¾„ lintOnSave: process.env.NODE_ENV !== &#x27;production&#x27;,// æ‰“åŒ…çš„æ—¶å€™eslint-loaderæ£€æŸ¥ productionSourceMap: false,//source map æ£€æŸ¥ // å¯åŠ¨æœåŠ¡å™¨ devServer: &#123; index: &#x27;/login.html&#x27;, //é»˜è®¤æ‰“å¼€æ–‡ä»¶ open: true, //è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ host: &#x27;localhost&#x27;, //é»˜è®¤æ‰“å¼€åŸŸå port: 8080, //é»˜è®¤æ‰“å¼€ç«¯å£å· https: false, //å¼€å¯å…³é—­httpsè¯·æ±‚ hotOnly: false, //çƒ­æ›´ // åå‘ä»£ç† proxy: &#123; // é…ç½®è·¨åŸŸ &#x27;/api&#x27;: &#123; target: &#x27;http://dev.aabb.cn:8082/&#x27;, //ä»£ç†åœ°å€ï¼Œè¿™é‡Œè®¾ç½®çš„åœ°å€ä¼šä»£æ›¿axiosä¸­è®¾ç½®çš„baseURL ws: true, //// proxy websockets changeOrigin: true,// å¦‚æœæ¥å£è·¨åŸŸï¼Œéœ€è¦è¿›è¡Œè¿™ä¸ªå‚æ•°é…ç½® pathRewrite: &#123; //pathRewriteæ–¹æ³•é‡å†™url &#x27;^/api&#x27;: &#x27;/&#x27;, &#125;, &#125;, &#125;, &#125;, // webpacké…ç½® é“¾å¼ chainWebpack: (config) =&gt; &#123; // 1ã€å–æ¶ˆé¢„åŠ è½½å¢åŠ åŠ è½½é€Ÿåº¦ config.plugins.delete(&#x27;preload&#x27;) config.plugins.delete(&#x27;prefetch&#x27;) // 2ã€vueä¸­ä½¿ç”¨SVGå›¾æ ‡ï¼Œå¹¶ä¸”æƒ³æ‰¹é‡å¯¼å…¥ï¼Œç„¶åéœ€è¦ä½¿ç”¨çš„æ—¶å€™ç›´æ¥æ·»åŠ å°±å¯ä»¥ config.module .rule(&#x27;svg&#x27;) .exclude.add(resolve(&#x27;src/assets/icons&#x27;)) .end() config.module .rule(&#x27;icons&#x27;) .test(/\\.svg$/) .include.add(resolve(&#x27;src/assets/icons&#x27;)) .end() .use(&#x27;svg-sprite-loader&#x27;) .loader(&#x27;svg-sprite-loader&#x27;) .options(&#123; symbolId: &#x27;icon-[name]&#x27;, &#125;) .end() // 3ã€å›¾ç‰‡å¤„ç† const imagesRule = config.module.rule(&#x27;images&#x27;) imagesRule.uses.clear() //æ¸…é™¤åŸæœ¬çš„images loaderé…ç½® imagesRule .test(/\\.(jpg|gif|png|svg)$/) .exclude.add(path.join(__dirname, &#x27;../node_modules&#x27;)) //ä¸å¯¹node_modulesé‡Œçš„å›¾ç‰‡è½¬base64 .end() .use(&#x27;url-loader&#x27;) .loader(&#x27;url-loader&#x27;) .options(&#123; name: &#x27;img/[name].[hash:8].[ext]&#x27;, limit: 6000000 &#125;) config.optimization.splitChunks(&#123; cacheGroups: &#123; vendors: &#123; name: &#x27;chunk-vendors&#x27;, minChunks: pageNum, test: /node_modules/, priority: -10, chunks: &#x27;initial&#x27;, &#125;, elementUI: &#123; name: &#x27;chunk-elementUI&#x27;, // split elementUI into a single package priority: 20, // the weight needs to be larger than libs and app or it will be packaged into libs or app test: /[\\\\/]node_modules[\\\\/]_?element-ui(.*)/, // in order to adapt to cnpm &#125;, commons: &#123; name: &#x27;chunk-commons&#x27;, test: resolve(&#x27;src/components&#x27;), // can customize your rules minChunks: 3, // minimum common number priority: 5, reuseExistingChunk: true, &#125;, &#125;, &#125;) &#125;, // webpacké…ç½® configureWebpack: (config) =&gt; &#123; // ä¸ºç”Ÿäº§ç¯å¢ƒä¿®æ”¹é…ç½® if (process.env.NODE_ENV === &#x27;production&#x27;) &#123; config.plugins.push( // 1ã€å–æ¶ˆæ‰“å° new UglifyJsPlugin(&#123; uglifyOptions: &#123; compress: &#123; drop_debugger: true,//ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨åˆ é™¤debugger drop_console: true, //ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨åˆ é™¤console &#125;, warnings: false, &#125;, sourceMap: false, //å…³æ‰sourcemap ä¼šç”Ÿæˆå¯¹äºè°ƒè¯•çš„å®Œæ•´çš„.mapæ–‡ä»¶ï¼Œä½†åŒæ—¶ä¹Ÿä¼šå‡æ…¢æ‰“åŒ…é€Ÿåº¦ parallel: true, //ä½¿ç”¨å¤šè¿›ç¨‹å¹¶è¡Œè¿è¡Œæ¥æé«˜æ„å»ºé€Ÿåº¦ã€‚é»˜è®¤å¹¶å‘è¿è¡Œæ•°ï¼šos.cpus().length - 1ã€‚ &#125;), // 2ã€gzipå‹ç¼© new CompressionWebpackPlugin(&#123; filename: &#x27;[path].gz[query]&#x27;, algorithm: &#x27;gzip&#x27;, test: new RegExp(&#x27;\\\\.(&#x27; + productionGzipExtensions.join(&#x27;|&#x27;) + &#x27;)$&#x27;), threshold: 10240, minRatio: 0.8, &#125;) ) &#125; // åœ¨è¿™é‡Œé…ç½®åï¼Œå‡å°‘äº†å‹ç¼©çš„åŒ…å†…å®¹ï¼Œéœ€è¦åœ¨public/index.htmlé€šè¿‡cdnæ–¹å¼å†å¼•å…¥,æ³¨æ„å¯¹åº”çš„ç‰ˆæœ¬ config.externals = &#123; vue: &#x27;Vue&#x27;, &#x27;vue-router&#x27;: &#x27;VueRouter&#x27;, vuex: &#x27;Vuex&#x27;, axios: &#x27;axios&#x27;, jquery: &#x27;$&#x27;, moment: &#x27;moment&#x27;, &#x27;mint-ui&#x27;: &#x27;MINT&#x27; &#125;, // åˆ«åé…ç½® Object.assign(config, &#123; // å¼€å‘ç”Ÿäº§å…±åŒé…ç½® resolve: &#123; alias: &#123; &#x27;@&#x27;: path.resolve(__dirname, &#x27;./src&#x27;), &#x27;@c&#x27;: path.resolve(__dirname, &#x27;./src/components&#x27;), &#x27;@p&#x27;: path.resolve(__dirname, &#x27;./src/pages&#x27;) &#125; &#125; &#125;), config.output.filename = `[name].$&#123;Version&#125;.$&#123;Timestamp&#125;.js` //æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ config.output.chunkFilename = `[name].$&#123;Version&#125;.$&#123;Timestamp&#125;.js` &#125;, // cssç›¸å…³ css: &#123; loaderOptions: &#123; // é…ç½®å…¨å±€sass scss: &#123; additionalData: `@import &quot;@/assets/css/reset.scss&quot;;@import &quot;@/assets/css/globle.scss&quot;;` //æ³¨æ„é…ç½®çš„é”®å &#125;, // lib-flexible postcss: &#123; plugins: [ //remUnitè¿™ä¸ªé…ç½®é¡¹çš„æ•°å€¼æ˜¯å¤šå°‘å‘¢ï¼Ÿï¼Ÿï¼Ÿ é€šå¸¸æˆ‘ä»¬æ˜¯æ ¹æ®è®¾è®¡å›¾æ¥å®šè¿™ä¸ªå€¼ï¼ŒåŸå› å¾ˆç®€å•ï¼Œä¾¿äºå¼€å‘ã€‚ //å‡å¦‚è®¾è®¡å›¾ç»™çš„å®½åº¦æ˜¯750ï¼Œæˆ‘ä»¬é€šå¸¸å°±ä¼šæŠŠremUnitè®¾ç½®ä¸º75ï¼Œè¿™æ ·æˆ‘ä»¬å†™æ ·å¼æ—¶ï¼Œå¯ä»¥ç›´æ¥æŒ‰ç…§è®¾è®¡å›¾æ ‡æ³¨çš„å®½é«˜æ¥1:1è¿˜åŸå¼€å‘ã€‚ require(&#x27;postcss-px2rem&#x27;)(&#123; remUnit: 37.5 &#125;) ] &#125; &#125; &#125;, parallel: require(&#x27;os&#x27;).cpus().length &gt; 1, // æ˜¯å¦ä¸º Babel æˆ– TypeScript ä½¿ç”¨ thread-loaderã€‚è¯¥é€‰é¡¹åœ¨ç³»ç»Ÿçš„ CPU æœ‰å¤šäºä¸€ä¸ªå†…æ ¸æ—¶è‡ªåŠ¨å¯ç”¨ï¼Œä»…ä½œç”¨äºç”Ÿäº§æ„å»ºã€‚ pwa: &#123;&#125;, // PWA æ’ä»¶ç›¸å…³é…ç½® pluginOptions: &#123;&#125;, // ç¬¬ä¸‰æ–¹æ’ä»¶é…ç½®&#125;;"},{"title":"ç”Ÿæˆåšå®¢åˆ°éƒ¨ç½²","path":"2025/05/12/ç”Ÿæˆåšå®¢åˆ°éƒ¨ç½²/","text":"ç”Ÿæˆåšå®¢åˆ°éƒ¨ç½² å¤§ä½“æ€è·¯ï¼šå¼€é€šGitee Pagesï¼Œè‡ªå·±å†™ä¸€ä¸ªé™æ€ç½‘ç«™æˆ–è€…ä½¿ç”¨Jekyllã€Hugoã€Hexoæ¥ç”Ÿæˆ Gitee Pagesé¦–å…ˆå¼€é€šGitee Pagesï¼š éœ€è¦æ³¨å†Œç™»å½•åˆ°Giteeä¸Šï¼Œå¹¶ä¸”åˆ›å»ºä»“åº“ï¼Œä»“åº“åç§°æœ€å¥½å’Œè‡ªå·±çš„ä¸ªæ€§åœ°å€ä¸€æ ·,ç„¶åå¼€æºè¿™ä¸ªä»“åº“ï¼Œåœ¨æœåŠ¡ä¸­ç‚¹å‡»Gitee Pagesï¼Œé¦–æ¬¡ä½¿ç”¨éœ€è¦å®åæ³¨å†Œ ç”Ÿæˆsshæ·»åŠ åˆ°Giteeä»“åº“ï¼Œè¯¦ç»†çš„ç™¾åº¦æŸ¥ä¸€ä¸‹ï¼Œæ–¹ä¾¿åç»­å¿«é€Ÿéƒ¨ç½² æ›´å¤šè®¿é—®https://gitee.com/help/articles/4136#article-header0 å¦‚æœæ˜¯æƒ³è¦è‡ªå·±æ‰‹å†™çš„è¯å°±æ‰“åŒ…å¥½ä¸Šä¼ åˆ°è¿™ä¸ªä»“åº“å³å¯ ä½¿ç”¨Hexohexoå¯ä»¥ä½¿ç”¨Markdownæ–‡æ¡£ç”Ÿæˆï¼Œç›¸å¯¹äºæ‰‹å†™æ›´åŠ æ–¹ä¾¿ã€‚ ä½¿ç”¨ä»–ä¸Šä¼ é¦–å…ˆéœ€è¦å®‰è£…Gitã€nodeï¼Œç‰ˆæœ¬è¦æ±‚æœ€åæ˜¯çœ‹å®˜ç½‘ï¼›ä¸€èˆ¬æ¥è®²åªè¦ä¸æ˜¯å¾ˆè€çš„éƒ½è¡Œã€‚ å®‰è£…Hexo 1npm install -g hexo-cli å‡†å¤‡ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹åœ°å€ä¸­è¾“å…¥cmdå›è½¦ï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸­åˆ›å»ºç½‘ç«™ï¼Œå¹¶å®‰è£…ä¾èµ– 12hexo initnpm i å®‰è£…å®Œæˆåè¾“å…¥ 1hexo s å¯ä»¥åœ¨ localhost:4000æŸ¥çœ‹ç”Ÿæˆçš„ç½‘ç«™ åœ¨æ ¹ç›®å½•ä¸­æ‰¾åˆ°_config.ymlæ¥é…ç½® è¯¦ç»†æŸ¥çœ‹å®˜ç½‘ï¼šhttps://hexo.io/zh-cn/docs/configuration ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªï¼Œæ¯ä¸€ä¸ª:åé¢éƒ½æœ‰ä¸€ä¸ªç©ºæ ¼ 1234567891011title: ç½‘ç«™æ ‡é¢˜author: ä½œè€…language: è¯­è¨€timezone: æ—¶é—´url: Gitee Pageã€GitHub Pagesç­‰ï¼Œgithubæ˜¯ï¼šç”¨æˆ·å.github.ioï¼ŒGiteeï¼šç”¨æˆ·å.gitee.iodeploy: type: git repo: è¿™é‡Œç›´æ¥å¤åˆ¶Giteeç”Ÿæˆä»“åº“æ—¶çš„åœ°å€ï¼Œå¤§è‡´å°±æ˜¯https://gitee.com/ä¸ªæ€§åœ°å€/ä»“åº“åœ°å€.git branch: master å®‰è£…ä¾èµ– 1npm install hexo-deployer-git --save ç„¶åè¿›è¡Œéƒ¨ç½² 123hexo cleanhexo generatehexo deploy hexo clean æ¸…é™¤äº†ä½ ä¹‹å‰ç”Ÿæˆçš„ä¸œè¥¿ã€‚ hexo generate ç”Ÿæˆé™æ€æ–‡ç« ï¼Œå¯ä»¥ç”¨ hexo g ç¼©å†™ hexo deploy éƒ¨ç½²æ–‡ç« ï¼Œå¯ä»¥ç”¨hexo dç¼©å†™ æ›´å¤šå‘½ä»¤æŸ¥çœ‹å®˜ç½‘ï¼šhttps://hexo.io/zh-cn/docs/commands å¦‚æœæ²¡æœ‰é…ç½®sshä¸€èˆ¬éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç  é…ç½®ä¸»é¢˜hexoæœ‰å¾ˆå¤šä¸»é¢˜ï¼Œä¾‹å¦‚æˆ‘ä½¿ç”¨çš„ï¼šKira-Hexo åœ¨ä½ çš„ Hexo é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ 1npm i hexo-theme-kira åœ¨ _config.yml ä¸­ï¼Œå°† theme çš„å€¼ä¿®æ”¹ä¸º kiraï¼ˆä½¿ç”¨å…¶ä»–çš„å°±æ˜¯å…¶ä»–çš„ä¸»é¢˜åç§°ï¼‰ ä¸ºäº†è®© Kira-Hexo æ­£å¸¸å·¥ä½œï¼Œä½ è¿˜éœ€è¦åœ¨ Hexo é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º _config.kira.yml çš„æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­å¡«å…¥ä¸‹æ–¹çš„é…ç½®ä¿¡æ¯ã€‚ï¼ˆæœ€å¥½è®¿é—®å®˜ç½‘å»çœ‹ï¼Œå¯èƒ½ä¼šæ›´æ–°ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121avatar: https://raw.githubusercontent.com/ch1ny/PictureCDN/master/others/116359b4ccf19917.jpg # ç½‘ç«™ Logobackground: # æ—¢æ˜¯åšå®¢çš„èƒŒæ™¯ï¼Œåˆæ˜¯æ–‡ç« é»˜è®¤å¤´å›¾ path: https://raw.githubusercontent.com/ch1ny/PictureCDN/master/others/f0d5cc34c6e5aa7.jpg width: 1280 height: 720favicon: href: https://raw.githubusercontent.com/ch1ny/PictureCDN/master/others/116359b4ccf19917.jpg # ç½‘ç«™å›¾æ ‡ type: image/png # å›¾æ ‡ç±»å‹ï¼Œå¯èƒ½çš„å€¼æœ‰(image/png, image/vnd.microsoft.icon, image/x-icon, image/gif)# é™„åŠ å›¾æ ‡åº“ ä½¿ç”¨è¯´æ˜ï¼šhttps://hexo.kira.host/config/iconiconlib: //at.alicdn.com/t/c/font_3299330_2a7ov96q7e3.csscdn: # è¿™é‡Œå¯ä»¥ä¿®æ”¹ç«™ç‚¹ä½¿ç”¨çš„åº“çš„CDN gitalk: css: https://unpkg.com/gitalk@latest/dist/gitalk.css js: https://unpkg.com/gitalk@latest/dist/gitalk.min.jsbeian: èµ£ICPå¤‡******å· # å¤‡æ¡ˆå·ï¼ˆé€‰å¡«ï¼Œæ­¤ä¹ƒä¸­å›½ç‰¹è‰²ï¼Œä¸å¾—ä¸å°ï¼‰menu: å›åˆ°é¦–é¡µ: - / - icon-home æ–‡ç« å½’æ¡£: # ä½¿ç”¨è¯´æ˜ï¼šhttps://docs.kira.com/article/archive - /archive.html - icon-container å…³äºæœ¬äºº: - /about.html - icon-user æˆ‘çš„æœ‹å‹: - /friends.html # ä½¿ç”¨è¯´æ˜ï¼šhttps://docs.kira.com/article/py - icon-teamwidgets: - social - category - tagcloudmaxTagcloud: 0 # æ ‡ç­¾äº‘ç»„ä»¶æ˜¾ç¤ºçš„æ ‡ç­¾æ•°é‡ï¼Œ0 è¡¨ç¤ºä¸é™åˆ¶social: QQ: - tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=1056317718&amp;website=www.oicqzone.com - icon-QQ - rgb(49, 174, 255) - rgba(49, 174, 255, .1) å“”å“©å“”å“©: - https://space.bilibili.com/27905679 - icon-bilibili - rgb(231, 106, 141) - rgba(231, 106, 141, .15) GitHub: - https://github.com/ch1ny/ - icon-github - rgb(25, 23, 23) - rgba(25, 23, 23, .15) Gitee: - https://gitee.com/ch1ny/ - icon-gitee - rgb(165, 15, 15) - rgba(165, 15, 15, .15)color: # é…è‰²æ–¹æ¡ˆï¼Œä»firståˆ°seventhä¸ºä¼˜å…ˆçº§ä¸º1-7çš„é¢œè‰²ï¼Œé»˜è®¤ä¸ºå½©è™¹é…è‰² first: # åŒæ—¶ä½œä¸ºä¸»é¢˜è‰² r: 49 g: 174 b: 255 second: r: 255 g: 78 b: 106 third: r: 255 g: 185 b: 0 fourth: r: 51 g: 213 b: 122 fifth: r: 0 g: 219 b: 255 sixth: r: 255 g: 69 b: 0 seventh: r: 144 g: 144 b: 255# è¯„è®ºåŒºgitalk: active: true # æ˜¯å¦å¯ç”¨ gitalk admin: -your github username- # æ‹¥æœ‰å¯¹è¯¥repoè¿›è¡Œæ“ä½œçš„ GitHub username owner: -your github username- # æŒæœ‰è¯¥ repo çš„ GitHub username repo: -issue repo name- # å­˜æ”¾è¯„è®ºçš„ issue æ‰€åœ¨çš„ repo clientID: -id- # GitHub Client ID clientSecret: -key- # GitHub Client Secret title: &#x27;&#x27; # Gitalk Issue Titlecopyright: &#x27;&lt;strong&gt;ç‰ˆæƒå£°æ˜ï¼š&lt;/strong&gt;æœ¬æ–‡é‡‡ç”¨ &lt;a href=&quot;https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh&quot; target=&quot;_blank&quot;&gt;CC BY-NC-SA 3.0 CN&lt;/a&gt; åè®®è¿›è¡Œè®¸å¯&#x27;copyTip: &quot;è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚\\nå•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\\næ¥æºï¼š%url&quot; # è‡ªå®šä¹‰å¤åˆ¶ç‰ˆæƒæ–‡æ¡ˆ,ä½¿ç”¨ %url ä»£æ›¿å½“å‰é¡µé¢URL, ä¿®æ”¹ä¸ºfalseç¦ç”¨# achive widget behaviorwidgetAchive: #æ–‡ç« å½’æ¡£ç»„ä»¶ archive_type: &#x27;year&#x27; #æŒ‰æœˆå±•ç¤ºè¿˜æ˜¯æŒ‰å¹´å±•ç¤º show_count: true #æ˜¯å¦å±•ç¤ºæ•°é‡widgetLink: #é“¾æ¥ç»„ä»¶ - title: &lt;title&gt; img: &lt;img_path&gt; link: &lt;url&gt; - title: &lt;title&gt; img: &lt;img_path&gt; link: &lt;url&gt;# è‡ªå®šä¹‰ä¾§è¾¹æ å°¾éƒ¨å†…å®¹sidebar: &#x27;&#x27; æœ€ååœ¨å‘½åè¡Œè¾“å…¥ 123hexo cleanhexo ghexo d ç­‰å¾…éƒ¨ç½²å®Œæˆåå»Giteeçš„ä»“åº“æ‰¾åˆ° Gitee PagesæœåŠ¡ï¼Œç‚¹å‡»æ›´æ–°ã€‚ æ›´æ–°åšå®¢å¦‚æœæœ‰æ–°çš„åšå®¢å†…å®¹è¦æ›´æ–°ï¼Œæ‰¾åˆ°æ ¹ç›®å½•çš„source/_postsæ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢å†™Markdownæ–‡æ¡£çš„å†…å®¹ï¼Œç„¶åå†å‘½ä»¤è¡Œè¾“å…¥ 123hexo cleanhexo ghexo d éƒ¨ç½²å®Œæˆåå»Giteeçš„ä»“åº“æ‰¾åˆ° Gitee PagesæœåŠ¡ï¼Œç‚¹å‡»æ›´æ–°ã€‚ å½“ç„¶åœ¨æœ¬åœ°æŸ¥çœ‹æ•ˆæœå†å»éƒ¨ç½²æœ€å¥½ã€‚"},{"title":"npmå’Œyarnå¸¸ç”¨å‘½ä»¤","path":"2025/05/12/npmå’Œyarnå¸¸ç”¨å‘½ä»¤/","text":"npmå’Œyarnå¸¸ç”¨å‘½ä»¤NPM NPMå‘½ä»¤ æ“ä½œ npm init åˆå§‹åŒ–Nodeé¡¹ç›®ï¼Œç”Ÿæˆpackage.jsonæ–‡ä»¶ npm root æŸ¥çœ‹æœ¬åœ°å®‰è£…ç›®å½• npm install å®‰è£…æœ¬åœ°ä¾èµ–åŒ… npm install --save å®‰è£…è¿è¡Œä¾èµ–åŒ…ï¼Œå¹¶ä¸”å°†å…¶ä¿å­˜è‡³package.jsonæ–‡ä»¶ä¸­ npm install --save-dev å®‰è£…å¼€å‘ä¾èµ–åŒ…ï¼Œå¹¶ä¸”å°†å…¶ä¿å­˜è‡³package.jsonæ–‡ä»¶ä¸­ npm update æ›´æ–°æœ¬åœ°ä¾èµ–åŒ… npm ls æŸ¥çœ‹æœ¬åœ°ä¾èµ–åŒ… npm uninstall å¸è½½æœ¬åœ°ä¾èµ–åŒ… npm root -g æŸ¥çœ‹å…¨å±€å®‰è£…ç›®å½• npm install -g å®‰è£…å…¨å±€ä¾èµ–åŒ… npm update -g æ›´æ–°å…¨å±€ä¾èµ–åŒ… npm ls -g æŸ¥çœ‹å…¨å±€ä¾èµ–åŒ… npm uninstall -g å¸è½½å…¨å±€ä¾èµ–åŒ… npm info æŸ¥çœ‹ä¾èµ–åŒ…ä¿¡æ¯ npm run æ‰§è¡Œscriptsé…ç½®çš„å‘½ä»¤ npm help NPMå¸®åŠ©å‘½ä»¤ YARN YARNå‘½ä»¤ æ“ä½œ yarn init åˆå§‹åŒ–Nodeé¡¹ç›® yarn å®‰è£…æœ¬åœ°ä¾èµ–åŒ… yarn add å®‰è£…è¿è¡Œä¾èµ–åŒ…ï¼Œå¹¶ä¸”ä¿å­˜è‡³package.jsonæ–‡ä»¶ä¸­ yarn add --dev å®‰è£…å¼€å‘ä¾èµ–åŒ…ï¼Œå¹¶ä¸”ä¿å­˜è‡³package.jsonæ–‡ä»¶ä¸­ yarn upgrade æ›´æ–°æœ¬åœ°ä¾èµ–åŒ… yarn remove å¸è½½æœ¬åœ°ä¾èµ–åŒ… yarn global add å®‰è£…å…¨å±€ä¾èµ–åŒ… yarn global upgrade æ›´æ–°å…¨å±€ä¾èµ–åŒ… yarn global list æŸ¥çœ‹å…¨å±€ä¾èµ–åŒ… yarn global remove å¸è½½å…¨å±€ä¾èµ–åŒ…"},{"title":"nvmç®¡ç†nodeç‰ˆæœ¬nrmç®¡ç†npmé•œåƒ","path":"2025/05/12/nvmç®¡ç†nodeç‰ˆæœ¬nrmç®¡ç†npmé•œåƒ/","text":"nvmä½¿ç”¨æ•™ç¨‹1.nvmæ˜¯ä»€ä¹ˆï¼šnvmå…¨ånodejs version manage,æ˜¯ä¸€ä¸ªnodejsçš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚ 2.nvmæœ‰ä»€ä¹ˆä½œç”¨ï¼šnvmå¯ä»¥æ§åˆ¶å¤šä¸ªnodejsç‰ˆæœ¬ï¼Œæ²¡æœ‰å®‰è£…nvmä¹‹å‰ä¸€ä¸ªç”µè„‘ä¸Šé¢åªèƒ½æœ‰ä¸€ä¸ªnodejsç‰ˆæœ¬ï¼Œå¼€å‘ä¸­ï¼Œæ–°é¡¹ç›®ä¸€èˆ¬ä½¿ç”¨è¾ƒæ–°çš„nodejsç‰ˆæœ¬ï¼Œè€é¡¹ç›®ä½¿ç”¨è€ç‰ˆæœ¬çš„nodejs,æ¥å›åˆ é™¤å®‰è£…nodejså°±å¾ˆéº»çƒ¦ï¼Œäºæ˜¯æœ‰äº†nvmçš„è¯ç”Ÿï¼Œä»–å¯ä»¥æ§åˆ¶å¤šä¸ªnodejsç‰ˆæœ¬ï¼Œå¯¹äºå‰ç«¯å¼€å‘äººå‘˜æ¥è¯´æ˜¯å¾ˆæ–¹ä¾¿çš„ä¸€ä¸ªå®ç”¨å·¥å…·ã€‚ 3.å®‰è£…nvméœ€è¦æ³¨æ„äº‹é¡¹ï¼š å®‰è£…nvmä¹‹å‰ä¸€å®šè¦æŠŠç”µè„‘ä¸Šé¢çš„nodejsåˆ å¹²å‡€ï¼Œé¿å…åé¢å®‰è£…å¤±è´¥ï¼› ä¸‹è½½å®‰è£…åŒ…ï¼Œå®‰è£…æ—¶è·¯å¾„ä¸èƒ½æœ‰ä¸­æ–‡å’Œç©ºæ ¼ï¼Œé¿å…åé¢å®‰è£…å¤±è´¥ï¼› å®‰è£…è·¯å¾„æ—¶nodejsè·¯å¾„ä¸èƒ½ä¸ºC:\\åé¢éœ€è¦æœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹å¥—ç€ ,é¿å…åé¢å®‰è£…æˆåŠŸå´ä½¿ç”¨ä¸äº†nodejs; ä¸€å®šè¦ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ç»ˆç«¯æˆ–è€…PowerShellæ‰§è¡Œå‘½ä»¤è¡Œæ“ä½œ,é¿å…åé¢åˆ‡æ¢nodejså¤±è´¥ï¼› 4.nvmä¸‹è½½åœ°å€ï¼šhttps://github.com/coreybutler/nvm-windows/releases 5.ä¸‹è½½å®‰è£…åŒ…ï¼šä»githuabä¸Šé¢å¯ä»¥ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œè¿™é‡Œè®²çš„æ˜¯windowsç³»ç»Ÿå®‰è£…nvm,ä»ç½‘å€ä¸­å¾€ä¸‹åˆ’æ‹‰ä¼šçœ‹åˆ°å¦‚å›¾æ‰€ç¤ºçš„å„ç§nvmç‰ˆæœ¬ï¼š ç‚¹å‡»nvm-setup.zipå®‰è£…åŒ…ï¼Œè§£å‹ä¹‹åç›´æ¥å®‰è£… 6.é…ç½®settings.txtåœ¨å®‰è£…å¥½çš„nvmçš„ç›®å½•ä¸‹æ‰¾åˆ°settings.textæ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢ä¸¤è¡Œä»£ç è®¾ç½®æ·˜å®é•œåƒ 12nvm node_mirror https://npm.taobao.org/mirrors/node/nvm npm_mirror https://npm.taobao.org/mirrors/npm/ 7.æ£€æŸ¥nvmæ˜¯å¦å®‰è£…æˆåŠŸæ‰“å¼€ç»ˆç«¯è¾“å…¥nvm -væŸ¥çœ‹ç‰ˆæœ¬æ˜¯å¦å®‰è£…æˆåŠŸï¼ŒæˆåŠŸçš„æ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š 8.ç®¡ç†nodejs1ã€æŸ¥çœ‹æœ¬åœ°å®‰è£…çš„æ‰€æœ‰ç‰ˆæœ¬ 12nvm list æŸ¥çœ‹ç”µè„‘ä¸Šå·²å®‰è£…çš„nodejsç‰ˆæœ¬å·nvm list available æ˜¾ç¤ºæ‰€æœ‰å¯ä¸‹è½½çš„nodejsç‰ˆæœ¬å· 2ã€å®‰è£…éœ€è¦ä½¿ç”¨çš„nodeç‰ˆæœ¬å· 1nvm install 10.16.0 3ã€ä½¿ç”¨è¯¥ç‰ˆæœ¬å· 1nvm use 10.16.0 4.å¸è½½nodejsç‰ˆæœ¬å· 1nvm uninstall 10.16.0 9.nvmå‘½ä»¤è¡Œæç¤º12345678910111213nvm arch æ˜¾ç¤ºnodeæ˜¯è¿è¡Œåœ¨32ä½è¿˜æ˜¯64ä½nvm version æ˜¾ç¤ºnvmç‰ˆæœ¬å·nvm install ç‰ˆæœ¬å· å®‰è£…è¯¥ç‰ˆæœ¬å·çš„nodejsnvm uninstall ç‰ˆæœ¬å· å¸è½½è¯¥ç‰ˆæœ¬çš„nodejsnvm use ç‰ˆæœ¬å· ä½¿ç”¨è¯¥ç‰ˆæœ¬çš„nodejsnvm list æŸ¥çœ‹å·²å®‰è£…çš„nodejsç‰ˆæœ¬nvm list available æ˜¾ç¤ºå¯ä¸‹è½½çš„nodejsç‰ˆæœ¬å·nvm on å¼€å¯nodejsç‰ˆæœ¬ç®¡ç†nvm off å…³é—­nodejsç‰ˆæœ¬ç®¡ç†nvm proxy [url] è®¾ç½®ä¸‹è½½ä»£ç†,ä¸æ·»åŠ urlï¼Œæ˜¾ç¤ºå½“å‰ä»£ç†ï¼Œå°†urlè®¾ç½®ä¸ºnoneæ—¶åˆ™ç§»é™¤ä»£ç†nvm node_mirror [url] è®¾ç½®nodeé•œåƒï¼Œé»˜è®¤urlæ˜¯https://nodejs.org/dist/,è®¾ç½®urlåå¯åœ¨å®‰è£…nvmçš„ç›®å½•ä¸‹settings.txtæ–‡ä»¶æŸ¥çœ‹,ä¹Ÿå¯æ“ä½œnvm npm_mirror [url] è®¾ç½®npm é•œåƒï¼Œé»˜è®¤urlæ˜¯https://github.com/npm/cli/archive,è®¾ç½®urlåå¯åœ¨nvmç›®å½•ä¸‹settings.txtæ–‡ä»¶æŸ¥çœ‹ï¼Œä¹Ÿå¯æ“ä½œnvm root [path] è®¾ç½®å­˜å‚¨ä¸åŒç‰ˆæœ¬çš„nodejsç›®å½•ï¼Œå¦‚æœªè®¾ç½®ï¼Œé»˜è®¤ä½¿ç”¨å½“å‰ç›®å½• 10.å®‰è£…åæ²¡æœ‰æ•ˆæœæ£€æŸ¥æ˜¯å¦åœ¨å®‰è£…NVMä¹‹å‰å®‰è£…äº†nodeï¼Œå¦‚æœå®‰è£…è¿‡ï¼Œå…ˆå¸è½½nodeï¼Œç¡®ä¿C:\\Program Filesæ–‡ä»¶å¤¹ä¸­æ²¡æœ‰nodeæˆ–nodejsæ–‡ä»¶å¤¹ nrmä½¿ç”¨æ•™ç¨‹Githubåœ°å€ï¼šhttps://github.com/Pana/nrm 1.nrmæ˜¯ä»€ä¹ˆnrmï¼ˆnpm registry managerï¼‰æ˜¯ä¸€ä¸ªå¯ä»¥æ–¹ä¾¿åœ°ç®¡ç†å’Œåˆ‡æ¢å¤šä¸ª npm é•œåƒæºçš„å·¥å…·ã€‚ 2.å®‰è£…nrm1npm install -g nrm 3.æŸ¥çœ‹å¯ä»¥ä½¿ç”¨çš„é•œåƒ1nrm ls 4.ä½¿ç”¨é•œåƒä½¿ç”¨æ·˜å®é•œåƒtaobao 1nrm use taobao 5.æ·»åŠ é•œåƒæ·»åŠ æ·˜å®é•œåƒï¼ˆé»˜è®¤æœ‰æ­¤å¤„ä»…ä¸ºæ¼”ç¤ºï¼‰ 1nrm add taobao https://registry.npmmirror.com 6.æŸ¥çœ‹é•œåƒæº1npm config get registry é€šå¸¸éƒ½æ˜¯æ²¡æœ‰é—®é¢˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ nrm ls æŸ¥çœ‹å“ªä¸€ä¸ªå‰é¢æœ‰*æ¥ç¡®è®¤ 7.æ¸…é™¤ç¼“å­˜1npm cache clean --force åˆ‡æ¢é•œåƒåå¯èƒ½éœ€è¦æ¸…é™¤ç¼“å­˜ï¼Œæœ‰æ—¶å€™ä¸æ¸…æ¥šä¼šå‡ºç°é—®é¢˜"},{"title":"uniapp","path":"2025/05/12/uniapp/","text":"uniappHBuilderXåˆ›å»ºåœ¨ç‚¹å‡»å·¥å…·æ é‡Œçš„æ–‡ä»¶ -&gt; æ–°å»º -&gt; é¡¹ç›®ï¼ˆå¿«æ·é”®Ctrl+Nï¼‰ï¼Œé€‰æ‹©uni-appç±»å‹ï¼Œè¾“å…¥å·¥ç¨‹åï¼Œé€‰æ‹©æ¨¡æ¿ï¼Œç‚¹å‡»åˆ›å»ºï¼Œå³å¯æˆåŠŸåˆ›å»ºã€‚ uni-appè‡ªå¸¦çš„æ¨¡æ¿æœ‰ é»˜è®¤çš„ç©ºé¡¹ç›®æ¨¡æ¿ã€Hello uni-app å®˜æ–¹ç»„ä»¶å’ŒAPIç¤ºä¾‹ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦æ¨¡æ¿æ˜¯ uni uié¡¹ç›®æ¨¡æ¿ï¼Œæ—¥å¸¸å¼€å‘æ¨èä½¿ç”¨è¯¥æ¨¡æ¿ï¼Œå·²å†…ç½®å¤§é‡å¸¸ç”¨ç»„ä»¶ã€‚ vue-cliåˆ›å»º ä½¿ç”¨è¿™ä¸ªä¸€èˆ¬å°±æ˜¯è¦ç”¨åˆ°TSï¼Œå› ä¸ºHBuilderXå¯¹TSçš„æ”¯æŒç›®å‰æ²¡æœ‰è¾¾åˆ°éœ€æ±‚ï¼Œå­˜åœ¨ä¸€äº›é—®é¢˜ä¸èƒ½è¯†åˆ«ï¼Œæ‰€ä»¥ä½¿ç”¨vscode ç”¨å‘½ä»¤çš„å½¢å¼åˆ›å»ºï¼Œè¿™ä¸€éƒ¨åˆ†çš„è¯¦ç»†å®‰è£…çœ‹å®˜æ–¹ï¼Œä¸»è¦æ˜¯è¿˜å¾—å®‰è£…å‡ ä¸ªæ’ä»¶ å…¨å±€å®‰è£… vue-cli 1npm install -g @vue/cli åˆ›å»ºuni-app ä½¿ç”¨æ­£å¼ç‰ˆï¼ˆå¯¹åº”HBuilderXæœ€æ–°æ­£å¼ç‰ˆï¼‰ 1vue create -p dcloudio/uni-preset-vue my-project å¤åˆ¶ä»£ç  ä½¿ç”¨alphaç‰ˆï¼ˆå¯¹åº”HBuilderXæœ€æ–°alphaç‰ˆï¼‰ 1vue create -p dcloudio/uni-preset-vue#alpha my-alpha-project å¤åˆ¶ä»£ç  ä½¿ç”¨Vue3/Viteç‰ˆ åˆ›å»ºä»¥ javascript å¼€å‘çš„å·¥ç¨‹ï¼ˆå¦‚å‘½ä»¤è¡Œåˆ›å»ºå¤±è´¥ï¼Œè¯·ç›´æ¥è®¿é—®giteeä¸‹è½½æ¨¡æ¿ï¼‰ 1npx degit dcloudio/uni-preset-vue#vite my-vue3-project å¤åˆ¶ä»£ç  1npx degit dcloudio/uni-preset-vue#vite-alpha my-vue3-project å¤åˆ¶ä»£ç  åˆ›å»ºä»¥ typescript å¼€å‘çš„å·¥ç¨‹ï¼ˆå¦‚å‘½ä»¤è¡Œåˆ›å»ºå¤±è´¥ï¼Œè¯·ç›´æ¥è®¿é—®giteeä¸‹è½½æ¨¡æ¿ï¼‰ 1npx degit dcloudio/uni-preset-vue#vite-ts my-vue3-project å¤åˆ¶ä»£ç  æ­¤æ—¶ï¼Œä¼šæç¤ºé€‰æ‹©é¡¹ç›®æ¨¡æ¿ï¼ˆä½¿ç”¨Vue3/Viteç‰ˆä¸ä¼šæç¤ºï¼Œç›®å‰åªæ”¯æŒåˆ›å»ºé»˜è®¤æ¨¡æ¿ï¼‰ï¼Œåˆæ¬¡ä½“éªŒå»ºè®®é€‰æ‹© hello uni-app é¡¹ç›®æ¨¡æ¿ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š æ³¨æ„ Vue3/Viteç‰ˆè¦æ±‚ node ç‰ˆæœ¬^14.18.0 || &gt;=16.0.0 å¦‚æœä½¿ç”¨ HBuilderXï¼ˆ3.6.7ä»¥ä¸‹ç‰ˆæœ¬ï¼‰è¿è¡Œ Vue3/Vite åˆ›å»ºçš„æœ€æ–°çš„ cli å·¥ç¨‹ï¼Œéœ€è¦åœ¨ HBuilderX è¿è¡Œé…ç½®æœ€åº•éƒ¨è®¾ç½® nodeè·¯å¾„ ä¸ºè‡ªå·±æœ¬æœºé«˜ç‰ˆæœ¬ node è·¯å¾„ï¼ˆæ³¨æ„éœ€è¦é‡å¯ HBuilderX æ‰å¯ä»¥ç”Ÿæ•ˆï¼‰ HBuilderX Mac ç‰ˆæœ¬èœå•æ å·¦ä¸Šè§’ HBuilderX-&gt;åå¥½è®¾ç½®-&gt;è¿è¡Œé…ç½®-&gt;nodeè·¯å¾„ HBuilderX Windows ç‰ˆæœ¬èœå•æ  å·¥å…·-&gt;è®¾ç½®-&gt;è¿è¡Œé…ç½®-&gt;nodeè·¯å¾„ å‘½ä»¤å¼çš„è¿è¡Œå‘å¸ƒï¼šhttps://uniapp.dcloud.net.cn/quickstart-cli.html#%E8%BF%90%E8%A1%8C%E3%80%81%E5%8F%91%E5%B8%83uni-app å®‰è£…æ’ä»¶ uni-create-viewï¼šå¿«é€Ÿåˆ›å»ºè§†å›¾ä¸ç»„ä»¶ uni-helperï¼šä»£ç æç¤º uniappå°ç¨‹åºæ‰©å±•ï¼šé¼ æ ‡æ‚¬åœæŸ¥çœ‹æ–‡æ¡£ å®‰è£…TS1pnpm i D @types/wechat-miniprogram @uni-helper/uni-app-types é…ç½®tsconfig.json 123456789101112&#123; &quot;compilerOptions&quot;:&#123; &quot;types&quot;:[ &quot;@dcloudio/types&quot;, &quot;@types/wechat-miniprogram&quot;, &quot;@uni-helper/uni-app-types&quot; ] &#125;, &quot;vueCompilerOptions&quot;:&#123; &quot;experimentalRuntimeMode&quot;:&quot;runtime-uni-app&quot; &#125;&#125; è®¾ç½®æ–‡ä»¶å…³è”æ‰“å¼€è®¾ç½®ï¼Œæœç´¢æ–‡ä»¶å…³è” è®¾ç½®â€é¡¹â€ä¸º manifest.json â€œå€¼â€ ä¸º jsonc è¿™ä¸ªå¯ä»¥å†™æ³¨é‡Š è®¾ç½®â€é¡¹â€ä¸º pages.json â€œå€¼â€ ä¸º jsonc è¿™ä¸ªä¸èƒ½å†™æ³¨é‡Š uni-uiHBuilderXï¼šç›´æ¥åœ¨å®˜ç½‘å¯¼å…¥å³å¯ npmï¼š vue.config.js æ–‡ä»¶ ï¼Œå¢åŠ  @dcloudio/uni-ui åŒ…çš„ç¼–è¯‘å³å¯æ­£å¸¸ 123module.exports = &#123; transpileDependencies:[&#x27;@dcloudio/uni-ui&#x27;]&#125; å‡†å¤‡ sass 12npm i sass -D æˆ– yarn add sass -D npm i sass-loader@10.1.1 -D æˆ– yarn add sass-loader@10.1.1 -D å®‰è£… uni-ui 1npm i @dcloudio/uni-ui æˆ– yarn add @dcloudio/uni-ui é…ç½®easycom 123456789101112131415// pages.json&#123; &quot;easycom&quot;: &#123; &quot;autoscan&quot;: true, &quot;custom&quot;: &#123; // uni-ui è§„åˆ™å¦‚ä¸‹é…ç½® &quot;^uni-(.*)&quot;: &quot;@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue&quot; &#125; &#125;, // å…¶ä»–å†…å®¹ pages:[ // ... ]&#125; å®‰è£…uni-uiçš„TSæ”¯æŒ @uni-helper/uni-ui-types npmåœ°å€ï¼šhttps://www.npmjs.com/package/@uni-helper/uni-ui-types å®‰è£… 1npm i -D @uni-helper/uni-ui-types é…ç½® tsconfig.jsonï¼Œç¡®ä¿ compilerOptions.types ä¸­å«æœ‰ @dcloudio/types å’Œ @uni-helper/uni-ui-types ä¸” include åŒ…å«äº†å¯¹åº”çš„ vue æ–‡ä»¶ 123456789101112&#123; &quot;compilerOptions&quot;:&#123; &quot;types&quot;:[ Â·Â·Â· &quot;@dcloudio/types&quot;, &quot;@uni-helper/uni-ui-types&quot; ] &#125;, &quot;vueCompilerOptions&quot;:&#123; &quot;experimentalRuntimeMode&quot;:&quot;runtime-uni-app&quot; &#125;&#125; å°è£…æ‹¦æˆªå™¨Promiseå°è£…1234567891011121314151617181920212223242526272829class API &#123; request(url, method = &quot;GET&quot;, data) &#123; return new Promise((resolve, reject) =&gt; &#123; wx.request(&#123; url:url, method, data, success: (res) =&gt; &#123; resolve(res.data) &#125;, fail: (err) =&gt; &#123; reject(err) &#125; &#125;) &#125;) &#125; get(url, data) &#123; return this.request(url, &quot;GET&quot;, data) &#125; post(url, data) &#123; return this.request(url, &quot;POST&quot;, data) &#125;&#125;const axios = new API()export default axios uni.addInterceptorå°è£…æ‹¦æˆªå™¨12345678910111213141516171819202122232425262728293031323334353637383940414243const BASE_URL = &quot;http://localhost:3000&quot;const httpInterceptor = &#123; // æ‹¦æˆªå‰è§¦å‘ invoke(options)&#123; // éhttpå¼€å¤´çš„åœ°å€æ·»åŠ åŸºç¡€åœ°å€ if(!options.url.startsWith(&#x27;http&#x27;))&#123; options.url = options.url + BASE_URL &#125; // è¶…æ—¶æ—¶é—´ options.timeout = 10000 // æ·»åŠ æ ‡è¯† options.header = &#123; ...options.header, &#x27;source-client&#x27;:&quot;minapp&quot; &#125; // æ·»åŠ token if(user.token)&#123; options.header.Authorization = `Bearer $&#123;user.token&#125;` &#125; &#125;, // æˆåŠŸè§¦å‘å›è°ƒ success(args)&#123; args.data.code = 1 &#125;, // å¤±è´¥å›è°ƒ fail(err) &#123; console.log(&#x27;interceptor-fail&#x27;,err) &#125;, &#125;// å¤„ç†è¿”å›å€¼uni.addInterceptor(&#123; returnValue(args) &#123; // åªè¿”å› data å­—æ®µ return args.data &#125;&#125;)// ç½‘ç»œè¯·æ±‚uni.addInterceptor(&#x27;request&#x27;,httpInterceptor)// æ–‡ä»¶ä¸Šä¼ uni.addInterceptor(&#x27;uploadFile&#x27;,httpInterceptor) è‡ªå®šä¹‰å¯¼èˆªä¿®æ”¹æ ·å¼ã€å…³é—­é»˜è®¤å¯¼èˆª 12&quot;navigationStyle&quot;:&quot;custom&quot;,&quot;navigationBarTextStyle&quot;:&quot;white&quot; ç”±äºä¸åŒçš„æœºå‹æ‰‹æœºå¤´éƒ¨åˆ°å®‰å…¨åŒºåŸŸçš„è·ç¦»æœ‰ä¸€äº›å·®è·ï¼Œéœ€è¦å€ŸåŠ©uniappæä¾›çš„æ–¹æ³•æ¥è·å– 123const &#123;safeAreaInsets&#125; = uni.getSystemInfoSync()```&lt;view :style=&quot;&#123; paddingTop:safeAreaInsets?.top + &#x27;px&#x27;&#125;&quot;&gt;&lt;/view&gt; æ³¨æ„ï¼šVue3ç‰ˆæœ¬ä½¿ç”¨Vue - Officialï¼ˆå½“å‰2.2.10æœ‰è¯¯ï¼‰æ—¶éœ€è¦å…³æ‰å»ºè®®æˆ–ä½¿ç”¨è€ç‰ˆæœ¬ï¼Œå¦åˆ™ä¼šæç¤ºæ²¡æœ‰å¿…è¦çš„æŠ¥é”™ï¼Œå°ç¨‹åºçš„ç»„ä»¶ä»–æ²¡æ³•è¯†åˆ«"},{"title":"Vueé¡¹ç›®å¼€å‘å¸¸ç”¨åŠŸèƒ½","path":"2025/05/12/Vueé¡¹ç›®å¼€å‘å¸¸ç”¨åŠŸèƒ½/","text":"Vueé¡¹ç›®å¼€å‘å¸¸ç”¨åŠŸèƒ½vscode@é…ç½®åœ¨æ ¹ç›®å½•åˆ›å»ºjsconfig.jsonï¼ˆå¦‚æœæ²¡æœ‰é»˜è®¤ç”Ÿæˆï¼‰ 123456789&#123; &quot;compilerOptions&quot;: &#123; &quot;baseUrl&quot;: &quot;./&quot;, &quot;paths&quot;: &#123; &quot;@/*&quot;: [&quot;src/*&quot;] &#125; &#125;, &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;dist&quot;]&#125; é»˜è®¤å¯åŠ¨æµè§ˆå™¨ä¿®æ”¹package.json 12// &quot;serve&quot;: &quot;vue-cli-service serve&quot;,&quot;serve&quot;: &quot;vue-cli-service serve --open&quot;, åœ¨vue.confog.jsä¸­æ·»åŠ  12345devServer: &#123; open: true, // é»˜è®¤æ‰“å¼€æµè§ˆå™¨ host: &#x27;localhost&#x27;, // è·¯å¾„ port: 8080, // ç«¯å£&#125; é‡ç½®é»˜è®¤æ ·å¼1npm install --save normalize.css main.jså¼•å…¥ï¼ˆåœ¨è‡ªå·±çš„æ ·å¼ä¹‹å‰ï¼‰ 1import &quot;normalize.css&quot; æˆ–è€…åœ¨index.cssä¸­å¼•å…¥ 1@import &quot;normalize.css&quot;; axioså°è£… åˆ›å»ºaxios.config.jsç®¡ç†ä¸åŒç¯å¢ƒçš„å‚æ•° åˆ›å»ºaxios.js/index.jsç®¡ç†è¯·æ±‚æ‹¦æˆªå’Œå“åº”æ‹¦æˆªå†…å®¹ æ ¹æ®å¯¹åº”çš„æ¨¡å—åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶/æ–‡ä»¶å¤¹ç®¡ç†è¯·æ±‚çš„æ¥å£ å®‰è£… 1npm i axios æ¡ˆä¾‹ï¼š axios.config.js 123456789101112131415// æ ¹æ®process.env.NODE_ENV// - å¼€å‘ç¯å¢ƒï¼šdevelopment// - ç”Ÿäº§ç¯å¢ƒï¼šproduction// - æµ‹è¯•ç¯å¢ƒï¼štestlet BASE_UEL = &#x27;&#x27;let TIME_OUT = 10000if (process.env.NODE_ENV === &#x27;development&#x27;) &#123; BASE_UEL = &quot;&quot;&#125; else if (process.env.NODE_ENV === &#x27;production&#x27;) &#123; BASE_UEL = &quot;&quot;&#125; else &#123; BASE_UEL = &quot;&quot;&#125;export &#123; BASE_UEL, TIME_OUT &#125; axios.js 1234567891011121314151617181920212223242526272829303132import axios from &#x27;axios&#x27;;import &#123; BASE_UEL, TIME_OUT &#125; from &#x27;./axios.config&#x27;;const request = axios.create(&#123; baseURL: BASE_UEL, timeout: TIME_OUT&#125;);// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨request.interceptors.request.use(function (config) &#123; // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ const user = store.state.user; // è·å–tokenï¼Œ if (user) &#123; config.headers.Authorization = `Bearer $&#123;user.token&#125;`;// è®¾ç½®token ä¹Ÿæœ‰å¯èƒ½æ˜¯è‡ªå®šä¹‰çš„è¯·æ±‚å¤´ &#125; return config;&#125;, function (error) &#123; // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ return Promise.reject(error);&#125;);// æ·»åŠ å“åº”æ‹¦æˆªå™¨request.interceptors.response.use(function (response) &#123; // å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ return response.data;&#125;, function (error) &#123; // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ return Promise.reject(error);&#125;);export &#123; request&#125; æ¨¡å—æ¥å£ 123456789101112131415161718192021222324252627import &#123; request &#125; from &#x27;./axios&#x27;;/** * * @param &#123;Object&#125; params getè¯·æ±‚å‚æ•° * @returns */export const get = (params) =&gt; &#123; return request(&#123; method: &#x27;get&#x27;, url: &#x27;/***&#x27;, params &#125;)&#125;/** * * @param &#123;Object&#125; data postè¯·æ±‚å‚æ•° * @returns */export const post = (data) =&gt; &#123; return request(&#123; method: &#x27;post&#x27;, url: &#x27;/***&#x27;, data &#125;)&#125; æ— æ„Ÿåˆ·æ–°Tokenæ¦‚è¿°ï¼šæœåŠ¡å™¨ç”Ÿæˆtokençš„è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰ä¸¤ä¸ªæ—¶é—´ï¼Œä¸€ä¸ªæ˜¯tokenå¤±æ•ˆæ—¶é—´ï¼Œä¸€ä¸ªæ˜¯tokenåˆ·æ–°æ—¶é—´ï¼Œåˆ·æ–°æ—¶é—´è‚¯å®šæ¯”å¤±æ•ˆæ—¶é—´é•¿ï¼Œå½“ç”¨æˆ·çš„ token è¿‡æœŸæ—¶ï¼Œä½ å¯ä»¥æ‹¿ç€è¿‡æœŸçš„tokenå»æ¢å–æ–°çš„tokenï¼Œæ¥ä¿æŒç”¨æˆ·çš„ç™»é™†çŠ¶æ€ï¼Œå½“ç„¶ä½ è¿™ä¸ªè¿‡æœŸtokençš„è¿‡æœŸæ—¶é—´å¿…é¡»åœ¨åˆ·æ–°æ—¶é—´ä¹‹å†…ï¼Œå¦‚æœè¶…å‡ºäº†åˆ·æ–°æ—¶é—´ï¼Œé‚£ä¹ˆè¿”å›çš„ä¾æ—§æ˜¯ 401ã€‚ å¤„ç†æµç¨‹ï¼š åœ¨axiosçš„æ‹¦æˆªå™¨ä¸­åŠ å…¥tokenåˆ·æ–°é€»è¾‘ å½“ç”¨æˆ·tokenè¿‡æœŸæ—¶ï¼Œå»å‘æœåŠ¡å™¨è¯·æ±‚æ–°çš„ token æŠŠæ—§çš„tokenæ›¿æ¢ä¸ºæ–°çš„token ç„¶åç»§ç»­ç”¨æˆ·å½“å‰çš„è¯·æ±‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103/** * å°è£… axios è¯·æ±‚æ¨¡å— */import axios from &quot;axios&quot;;import jsonBig from &quot;json-bigint&quot;;import store from &quot;@/store&quot;;import router from &quot;@/router&quot;;// axios.create æ–¹æ³•ï¼šåˆ›å»ºä¸€ä¸ªaxioså®ä¾‹const request = axios.create(&#123; baseURL: &quot;http://ttapi.research.itcast.cn/&quot; // åŸºç¡€è·¯å¾„&#125;);/** * é…ç½®å¤„ç†åç«¯è¿”å›æ•°æ®ä¸­è¶…å‡º js å®‰å…¨æ•´æ•°èŒƒå›´é—®é¢˜ */request.defaults.transformResponse = [ function(data) &#123; try &#123; return jsonBig.parse(data); &#125; catch (err) &#123; return &#123;data&#125;; &#125; &#125;];// è¯·æ±‚æ‹¦æˆªå™¨request.interceptors.request.use( function(config) &#123; const user = store.state.user; if (user) &#123; config.headers.Authorization = `Bearer $&#123;user.token&#125;`; &#125; // Do something before request is sent return config; &#125;, function(error) &#123; // Do something with request error return Promise.reject(error); &#125;);// å“åº”æ‹¦æˆªå™¨request.interceptors.response.use( // å“åº”æˆåŠŸè¿›å…¥ç¬¬1ä¸ªå‡½æ•° // è¯¥å‡½æ•°çš„å‚æ•°æ˜¯å“åº”å¯¹è±¡ function(response) &#123; // Any status code that lie within the range of 2xx cause this function to trigger // Do something with response data return response; &#125;, // å“åº”å¤±è´¥è¿›å…¥ç¬¬2ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„å‚æ•°æ˜¯é”™è¯¯å¯¹è±¡ async function(error) &#123; // Any status codes that falls outside the range of 2xx cause this function to trigger // Do something with response error // å¦‚æœå“åº”ç æ˜¯ 401 ï¼Œåˆ™è¯·æ±‚è·å–æ–°çš„ token // å“åº”æ‹¦æˆªå™¨ä¸­çš„ error å°±æ˜¯é‚£ä¸ªå“åº”çš„é”™è¯¯å¯¹è±¡ console.dir(error); if (error.response &amp;&amp; error.response.status === 401) &#123; // æ ¡éªŒæ˜¯å¦æœ‰ refresh_token const user = store.state.user; if (!user || !user.refresh_token) &#123; router.push(&quot;/login&quot;); // ä»£ç ä¸è¦å¾€åæ‰§è¡Œäº† return; &#125; // å¦‚æœæœ‰refresh_tokenï¼Œåˆ™è¯·æ±‚è·å–æ–°çš„ token try &#123; const res = await axios(&#123; method: &quot;PUT&quot;, url: &quot;http://ttapi.research.itcast.cn/app/v1_0/authorizations&quot;, headers: &#123; Authorization: `Bearer $&#123;user.refresh_token&#125;` &#125; &#125;); // å¦‚æœè·å–æˆåŠŸï¼Œåˆ™æŠŠæ–°çš„ token æ›´æ–°åˆ°å®¹å™¨ä¸­ console.log(&quot;åˆ·æ–° token æˆåŠŸ&quot;, res); store.commit(&quot;setUser&quot;, &#123; token: res.data.data.token, // æœ€æ–°è·å–çš„å¯ç”¨ token refresh_token: user.refresh_token // è¿˜æ˜¯åŸæ¥çš„ refresh_token &#125;); // æŠŠä¹‹å‰å¤±è´¥çš„ç”¨æˆ·è¯·æ±‚ç»§ç»­å‘å‡ºå» // config æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æœ¬æ¬¡å¤±è´¥è¯·æ±‚ç›¸å…³çš„é‚£äº›é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚ urlã€method éƒ½æœ‰ // return æŠŠ request çš„è¯·æ±‚ç»“æœç»§ç»­è¿”å›ç»™å‘è¯·æ±‚çš„å…·ä½“ä½ç½® return request(error.config); // é‡æ–°è¯·æ±‚ &#125; catch (err) &#123; // å¦‚æœè·å–å¤±è´¥ï¼Œç›´æ¥è·³è½¬ ç™»å½•é¡µ console.log(&quot;è¯·æ±‚åˆ·çº¿ token å¤±è´¥&quot;, err); router.push(&quot;/login&quot;); &#125; &#125; return Promise.reject(error); &#125;);export default request; è·¨åŸŸé…ç½®1234567891011121314devServer: &#123; proxy: &#123; // å‰ç¼€ &#x27;/api&#x27;: &#123; // target è½¬å‘åçš„ç›®æ ‡åœ°å€ target: &#x27;http://localhost:8080/&#x27;, // pathRewrite é‡å†™è·¯å¾„ è°ƒç”¨çœŸæ­£çš„æ¥å£æ—¶æ›¿æ¢æ‰è¯·æ±‚å‰ç¼€ // pathRewrite å‘é€è¯·æ±‚æ—¶ï¼Œè¯·æ±‚è·¯å¾„é‡å†™ /api/xxx -&gt; /xxx ï¼ˆå»æ‰/apiï¼‰ pathRewrite: &#123; &#x27;^/api&#x27;: &#x27;&#x27; &#125;, ws: true,//ç”¨äºæ”¯æŒwebsocket changeOrigin: true,//æ¬ºéª—åç«¯ ä»£ç†æœåŠ¡å™¨æ­¤æ—¶ä¼šæ ¹æ®è¯·æ±‚çš„ target åœ°å€ä¿®æ”¹ Host &#125; &#125;,&#125;, æŒ‰éœ€å¼•å…¥å®˜ç½‘çš„å°é—®é¢˜ å®˜æ–¹ç½‘ç«™æè¿°çš„å†…å®¹æ²¡æœ‰åŠæ—¶æ›´æ–° 12345678910111213141516// babel.config.jsmodule.exports = &#123; presets: [ &#x27;@vue/cli-plugin-babel/preset&#x27;, [&quot;@babel/preset-env&quot;, &#123; &quot;modules&quot;: false &#125;] ], &quot;plugins&quot;: [ [ &quot;component&quot;, &#123; &quot;libraryName&quot;: &quot;element-ui&quot;, &quot;styleLibraryName&quot;: &quot;theme-chalk&quot; &#125; ] ]&#125; ç§»åŠ¨ç«¯ rem é€‚é… postcss-pxtorem æ˜¯ä¸€æ¬¾ postcss æ’ä»¶ï¼Œç”¨äºå°†å•ä½è½¬åŒ–ä¸º rem lib-flexible ç”¨äºè®¾ç½® rem åŸºå‡†å€¼ ä¸€ã€ä½¿ç”¨ lib-flexible åŠ¨æ€è®¾ç½® REM åŸºå‡†å€¼ï¼ˆhtml æ ‡ç­¾çš„å­—ä½“å¤§å°ï¼‰1ã€å®‰è£… 12# yarn add amfe-flexiblenpm i amfe-flexible 2ã€ç„¶ååœ¨ main.js ä¸­åŠ è½½æ‰§è¡Œè¯¥æ¨¡å— 1import &#x27;amfe-flexible&#x27; æœ€åæµ‹è¯•ï¼šåœ¨æµè§ˆå™¨ä¸­åˆ‡æ¢ä¸åŒçš„æ‰‹æœºè®¾å¤‡å°ºå¯¸ï¼Œè§‚å¯Ÿ html æ ‡ç­¾ font-size çš„å˜åŒ–ã€‚ äºŒã€ä½¿ç”¨ postcss-pxtoremå°† px è½¬ä¸º rem1ã€å®‰è£… 123# yarn add -D postcss-pxtorem# -D æ˜¯ --save-dev çš„ç®€å†™npm install postcss-pxtorem -D 2ã€ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»º postcss.config.js æ–‡ä»¶ 1234567891011121314151617181920module.exports = &#123; plugins: &#123; // VueCLI é»˜è®¤é…ç½®äº† // &#x27;autoprefixer&#x27;: &#123; // browsers: [&#x27;Android &gt;= 4.0&#x27;, &#x27;iOS &gt;= 8&#x27;] // &#125;, &#x27;postcss-pxtorem&#x27;: &#123; // è®¾ç½®è®¾è®¡ç¨¿å®½åº¦çš„1/10ï¼ˆæ’ä»¶å°†ä¸€è¡Œåˆ†ä¸º10åˆ†ï¼‰ // rootValueå¯ä»¥æ¥æ”¶ä¸¤ç§ç±»å‹ï¼šæ•°å­—/å‡½æ•° // 375çš„è®¾è®¡ç¨¿å°±ç›´æ¥ä½¿ç”¨æ•°å­—ï¼Œå¦‚æœæœ‰ä¸åŒçš„å°±ä½¿ç”¨å‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œpostcss-pxtoremä¼šå¯¹æ¯ä¸€ä¸ªcssè¿›è¡Œåˆ¤æ–­ // rootValue: 37.5, rootValue(&#123; file &#125;) &#123; // vantæ¡ˆä¾‹ // å¦‚æœä½¿ç”¨åˆ«çš„å¯ä»¥æ‰“å°æŸ¥çœ‹ï¼Œç„¶åæ ¹æ®è·¯å¾„æ¥åˆ¤æ–­ // æ­¤å¤„vantæ˜¯375çš„è®¾è®¡ç¨¿ï¼Œé¡¹ç›®ä½¿ç”¨çš„æ˜¯750çš„è®¾è®¡ç¨¿ return file.indexOf(&#x27;vant&#x27;) !== -1 ? 37.5 : 75; &#125;, propList: [&#x27;*&#x27;] &#125; &#125;&#125; 3ã€é…ç½®å®Œæ¯•ï¼Œé‡æ–°å¯åŠ¨æœåŠ¡ æœ€åæµ‹è¯•ï¼šåˆ·æ–°æµè§ˆå™¨é¡µé¢ï¼Œå®¡æŸ¥å…ƒç´ çš„æ ·å¼æŸ¥çœ‹æ˜¯å¦å·²å°† px è½¬æ¢ä¸º remã€‚ æ³¨æ„è¡Œå†…æ ·å¼æ˜¯ä¸èƒ½è½¬æ¢ VuexæŒä¹…åŒ–ç®¡ç† æŒä¹…åŒ–- å‰ç«¯æŒä¹…åŒ–-åç«¯æŒä¹…åŒ–-éƒ½æ˜¯é€šè¿‡ç¼“å­˜æ¥åš localStorage-è‡ªå·±å†™ä¹Ÿè¡Œï¼Œä¹Ÿå¯ä»¥ç”¨æ’ä»¶ åŸç†-åˆ·æ–°é¡µé¢-æ‰€æœ‰çš„ä¸œè¥¿éƒ½é”€æ¯é‡æ¥ï¼ŒVuex éƒ½ä¼šé‡æ¥ï¼Œ è¦ä¿è¯é‡æ–°åˆå§‹åŒ–çš„æ—¶å€™èƒ½å¤Ÿè¯»å–åˆ°ä¹‹å‰å­˜å‚¨çš„æ•°æ®-ä»ç¼“å­˜ä¸­è¯»å–æ•°æ® åˆå§‹åŒ–çš„æ—¶å€™ä»ç¼“å­˜ä¸­è¯»å– ä¿®æ”¹çš„çŠ¶æ€çš„æ—¶å€™å­˜å…¥ç¼“å­˜ ç™»å½•é€»è¾‘ ç‚¹å‡»ç™»å½•å å¯ä»¥é€‰æ‹©æ€§çš„æ·»åŠ ï¼ˆäººæœºåˆ¤æ–­ï¼‰ åˆ¤æ–­ç”¨æˆ·å/å¯†ç çš„å‰ç«¯éªŒè¯ åˆ¤æ–­æ˜¯å¦ç¬¦åˆè§„åˆ™å¦åˆ™æŒ‰é’®æ— æ³•ç‚¹å‡» è¯·æ±‚æ¥å£ç™»å½• æˆåŠŸåˆ™è·³è½¬é¡µé¢ä¿å­˜å¯¹åº”çš„ç”¨æˆ·æ•°æ® å¤±è´¥åˆ™å¼¹å‡ºå¯¹åº”çš„é”™è¯¯æç¤º éªŒè¯æˆåŠŸåå°†å¯¹åº”çš„Tokenä¿å­˜ åˆ†åˆ«ä¿å­˜åˆ°æµè§ˆå™¨å’Œvuex ä¿å­˜åˆ°æµè§ˆå™¨æ˜¯é˜²æ­¢åˆ·æ–°æ•°æ®ä¸¢å¤± ä¿å­˜åˆ°vuexæ˜¯ä¸ºäº†æ›´å¥½çš„æ€§èƒ½ é€‰æ‹©æ€§çš„åœ¨å°è£…çš„axiosçš„è¯·æ±‚æ‹¦æˆªä¸­æºå¸¦Token é€šè¿‡ä¿å­˜çš„Tokenåˆ¤æ–­ç”¨æˆ·çš„æƒé™ è·å–ç”¨æˆ·æƒé™å¯¹åº”çš„è·¯ç”±æƒé™ è·å–ç”¨æˆ·æƒé™å¯¹åº”çš„æŒ‰é’®æƒé™ â€¦â€¦ é€šè¿‡è·¯ç”±å’ŒæŒ‰é’®çš„æƒé™è¿›è¡Œèœå•å’ŒæŒ‰é’®æ¸²æŸ“ èœå•ç»„ä»¶ å¦‚æœç¡®å®šäº†å‡ å±‚å°±å¯ä»¥ç›´æ¥å†™å‡ å±‚ å¦‚æœä¸ç¡®å®šå¤šå°‘å±‚å°±å¯ä»¥ä½¿ç”¨é€’å½’ æŒ‰é’®ç»„ä»¶ ä¹Ÿå¯ä»¥ä¸å°è£… é€šè¿‡v-ifï¼Œç›´æ¥ä¸æ¸²æŸ“ é€šè¿‡disabledä½¿æŒ‰é’®æ— æ³•ç‚¹å‡» è´¦å·å¯†ç ç™»å½• è¡¨å•éªŒè¯ æ˜¾ç¤ºæç¤ºæ–‡å­— ç™»å½•æ˜¯å¦å¯ä»¥ç‚¹å‡» åŒæ„åè®® å¯é€‰ è°ƒç”¨è´¦å·å¯†ç ç™»å½•çš„API æˆåŠŸï¼šè·³è½¬é¡µé¢ + æ¶ˆæ¯æç¤º å¤±è´¥ï¼šæ¶ˆæ¯æç¤º çŸ­ä¿¡éªŒè¯ç™»å½• è¡¨å•éªŒè¯ æ˜¾ç¤ºæç¤ºæ–‡å­— éªŒè¯ç æ˜¯å¦å¯ä»¥å‘é€ éªŒè¯ç çš„å€’è®¡æ—¶ åŒæ„åè®® å¯é€‰ è°ƒç”¨éªŒè¯éªŒè¯ç çš„API æˆåŠŸï¼šè·³è½¬é¡µé¢ + æ¶ˆæ¯æç¤º å¤±è´¥ï¼šæ¶ˆæ¯æç¤º QQç™»å½•ä½¿ç”¨QQç™»å½•çš„å‰æ æœ‰ä¸€ä¸ªå·²ç»å¤‡æ¡ˆçš„ç½‘ç«™ è¿›å…¥QQäº’è”ï¼Œç™»å½•æ³¨å†Œ åˆ›å»ºåº”ç”¨ï¼Œæä¾›åŸŸåã€å¤‡æ¡ˆå·ã€å›è°ƒåœ°å€ å®¡æ ¸é€šè¿‡åè·å–åˆ°åº”ç”¨çš„idå’Œkey ç™»å½•é€»è¾‘ ç‚¹å‡»QQç™»å½• æ‰“å¼€ç™»å½•å¼¹çª— ç”¨æˆ·ç™»å½• ç™»å½•æˆåŠŸè¿”å›é¡µé¢ æ˜¯å¦æ³¨å†Œè¿‡ æ³¨å†Œè¿‡ã€å·²ç»ç»‘å®šï¼šè·³è½¬é¦–é¡µ æ³¨å†Œè¿‡ã€æ²¡æœ‰ç»‘å®šï¼šè¿›è¡Œæ‰‹æœºå·/é‚®ç®±ç»‘å®š æœªæ³¨å†Œï¼šè¿›è¡Œä¿¡æ¯çš„å®Œå–„ã€è·³è½¬é¦–é¡µ ä½¿ç”¨QQç™»å½•æŒ‰é’® å¼•ç”¨JS SDKçš„JavaScriptæ–‡ä»¶ ``` 1234567891011 - å¡«å…¥APPIDå’Œå›è°ƒåœ°å€2. åœ¨webpackä¸­é…ç½® ```javascript configureWebpack:&#123; externals:&#123; qc:&#x27;QC&#x27; // åŒ…åç§°ï¼šå…¨å±€å˜é‡åç§° &#125; &#125; åœ¨ä½¿ç”¨çš„åœ°æ–¹å¯¼å…¥ æ”¾ç½®QQç™»å½•æŒ‰é’® 123456&lt;span id=&quot;qqLoginBtn&quot;&gt;&lt;/span&gt;&lt;script type=&quot;text/javascript&quot;&gt; QC.Login(&#123; btnId:&quot;qqLoginBtn&quot; //æ’å…¥æŒ‰é’®çš„èŠ‚ç‚¹id&#125;);&lt;/script&gt; é»˜è®¤æ˜¯å°çª—å£ é€šè¿‡å®¡æŸ¥å…ƒç´ å¤åˆ¶å°çª—å£åœ°å€ æ‰‹åŠ¨å†™aæ ‡ç­¾å’Œimgæ ‡ç­¾ã€å¡«å…¥åœ°å€ å¯ä»¥é€‰æ‹©æ€§çš„åˆ é™¤qcå’Œspançš„ä»£ç  ä½†æ˜¯webpackçš„qcè¿˜æ˜¯æœ‰ç”¨çš„ï¼Œåç»­è·å–QQä¿¡æ¯è¦ä½¿ç”¨ ç™»å½• åˆ¤æ–­æ˜¯å¦ç™»å½•æˆåŠŸ è°ƒç”¨è·å–openIdçš„æ–¹æ³• è¯·æ±‚ç™»å½•çš„API 1234567891011121314151617181920212223 // ç¡®ä¿QQå·²ç»ç™»å½•if (QC.Login.check()) &#123; // ç¬¬ä¸‰æ–¹å”¯ä¸€æ ‡è¯†QQå”¯ä¸€æ ‡è¯† QC.Login.getMe((openId) =&gt; &#123; unionId.value = openId // è¯·æ±‚åå°ï¼ŒåšQQç™»å½• userQQLogin(openId).then(data =&gt; &#123; // ç™»å½•æˆåŠŸï¼šdata.result ç”¨æˆ·ä¿¡æ¯ // 1. å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ const &#123; id, account, avatar, mobile, nickname, token &#125; = data.result store.commit(&#x27;user/setUser&#x27;, &#123; id, account, avatar, mobile, nickname, token &#125;) store.dispatch(&#x27;cart/mergeCart&#x27;).then(() =&gt; &#123; // 2. è·³è½¬åˆ°æ¥æºé¡µæˆ–è€…é¦–é¡µ router.push(store.state.user.redirectUrl) // 3. æˆåŠŸæç¤º Message(&#123; type: &#x27;success&#x27;, text: &#x27;QQç™»å½•æˆåŠŸ&#x27; &#125;) &#125;) &#125;).catch(e =&gt; &#123; // ç™»å½•å¤±è´¥ï¼šæ²¡æœ‰ç»‘å®š isBind.value = false &#125;) &#125;)&#125; æˆåŠŸï¼šè·å–ç”¨æˆ·ä¿¡æ¯ç­‰åç»­ä¸šåŠ¡ å¤±è´¥ï¼šæ²¡æœ‰ç»‘å®šå¹³å° æœ‰è´¦å·æœªç»‘å®š è·å–QQçš„å¤´åƒæ˜µç§°ç­‰ä¿¡æ¯ 1234QC.api(&#x27;get_user_info&#x27;).success(res =&gt; &#123; avatar.value = res.data.figureurl_qq_1 nickname.value = res.data.nickname&#125;) è¡¨å•æ ¡éªŒæ‰‹æœºå·/å‘é€éªŒè¯ç  ç»‘å®šè´¦å·ï¼Œè·³è½¬é¡µé¢ æ²¡æœ‰è´¦å·æ²¡æœ‰ç»‘å®š éœ€è¦è¿›è¡Œå¯¹åº”çš„è¡¨å•éªŒè¯ åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨/ä¸¤æ¬¡å¯†ç æ˜¯å¦ä¸€è‡´ ç»‘å®šè´¦å· é€€å‡ºç™»å½• æ¸…é™¤Tokençš„ä¿¡æ¯ åˆ é™¤æœ¬åœ°çš„ç”¨æˆ·ä¿¡æ¯ è·³è½¬åˆ°ç™»å½•é¡µé¢ æ”¯ä»˜é€»è¾‘ ç‚¹å‡»å»æ”¯ä»˜ åˆ¤æ–­æ˜¯å¦é€‰æ‹©å•†å“ é€‰æ‹©æ”¶è´§åœ°å€ ç”µå•†ç±» è®¢å•é¡µé¢ï¼ˆå†…å®¹çš„é€‰æ‹©å’Œç¡®è®¤è®¢å•ï¼‰å¤–å–ç­‰ é€‰æ‹©æ”¯ä»˜çš„æ–¹å¼ å‘é€è¯·æ±‚ è·å–urlï¼Œå±•ç¤ºäºŒç»´ç  å¼¹å‡ºäºŒç»´ç /æˆ–è·³è½¬é¢„æ”¯ä»˜é¡µé¢ çŸ­è½®è¯¢ï¼ˆæœ€ç®€å•ç²—æš´å°±æ˜¯å®šæ—¶å™¨åå¤è¯·æ±‚æ¥å£ï¼‰ åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ”¯ä»˜ åˆ¤æ–­æ˜¯å¦æ”¯ä»˜æˆåŠŸæˆ–è€…è¶…æ—¶ æˆåŠŸ åœæ­¢å®šæ—¶å™¨ åˆ é™¤è´­ç‰©è½¦å¯¹åº”çš„æ•°æ® è¶…æ—¶ åœæ­¢å®šæ—¶å™¨ æç¤ºç”¨æˆ·æ”¯ä»˜è¶…æ—¶ è¿”å›è´­ç‰©è½¦/è·³è½¬è¶…æ—¶é¡µé¢ å‰ç«¯å‘é€ä¿¡æ¯ï¼ˆä¸è¦åŒ…å«é‡‘é¢ç­‰ä¿¡æ¯ï¼Œå‰ç«¯æ˜¯ä¸å®‰å…¨çš„ï¼Œäº¤ä¸ªåç«¯å¤„ç†ï¼‰ åå°æœåŠ¡çš„æ ‡å‡†åœ°å€+æ”¯ä»˜é¡µé¢åœ°å€+è®¢å•ä¿¡æ¯+å›è·³åœ°å€ é€šè¿‡åç«¯å¤„ç†åè¿”å›æ”¯ä»˜å®/å¾®ä¿¡çš„äºŒç»´ç  åŒæ­¥æ”¯ä»˜ç»“æœåˆ°åå°ã€é˜²æ­¢æ”¯ä»˜è¿‡ç¨‹ä¸­æ–­ï¼ˆå¦‚æœæ”¯ä»˜å‡ºç°å¼‚å¸¸å¯ä»¥è¿›åœºå¯¹è´¦ï¼‰ æƒé™ è·¯ç”±æƒé™å’ŒæŒ‰é’®æƒé™ è·¯ç”±æƒé™ åˆ›å»ºè·¯ç”±æ—¶åŒºåˆ†å¥½éœ€è¦æƒé™çš„è·¯ç”±ï¼Œä¸è¦ä¸€æ¬¡æ€§æ·»åŠ ï¼Œåé¢åŒ¹é…å¯¹åº”çš„æƒé™ç­›é€‰åæ·»åŠ  åˆ›å»ºè·¯ç”±æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨è¦åŠ ä¸€ä¸ªå±æ€§ç”¨äºé…åˆåç«¯åˆ¤æ–­æƒé™ç­‰çº§ åˆ›å»ºè·¯ç”±æ—¶ä¿å­˜å¥½é™æ€è·¯ç”±ï¼Œç”¨äºé€€å‡ºç™»å½•ååˆ‡æ¢è´¦å·æ¸…ç©ºè·¯ç”±ï¼›ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ·æ–° 1234567891011const createRouter = () =&gt; new VueRouter(&#123; mode: &#x27;hash&#x27;,// hashå¸¦# historyä¸å¸¦# routes&#125;)// åˆæ¬¡åˆ›å»ºçš„è·¯ç”±ï¼Œåœ¨æœ€åæœ‰å¯¼å‡ºconst router = createRouter()//å†™ä¸€ä¸ªé‡ç½®è·¯ç”±çš„æ–¹æ³•ï¼Œåˆ‡æ¢ç”¨æˆ·åï¼Œæˆ–è€…é€€å‡ºæ—¶æ¸…é™¤åŠ¨æ€åŠ è½½çš„è·¯ç”±export function resetRouter() &#123; const newRouter = createRouter() router.matcher = newRouter.matcher // æœ€å¼€å§‹çš„è·¯ç”±èµ‹å€¼ç»™æœ€æ–°çš„è·¯ç”±&#125; åˆ›å»ºè·¯ç”±å®ˆå«å¯¹éœ€è¦æƒé™çš„è·¯ç”±è¿›è¡Œæ‹¦æˆª 12345678910router.beforeEach((to, from, next) =&gt; &#123; // è¿›å…¥çš„è·¯ç”±å¯¹è±¡ é€šå¸¸åˆ¤æ–­ä¸æ˜¯loginå°±è¦åˆ¤æ–­æƒé™ if (to.path !== &#x27;/login&#x27;) &#123; const token = localStorage.getItem(&#x27;token&#x27;) !token ? next(&#123; path: &#x27;/home&#x27; &#125;) : next() &#125; else &#123; next() &#125;&#125;) ç™»å½•åè¯·æ±‚åç«¯è¿”å›å¯¹åº”è´¦å·å¯ä½¿ç”¨çš„è·¯ç”±ï¼ŒæŒä¹…åŒ–ä¿å­˜åè¿›è¡Œç­›é€‰ ç­›é€‰å¥½å¯¹åº”è´¦å·æƒé™çš„è·¯ç”±ï¼Œéå†ä½¿ç”¨this.$router.addRoute(&quot;Router&quot;, item)æ·»åŠ  æœ€åæ·»åŠ 404è·¯ç”± æŒ‰é’®æƒé™ è·å–åç«¯ä¼ é€’çš„æƒé™ç­‰çº§ï¼Œæ ¹æ®å¯¹åº”çš„è§„åˆ™åˆ¤æ–­æƒé™ ä½¿ç”¨v-if/è‡ªå®šä¹‰å±æ€§/disabledç­‰æ–¹æ³•æ¥è®¾ç½®éœ€è¦æƒé™çš„æŒ‰é’® æ‰“å°1.ä½¿ç”¨æ­¥éª¤å®‰è£… 1npm install vue-print-nb --save åœ¨main.jsä¸­å¼•å…¥ 12import Print from &#x27;vue-print-nb&#x27;Vue.use(Print) åœ¨ç»„ä»¶çš„æ‰“å°åŒºåŸŸæ ‡ç­¾ä¸ŠåŠ  id=â€printAreaâ€ 1&lt;div id=&quot;printArea&quot;&gt; æ‰“å°åŒºåŸŸ &lt;div&gt; åœ¨ç»„ä»¶çš„æ‰“å°æŒ‰é’®æ ‡ç­¾ä¸Šä½¿ç”¨æŒ‡ä»¤ v-print=â€printâ€,printæ˜¯é…ç½®å¯¹è±¡ 1&lt;el-button v-print=&quot;print&quot; type=&quot;primary&quot;&gt;æ‰“å°&lt;/el-button&gt; åœ¨ç»„ä»¶çš„dataä¸­å®šä¹‰printé…ç½®å¯¹è±¡ 1234567891011121314151617print: &#123; id: &#x27;printArea&#x27;, popTitle: &#x27;æ‰“å°&#x27;, // æ‰“å°é…ç½®é¡µä¸Šæ–¹æ ‡é¢˜ extraHead: &#x27;&#x27;, //æœ€ä¸Šæ–¹çš„å¤´éƒ¨æ–‡å­—ï¼Œé™„åŠ åœ¨headæ ‡ç­¾ä¸Šçš„é¢å¤–æ ‡ç­¾,ä½¿ç”¨é€—å·åˆ†éš” preview: &#x27;&#x27;, // æ˜¯å¦å¯åŠ¨é¢„è§ˆæ¨¡å¼ï¼Œé»˜è®¤æ˜¯falseï¼ˆå¼€å¯é¢„è§ˆæ¨¡å¼ï¼Œå¯ä»¥å…ˆé¢„è§ˆåæ‰“å°ï¼‰ previewTitle: &#x27;&#x27;, // æ‰“å°é¢„è§ˆçš„æ ‡é¢˜ï¼ˆå¼€å¯é¢„è§ˆæ¨¡å¼åå‡ºç°ï¼‰, previewPrintBtnLabel: &#x27;&#x27;, // æ‰“å°é¢„è§ˆçš„æ ‡é¢˜çš„ä¸‹æ–¹æŒ‰é’®æ–‡æœ¬ï¼Œç‚¹å‡»å¯è¿›å…¥æ‰“å°ï¼ˆå¼€å¯é¢„è§ˆæ¨¡å¼åå‡ºç°ï¼‰ zIndex: &#x27;&#x27;, // é¢„è§ˆçš„çª—å£çš„z-indexï¼Œé»˜è®¤æ˜¯ 20002ï¼ˆæ­¤å€¼è¦é«˜ä¸€äº›ï¼Œè¿™æ¶‰åŠåˆ°é¢„è§ˆæ¨¡å¼æ˜¯å¦æ˜¾ç¤ºåœ¨æœ€ä¸Šé¢ï¼‰ previewBeforeOpenCallback() &#123;&#125;, //é¢„è§ˆçª—å£æ‰“å¼€ä¹‹å‰çš„callbackï¼ˆå¼€å¯é¢„è§ˆæ¨¡å¼è°ƒç”¨ï¼‰ previewOpenCallback() &#123;&#125;, // é¢„è§ˆçª—å£æ‰“å¼€ä¹‹åçš„callbackï¼ˆå¼€å¯é¢„è§ˆæ¨¡å¼è°ƒç”¨ï¼‰ beforeOpenCallback() &#123;&#125;, // å¼€å¯æ‰“å°å‰çš„å›è°ƒäº‹ä»¶ openCallback() &#123;&#125;, // è°ƒç”¨æ‰“å°ä¹‹åçš„å›è°ƒäº‹ä»¶ closeCallback() &#123;&#125;, //å…³é—­æ‰“å°çš„å›è°ƒäº‹ä»¶ï¼ˆæ— æ³•ç¡®å®šç‚¹å‡»çš„æ˜¯ç¡®è®¤è¿˜æ˜¯å–æ¶ˆï¼‰ url: &#x27;&#x27;, standard: &#x27;&#x27;, extraCss: &#x27;&#x27;, &#125;, 2. æ‰“å°è¿‡æ»¤ï¼ˆéšè—æ‰“å°åŒºåŸŸä¸éœ€è¦æ‰“å°çš„å†…å®¹ï¼‰åªéœ€è¦åœ¨ç»„ä»¶çš„æ‰“å°åŒºåŸŸé‡Œï¼Œç»™éœ€è¦éšè—çš„å†…å®¹çš„æ ‡ç­¾ä¸Šæ·»åŠ  1class=&quot;noprint&quot; 3. é…ç½®æ‰“å°çš„æ ·å¼åœ¨å…¨å±€æ ·å¼ä¸­ï¼Œæ–°å¢æ ‡ç­¾ï¼Œé‡Œé¢æ˜¯æ‰“å°æ—¶æ‰ç”Ÿæ•ˆçš„æ ·å¼ 123456789101112&lt;style media=&quot;print&quot;&gt;@page &#123; size: auto; margin: 3mm;&#125;html &#123; background-color: #ffffff; height: auto; margin: 0px;&#125;&lt;/style&gt; 4.å¤„ç†å¸¸è§çš„æ‰“å°bug1. å…¨å±€æ‰“å°ç”Ÿæ•ˆ è§£å†³æ‰“å°å‡ºç°ç©ºç™½é¡µçš„é—®é¢˜ è§£å†³el-tableè¡¨æ ¼å†…å®¹è¿‡å¤šï¼Œæ‰“å°ä¸å…¨é—®é¢˜ è§£å†³ä½œç”¨åŸŸæ±¡æŸ“é—®é¢˜å¯¼è‡´el-tableåºå·é”™ä½ 1234567891011121314151617181920212223242526272829303132&lt;style media=&quot;print&quot; lang=&quot;scss&quot;&gt;@page &#123; size: auto; margin: 3mm;&#125;@media print &#123; html &#123; background-color: #ffffff; height: auto; margin: 0px; &#125; body &#123; border: solid 1px #ffffff; margin: 10mm 15mm 10mm 15mm; &#125; table &#123; table-layout: auto !important; &#125; .el-table__header-wrapper .el-table__header &#123; width: 100% !important; border: solid 1px #f2f2f2; &#125; .el-table__body-wrapper .el-table__body &#123; width: 100% !important; &#125; #pagetable table &#123; table-layout: fixed !important; &#125;&#125;&lt;/style&gt; 2. å±€éƒ¨æ‰“å°ï¼Œå±€é™åœ¨å½“å‰ç»„ä»¶é‡Œ åœ¨ç»„ä»¶æ ‡ç­¾ 1234567891011121314151617181920212223242526272829303132&lt;style media=&quot;print&quot; lang=&quot;scss&quot;&gt;@page &#123; size: auto; margin: 3mm;&#125;@media print &#123; html &#123; background-color: #ffffff; height: auto; margin: 0px; &#125; body &#123; border: solid 1px #ffffff; margin: 10mm 15mm 10mm 15mm; &#125; #printArea table &#123; table-layout: auto !important; &#125; #printArea .el-table__header-wrapper .el-table__header &#123; width: 100% !important; border: solid 1px #f2f2f2; &#125; #printArea .el-table__body-wrapper .el-table__body &#123; width: 100% !important; &#125; #printArea #pagetable table &#123; table-layout: fixed !important; &#125;&#125;&lt;/style&gt; æ³¨æ„ å¯åŠ¨æ‰“å°åå¯ä»¥é€šè¿‡è°ƒæ•´è®¾ç½®çš„ç¼©æ”¾æ¥è°ƒæ•´æ˜¾ç¤ºæ¯”ä¾‹ å¯ä»¥é€šè¿‡è®¾ç½®èƒŒæ™¯å›¾å½¢æ¥æ§åˆ¶é¡µé¢æ˜¯å¦ä½¿ç”¨å½©è‰²èƒŒæ™¯"},{"title":"VueåŸºç¡€å¤ä¹ ","path":"2025/05/12/VueåŸºç¡€å¤ä¹ /","text":"VueåŸºç¡€å¤ä¹ vueä»‹ç»ä¸æè¿°ï¼ˆä¸ªäººç†è§£ï¼‰ ç¼–ç ç®€æ´ï¼Œä½“ç§¯å°ï¼Œè¿è¡Œæ•ˆç‡é«˜ é‡‡ç”¨ç»„ä»¶åŒ–æ¨¡å¼ï¼Œæé«˜ä»£ç å¤ç”¨ç‡ã€ä¸”è®©ä»£ç æ›´å¥½ç»´æŠ¤ å£°æ˜å¼ç¼–ç ï¼Œè®©ç¼–ç äººå‘˜æ— éœ€ç›´æ¥æ“ä½œDOMï¼Œæé«˜å¼€å‘æ•ˆç‡ ä½¿ç”¨è™šæ‹ŸDOM å’Œ Diffç®—æ³•ï¼Œå°½é‡å¤ç”¨DOMèŠ‚ç‚¹ vueè¿˜æœ‰å¤§é‡çš„å‘¨è¾¹æ¥é…åˆä½¿ç”¨ï¼Œæ–¹ä¾¿å¼€å§‹å¼€å‘ VueåŸºç¡€è¯­æ³•æ’å€¼è¡¨è¾¾å¼ ç”¨äºè§£ææ ‡ç­¾ä½“å†…å®¹ &#123;&#123;xxx&#125;&#125;ï¼Œxxx æ˜¯ js è¡¨è¾¾å¼ï¼Œå¯ä»¥ç›´æ¥è¯»å–åˆ° data ä¸­çš„æ‰€æœ‰åŒºåŸŸ æŒ‡ä»¤è¯­æ³• ç”¨äºè§£ææ ‡ç­¾ï¼ˆåŒ…æ‹¬ï¼šæ ‡ç­¾å±æ€§ã€æ ‡ç­¾ä½“å†…å®¹ã€ç»‘å®šäº‹ä»¶â€¦ï¼‰ ä¸¾ä¾‹ï¼šæˆ–ç®€å†™ä¸ºï¼Œxxx åŒæ ·è¦å†™ js è¡¨è¾¾å¼ï¼Œå¯ä»¥ç›´æ¥è¯»å–åˆ° data ä¸­çš„æ‰€æœ‰å±æ€§ æ•°æ®ç»‘å®šï¼šv-bind/v-model Vueä¸­æœ‰2ç§æ•°æ®ç»‘å®šçš„æ–¹å¼ å•å‘ç»‘å®šv-bindï¼šæ•°æ®åªèƒ½ä» data æµå‘é¡µé¢ åŒå‘ç»‘å®šv-modelï¼šæ•°æ®ä¸ä»…èƒ½ä» data æµå‘é¡µé¢ï¼Œè¿˜å¯ä»¥ä»é¡µé¢æµå‘ data è®¡ç®—å±æ€§ï¼šcomputed è¦ç”¨çš„å±æ€§ä¸å­˜åœ¨ï¼Œéœ€è¦é€šè¿‡å·²æœ‰å±æ€§è®¡ç®—å¾—æ¥ï¼›åº•å±‚å€ŸåŠ©äº†Objcet.defineProperty()æ–¹æ³•æä¾›çš„getterå’Œsetter getå‡½æ•°ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Ÿ åˆæ¬¡è¯»å–æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡ å½“ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ä¼šè¢«å†æ¬¡è°ƒç”¨ ä¼˜åŠ¿ï¼šä¸methodså®ç°ç›¸æ¯”ï¼Œå†…éƒ¨æœ‰ç¼“å­˜æœºåˆ¶ï¼ˆå¤ç”¨ï¼‰ï¼Œæ•ˆç‡æ›´é«˜ï¼Œè°ƒè¯•æ–¹ä¾¿ è®¡ç®—å±æ€§æœ€ç»ˆä¼šå‡ºç°åœ¨vmä¸Šï¼Œç›´æ¥è¯»å–ä½¿ç”¨å³å¯å¦‚æœè®¡ç®—å±æ€§è¦è¢«ä¿®æ”¹ï¼Œé‚£å¿…é¡»å†™setå‡½æ•°å»å“åº”ä¿®æ”¹ï¼Œä¸”setä¸­è¦å¼•èµ·è®¡ç®—æ—¶ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜å¦‚æœè®¡ç®—å±æ€§ç¡®å®šä¸è€ƒè™‘ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§çš„ç®€å†™å½¢å¼å†™æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021computed: &#123; // å®Œæ•´å†™æ³• fullName: &#123; get() &#123; console.log(&#x27;getè¢«è°ƒç”¨äº†&#x27;) return this.firstName + &#x27;-&#x27; + this.lastName &#125;, set(value) &#123; console.log(&#x27;set&#x27;, value) const arr = value.split(&#x27;-&#x27;) this.firstName = arr[0] this.lastName = arr[1] &#125; &#125; // ç®€å†™ fullName() &#123; console.log(&#x27;getè¢«è°ƒç”¨äº†&#x27;) return this.firstName + &#x27;-&#x27; + this.lastName &#125; &#125; ä¾¦å¬å±æ€§ï¼šwatch å½“è¢«ç›‘è§†çš„å±æ€§å˜åŒ–æ—¶ï¼Œå›è°ƒå‡½æ•°è‡ªåŠ¨è°ƒç”¨ï¼Œè¿›è¡Œç›¸å…³æ“ä½œ ç›‘è§†çš„å±æ€§å¿…é¡»å­˜åœ¨ï¼Œæ‰èƒ½è¿›è¡Œç›‘è§†ï¼Œæ—¢å¯ä»¥ç›‘è§†dataï¼Œä¹Ÿå¯ä»¥ç›‘è§†è®¡ç®—å±æ€§é…ç½®é¡¹å±æ€§immediate:falseï¼Œæ”¹ä¸º trueï¼Œåˆ™åˆå§‹åŒ–æ—¶è°ƒç”¨ä¸€æ¬¡ handler(newValue,oldValue)å†™æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617// isHotå¿…é¡»åœ¨dataæˆ–è€…computedä¸­å­˜åœ¨// ç®€å†™watch:&#123; isHot(newValue,oldValue)&#123; console.log(&#x27;isHotè¢«ä¿®æ”¹äº†&#x27;,newValue,oldValue) &#125;&#125;// å®Œæ•´å†™æ³•watch:&#123; isHot:&#123; deep: true,// æ·±åº¦ç›‘å¬ immediate:true,// åˆå§‹åŒ–ç«‹å³è°ƒç”¨ handler(newValue,oldValue)&#123; console.log(&#x27;isHotè¢«ä¿®æ”¹äº†&#x27;,newValue,oldValue) &#125; &#125;&#125; æ ·å¼ç»‘å®šï¼š:class/:style :class=â€xxxâ€/:style=â€xxxâ€ï¼Œxxx å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°ç»„ã€å¯¹è±¡ å­—ç¬¦ä¸²å†™æ³•å¸¸ç”¨äºï¼šæ¡ä»¶åˆ¤æ–­åˆ‡æ¢ç±»åï¼Œæˆ–åŠ¨æ€è·å–æ ·å¼æ•°ç»„å†™æ³•å¸¸ç”¨äºï¼šåŠ¨æ€è·å–å¤šä¸ªæ ·å¼ç±»åå¯¹è±¡å†™æ³•å¸¸ç”¨äºï¼šåŠ¨æ€è·å–å¤šä¸ªæ ·å¼ï¼ˆé€šå¸¸æ˜¯å†…è”æ ·å¼ï¼‰ æ¡ä»¶æ¸²æŸ“ï¼šv-if/v-show v-if åˆ‡æ¢é¢‘ç‡è¾ƒä½çš„åœºæ™¯ï¼Œå› ä¸ºä¸å±•ç¤ºçš„DOMå…ƒç´ ç›´æ¥è¢«ç§»é™¤ å†™æ³•ï¼š v-if=â€è¡¨è¾¾å¼â€ v-else-if=â€è¡¨è¾¾å¼â€ v-else v-show åˆ‡æ¢é¢‘ç‡è¾ƒé«˜çš„åœºæ™¯ï¼Œä¸å±•ç¤ºçš„DOMå…ƒç´ æœªè¢«ç§»é™¤ï¼Œä»…ä»…æ˜¯ä½¿ç”¨æ ·å¼éšè—æ‰display: none å†™æ³•ï¼š v-show=â€è¡¨è¾¾å¼â€ æ³¨æ„ç‚¹ï¼šä½¿ç”¨v-ifçš„æ—¶ï¼Œå…ƒç´ å¯èƒ½æ— æ³•è·å–åˆ°ï¼Œè€Œä½¿ç”¨v-showä¸€å®šå¯ä»¥è·å–åˆ° åˆ—è¡¨æ¸²æŸ“ï¼šv-for v-foræŒ‡ä»¤ ç”¨äºå±•ç¤ºåˆ—è¡¨æ•°æ® å†™æ³•ï¼š &lt;li v-for=&quot;(item, index) of items&quot; :key=&quot;index&quot;&gt;ï¼Œè¿™é‡Œkeyå¯ä»¥æ˜¯indexï¼Œæ›´å¥½çš„æ˜¯éå†å¯¹è±¡çš„å”¯ä¸€æ ‡è¯† å¯éå†ï¼šæ•°ç»„ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ã€æŒ‡å®šæ¬¡æ•° è¿‡æ»¤å™¨ï¼šfilter å¯¹è¦æ˜¾ç¤ºçš„æ•°æ®è¿›è¡Œç‰¹å®šæ ¼å¼åŒ–åå†æ˜¾ç¤º ä½¿ç”¨è¿‡æ»¤å™¨ï¼š&#123;&#123; xxx | è¿‡æ»¤å™¨å&#125;&#125; æˆ– v-bind:å±æ€§ = &quot;xxx | è¿‡æ»¤å™¨å&quot; 12345678910// å…¨å±€è¿‡æ»¤å™¨Vue.filter(&#x27;mySlice&#x27;,function(value)&#123; return value.slice(0,11)&#125;)// å±€éƒ¨è¿‡æ»¤å™¨filters:&#123; timeFormater(value, str=&quot;YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss&quot;)&#123; return dayjs(value).format(str) &#125;&#125; å†…ç½®æŒ‡ä»¤ v-bindï¼šå•å‘ç»‘å®šè§£æè¡¨è¾¾å¼ï¼Œå¯ç®€å†™ä¸º: v-modelï¼šåŒå‘æ•°æ®ç»‘å®š v-forï¼šéå†æ•°ç»„ / å¯¹è±¡ / å­—ç¬¦ä¸² v-onï¼šç»‘å®šäº‹ä»¶ç›‘å¬ï¼Œå¯ç®€å†™ä¸º@ v-showï¼šæ¡ä»¶æ¸²æŸ“ v-ifï¼šæ¡ä»¶æ¸²æŸ“ v-else-ifï¼šæ¡ä»¶æ¸²æŸ“ v-elseï¼šæ¡ä»¶æ¸²æŸ“ v-textï¼šå‘å…¶æ‰€åœ¨çš„èŠ‚ç‚¹ä¸­æ¸²æŸ“æ–‡æœ¬å†…å®¹ v-htmlï¼šå‘æŒ‡å®šèŠ‚ç‚¹ä¸­æ¸²æŸ“åŒ…å«htmlç»“æ„çš„å†…å®¹ v-cloakï¼šæœ¬è´¨æ˜¯ä¸€ä¸ªç‰¹æ®Šå±æ€§ï¼ŒVueå®ä¾‹åˆ›å»ºå®Œæ¯•å¹¶æ¥ç®¡å®¹å™¨åï¼Œä¼šåˆ æ‰v-cloakå±æ€§ é€šå¸¸ä¼šé…åˆæ ·å¼ä½¿ç”¨ 123[v-cloak] &#123; display:none; &#125; v-onceï¼šæ‰€åœ¨èŠ‚ç‚¹åœ¨åˆæ¬¡åŠ¨æ€æ¸²æŸ“åï¼Œå°±è§†ä¸ºé™æ€å†…å®¹äº†ï¼Œä»¥åæ•°æ®çš„æ”¹å˜ä¸ä¼šå¼•èµ·v-onceæ‰€åœ¨ç»“æ„çš„æ›´æ–°ï¼Œå¯ä»¥ç”¨äºä¼˜åŒ–æ€§èƒ½ v-preï¼šå¯åˆ©ç”¨å®ƒè·³è¿‡ï¼šæ²¡æœ‰ä½¿ç”¨æŒ‡ä»¤è¯­æ³•ã€æ²¡æœ‰ä½¿ç”¨æ’å€¼è¯­æ³•çš„èŠ‚ç‚¹ï¼Œä¼šåŠ å¿«ç¼–è¯‘ è‡ªå®šä¹‰æŒ‡ä»¤ å¯¹æ™®é€š DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œ å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤ 123456directives:&#123; æŒ‡ä»¤å:é…ç½®å¯¹è±¡ &#125;directives:&#123; æŒ‡ä»¤å:å›è°ƒå‡½æ•° &#125; å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ 12Vue.directive(æŒ‡ä»¤å, é…ç½®å¯¹è±¡)Vue.directive(æŒ‡ä»¤å, å›è°ƒå‡½æ•°) é’©å­å‡½æ•°çš„å‚æ•°ï¼š elï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ DOMã€‚ bindingï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ propertyï¼š nameï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ v- å‰ç¼€ã€‚ valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼šv-my-directive=&quot;1 + 1&quot; ä¸­ï¼Œç»‘å®šå€¼ä¸º 2ã€‚ oldValueï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚ expressionï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ v-my-directive=&quot;1 + 1&quot; ä¸­ï¼Œè¡¨è¾¾å¼ä¸º &quot;1 + 1&quot;ã€‚ argï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ v-my-directive:foo ä¸­ï¼Œå‚æ•°ä¸º &quot;foo&quot;ã€‚ modifiersï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šv-my-directive.foo.bar ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º &#123; foo: true, bar: true &#125;ã€‚ vnodeï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ç§»æ­¥ VNode API æ¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚ oldVnodeï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚ æ¡ˆä¾‹ï¼šé»˜è®¤èšç„¦çŠ¶æ€ï¼ˆå›è°ƒå‡½æ•°ï¼‰ 1234567891011121314151617181920// å±€éƒ¨directives: &#123; focus: &#123; inserted: function (el) &#123; el.focus() &#125; &#125;&#125;// å…¨å±€Vue.directive(&#x27;focus&#x27;, &#123; bind(element, binding) &#123; element.value = binding.value &#125;, inserted(element, binding) &#123; element.focus() &#125;, update(element, binding) &#123; element.value = binding.value &#125;&#125;) æ¡ˆä¾‹ï¼šé»˜è®¤èšç„¦çŠ¶æ€ï¼ˆé…ç½®å¯¹è±¡ï¼‰ 1234567891011121314151617181920212223242526272829303132333435// å±€éƒ¨directives: &#123; focus: &#123; // æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ bind(element, binding) &#123; element.value = binding.value &#125;, // æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶ inserted(element, binding) &#123; element.focus() &#125;, // æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶ update(element, binding) &#123; element.value = binding.value &#125; &#125;&#125;// å…¨å±€Vue.directive(&#x27;focus&#x27;, &#123; focus: &#123; // æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ bind(element, binding) &#123; element.value = binding.value &#125;, // æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶ inserted(element, binding) &#123; element.focus() &#125;, // æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶ update(element, binding) &#123; element.value = binding.value &#125; &#125;&#125;) ä¿®é¥°ç¬¦ è§¦å‘ç‰¹æ®Šçš„äº‹ä»¶/è¡Œä¸ºï¼Œä»è€Œè¾¾åˆ°ä¸€å®šçš„æ•ˆæœï¼Œå¹¶ä¸”å¯ä»¥è¿ç”¨ è¡¨å•ä¿®é¥°ç¬¦ ä¿®é¥°ç¬¦åç§° æ•ˆæœ .lazy é»˜è®¤æ˜¯æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™åŒæ­¥ï¼Œä½¿ç”¨.lazyåˆ™æ˜¯ç„¦ç‚¹å‘ç”Ÿæ”¹å˜æ—¶åŒæ­¥ .number é»˜è®¤çš„æ•°æ®æ˜¯å­—ç¬¦ä¸²ï¼Œä½¿ç”¨.numberå¯ä»¥è½¬æ¢ä¸ºæ•°å­— .trim è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºç™½å­—ç¬¦ äº‹ä»¶ä¿®é¥°ç¬¦ åç§° å¯ç”¨ç‰ˆæœ¬ å¯ç”¨äº‹ä»¶ è¯´æ˜ .stop æ‰€æœ‰ ä»»æ„ å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œé˜»æ­¢äº‹ä»¶å†’æ³¡ .prevent æ‰€æœ‰ ä»»æ„ å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œé˜»æ­¢å…ƒç´ é»˜è®¤è¡Œä¸º .capture æ‰€æœ‰ ä»»æ„ å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œé˜»æ­¢äº‹ä»¶æ•è· .self æ‰€æœ‰ ä»»æ„ é™åˆ¶äº‹ä»¶ä»…ä½œç”¨äºèŠ‚ç‚¹è‡ªèº« .once 2.1.4ä»¥ä¸Š ä»»æ„ äº‹ä»¶è¢«è§¦å‘ä¸€æ¬¡åå³è§£é™¤ç›‘å¬ .passive 2.3.0ä»¥ä¸Š æ»šåŠ¨ ç§»åŠ¨ç«¯ï¼Œé™åˆ¶äº‹ä»¶ç”¨ä¸è°ƒç”¨preventDefault()æ–¹æ³• ä¾‹å¦‚@submit.prevent=&quot;submit&quot; æŒ‰é”®ä¿®é¥°ç¬¦@keyup åˆ«åä¿®é¥°ç¬¦ é”®å€¼ä¿®é¥°ç¬¦ å¯¹åº”æŒ‰é”® .delete .8/.46 å›æ ¼ / åˆ é™¤ .tab .9 åˆ¶è¡¨ .enter .13 å›è½¦ .esc .27 é€€å‡º .space .32 ç©ºæ ¼ .left .37 å·¦ .up .38 ä¸Š .right .39 å³ .down .40 ä¸‹ ä¾‹å¦‚ï¼š @keyup.13=&quot;console.log($event)&quot;æˆ–è€…@keyup.enter=&quot;&quot; é¼ æ ‡ä¿®é¥°ç¬¦ ä¿®é¥°ç¬¦ å¯ç”¨ç‰ˆæœ¬ å¯¹åº”æŒ‰é”® .left 2.2.0 ä»¥ä¸Š å·¦é”® .right 2.2.0 ä»¥ä¸Š å³é”® .middle 2.2.0 ä»¥ä¸Š ä¸­é”® ç»„åˆä¿®é¥°ç¬¦ ä¿®é¥°ç¬¦ å¯ç”¨ç‰ˆæœ¬ å¯¹åº”æŒ‰é”® .ctrl 2.1.0 ä»¥ä¸Š Ctrlé”® .alt 2.1.0 ä»¥ä¸Š Alté”® .shift 2.1.0 ä»¥ä¸Š Shifté”® .meta 2.1.0 ä»¥ä¸Š metaé”®ï¼ˆWindowsç³»ç»Ÿé”®ç›˜ä¸Šä¸ºç”°é”®ï¼‰ ç”Ÿå‘½å‘¨æœŸ Vueåœ¨å…³é”®æ—¶åˆ»å¸®æˆ‘ä»¬è°ƒç”¨çš„ä¸€äº›ç‰¹æ®Šåç§°çš„å‡½æ•° ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„ this æŒ‡å‘æ˜¯vmæˆ–ç»„ä»¶å®ä¾‹å¯¹è±¡ mountedå‘é€ajaxè¯·æ±‚ã€å¯åŠ¨å®šæ—¶å™¨ã€ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ã€è®¢é˜…æ¶ˆæ¯ç­‰åˆå§‹åŒ–æ“ä½œ beforeDestroyæ¸…é™¤å®šæ—¶å™¨ã€è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ã€å–æ¶ˆè®¢é˜…æ¶ˆæ¯ç­‰æ”¶å°¾å·¥ä½œ ç»„ä»¶ ç»„ä»¶æ˜¯å¯å¤ç”¨çš„ Vue å®ä¾‹ å®šä¹‰ç»„ä»¶åä½¿ç”¨ kebab-case1Vue.component(&#x27;my-component-name&#x27;, &#123; /* ... */ &#125;) ä½¿ç”¨ PascalCase1Vue.component(&#x27;MyComponentName&#x27;, &#123; /* ... */ &#125;) ç»„ä»¶æ³¨å†Œ123456789// å…¨å±€æ³¨å†ŒVue.component(&#x27;my-component-name&#x27;, &#123; // ... é€‰é¡¹ ...&#125;)// å±€éƒ¨æ³¨å†Œcomponents: &#123; &#x27;component-a&#x27;: ComponentA, &#x27;component-b&#x27;: ComponentB&#125; ç»„ä»¶ä¼ å€¼propï¼ˆçˆ¶ä¼ å­ï¼‰propå¤§å°å†™propçš„å¤§å°å†™æ˜¯ä¸æ•æ„Ÿçš„ï¼ŒåŠæ—¶åœ¨å®šä¹‰æ—¶ä½¿ç”¨é©¼å³°å‘½åï¼Œåœ¨ä½¿ç”¨æ—¶å¿…é¡»æ¢æˆçŸ­æ¨ªçº¿åˆ†å‰²å‘½å Prop ç±»å‹123456789props: &#123; title: String, likes: Number, isPublished: Boolean, commentIds: Array, author: Object, callback: Function, contactsPromise: Promise // or any other constructor&#125; propä¼ å€¼ åˆ—ä¸¾çš„éƒ½éœ€è¦åœ¨å¯¹åº”çš„ç»„ä»¶å®šä¹‰ï¼Œä¸ºäº†æ–¹ä¾¿æ­¤å¤„çœç•¥ å­—ç¬¦ä¸²ï¼šç›´æ¥ä¼  1&lt;blog-post title=&quot;My journey with Vue&quot;&gt;&lt;/blog-post&gt; æ•°å­—ï¼šä½¿ç”¨v-bind 1&lt;blog-post v-bind:likes=&quot;42&quot;&gt;&lt;/blog-post&gt; å¸ƒå°”ï¼šä½¿ç”¨v-bind 1&lt;blog-post v-bind:is-published=&quot;false&quot;&gt;&lt;/blog-post&gt; æ•°ç»„ï¼šä½¿ç”¨v-bind 1&lt;blog-post v-bind:comment-ids=&quot;[234, 266, 273]&quot;&gt;&lt;/blog-post&gt; å¯¹è±¡ï¼šä½¿ç”¨v-bind 123456&lt;blog-post v-bind:author=&quot;&#123; name: &#x27;Veronica&#x27;, company: &#x27;Veridian Dynamics&#x27; &#125;&quot;&gt;&lt;/blog-post&gt; property 123456789101112// dataä¸­çš„æ•°æ®post: &#123; id: 1, title: &#x27;My Journey with Vue&#x27;&#125;&lt;blog-post v-bind=&quot;post&quot;&gt;&lt;/blog-post&gt;ç­‰ä»·äº&lt;blog-post v-bind:id=&quot;post.id&quot; v-bind:title=&quot;post.title&quot;&gt;&lt;/blog-post&gt; å•é€‰æ•°æ®æµ é˜²æ­¢ä»å­ç»„ä»¶æ„å¤–å˜æ›´çˆ¶çº§ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´ä½ çš„åº”ç”¨çš„æ•°æ®æµå‘éš¾ä»¥ç†è§£ã€‚å¦‚æœç›´æ¥æ“ä½œæµè§ˆå™¨ä¼šåœ¨æ§åˆ¶å°è­¦å‘Šï¼ å¦‚æœæˆ‘ä»¬éœ€è¦æ”¹å˜å­ç»„ä»¶æ¥æ”¶çš„æ•°æ®ï¼Œå°±åœ¨dataæˆ–computedä¸­ä¿å­˜ 123456props: [&#x27;initialCounter&#x27;],data: function () &#123; return &#123; counter: this.initialCounter &#125;&#125; Prop éªŒè¯ å¯¹æ¥æ”¶çš„æ•°æ®æŒ‡å®šéªŒè¯è¦æ±‚ 12345678910111213141516171819202122232425262728293031props: &#123; // åŸºç¡€çš„ç±»å‹æ£€æŸ¥ (`null` å’Œ `undefined` ä¼šé€šè¿‡ä»»ä½•ç±»å‹éªŒè¯) propA: Number, // å¤šä¸ªå¯èƒ½çš„ç±»å‹ propB: [String, Number], // å¿…å¡«çš„å­—ç¬¦ä¸² propC: &#123; type: String, required: true &#125;, // å¸¦æœ‰é»˜è®¤å€¼çš„æ•°å­— propD: &#123; type: Number, default: 100 &#125;, // å¸¦æœ‰é»˜è®¤å€¼çš„å¯¹è±¡ propE: &#123; type: Object, // å¯¹è±¡æˆ–æ•°ç»„é»˜è®¤å€¼å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è·å– default: function () &#123; return &#123; message: &#x27;hello&#x27; &#125; &#125; &#125;, // è‡ªå®šä¹‰éªŒè¯å‡½æ•° propF: &#123; validator: function (value) &#123; // è¿™ä¸ªå€¼å¿…é¡»åŒ¹é…ä¸‹åˆ—å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ª return [&#x27;success&#x27;, &#x27;warning&#x27;, &#x27;danger&#x27;].includes(value) &#125; &#125; &#125; è‡ªå®šä¹‰äº‹ä»¶ï¼ˆå­ä¼ çˆ¶ï¼‰123456// å­ç»„ä»¶åˆ›å»ºå¯¹åº”çš„äº‹ä»¶sendSchoolName()&#123; this.$emit(&#x27;childEvent&#x27;,this.name)// è‡ªå®šä¹‰äº‹ä»¶çš„åç§°ï¼Œä¼ é€’çš„å€¼&#125;ï¼Œ// çˆ¶ç»„ä»¶æ¥æ”¶&lt;CustomSchool @childEvent=&quot;getSchoolName&quot;/&gt; æ’æ§½ï¼šslot è®©çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶æŒ‡å®šä½ç½®æ’å…¥htmlç»“æ„ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äº çˆ¶ç»„ä»¶ ===&gt; å­ç»„ä»¶ åˆ†ç±»ï¼šé»˜è®¤æ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½ ä½¿ç”¨æ–¹å¼ï¼š é»˜è®¤æ’æ§½ 1234567891011çˆ¶ç»„ä»¶ä¸­ï¼š &lt;Category&gt; &lt;div&gt;htmlç»“æ„1&lt;/div&gt; &lt;/Category&gt;å­ç»„ä»¶ä¸­ï¼šCategory &lt;template&gt; &lt;div&gt; &lt;!-- å®šä¹‰æ’æ§½ --&gt; &lt;slot&gt;æ’æ§½é»˜è®¤å†…å®¹...&lt;/slot&gt; &lt;/div&gt; &lt;/template&gt; å…·åæ’æ§½ï¼šçˆ¶ç»„ä»¶æŒ‡æ˜æ”¾å…¥å­ç»„ä»¶çš„å“ªä¸ªæ’æ§½slot=â€footerâ€ï¼Œå¦‚æœæ˜¯templateå¯ä»¥å†™æˆv-slot:footer 123456789101112131415161718çˆ¶ç»„ä»¶ä¸­ï¼š &lt;Category&gt; &lt;template slot=&quot;center&quot;&gt; &lt;div&gt;htmlç»“æ„1&lt;/div&gt; &lt;/template&gt; &lt;template v-slot:footer&gt; &lt;div&gt;htmlç»“æ„2&lt;/div&gt; &lt;/template&gt; &lt;/Category&gt;å­ç»„ä»¶ä¸­ï¼š &lt;template&gt; &lt;div&gt; &lt;!-- å®šä¹‰æ’æ§½ --&gt; &lt;slot name=&quot;center&quot;&gt;æ’æ§½é»˜è®¤å†…å®¹...&lt;/slot&gt; &lt;slot name=&quot;footer&quot;&gt;æ’æ§½é»˜è®¤å†…å®¹...&lt;/slot&gt; &lt;/div&gt; &lt;/template&gt; ä½œç”¨åŸŸæ’æ§½ï¼šscopeç”¨äºçˆ¶ç»„ä»¶å¾€å­ç»„ä»¶æ’æ§½æ”¾çš„htmlç»“æ„æ¥æ”¶å­ç»„ä»¶çš„æ•°æ® æ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šï¼ˆgamesæ•°æ®åœ¨Categoryç»„ä»¶ä¸­ï¼Œä½†ä½¿ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±Appç»„ä»¶å†³å®šï¼‰ 1234567891011121314151617181920212223242526272829303132333435çˆ¶ç»„ä»¶ä¸­ï¼š &lt;Category&gt; &lt;template scope=&quot;scopeData&quot;&gt; &lt;!-- ç”Ÿæˆçš„æ˜¯ulåˆ—è¡¨ --&gt; &lt;ul&gt; &lt;li v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;/template&gt; &lt;/Category&gt; &lt;Category&gt; &lt;template slot-scope=&quot;scopeData&quot;&gt; &lt;!-- ç”Ÿæˆçš„æ˜¯h4æ ‡é¢˜ --&gt; &lt;h4 v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/h4&gt; &lt;/template&gt; &lt;/Category&gt;å­ç»„ä»¶ä¸­ï¼š &lt;template&gt; &lt;div&gt; &lt;slot :games=&quot;games&quot;&gt;&lt;/slot&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default &#123; name:&#x27;Category&#x27;, props:[&#x27;title&#x27;], //æ•°æ®åœ¨å­ç»„ä»¶è‡ªèº« data() &#123; return &#123; games:[&#x27;çº¢è‰²è­¦æˆ’&#x27;,&#x27;ç©¿è¶Šç«çº¿&#x27;,&#x27;åŠ²èˆå›¢&#x27;,&#x27;è¶…çº§ç›ä¸½&#x27;] &#125; &#125;, &#125; &lt;/script&gt; å…¨å±€äº‹ä»¶æ€»çº¿ ä¸€ç§å¯ä»¥åœ¨ä»»æ„ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ è¿™ä¸ªå¯¹è±¡å¿…é¡»èƒ½å¤Ÿä½¿ç”¨$on$emit$offæ–¹æ³•å»ç»‘å®šã€è§¦å‘å’Œè§£ç»‘äº‹ä»¶ å®šä¹‰å…¨å±€äº‹ä»¶æ€»çº¿ 123456789101112import Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;Vue.config.productionTip = falsenew Vue(&#123; el:&#x27;#app&#x27;, render: h =&gt; h(App), beforeCreate() &#123; Vue.prototype.$bus = this // å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ &#125;&#125;) æ¥æ”¶å’Œé”€æ¯ 123456789101112131415161718192021222324252627&lt;template&gt; &lt;div class=&quot;school&quot;&gt; &lt;h2&gt;å­¦æ ¡åç§°ï¼š&#123;&#123; name &#125;&#125;&lt;/h2&gt; &lt;h2&gt;å­¦æ ¡åœ°å€ï¼š&#123;&#123; address &#125;&#125;&lt;/h2&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name: &quot;School&quot;, data() &#123; return &#123; name: &quot;å°é»‘&quot;, address: &quot;æ­¦æ±‰&quot;, &#125;; &#125;, mounted() &#123; this.$bus.$on(&quot;hello&quot;, (data) =&gt; &#123; console.log(&quot;æˆ‘æ˜¯Schoolç»„ä»¶ï¼Œæ”¶åˆ°äº†æ•°æ®&quot;, data); &#125;); &#125;, beforeDestroy() &#123; // é”€æ¯äº‹ä»¶ this.$bus.$off(&quot;hello&quot;); &#125;, &#125;;&lt;/script&gt; å‘é€ 123456789101112131415161718192021222324&lt;template&gt; &lt;div class=&quot;student&quot;&gt; &lt;h2&gt;å­¦ç”Ÿå§“åï¼š&#123;&#123; name &#125;&#125;&lt;/h2&gt; &lt;h2&gt;å­¦ç”Ÿæ€§åˆ«ï¼š&#123;&#123; sex &#125;&#125;&lt;/h2&gt; &lt;button @click=&quot;sendStudentName&quot;&gt;æŠŠå­¦ç”Ÿåç»™Schoolç»„ä»¶&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name:&#x27;Student&#x27;, data() &#123; return &#123; name:&#x27;å¼ ä¸‰&#x27;, sex:&#x27;ç”·&#x27; &#125; &#125;, methods: &#123; sendStudentName()&#123; this.$bus.$emit(&#x27;demo&#x27;, this.name) &#125; &#125; &#125;&lt;/script&gt; refã€mixinã€æ’ä»¶ã€scopedref åº”ç”¨åœ¨htmlæ ‡ç­¾ä¸Šè·å–çš„æ˜¯çœŸå®DOMå…ƒç´ ï¼Œåº”ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šè·å–çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡vc æ‰“æ ‡è¯†ï¼šæˆ– è·å–ï¼šthis.$refs.xxx mixin æ··å…¥ å¯ä»¥æŠŠå¤šä¸ªç»„ä»¶å…±ç”¨çš„é…ç½®æå–æˆä¸€ä¸ªæ··å…¥å¯¹è±¡ï¼ˆä¸ªäººä¸å»ºè®®ä½¿ç”¨ï¼Œå®¹æ˜“æŠŠç®€å•äº‹æƒ…å¤æ‚åŒ–ï¼‰ 12345678910111213141516171819202122var mixin = &#123; data: function () &#123; return &#123; message: &#x27;hello&#x27;, foo: &#x27;abc&#x27; &#125; &#125;&#125;new Vue(&#123; mixins: [mixin], data () &#123; return &#123; message: &#x27;goodbye&#x27;, bar: &#x27;def&#x27; &#125; &#125;, created () &#123; console.log(this.$data) // =&gt; &#123; message: &quot;goodbye&quot;, foo: &quot;abc&quot;, bar: &quot;def&quot; &#125; &#125;&#125;) æ’ä»¶ ç”¨äºå¢å¼ºVue 1Vue.use(åç§°,å€¼) ä¾‹å¦‚VueRouter 123import Vue from &#x27;vue&#x27;import VueRouter from &#x27;vue-router&#x27;Vue.use(VueRouter) scopedæ ·å¼ è®©æ ·å¼åœ¨å±€éƒ¨ç”Ÿæ•ˆï¼Œé˜²æ­¢å†²çª 1&lt;style scoped&gt; $nextTick this.$nextTick(å›è°ƒå‡½æ•°)åœ¨ä¸‹ä¸€æ¬¡DOMæ›´æ–°ç»“æŸåæ‰§è¡Œå…¶æŒ‡å®šçš„å›è°ƒ ä»€ä¹ˆæ—¶å€™ç”¨ï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„æ–°DOMè¿›è¡ŒæŸäº›æ“ä½œæ—¶ï¼Œè¦åœ¨nextTickæ‰€æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ è¿‡æ¸¡ä¸åŠ¨ç”» vue åœ¨æ’å…¥ã€æ›´æ–°æˆ–è€…ç§»é™¤ DOM æ—¶ï¼Œæä¾›å¤šç§ä¸åŒæ–¹å¼çš„åº”ç”¨è¿‡æ¸¡æ•ˆæœã€‚ é€šå¸¸é…åˆä¸€äº›cssæˆ–jsçš„åŠ¨ç”»åº“ï¼šAnimate.cssã€ Velocity.jsç­‰ è¿‡æ¸¡çš„ç±»å åœ¨è¿›å…¥/ç¦»å¼€çš„è¿‡æ¸¡ä¸­ï¼Œä¼šæœ‰ 6 ä¸ª class åˆ‡æ¢ã€‚ v-enterï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åçš„ä¸‹ä¸€å¸§ç§»é™¤ã€‚ v-enter-activeï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªè¿›å…¥è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚ v-enter-toï¼š2.1.8 ç‰ˆåŠä»¥ä¸Šå®šä¹‰è¿›å…¥è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ v-enter è¢«ç§»é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚ v-leaveï¼šå®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œä¸‹ä¸€å¸§è¢«ç§»é™¤ã€‚ v-leave-activeï¼šå®šä¹‰ç¦»å¼€è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªç¦»å¼€è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚ v-leave-toï¼š2.1.8 ç‰ˆåŠä»¥ä¸Šå®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ v-leave è¢«åˆ é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚ å¯¹äºè¿™äº›åœ¨è¿‡æ¸¡ä¸­åˆ‡æ¢çš„ç±»åæ¥è¯´ï¼Œå¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªæ²¡æœ‰åå­—çš„ &lt;transition&gt;ï¼Œåˆ™ v- æ˜¯è¿™äº›ç±»åçš„é»˜è®¤å‰ç¼€ã€‚å¦‚æœä½ ä½¿ç”¨äº† &lt;transition name=&quot;my-transition&quot;&gt;ï¼Œé‚£ä¹ˆ v-enter ä¼šæ›¿æ¢ä¸º my-transition-enterã€‚ æ¡ˆä¾‹ 123456&lt;div id=&quot;example-2&quot;&gt; &lt;button @click=&quot;show = !show&quot;&gt;Toggle show&lt;/button&gt; &lt;transition name=&quot;bounce&quot;&gt; &lt;p v-if=&quot;show&quot;&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris facilisis enim libero, at lacinia diam fermentum id. Pellentesque habitant morbi tristique senectus et netus.&lt;/p&gt; &lt;/transition&gt;&lt;/div&gt; 123456789101112131415161718// css.bounce-enter-active &#123; animation: bounce-in .5s;&#125;.bounce-leave-active &#123; animation: bounce-in .5s reverse;&#125;@keyframes bounce-in &#123; 0% &#123; transform: scale(0); &#125; 50% &#123; transform: scale(1.5); &#125; 100% &#123; transform: scale(1); &#125;&#125; è·¯ç”±ï¼švue-routeråŸºæœ¬å†™æ³•1234567891011121314151617181920import VueRouter from &#x27;vue-router&#x27; // å¼•å…¥VueRouterimport About from &#x27;../components/About&#x27; // è·¯ç”±ç»„ä»¶import Home from &#x27;../components/Home&#x27; // è·¯ç”±ç»„ä»¶// åˆ›å»ºrouterå®ä¾‹å¯¹è±¡ï¼Œå»ç®¡ç†ä¸€ç»„ä¸€ç»„çš„è·¯ç”±è§„åˆ™const router = new VueRouter(&#123; routes:[ &#123; path:&#x27;/about&#x27;, component:About &#125;, &#123; path:&#x27;/home&#x27;, component:Home &#125; ]&#125;)//æš´éœ²routerexport default router å¤šçº§è·¯ç”±1234567891011121314151617181920routes:[ &#123; path:&#x27;/about&#x27;, component:About, &#125;, &#123; path:&#x27;/home&#x27;, component:Home, children:[ // é€šè¿‡childrené…ç½®å­çº§è·¯ç”± &#123; path:&#x27;news&#x27;, // æ­¤å¤„ä¸€å®šä¸è¦å¸¦æ–œæ ï¼Œå†™æˆ /news component:News &#125;, &#123; path:&#x27;message&#x27;, // æ­¤å¤„ä¸€å®šä¸è¦å†™æˆ /message component:Message &#125; ] &#125;] è·¯ç”±è·³è½¬ è·³è½¬æ–¹å¼ router-linkæ ‡ç­¾ this.$reuter.push()/replace() æ— ç—•æµè§ˆ/forward()å‰è¿›/back()åé€€/go(n)æŒ‡å®šn æºå¸¦å‚æ•° params /xxx/:xxx/:xxx æœ‰ï¼Ÿæ˜¯å¯é€‰ {name:â€â€,params:{xxx:â€™abcâ€™,xxx:123}} query /xxx/xxx åœ¨è·¯å¾„åé¢è·Ÿç€ {path:â€â€,query:{xxx:â€™abcâ€™,xxx:123}} propsï¼ˆåœ¨ç»„ä»¶å†…éœ€è¦ä½¿ç”¨propsæ¥æ”¶ï¼‰ props:true éœ€è¦æ˜ å°„ï¼Œæ‰€æœ‰paramså‚æ•° props:{a:1,b:2}åªèƒ½æ˜ å°„éparams/queryå‚æ•° props:route=&gt;({name:route.params.name,age:route.query.age,xxx:123}) æŒ‡å®šä»»ä½•æ–¹å¼ meta è·¯ç”±é‡å¤è·³è½¬ 1234567Vue.use(Router)//è·å–åŸå‹å¯¹è±¡ä¸Šçš„pushå‡½æ•°const originalPush = Router.prototype.push//ä¿®æ”¹åŸå‹å¯¹è±¡ä¸­çš„pushæ–¹æ³•Router.prototype.push = function push(location) &#123; return originalPush.call(this, location).catch(err =&gt; err)&#125; è·¯ç”±å®ˆå« router.beforeEachå…¨å±€å‰ç½®å®ˆå« to: å³å°†è¦è¿›å…¥çš„ç›®æ ‡ from: å½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”± nextï¼šé”™è¯¯æ¥æº router.afterEach å…¨å±€åç½®é’©å­ to: å³å°†è¦è¿›å…¥çš„ç›®æ ‡ from: å½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”± / è·¯ç”±ç‹¬äº«çš„å®ˆå« ä½ å¯ä»¥ç›´æ¥åœ¨è·¯ç”±é…ç½®ä¸Šå®šä¹‰ beforeEnter å®ˆå« ç»„ä»¶å†…éƒ¨ä½¿ç”¨ 123456789101112131415beforeRouteEnter(to, from) &#123; // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«éªŒè¯å‰è°ƒç”¨ // ä¸èƒ½è·å–ç»„ä»¶å®ä¾‹ `this` ï¼ // å› ä¸ºå½“å®ˆå«æ‰§è¡Œæ—¶ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»ºï¼ &#125;, beforeRouteUpdate(to, from) &#123; // åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨ // ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ `/users/:id`ï¼Œåœ¨ `/users/1` å’Œ `/users/2` ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œ // ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ `UserDetails` ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚ // å› ä¸ºåœ¨è¿™ç§æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼Œç»„ä»¶å·²ç»æŒ‚è½½å¥½äº†ï¼Œå¯¼èˆªå®ˆå«å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this` &#125;, beforeRouteLeave(to, from) &#123; // åœ¨å¯¼èˆªç¦»å¼€æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨ // ä¸ `beforeRouteUpdate` ä¸€æ ·ï¼Œå®ƒå¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this` &#125;, historyä¸hashè·¯ç”±çš„åŒºåˆ« åŒºåˆ« historyæ²¡æœ‰#ï¼Œåˆ·æ–°æºå¸¦è·¯ç”±ï¼Œé»˜è®¤404ï¼Œéœ€è¦é…ç½®è¿”å›é¦–é¡µ å¼€å‘ç¯å¢ƒï¼šè„šæ‰‹æ¶é»˜è®¤é…ç½®å¥½äº† 123devServer:&#123; historyApiFallback:true&#125; ç”Ÿäº§ç¯å¢ƒ é…ç½®Nginx 123location/&#123; try_files $uri $uri / /index.html;&#125; hashï¼šè·¯ç”±æºå¸¦#ï¼Œåˆ·æ–°ä¸ä¼šæºå¸¦è·¯å¾„ï¼Œè¯·æ±‚æ€»æ˜¯æ ¹è·¯å¾„ï¼Œè¿”å›é¦–é¡µï¼Œæ²¡æœ‰404 åŸç† historyï¼šä½¿ç”¨historyå¯¹è±¡çš„pushState()å’ŒreplaceState() H5æ–°å¢ hashï¼šä½¿ç”¨locationå¯¹è±¡çš„hash è·¯ç”±è·³è½¬æ»šåŠ¨æ¡å›åˆ°é¡¶éƒ¨12345new VueRouter(&#123; scrollBehavior(to,from,savedPosition)&#123; return &#123;x:0,y:0&#125; &#125;&#125;) ç¼“å­˜è·¯ç”±ç»„ä»¶ä½œç”¨ï¼šè®©ä¸å±•ç¤ºçš„è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚è½½ï¼Œä¸è¢«é”€æ¯ 123456789// ç¼“å­˜ä¸€ä¸ªè·¯ç”±ç»„ä»¶&lt;keep-alive include=&quot;News&quot;&gt; // includeä¸­å†™æƒ³è¦ç¼“å­˜çš„ç»„ä»¶åï¼Œä¸å†™è¡¨ç¤ºå…¨éƒ¨ç¼“å­˜ &lt;router-view&gt;&lt;/router-view&gt;&lt;/keep-alive&gt;// ç¼“å­˜å¤šä¸ªè·¯ç”±ç»„ä»¶&lt;keep-alive :include=&quot;[&#x27;News&#x27;,&#x27;Message&#x27;]&quot;&gt; &lt;router-view&gt;&lt;/router-view&gt;&lt;/keep-alive&gt; Vuex ç”¨äºå…±äº«æ•°æ® å®‰è£…1npm install vuex --save æ³¨å†Œ1234import Vue from &#x27;vue&#x27;import Vuex from &#x27;vuex&#x27;Vue.use(Vuex) å¸¸ç”¨é…ç½®1234567891011121314151617181920212223242526import Vue from &#x27;vue&#x27; //å¼•å…¥vueimport Vuex from &#x27;vuex&#x27; //å¼•å…¥vuexVue.use(Vuex) //ä½¿ç”¨vuexæ’ä»¶export default new Vuex.Store(&#123; //è¾“å‡ºä¸€ä¸ª vuexçš„ä»“åº“å®ä¾‹ state: &#123; #é‡Œé¢å­˜å‚¨æ•°æ® ã€ç›¸å½“äº data ã€‘ &#125;, getters: &#123; #è·å–stateæ•°æ®å¹¶å¤„ç†è¿”å› ç›¸å½“äºcomputed &#125;, mutations: &#123; #é‡Œé¢å†™æ–¹æ³• åŒæ­¥æ”¹å˜stateçš„å€¼ å‚æ•°ä¸€:state å‚æ•°äºŒ:payload ==&gt; æºå¸¦çš„ä¸œè¥¿ ä¾‹å¦‚ï¼šPayload.name // åœ¨å®šä¹‰æ–¹æ³•æ—¶æœ‰å¯èƒ½ä¼šä½¿ç”¨å¸¸é‡æ¥å®šä¹‰ï¼Œconst ADD = &quot;ADD&quot; &#125;, actions: &#123; #é‡Œé¢å†™æ–¹æ³• è°ƒç”¨mutationsæ–¹æ³• æ”¹å˜stateçš„å€¼ ï¼Œå¯ä»¥å†™å¼‚æ­¥ // å‚æ•°ä¸€ï¼šcontext // contextå‚æ•°åŒ…å«å¦‚ä¸‹ // state, ç­‰åŒäºstore.$stateï¼Œè‹¥åœ¨æ¨¡å—ä¸­åˆ™ä¸ºå±€éƒ¨çŠ¶æ€ // rootState, ç­‰åŒäºstore.$state,åªå­˜åœ¨æ¨¡å—ä¸­ // commit, ç­‰åŒäºstore.$commit // dispatch, ç­‰åŒäºstore.$dispatch // getters ç­‰åŒäºstore.$getters // å‚æ•°äºŒï¼šPayload &#125;, modules: &#123;#æ¨¡å—åŒ– ç”¨äºå¤§å‹é¡¹ç›® å¤šæ¨¡å—å¼€å‘ &#125;&#125;) ä½¿ç”¨state123456789101112#1 this.$store.state.æ•°æ®å±æ€§#2 è¾…åŠ©å‡½æ•°æ¨¡å¼//å¼•å…¥vuex è§£æ„è¾…åŠ©å‡½æ•° [äº²è‡ªæ¨è]import &#123; mapState &#125; from &quot;vuex&quot;;export default &#123; computed: &#123; ...mapState([&#x27;æ•°æ®å±æ€§1&#x27;,&#x27;æ•°æ®å±æ€§2&#x27;]), #è¾…åŠ©å‡½æ•°çš„æ•°æ® åœ¨computedè§£æ„å‡ºæ¥ç›¸å½“äºæŒ‚ç€dataä¸Š å¯ä»¥ç›´æ¥ç”¨ &#125;&#125; ä½¿ç”¨gettersæ–¹æ³•ç›¸å½“äº computed 12345678910#å¼•å…¥è¾…åŠ©å‡½æ•°import &#123; mapGetters &#125; from &quot;vuex&quot;;export default &#123; #åœ¨computed ä½¿ç”¨ computed: &#123; ...mapGetters([&#x27;è®¡ç®—å±æ€§1&#x27;,&#x27;è®¡ç®—å±æ€§2&#x27;]) &#125;&#125;&lt;/script&gt; ä½¿ç”¨vuex çš„æ–¹æ³• MutationsMutationsé‡Œé¢ æ˜¯åŒæ­¥æ”¹å˜stateå€¼çš„æ–¹æ³• 123456789101112131415161718192021#æ–¹æ³•1 export default &#123; methods: &#123; æ–¹æ³•å() &#123; # ç”¨ this.$store.commit(&#x27;mutationsé‡Œé¢çš„å‡½æ•°è§¦å‘&#x27;) this.$store.commit(&#x27;vuex mutationsé‡Œé¢çš„æ–¹æ³•å&#x27;) &#125; &#125;&#125;&lt;/script&gt;#æ–¹æ³•2 å¼•å…¥vuex è§£æ„è¾…åŠ©å‡½æ•° [äº²è‡ªæ¨è]import &#123; mapMutations &#125; from &quot;vuex&quot;;export default &#123; //æ–¹æ³• methods: &#123; ...mapMutations([&#x27;vuex mutationsé‡Œé¢çš„æ–¹æ³•å&#x27;,&#x27;åŒæ–¹æ³•2&#x27;]) #æ–¹æ³•åç›¸å½“äºæŒ‚ç€methodsé‡Œé¢ &#125;,&#125; ä½¿ç”¨vuex çš„æ–¹æ³• Actions123456789101112131415161718192021222324252627282930313233343536export default new Vuex.Store(&#123; //è¾“å‡ºä¸€ä¸ª vuexçš„ä»“åº“å®ä¾‹ state: &#123; //é‡Œé¢å­˜å‚¨æ•°æ® ã€ç›¸å½“äº data ã€‘ userInfo: &#123;&#125;, //æ¨¡æ‹Ÿå‚¨å­˜ç”¨æˆ·ä¿¡æ¯ &#125;, mutations: &#123; //é‡Œé¢å†™æ–¹æ³• åŒæ­¥æ”¹å˜stateçš„å€¼ [è§„èŒƒå†™æ³• å¿…é¡»å¤§å†™ç”¨ä¸‹åˆ’çº¿åˆ†å‰²] #å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ SET_USER_INFO(state, payload) &#123; state.userInfo = payload &#125; &#125;, actions: &#123; #é‡Œé¢å†™æ–¹æ³• è°ƒç”¨mutationsæ–¹æ³• æ”¹å˜stateçš„å€¼ ï¼Œå¯ä»¥å†™å¼‚æ­¥ async getUserInfo(&#123; commit &#125;, data) &#123; // æ–¹æ³•å‚æ•°1ï¼šä¸Šä¸‹æ–‡ï¼Œå‚æ•°2ï¼šå½¢å‚ ... await new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; commit(&#x27;SET_USER_INFO&#x27;, data) resolve() &#125;, 1000); &#125;) &#125; &#125;,&#125;)#ä½¿ç”¨#å†™æ³•1this.$store.dispatch(&#x27;actionsé‡Œé¢çš„å‡½æ•°&#x27;, æ•°æ®)#å†™æ³•2 è¾…åŠ©å‡½æ•°å†™æ³•import &#123; mapActions &#125; from &quot;vuex&quot;;export default &#123; //æ–¹æ³• methods: &#123; ...mapActions([&#x27;actionsé‡Œé¢çš„æ–¹æ³•1&#x27;,&#x27;åŒæ–¹æ³•2&#x27;]) //actionsé‡Œé¢çš„æ–¹æ³•1 è§£æ„actionsé‡Œé¢çš„æ–¹æ³•æŒ‚åœ¨methodsé‡Œé¢ &#125;,&#125; ä½¿ç”¨vuex çš„ æ¨¡å—åŒ–module1234567891011121314151617181920212223242526# shopcar.js/** * è´­ç‰©è½¦ vuex æ¨¡å— */const state = &#123; price: 120, count: 20,&#125;const getters = &#123; calcPrice(state) &#123; return state.price * state.count &#125;&#125;const mutations = &#123;&#125;const actions = &#123;&#125;export default &#123; namespaced: true, //å¦‚æœæ˜¯æ¨¡å—åŒ–å¼€å‘ namespacedå±æ€§å¿…å¡« ã€å‘½åç©ºé—´ã€‘ state, getters, mutations, actions&#125; 123456# store/index.jsexport default new Vuex.Store(&#123; //è¾“å‡ºä¸€ä¸ª vuexçš„ä»“åº“å®ä¾‹ modules: &#123; //æ¨¡å—åŒ– ç”¨äºå¤§å‹é¡¹ç›® å¤šæ¨¡å—å¼€å‘ shopcar &#125;&#125;) ä½¿ç”¨ 12345export default &#123; computed: &#123; ...mapState(&#x27;æ¨¡å—å&#x27;, [&#x27;æ•°æ®å1&#x27;,&#x27;æ•°æ®å2&#x27;]) #åŒç†mapMutationsï¼ŒmapActions å†™æ³•ç±»ä¼¼ &#125;,&#125; vuexä½¿ç”¨æ•°æ®/æ–¹æ³•å¸¸è§„ï¼ˆæ— æ¨¡å—ï¼‰ æ— è¾…åŠ©å‡½æ•° stateï¼šthis.$store.state.æ•°æ® gettersï¼šthis.$store.getters.æ•°æ® actionsï¼šthis.$store.dispatch(â€˜actionsæ–¹æ³•åâ€™,æ‰€ä¼ å€¼)ï¼› mutationsï¼šthis.$store.commit(â€˜mutationsæ–¹æ³•åâ€™,æ‰€ä¼ å€¼)ï¼› æœ‰è¾…åŠ©å‡½æ•° keyè‡ªå®šä¹‰åç§°ï¼Œvalueå¯¹åº”vuexä¸­æ•°æ®/æ–¹æ³•å¹¶ä¸”æ˜¯å­—ç¬¦ä¸² stateï¼šmapState({key:value}) / mapState([value]) gettersï¼šmapGetters({key:value}) / mapGetters([value]) actionsï¼šmapActions({key:value}) / mapActions([value]) mutationsï¼šmapMutations({key:value}) / mapMutations([value]) åˆ†æ¨¡å—å¹¶å¼€å¯å‘½åç©ºé—´ æ— è¾…åŠ©å‡½æ•° stateï¼šthis.$store.state.æ¨¡å—åç§°.æ•°æ® gettersï¼šthis.$store.getters.æ¨¡å—åç§°.æ•°æ® actionsï¼šthis.$store.dispatch(â€˜æ¨¡å—åç§°/actionsæ–¹æ³•åâ€™,æ‰€ä¼ å€¼)ï¼› mutationsï¼šthis.$store.commit(â€˜æ¨¡å—åç§°/mutationsæ–¹æ³•åâ€™,æ‰€ä¼ å€¼)ï¼› æœ‰è¾…åŠ©å‡½æ•° keyè‡ªå®šä¹‰åç§°ï¼Œvalueå¯¹åº”vuexä¸­æ•°æ®/æ–¹æ³•å¹¶ä¸”æ˜¯å­—ç¬¦ä¸²ï¼Œæ¨¡å—åç§°æ˜¯å­—ç¬¦ä¸² stateï¼šmapState(æ¨¡å—åç§°,{key:value}) / mapState(æ¨¡å—åç§°,[value]) gettersï¼šmapGetters(æ¨¡å—åç§°,{key:value}) / mapGetters(æ¨¡å—åç§°,[value]) actionsï¼šmapActions(æ¨¡å—åç§°,{key:value}) / mapActions(æ¨¡å—åç§°,[value]) mutationsï¼šmapMutations(æ¨¡å—åç§°,{key:value}) / mapMutations(æ¨¡å—åç§°,[value])"},{"title":"Vue3åŸºç¡€å¤ä¹ ","path":"2025/05/12/Vue3å¤ä¹ /","text":"å¯ä»¥è®¿é—®çº¿ä¸Šçš„ï¼ˆå°šç¡…è°·ç‰ˆæœ¬ï¼Œè‡ªå·±æ‹·è´ä¸‹æ¥éƒ¨ç½²çš„ï¼‰ï¼šhttps://vue3-study.pages.dev/ ä¸‹é¢çš„æ˜¯é»‘é©¬ï¼ˆå¥½åƒæ˜¯è¯„è®ºåŒºåˆ«äººå‘çš„ï¼‰ ä¸€ã€Vue3.0ä»‹ç»1ã€Vue3.0ä»‹ç»åœ¨å­¦ä¹ Vue3.0ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ä¸Vue2.xçš„åŒºåˆ« ä¼šä»å¦‚ä¸‹å‡ ç‚¹æ¥ä»‹ç» æºç ç»„ç»‡æ–¹å¼çš„å˜åŒ– Composition API æ€§èƒ½æå‡ Vite Vue3.0å…¨éƒ¨ä½¿ç”¨TypeScriptè¿›è¡Œé‡å†™ï¼Œä½†æ˜¯90%çš„APIè¿˜æ˜¯å…¼å®¹2.x,è¿™é‡Œå¢åŠ äº†Composition APIä¹Ÿå°±æ˜¯ç»„åˆAPI. åœ¨æ€§èƒ½æ–¹é¢æœ‰äº†å¤§å¹…åº¦çš„æå‡ï¼Œåœ¨Vue3.0ä¸­ä½¿ç”¨Proxyé‡å†™äº†å“åº”å¼çš„ä»£ç ï¼Œå¹¶ä¸”å¯¹ç¼–è¯‘å™¨åšäº†ä¸€å®šçš„ä¼˜åŒ–ï¼Œé‡å†™äº†è™šæ‹ŸDOM,è®©æ¸²æŸ“æœ‰äº†å¾ˆå¤§çš„æ€§èƒ½æå‡ã€‚ åŒæ—¶å®˜æ–¹ä¹Ÿæä¾›äº†ä¸€æ¬¾å·¥å…·Vite,ä½¿ç”¨è¯¥å·¥å…·ï¼Œåœ¨å¼€å‘é˜¶æ®µè¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œä¸éœ€è¦è¿›è¡Œæ‰“åŒ…ï¼Œç›´æ¥è¿è¡Œé¡¹ç›®ï¼Œæå‡äº†å¼€å‘çš„æ•ˆç‡ ä¸‹é¢å…ˆæ¥çœ‹ä¸€ä¸‹æºç ç»„ç»‡æ–¹å¼ï¼š æºç é‡‡ç”¨TypeScripté‡å†™ ä½¿ç”¨Monorepoç®¡ç†é¡¹ç›®ç»“æ„ é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ€å¼€å§‹æ˜¯ä»¥compilerå¼€å¤´çš„åŒ…ï¼Œè¿™äº›éƒ½æ˜¯ä¸ç¼–è¯‘ç›¸å…³çš„ä»£ç ã€‚compiler-coreæ˜¯ä¸å¹³å°æ— å…³çš„ç¼–è¯‘å™¨ï¼Œcompiler-domæ˜¯æµè§ˆå™¨å¹³å°ä¸‹çš„ç¼–è¯‘å™¨ï¼Œä¾èµ–äºcompiler-core. compiler-sfc:ç”¨æ¥ç¼–è¯‘å•æ–‡ä»¶ç»„ä»¶ï¼Œä¾èµ–äºcompiler-coreä¸compiler-dom compiler-ssr:æ˜¯æœåŠ¡ç«¯æ¸²æŸ“çš„ç¼–è¯‘å™¨ï¼Œä¾èµ–äºcompiler-dom reactivity:æ•°æ®å“åº”å¼ç³»ç»Ÿ Â·runtime-coreÂ·:æ˜¯ä¸å¹³å°æ— å…³çš„è¿è¡Œæ—¶ runtime-dom:æ˜¯é’ˆå¯¹æµè§ˆå™¨çš„è¿è¡Œæ—¶ï¼Œç”¨æ¥å¤„ç†å…ƒç´ DOMçš„apiå’Œäº‹ä»¶ç­‰ runtime-test:è¿›è¡Œæµ‹è¯•çš„è¿è¡Œæ—¶ server-rendererï¼šè¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ shared:æ˜¯VUEå†…éƒ¨ä½¿ç”¨çš„ä¸€äº›å…¬å…±çš„API size-check:æ˜¯ä¸€ä¸ªç§æœ‰çš„åŒ…ï¼Œç”¨æ¥æ£€æŸ¥åŒ…çš„å¤§å° template-explorer:æ˜¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„å®æ—¶ç¼–è¯‘ç»„ä»¶ï¼Œä¼šè¾“å‡ºrenderå‡½æ•° Vueæ„å»ºå®Œæ•´ç‰ˆçš„Vue,ä¾èµ–äºcompilerä¸runtime 2ã€ä¸åŒçš„æ„å»ºç‰ˆæœ¬Vue3ä¸Vue2ä¸€æ ·ï¼Œéƒ½æä¾›äº†ä¸åŒçš„æ„å»ºç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ä¸åŒçš„åœºåˆä¸­ä½¿ç”¨ã€‚ å’ŒVue2ä¸åŒçš„æ˜¯ï¼Œåœ¨Vue3ä¸­ä¸åœ¨æ„å»ºUMDçš„æ¨¡å—åŒ–æ–¹å¼ã€‚ cjsæ¨¡å—åŒ–æ–¹å¼,ä¹Ÿå°±æ˜¯CommonJSæ¨¡å—åŒ–æ–¹å¼ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹å¯¹åº”çš„æ–‡ä»¶æ˜¯vue.cjs.jsä¸vue.cjs.prod.js è¿™ä¸ªä¸¤ä¸ªæ–‡ä»¶éƒ½æ˜¯å®Œæ•´ç‰ˆçš„vue,åŒ…å«äº†è¿è¡Œæ—¶ä¸ç¼–è¯‘å™¨ï¼Œvue.cjs.jsæ˜¯å¼€å‘ç‰ˆï¼Œä»£ç æ²¡æœ‰è¢«å‹ç¼©ã€‚ vue.cjs.prod.js:è¡¨ç¤ºçš„æ˜¯ç”Ÿäº§ç‰ˆæœ¬ï¼Œä»£ç è¢«å‹ç¼©è¿‡ã€‚ ä¸‹é¢æ˜¯global vue.global.js vue.global.prod.js vue.runtime.global.js vue.runtime.global.prod.js ä»¥ä¸Šå››ä¸ªjsæ–‡ä»¶ï¼Œéƒ½å¯ä»¥é€šè¿‡scriptæ–¹å¼è¿›è¡Œå¯¼å…¥ï¼Œå¯¼å…¥ä»¥åï¼Œä¼šå¢åŠ ä¸€ä¸ªå…¨å±€çš„Vueå¯¹è±¡ï¼Œ vue.global.js vue.global.prod.js ä»¥ä¸Šä¸¤ä¸ªæ–‡ä»¶åŒ…å«äº†å®Œæ•´ç‰ˆçš„vue,åŒ…å«ç¼–è¯‘å™¨ä¸è¿è¡Œæ—¶ã€‚vue.global.jsæ˜¯å¼€å‘ç‰ˆæœ¬ï¼Œä»£ç æ²¡æœ‰è¢«å‹ç¼©ï¼Œvue.global.prod.jsæ˜¯ç”Ÿäº§ç‰ˆæœ¬ï¼Œä»£ç è¿›è¡Œäº†å‹ç¼©ã€‚ vue.runtime.global.js vue.runtime.global.prod.js ä»¥ä¸Šä¸¤ä¸ªæ–‡ä»¶ï¼ŒåªåŒ…å«äº†è¿è¡Œæ—¶ï¼ŒåŒæ ·æœ‰å¼€å‘ç‰ˆæœ¬ä¸ç”Ÿäº§ç‰ˆæœ¬ã€‚ ä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹browser vue.esm-browser.js vue.esm-browser.prod.js vue.runtime.esm-browser.js vue.runtime.esm-browser.prod.js ä»¥ä¸Šå››ä¸ªæ–‡ä»¶éƒ½åŒ…å«äº†æµè§ˆå™¨åŸç”Ÿæ¨¡å—åŒ–çš„æ–¹å¼ï¼Œåœ¨æµè§ˆå™¨ä¸­å¯ä»¥ç›´æ¥é€šè¿‡script type=&#39;module&#39; çš„æ–¹å¼æ¥å¯¼å…¥æ¨¡å—ã€‚ vue.esm-browser.js vue.esm-browser.prod.js ä¸Šé¢ä¸¤ä¸ªæ–‡ä»¶æ˜¯ï¼Œesmoduleçš„å®Œæ•´ç‰ˆï¼ŒåŒ…å«äº†å¼€å‘ç‰ˆæœ¬ä¸ç”Ÿäº§ç‰ˆæœ¬ï¼Œ vue.runtime.esm-browser.js vue.runtime.esm-browser.prod.js ä»¥ä¸Šä¸¤ä¸ªæ–‡ä»¶æ˜¯è¿è¡Œæ—¶ç‰ˆæœ¬ï¼Œ æœ€åæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹bundler `vue.esm-bundler.js` `vue.runtime.esm-bundler.js` ä»¥ä¸Šä¸¤ä¸ªæ–‡ä»¶æ²¡æœ‰æ‰“åŒ…æ‰€æœ‰çš„ä»£ç ï¼Œéœ€è¦é…åˆæ‰“åŒ…å·¥å…·æ¥ä½¿ç”¨ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æ˜¯ä½¿ç”¨es moduleçš„æ¨¡å—åŒ–æ–¹å¼ï¼Œå†…éƒ¨é€šè¿‡importå¯¼å…¥äº†runtime core vue.esm-bundler.jsæ˜¯å®Œæ•´ç‰ˆï¼Œå…¶å†…éƒ¨è¿˜å¯¼å…¥äº†runtime-compiler,ä¹Ÿå°±æ˜¯ç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºçš„é¡¹ç›®ï¼Œé»˜è®¤å¯¼å…¥äº† vue.runtime.esm-bundler.jsï¼Œè¿™ä¸ªæ–‡ä»¶åªå¯¼å…¥äº†è¿è¡Œæ—¶ï¼Œä¹Ÿå°±æ˜¯vueçš„æœ€å°ç‰ˆæœ¬ï¼Œåœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œåªä¼šæ‰“åŒ…æˆ‘ä»¬ä½¿ç”¨åˆ°çš„ä»£ç ï¼Œå¯ä»¥è®©vueçš„ä½“ç§¯æ›´å°ã€‚ ä»¥ä¸Šå°±æ˜¯ä¸åŒæ„å»ºç‰ˆæœ¬çš„ä»‹ç»ã€‚ 3ã€Composition API è®¾è®¡åŠ¨æœºVue2.xåœ¨è®¾è®¡ä¸­å°å‹é¡¹ç›®çš„æ—¶å€™ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ï¼Œå¼€å‘æ•ˆç‡ä¹Ÿé«˜ã€‚ä½†æ˜¯åœ¨å¼€å‘ä¸€äº›å¤§å‹é¡¹ç›®çš„æ—¶å€™ä¹Ÿä¼šå¸¦æ¥ä¸€å®šçš„é™åˆ¶ï¼Œ åœ¨Vue2.xä¸­ä½¿ç”¨çš„APIæ˜¯Options API,è¯¥ç±»å‹çš„APIåŒ…å«ä¸€ä¸ªæè¿°ç»„ä»¶é€‰é¡¹(data,methods,propsç­‰)çš„å¯¹è±¡ï¼Œåœ¨ä½¿ç”¨Options APIå¼€å‘å¤æ‚çš„ç»„ä»¶çš„æ—¶å€™ï¼ŒåŒä¸€ä¸ªåŠŸèƒ½é€»è¾‘çš„ä»£ç è¢«æ‹†åˆ†åˆ°ä¸åŒçš„é€‰é¡¹ä¸­ï¼Œè¿™æ ·åœ¨ä»£ç é‡æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹å°±ä¼šå¯¼è‡´ä¸åœçš„æ‹–åŠ¨æ»šåŠ¨æ¡æ‰èƒ½æŠŠä»£ç å…¨éƒ¨çœ‹æ¸…ï¼Œéå¸¸çš„ä¸æ–¹ä¾¿ã€‚ å¦‚ä¸‹ä»£ç ç¤ºä¾‹ï¼š 12345678910111213141516171819202122export default &#123; data()&#123; return &#123; position:&#123; x:0, y:0 &#125; &#125; &#125;, created()&#123; window.addEventListener(&#x27;mousemove&#x27;,this.handle) &#125; destroyed()&#123; window.removeEventListener(&#x27;mousemove&#x27;,this.handle) &#125;, methods:&#123; handle(e)&#123; this.position.x=e.pageX this.position.y=e.pageY &#125; &#125;&#125; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®ç°çš„æ˜¯è·å–é¼ æ ‡çš„ä½ç½®ï¼Œç„¶åå±•ç¤ºåˆ°é¡µé¢ä¸­ï¼Œå¦‚æœç°åœ¨éœ€è¦åœ¨ä¸Šé¢çš„ç¨‹åºä¸­æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œå¯èƒ½éœ€è¦åœ¨dataå’Œmethodsç­‰é€‰é¡¹ä¸­ï¼Œæ·»åŠ æ–°çš„ä»£ç ï¼Œè¿™æ ·ä»£ç é‡æ¯”è¾ƒå¤šä»¥åï¼Œåœ¨è¿›è¡ŒæŸ¥çœ‹çš„æ—¶å€™ï¼Œéœ€è¦ä¸æ–­çš„æ‹–åŠ¨æ»šåŠ¨æ¡ï¼Œéå¸¸éº»çƒ¦ã€‚ è€Œä½¿ç”¨Composition APIå¯ä»¥è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚ ä¸‹é¢å…ˆæ¥çœ‹ä¸€ä¸‹Composition APIçš„ä»‹ç» Composition API æ˜¯Vue.js 3.0 ä¸­æ–°å¢çš„ä¸€ç»„APIï¼Œæ˜¯ä¸€ç»„åŸºäºå‡½æ•°çš„API,å¯ä»¥æ›´çµæ´»çš„ç»„ç»‡ç»„ä»¶çš„é€»è¾‘ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡Composition APIæ¥æ¼”ç¤ºä¸Šé¢çš„æ¡ˆä¾‹ 1234567891011121314151617181920212223242526import &#123;reactive, onMounted,onUnmounted&#125; from &#x27;vue&#x27;function useMousePosition()&#123; const position=reactive(&#123; x:0, y:0 &#125;) const upate=(e)=&gt;&#123; position.x=e.pageX position.y=e.pageY &#125; onMounted(()=&gt;&#123; window.addEventListener(&#x27;mousemove&#x27;,update) &#125;) onUnmounted(()=&gt;&#123; window.removeEventListener(&#x27;mousemove&#x27;,update) &#125;) return position&#125;export default &#123; setup()&#123; const position=useMousePosition() return &#123; position &#125; &#125;&#125; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…³äºè·å–é¼ æ ‡ä½ç½®çš„æ ¸å¿ƒé€»è¾‘ä»£ç å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­äº†ï¼Œè¿™æ ·å…¶å®ƒç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œåªéœ€è¦å°è£…åˆ°ä¸€ä¸ªå…¬å…±æ¨¡å—ä¸­ï¼Œè¿›è¡Œå¯¼å‡ºï¼Œå…¶å®ƒç»„ä»¶è¿›è¡Œå¯¼å…¥å³å¯ã€‚é€šè¿‡è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿçœ‹å‡ºï¼ŒComposition API æä¾›äº†å¾ˆå¥½çš„ä»£ç çš„å°è£…ä¸å¤ç”¨æ€§ã€‚ å¦‚æœï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æœç´¢çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦æ·»åŠ ä¸€ä¸ªå‡½æ•°å°±å¯ä»¥äº†ã€‚ è¿™æ ·ï¼Œæˆ‘ä»¬ä»¥ååœ¨æŸ¥çœ‹ä»£ç çš„æ—¶å€™ï¼Œåªéœ€è¦æŸ¥çœ‹æŸä¸ªå…·ä½“å®ç°ä¸šåŠ¡çš„å‡½æ•°å°±å¯ä»¥äº†ã€‚å› ä¸ºæ ¸å¿ƒçš„ä¸šåŠ¡æˆ‘ä»¬åˆ°å°è£…åˆ°äº†ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œä¸åƒOptions APIä¸€æ ·ï¼ŒæŠŠæ ¸å¿ƒçš„ä¸šåŠ¡éƒ½åˆ†æ•£åˆ°äº†ä¸åŒçš„ä½ç½®ï¼ŒæŸ¥çœ‹ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦ä¸æ–­çš„æ‹–åŠ¨æ»šåŠ¨æ¡ã€‚ å½“ç„¶ï¼Œåœ¨Vue3.jsä¸­å¯ä»¥ä½¿ç”¨Composition APIä¹Ÿå¯ä»¥ä½¿ç”¨Options API,è¿™é‡Œå¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½æ¥è¿›è¡Œé€‰æ‹©ã€‚å¦‚æœå¼€å‘çš„ç»„ä»¶ä¸­éœ€è¦æå–å¯å¤ç”¨çš„é€»è¾‘ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨Compositon API,è¿™æ ·æ›´åŠ çš„æ–¹ä¾¿ã€‚ æœ€åï¼Œæˆ‘ä»¬æ¥åšä¸€ä¸ªæ€»ç»“: Composition APIæä¾›äº†ä¸€ç»„åŸºäºå‡½æ•°çš„API,è®©æˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ çµæ´»çš„ç»„ç»‡ç»„ä»¶çš„é€»è¾‘ï¼Œä¹Ÿèƒ½å¤Ÿæ›´åŠ çµæ´»çš„ç»„ç»‡ç»„ä»¶å†…çš„ä»£ç ç»“æ„ï¼Œè¿˜èƒ½å¤ŸæŠŠä¸€äº›é€»è¾‘åŠŸèƒ½ä»ç»„ä»¶ä¸­æå–å‡ºæ¥ï¼Œæ–¹ä¾¿å…¶å®ƒçš„ç»„ä»¶é‡ç”¨ã€‚ 4ã€æ€§èƒ½æå‡è¿™ä¸€å°èŠ‚ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…³äºVue3ä¸­çš„æ€§èƒ½çš„æå‡ã€‚ å…³äºVue3ä¸­çš„æ€§èƒ½æå‡ï¼Œä¸»è¦ä½“ç°åœ¨å¦‚ä¸‹å‡ ç‚¹ ç¬¬ä¸€: å“åº”å¼ç³»ç»Ÿå‡çº§ï¼Œåœ¨Vue3ä¸­ä½¿ç”¨Pxoryé‡å†™äº†å“åº”å¼ç³»ç»Ÿ ç¬¬äºŒï¼šç¼–è¯‘ä¼˜åŒ–ï¼Œé‡å†™äº†è™šæ‹ŸDMO,æå‡äº†æ¸²æŸ“çš„æ€§èƒ½ã€‚ ç¬¬ä¸‰ï¼šæºç ä½“ç§¯çš„ä¼˜åŒ–ï¼Œå‡å°‘äº†æ‰“åŒ…çš„ä½“ç§¯ ä¸‹é¢ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹â€œå“åº”å¼ç³»ç»Ÿçš„å‡çº§â€ åœ¨Vue2.xä¸­å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯defineProperty,åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šéå†dataä¸­çš„æ‰€æœ‰æˆå‘˜ï¼Œå°†å…¶è½¬æ¢ä¸ºgetter/setter,å¦‚æœdataä¸­çš„å±æ€§åˆæ˜¯å¯¹è±¡ï¼Œéœ€è¦é€šè¿‡é€’å½’å¤„ç†æ¯ä¸€ä¸ªå­å¯¹è±¡ä¸­çš„å±æ€§ï¼Œæ³¨æ„ï¼šè¿™äº›éƒ½æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯ï¼Œä½ æ²¡æœ‰ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œä¹Ÿè¿›è¡Œäº†å“åº”å¼çš„å¤„ç†ã€‚ è€Œåœ¨Vue3ä¸­ä½¿ç”¨çš„æ˜¯Proxyå¯¹è±¡æ¥é‡å†™äº†å“åº”å¼ç³»ç»Ÿï¼Œå¹¶ä¸”Proxyçš„æ€§èƒ½è¦é«˜äºdefineProperty,å¹¶ä¸”proxyå¯ä»¥æ‹¦æˆªå±æ€§çš„è®¿é—®ï¼Œåˆ é™¤ï¼Œèµ‹å€¼ç­‰æ“ä½œï¼Œä¸éœ€è¦åœ¨åˆå§‹åŒ–çš„æ—¶å€™éå†æ‰€æœ‰çš„å±æ€§ï¼Œå¦å¤–æœ‰å¤šå±‚å±æ€§çš„åµŒå¥—çš„æ—¶å€™ï¼Œåªæœ‰è®¿é—®æŸä¸ªå±æ€§çš„æ—¶å€™ï¼Œæ‰ä¼šé€’å½’è®¿é—®ä¸‹ä¸€çº§çš„å±æ€§ã€‚ä½¿ç”¨proxyé»˜è®¤å°±å¯ä»¥ç›‘å¬åˆ°åŠ¨æ€æ–°å¢çš„å±æ€§ï¼Œè€ŒVue2ä¸­æƒ³åŠ¨æ€æ–°å¢ä¸€ä¸ªå±æ€§ï¼Œéœ€è¦é€šè¿‡Vue.set()æ¥è¿›è¡Œå¤„ç†ã€‚è€Œä¸”Vue2ä¸­æ— æ³•ç›‘å¬åˆ°å±æ€§çš„åˆ é™¤ï¼Œå¯¹æ•°ç»„çš„ç´¢å¼•ä¸lengthå±æ€§çš„ä¿®æ”¹ä¹Ÿç›‘å¬ä¸åˆ°ï¼Œè€Œåœ¨Vue3ä¸­ä½¿ç”¨proxyå¯ä»¥ç›‘å¬åŠ¨æ€çš„æ–°å¢çš„å±æ€§ï¼Œå¯ä»¥ç›‘å¬åˆ é™¤çš„å±æ€§ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç›‘å¬æ•°ç»„çš„ç´¢å¼•å’Œlengthå±æ€§çš„ä¿®æ”¹æ“ä½œã€‚ æ‰€ä»¥Vue3ä¸­ä½¿ç”¨proxyä»¥åï¼Œæå‡äº†å“åº”å¼çš„æ€§èƒ½å’ŒåŠŸèƒ½ã€‚ é™¤äº†å“åº”å¼ç³»ç»Ÿçš„å‡çº§ä»¥å¤–ï¼ŒVue3ä¸­é€šè¿‡ä¼˜åŒ–ç¼–è¯‘çš„è¿‡ç¨‹ï¼Œå’Œé‡å†™è™šæ‹ŸDOM, è®©é¦–æ¬¡æ¸²æŸ“ä¸æ›´æ–°çš„æ€§èƒ½æœ‰äº†å¾ˆå¤§çš„æå‡ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç»„ä»¶ï¼Œæ¥å›é¡¾ä¸€ä¸‹Vue2ä¸­çš„ç¼–è¯‘è¿‡ç¨‹ 1234567891011121314&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;div&gt; static root &lt;div&gt;static node&lt;/div&gt; &lt;/div&gt; &lt;div&gt;static node&lt;/div&gt; &lt;div&gt;static node&lt;/div&gt; &lt;div&gt;&#123;&#123;count&#125;&#125;&lt;/div&gt; &lt;button @click=&quot;handler&quot;&gt; button &lt;/button&gt; &lt;/div&gt;&lt;/template&gt; æˆ‘ä»¬çŸ¥é“åœ¨Vue2ä¸­ï¼Œæ¨¡æ¿é¦–å…ˆä¼šè¢«ç¼–è¯‘æˆrenderå‡½æ•°ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­å®Œæˆçš„ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šç¼–è¯‘é™æ€çš„æ ¹èŠ‚ç‚¹å’Œé™æ€èŠ‚ç‚¹ï¼Œé™æ€æ ¹èŠ‚ç‚¹è¦æ±‚èŠ‚ç‚¹ä¸­å¿…é¡»æœ‰ä¸€ä¸ªé™æ€çš„å­èŠ‚ç‚¹. å½“ç»„ä»¶çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–åï¼Œä¼šé€šçŸ¥watcher,ä¼šè§¦å‘watcherçš„update,æœ€ç»ˆå»æ‰§è¡Œè™šæ‹ŸDOMçš„patchæ–¹æ³•ï¼Œéå†æ‰€æœ‰çš„è™šæ‹ŸèŠ‚ç‚¹ï¼Œæ‰¾åˆ°å·®å¼‚ï¼Œç„¶åæ›´æ–°åˆ°çœŸå®çš„DOMä¸­ï¼Œdiffçš„è¿‡ç¨‹ä¸­ï¼Œä¼šæ¯”è¾ƒæ•´ä¸ªçš„è™šæ‹ŸDOM,å…ˆå¯¹æ¯”æ–°æ—§çš„èŠ‚ç‚¹ä»¥åŠå±æ€§ï¼Œç„¶ååœ¨å¯¹æ¯”å­èŠ‚ç‚¹ã€‚Vue2ä¸­æ¸²æŸ“çš„æœ€å°çš„å•ä½æ˜¯ç»„ä»¶ï¼Œ åœ¨vue2ä¸­diffçš„è¿‡ç¨‹ä¼šè·³è¿‡ï¼Œé™æ€çš„æ ¹èŠ‚ç‚¹ï¼Œå› ä¸ºé™æ€æ ¹èŠ‚ç‚¹çš„å†…å®¹ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨Vue2ä¸­é€šè¿‡æ ‡è®°é™æ€æ ¹èŠ‚ç‚¹ï¼Œä¼˜åŒ–äº†diffçš„è¿‡ç¨‹ã€‚ä½†æ˜¯åœ¨vue2ä¸­é™æ€èŠ‚ç‚¹è¿˜éœ€è¦è¿›è¡Œdiff,è¿™ä¸ªè¿‡ç¨‹æ²¡æœ‰è¢«ä¼˜åŒ–ã€‚ åœ¨Vue3ä¸­æ ‡è®°å’Œæå‡äº†æ‰€æœ‰çš„é™æ€èŠ‚ç‚¹ï¼Œdiffçš„æ—¶å€™åªéœ€è¦å¯¹æ¯”åŠ¨æ€èŠ‚ç‚¹å†…å®¹ã€‚å¦å¤–åœ¨Vue3ä¸­æ–°å¼•å…¥äº†Fragments,è¿™æ ·åœ¨æ¨¡æ¿ä¸­ä¸éœ€è¦åœ¨åˆ›å»ºä¸€ä¸ªå”¯ä¸€æ ¹èŠ‚ç‚¹çš„ç‰¹æ€§ã€‚æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥æ”¾æ–‡æœ¬å†…å®¹ï¼Œæˆ–è€…å¾ˆå¤šçš„åŒçº§çš„æ ‡ç­¾ï¼Œå½“ç„¶è¿™éœ€è¦ä½ åœ¨vscodeä¸­å‡çº§veturæ’ä»¶ï¼Œå¦åˆ™å¦‚æœæ¨¡æ¿ä¸­æ²¡æœ‰å”¯ä¸€çš„æ ¹èŠ‚ç‚¹ï¼Œvscodeä¼šæç¤ºé”™è¯¯ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ï¼šä¼˜åŒ–æ‰“åŒ…ä½“ç§¯ åœ¨Vue3ä¸­ç§»é™¤äº†ä¸€äº›ä¸å¸¸ç”¨çš„API,ä¾‹å¦‚ï¼šinline-template,filterç­‰ã€‚ åŒæ—¶Vue3å¯¹Tree-shakingçš„æ”¯æŒæ›´å¥½ï¼Œé€šè¿‡ç¼–è¯‘é˜¶æ®µçš„é™æ€åˆ†æï¼Œå°†æ²¡æœ‰å¼•å…¥çš„æ¨¡å—åœ¨æ‰“åŒ…çš„æ—¶å€™ç›´æ¥è¿‡æ»¤æ‰ã€‚è®©æ‰“åŒ…åçš„ä½“ç§¯æ›´å°ã€‚ 5ã€ViteViteæ˜¯é’ˆå¯¹Vue3çš„ä¸€ä¸ªæ„å»ºå·¥å…·ï¼ŒViteç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯â€œå¿«â€çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯æ¯”åŸºäºwebpackçš„vue-cliæ›´å¿«ã€‚ åœ¨è®²è§£Viteä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹åœ¨æµè§ˆä¸­ä½¿ç”¨ES Moduleçš„æ–¹å¼ã€‚ ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒES Module(IEä¸æ”¯æŒ) é€šè¿‡ä¸‹é¢çš„æ–¹å¼åŠ è½½æ¨¡å— 1&lt;script type=&#x27;module&#x27; src=&#x27;..&#x27;&gt;&lt;/script&gt; æ”¯æŒæ¨¡å—çš„scripté»˜è®¤å…·æœ‰å»¶è¿ŸåŠ è½½çš„ç‰¹æ€§ï¼Œç±»ä¼¼äºscriptæ ‡ç­¾è®¾ç½®äº†defer.ä¹Ÿå°±æ˜¯è¯´type=&#39;module&#39;çš„scriptçš„æ ‡ç­¾ç›¸å½“äºçœç•¥äº†defer, å®ƒæ˜¯åœ¨æ–‡æ¡£è§£æå®Œåä¹Ÿå°±æ˜¯DOMæ ‘ç”Ÿæˆä¹‹åï¼Œå¹¶ä¸”æ˜¯åœ¨è§¦å‘DOMContentLoadedäº‹ä»¶å‰æ‰§è¡Œã€‚ Viteçš„å¿«å°±æ˜¯ä½“ç°åœ¨ï¼Œä½¿ç”¨äº†æµè§ˆå™¨æ”¯æŒçš„ES Moduleçš„æ–¹å¼ï¼Œé¿å…äº†åœ¨å¼€å‘ç¯å¢ƒä¸‹çš„æ‰“åŒ…ï¼Œä»è€Œæå‡äº†å¼€å‘çš„é€Ÿåº¦ã€‚ ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹Viteä¸Vue-cliçš„åŒºåˆ« å®ƒä»¬ä¸¤è€…ä¹‹é—´æœ€ä¸»è¦çš„åŒºåˆ«å°±æ˜¯ï¼šViteåœ¨å¼€å‘æ¨¡å¼ä¸‹ä¸éœ€è¦æ‰“åŒ…å°±å¯ä»¥ç›´æ¥è¿è¡Œã€‚å› ä¸ºï¼Œåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œviteæ˜¯ä½¿ç”¨äº†æµè§ˆå™¨æ”¯æŒçš„es moduleåŠ è½½æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡importå¯¼å…¥æ¨¡å—ï¼Œæµè§ˆå™¨é€šè¿‡&lt;script type=&#39;module&#39;&gt;çš„å½¢å¼åŠ è½½æ¨¡å—ä»£ç ï¼Œå› ä¸ºviteä¸éœ€è¦æ‰“åŒ…é¡¹ç›®ï¼Œæ‰€ä»¥viteåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œæ‰“å¼€é¡µé¢æ˜¯ç§’å¼€çš„ã€‚ Vue-cli:åœ¨å¼€å‘æ¨¡å¼ä¸‹å¿…é¡»å¯¹é¡¹ç›®æ‰“åŒ…æ‰å¯ä»¥è¿è¡Œï¼Œè€Œä¸”é¡¹ç›®å¦‚æœæ¯”è¾ƒå¤§ï¼Œé€Ÿåº¦ä¼šå¾ˆæ…¢ã€‚ Viteç‰¹ç‚¹ ç¬¬ä¸€ï¼šå› ä¸ºä¸éœ€è¦æ‰“åŒ…ï¼Œå¯ä»¥å¿«é€Ÿå†·å¯åŠ¨ã€‚ ç¬¬äºŒï¼šä»£ç æ˜¯æŒ‰éœ€ç¼–è¯‘çš„ï¼Œåªæœ‰ä»£ç åœ¨å½“å‰éœ€è¦åŠ è½½çš„æ—¶å€™æ‰ä¼šç¼–è¯‘ã€‚ä¸éœ€è¦åœ¨å¼€å¯å¼€å‘æœåŠ¡å™¨çš„æ—¶å€™ï¼Œç­‰å¾…æ•´ä¸ªé¡¹ç›®è¢«æ‰“åŒ…ã€‚ ç¬¬ä¸‰ï¼šViteæ”¯æŒæ¨¡å—çš„çƒ­æ›´æ–°ã€‚ Viteåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨Rollupæ‰“åŒ…ï¼ŒRollupåŸºäºæµè§ˆå™¨åŸç”Ÿçš„ES Moduleçš„æ–¹å¼æ¥æ‰“åŒ…ï¼Œä»è€Œä¸éœ€è¦ä½¿ç”¨babelå°†importè½¬æ¢æˆrequireä»¥åŠä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œæ‰€ä»¥æ‰“åŒ…çš„ä½“ç§¯æ¯”webpackæ›´å°ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹Viteåˆ›å»ºé¡¹ç›® 1234npm init vite-app é¡¹ç›®åç§°cd é¡¹ç›®åç§°npm installnpm run dev æ³¨æ„ï¼šnpm installå®‰è£…ç›¸åº”çš„ä¾èµ–ï¼Œè¿™ä¸€æ­¥ä¸èƒ½çœç•¥ã€‚ åˆ›å»ºå¥½é¡¹ç›®ä»¥åï¼ŒæŸ¥çœ‹index.htmlæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç  1&lt;script type=&quot;module&quot; src=&quot;/src/main.js&quot;&gt;&lt;/script&gt; ä»¥ä¸Šå°±æ˜¯åŠ è½½äº†srcä¸‹çš„main.jsæ¨¡å—ï¼Œåœ¨main.jsæ¨¡å—ä¸­åŠ è½½äº†App.vueè¿™ä¸ªæ¨¡å—ï¼ŒApp.vueè¿™ä¸ªæ¨¡å—æ˜¯å•æ–‡ä»¶ç»„ä»¶ï¼Œæµè§ˆå™¨ä¸æ”¯æŒï¼Œä½†æ˜¯é¡µé¢å¯ä»¥æ­£å¸¸çš„å±•ç¤ºã€‚é‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ï¼Ÿ viteå¼€å¯çš„æœåŠ¡ä¼šç›‘å¬.vueåç¼€çš„è¯·æ±‚ï¼Œä¼šå°†.vueæ–‡ä»¶è§£ææˆjsæ–‡ä»¶ã€‚viteä½¿ç”¨äº†æµè§ˆå™¨æ”¯æŒçš„es moduleæ¥åŠ è½½æ¨¡å—ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹ä¸ä¼šæ‰“åŒ…é¡¹ç›®ï¼Œæ‰€æœ‰æ¨¡å—çš„è¯·æ±‚éƒ½ä¼šäº¤ç»™æœåŠ¡å™¨æ¥å¤„ç†ï¼ŒæœåŠ¡å™¨ä¼šå¤„ç†æµè§ˆå™¨ä¸èƒ½è¯†åˆ«çš„æ¨¡å—ï¼Œå¦‚æœæ˜¯å•æ–‡ä»¶ç»„ä»¶ï¼Œä¼šè°ƒç”¨compiler-sfcæ¥ç¼–è¯‘å•æ–‡ä»¶ç»„ä»¶ï¼Œå¹¶å°†ç¼–è¯‘çš„ç»“æœè¿”å›ç»™æµè§ˆå™¨ã€‚ äºŒã€Composition API1ã€Composition APIåŸºæœ¬ä½¿ç”¨ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹Composition APIçš„åº”ç”¨ï¼Œè¿™é‡Œä¸ºäº†ç®€å•æ–¹ä¾¿ï¼Œæˆ‘ä»¬å…ˆä¸ä½¿ç”¨Viteæ¥åˆ›å»ºé¡¹ç›®ã€‚è€Œä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„es moduleçš„å½¢å¼ï¼Œæ¥åŠ è½½Vueçš„æ¨¡å—ã€‚ åˆ›å»ºå¥½é¡¹ç›®æ–‡ä»¶å¤¹composition-api-demoå,æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…æœ€æ–°çš„Vueç‰ˆæœ¬ 1npm install vue@next åœ¨é¡¹ç›®ç›®å½•ä¸‹é¢åˆ›å»ºindex.html,ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt; x:&#123;&#123;position.x&#125;&#125;&lt;br/&gt; y:&#123;&#123;position.y&#125;&#125; &lt;/div&gt; &lt;script type=&quot;module&quot;&gt; import &#123;createApp&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; const app=createApp(&#123; data()&#123; return &#123; position:&#123; x:0, y:0 &#125; &#125; &#125; &#125;) app.mount(&#x27;#app&#x27;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¯¼å…¥äº†createAppæ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ›å»ºä¸€ä¸ªVueçš„å®ä¾‹ï¼ŒåŒæ—¶å°†å…¶ç»‘å®šåˆ°äº†id=appçš„è¿™ä¸ªdivä¸Šã€‚åœ¨createAppè¿™ä¸ªæ–¹æ³•ä¸­åˆ›å»ºå¯¹åº”çš„é€‰é¡¹å†…å®¹ã€‚ æ³¨æ„ï¼šè¿™é‡Œçš„dataåªèƒ½æ˜¯å‡½æ•°çš„å½¢å¼ï¼Œä¸èƒ½æ˜¯å¯¹è±¡çš„å½¢å¼ã€‚ï¼ˆæ³¨æ„ï¼šåœ¨vscodeä¸­å®‰è£…äº†Live Server æ’ä»¶ï¼Œæ‰€ä»¥å³å‡»index.htmlï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©â€™open with Live Server â€˜,è¿™æ—¶ä¼šå¯åŠ¨ä¸€ä¸ªæœåŠ¡æ‰“å¼€è¯¥é¡µé¢ï¼Œé¿å…å‡ºç°è·¨åŸŸçš„é—®é¢˜ï¼‰ ä¸‹é¢ï¼Œæˆ‘ä»¬å¼€å§‹ä½¿ç”¨Compositon API,ä½¿ç”¨è¯¥APIï¼Œéœ€è¦ç”¨åˆ°ä¸€ä¸ªæ–°çš„é€‰é¡¹setup,setupæ˜¯composition apiçš„å…¥å£å‡½æ•°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt; x:&#123;&#123;position.x&#125;&#125;&lt;br/&gt; y:&#123;&#123;position.y&#125;&#125; &lt;/div&gt; &lt;script type=&quot;module&quot;&gt; import &#123;createApp&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; const app=createApp(&#123; setup() &#123; //setupå¯ä»¥æœ‰ä¸¤ä¸ªå‚æ•° //ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯`props`,propsçš„ä½œç”¨æ˜¯ç”¨æ¥æ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„å‚æ•°ï¼Œå¹¶ä¸”propsæ˜¯ä¸€ä¸ªå“åº”å¼çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¸èƒ½è¢«è§£æ„ã€‚ //ç¬¬äºŒä¸ªå‚æ•°æ˜¯ï¼šcontext,contextæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ä¸‰ä¸ªæˆå‘˜ï¼Œåˆ†åˆ«æ˜¯attrs,emit,slots,è¿™ä¸ªæ¡ˆä¾‹æš‚æ—¶æ²¡æœ‰ç”¨åˆ°ã€‚ //setupçš„æ‰§è¡Œæ—¶æœºï¼šæ˜¯åœ¨propsè§£æå®Œæ¯•ï¼Œä½†æ˜¯æ˜¯åœ¨ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºä¹‹å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥åœ¨setupå†…éƒ¨æ— æ³•é€šè¿‡thisè·å–ç»„ä»¶çš„å®ä¾‹ï¼Œå› ä¸ºç»„ä»¶çš„å®ä¾‹è¿˜æ²¡æœ‰è¢«åˆ›å»ºï¼Œæ‰€ä»¥åœ¨setupä¸­æ— æ³•è®¿é—®åˆ°ç»„ä»¶ä¸­çš„data,methodsç­‰ã€‚setupå†…çš„thisæŒ‡å‘çš„æ˜¯undefined //ä¸‹é¢åˆ›å»ºpositonå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç›®å‰æ˜¯æ™®é€šå¯¹è±¡ï¼Œå¹¶ä¸æ˜¯å“åº”å¼çš„ã€‚ const position=&#123; x:0, y:0 &#125; //å°†positonå¯¹è±¡è¿”å›ï¼Œè¿™æ ·å¯ä»¥åœ¨æ¨¡æ¿ï¼Œä»¥åŠç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ä¸­ä½¿ç”¨è¯¥å¯¹è±¡ return &#123; position &#125; &#125;, //ä¸‹é¢æˆ‘ä»¬åœ¨mountedçš„é’©å­å‡½æ•°ä¸­ï¼Œä¿®æ”¹ä¸€ä¸‹positonä¸­çš„xçš„å€¼ï¼Œæ¥éªŒè¯æ˜¯å¦ä¸ºå“åº”å¼çš„ã€‚ mounted()&#123; this.position.x=100 &#125; &#125;) console.log(app) app.mount(&#x27;#app&#x27;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åœ¨setupæ–¹æ³•ä¸­åˆ›å»ºäº†ä¸€ä¸ªpositonå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¹¶ä¸æ˜¯å“åº”å¼çš„ï¼Œä¸‹é¢çœ‹ä¸€ä¸‹æ€æ ·å°†å…¶ä¿®æ”¹æˆå“åº”å¼çš„ã€‚ ä»¥å‰æˆ‘ä»¬æ˜¯åœ¨dataè¿™ä¸ªé€‰é¡¹ä¸­è®¾ç½®å“åº”å¼çš„å¯¹è±¡ï¼Œå½“ç„¶è¿™é‡Œè¿˜å¯ä»¥å®šä¹‰åˆ°dataä¸­ï¼Œä½†æ˜¯ä¸ºäº†èƒ½å¤Ÿå°†æŸä¸€ä¸ªé€»è¾‘çš„æ‰€æœ‰ä»£ç å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œvue3ä¸­æä¾›äº†ä¸€ä¸ªæ–°çš„apiæ¥åˆ›å»ºå“åº”å¼çš„å¯¹è±¡ã€‚è¿™ä¸ªapiå°±æ˜¯reactive é¦–å…ˆå¯¼å…¥è¯¥å‡½æ•° 1import &#123;createApp,reactive&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; ä½¿ç”¨reactiveå‡½æ•°å°†positonå¯¹è±¡åŒ…è£¹èµ·æ¥ã€‚ 1234const position=reactive(&#123; x:0, y:0&#125;) ç°åœ¨positionå¯¹è±¡å°±æ˜¯å“åº”å¼çš„å¯¹è±¡äº†ï¼Œåˆ·æ–°æµè§ˆå™¨ï¼Œå¯ä»¥çœ‹åˆ°positonä¸­çš„xå±æ€§çš„å€¼å‘ç”Ÿäº†æ›´æ”¹ã€‚ 2ã€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è¿™ä¸€å°èŠ‚ï¼Œçœ‹ä¸€ä¸‹æ€æ ·åœ¨setupä¸­ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ã€‚ åœ¨setupä¸­å¯ä»¥ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ï¼Œä½†æ˜¯éœ€è¦åœ¨é’©å­å‡½æ•°åç§°å‰é¢åŠ ä¸Šon,ç„¶åé¦–å­—æ¯å¤§å†™ã€‚ä¾‹å¦‚:mounted setupæ˜¯åœ¨ç»„ä»¶åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œçš„ï¼Œæ˜¯åœ¨beforeCreateä¸createdä¹‹é—´æ‰§è¡Œçš„ï¼Œæ‰€ä»¥beforeCreateä¸createdçš„ä»£ç éƒ½å¯ä»¥æ”¾åˆ°setupå‡½æ•°ä¸­ã€‚ æ‰€ä»¥ï¼Œåœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°beforeCreateä¸createdåœ¨setupä¸­æ²¡æœ‰å¯¹åº”çš„å®ç°ã€‚ å…¶å®ƒçš„éƒ½æ˜¯åœ¨é’©å­å‡½æ•°åç§°å‰é¢æ·»åŠ ä¸Šon,å¹¶ä¸”é¦–å­—æ¯å¤§å†™ã€‚ æ³¨æ„:onUnmountedç±»ä¼¼äºä¹‹å‰çš„destoryedï¼Œè°ƒç”¨ç»„ä»¶çš„onUnmountedæ–¹æ³•ä¼šè§¦å‘unmountedé’©å­å‡½æ•° renderTrackedä¸renderTriggeredè¿™ä¸¤ä¸ªé’©å­å‡½æ•°éƒ½æ˜¯åœ¨renderå‡½æ•°è¢«é‡æ–°è°ƒç”¨çš„æ—¶å€™è§¦å‘çš„ã€‚ ä¸åŒæ˜¯çš„æ˜¯ï¼Œåœ¨é¦–æ¬¡è°ƒç”¨renderçš„æ—¶å€™renderTrackedä¹Ÿä¼šè¢«è§¦å‘ï¼ŒrenderTriggeredåœ¨renderé¦–æ¬¡è°ƒç”¨çš„æ—¶å€™ä¸ä¼šè¢«è§¦å‘ã€‚ äº†è§£äº†åœ¨setupä¸­ä½¿ç”¨é’©å­å‡½æ•°çš„æ–¹å¼åï¼Œä¸‹é¢ç»§ç»­å®Œå–„è·å–é¼ æ ‡åæ ‡ä½ç½®çš„æ¡ˆä¾‹ åœ¨å®šä¹‰é¼ æ ‡ç§»åŠ¨äº‹ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨åŸæœ‰ä»£ç çš„mountedé’©å­å‡½æ•°ä¸­å®šä¹‰ï¼Œä½†æ˜¯ä¸ºäº†èƒ½å¤Ÿå°†è·å–é¼ æ ‡ä½ç½®çš„ç›¸å…³çš„é€»è¾‘ä»£ç å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè®©ä»»ä½•ä¸€ä¸ªç»„ä»¶éƒ½å¯ä»¥é‡ç”¨ï¼Œè¿™æ—¶ä½¿ç”¨mountedé€‰é¡¹å°±ä¸åˆé€‚äº†ã€‚è¿™æ ·æˆ‘ä»¬æœ€å¥½æ˜¯åœ¨setupä¸­ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ï¼Œ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt; x:&#123;&#123;position.x&#125;&#125;&lt;br/&gt; y:&#123;&#123;position.y&#125;&#125; &lt;/div&gt; &lt;script type=&quot;module&quot;&gt; //å¯¼å…¥onMounted,onUnmountedå‡½æ•° import &#123;createApp,reactive,onMounted,onUnmounted&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; const app=createApp(&#123; setup() &#123; const position=reactive(&#123; x:0, y:0 &#125;) //è·å–é¼ æ ‡çš„ä½ç½®åæ ‡ const update=e=&gt;&#123; position.x=e.pageX position.y=e.pageY &#125; onMounted(()=&gt;&#123; window.addEventListener(&#x27;mousemove&#x27;, update) &#125;) //onUnmountedç±»ä¼¼äºä¹‹å‰çš„destoryed onUnmounted(()=&gt;&#123; window.removeEventListener(&#x27;mousemove&#x27;, update) &#125;) return &#123; position &#125; &#125;, mounted()&#123; this.position.x=100 &#125; &#125;) console.log(app) app.mount(&#x27;#app&#x27;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œé¦–å…ˆå¯¼å…¥äº†onMounted,onUnmounted 1import &#123;createApp,reactive,onMounted,onUnmounted&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; å®šä¹‰è·å–é¼ æ ‡ä½ç½®çš„updateå‡½æ•° 12345//è·å–é¼ æ ‡çš„ä½ç½®åæ ‡ const update=e=&gt;&#123; position.x=e.pageX position.y=e.pageY &#125; åœ¨onMountedé’©å­å‡½æ•°ä¸­æ³¨å†Œmousemoveäº‹ä»¶ 123onMounted(()=&gt;&#123; window.addEventListener(&#x27;mousemove&#x27;, update) &#125;) åœ¨onUnmountedé’©å­å‡½æ•°ä¸­ç§»é™¤mousemoveäº‹ä»¶ 1234onUnmounted(()=&gt;&#123; window.removeEventListener(&#x27;mousemove&#x27;, update) &#125;) ç°åœ¨ï¼ŒåŠŸèƒ½å·²ç»å®ç°äº†ï¼Œä¸‹é¢æˆ‘ä»¬åœ¨å°†ä»£ç è¿›è¡Œé‡æ„ã€‚ å°†è·å–é¼ æ ‡ä½ç½®çš„åŠŸèƒ½å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt; x:&#123;&#123;position.x&#125;&#125;&lt;br/&gt; y:&#123;&#123;position.y&#125;&#125; &lt;/div&gt; &lt;script type=&quot;module&quot;&gt; import &#123;createApp,reactive,onMounted,onUnmounted&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; //å°†è·å–é¼ æ ‡ä½ç½®åæ ‡çš„ä»£ç å°è£…åˆ°äº†useMousePositionå‡½æ•°ä¸­ function useMousePosition()&#123; const position=reactive(&#123; x:0, y:0 &#125;) const update=e=&gt;&#123; position.x=e.pageX position.y=e.pageY &#125; onMounted(()=&gt;&#123; window.addEventListener(&#x27;mousemove&#x27;, update) &#125;) onUnmounted(()=&gt;&#123; window.removeEventListener(&#x27;mousemove&#x27;, update) &#125;) //å°†positonå¯¹è±¡è¿”å› return position &#125; const app=createApp(&#123; setup() &#123; //è°ƒç”¨useMousePositionå‡½æ•°ï¼Œæ¥æ”¶è¿”å›çš„postion const position=useMousePosition() return &#123; position &#125; &#125;, //ä¸‹é¢æˆ‘ä»¬åœ¨mountedçš„é’©å­å‡½æ•°ä¸­ï¼Œä¿®æ”¹ä¸€ä¸‹positonä¸­çš„xçš„å€¼ï¼Œæ¥éªŒè¯æ˜¯å¦ä¸ºå“åº”å¼çš„ã€‚ mounted()&#123; this.position.x=100 &#125; &#125;) console.log(app) app.mount(&#x27;#app&#x27;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­å®šä¹‰äº†ï¼ŒuseMousePositionå‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­å°è£…äº†è·å–é¼ æ ‡ä½ç½®çš„ä¸šåŠ¡ä»£ç ï¼Œæœ€ç»ˆè¿”å›ã€‚ åœ¨setupå‡½æ•°ä¸­è°ƒç”¨useMousePositonå‡½æ•°ï¼Œæ¥æ”¶è¿”å›çš„positon,ç„¶åè¿”å›ï¼Œè¿™æ ·åœ¨æ¨¡æ¿ä¸­å¯ä»¥å±•ç¤ºé¼ æ ‡çš„ä½ç½®ã€‚ é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½“ä¼šå‡ºComposition APIä¸options APIçš„åŒºåˆ«ã€‚ å¦‚æœç°åœ¨ä½¿ç”¨options apiæ¥å®ç°è¿™ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨dataä¸­å®šä¹‰x,y,åœ¨methodsä¸­å®šä¹‰update,è¿™æ ·æŠŠåŒä¸€ä¸ªé€»è¾‘çš„ä»£ç åˆ†æ•£åˆ°äº†ä¸åŒçš„ä½ç½®ï¼Œè¿™æ ·æŸ¥æ‰¾èµ·æ¥ä¹Ÿéå¸¸çš„éº»çƒ¦ï¼Œè€Œç°åœ¨æ ¹è¿™ä¸ªé€»è¾‘å‡½æ•°ç›¸å…³çš„ä»£ç éƒ½å°è£…åˆ°äº†ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè¿™æ ·æ–¹ä¾¿äº†ä»¥åçš„ç»´æŠ¤ä¹Ÿå°±æ˜¯å¦‚æœå‡ºé”™äº†ï¼Œç›´æ¥æŸ¥æ‰¾è¿™ä¸ªå‡½æ•°å°±å¯ä»¥äº†ã€‚å¹¶ä¸”è¿™ä¸ªå‡½æ•°ä¹Ÿå¯ä»¥å•ç‹¬çš„æ”¾åˆ°ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œè¿™æ ·åœ¨ä»»ä½•ä¸€ä¸ªç»„ä»¶ä¸­éƒ½å¯ä»¥ä½¿ç”¨ã€‚ 3ã€reactive/toRefs/refè¿™ä¸€å°èŠ‚ï¼Œæˆ‘ä»¬æ¥ä»‹ç»Compositiont APIä¸­çš„ä¸‰ä¸ªå‡½æ•°reactive/toRefs/ref è¿™ä¸‰ä¸ªå‡½æ•°éƒ½æ˜¯åˆ›å»ºå“åº”å¼æ•°æ®çš„ã€‚ æˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸‹reactive,è¯¥å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨å‰é¢çš„æ¡ˆä¾‹ä¸­å·²ç»ä½¿ç”¨è¿‡ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨å°±æ˜¯å°†ä¸€ä¸ªå¯¹è±¡è®¾ç½®ä¸ºå“åº”å¼çš„ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯¹å‰é¢å†™çš„ç¨‹åºè¿›è¡Œä¸€ä¸ªç®€å•çš„ä¼˜åŒ–ã€‚ åœ¨æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼æ¥è·å–xä¸yçš„å€¼ã€‚ 1234&lt;div id=&quot;app&quot;&gt; x:&#123;&#123;position.x&#125;&#125;&lt;br/&gt; y:&#123;&#123;position.y&#125;&#125; &lt;/div&gt; è¿™æ ·å†™ç¬”è®°éº»çƒ¦ï¼Œå¯ä»¥ç®€åŒ–æˆå¦‚ä¸‹çš„å½¢å¼ 1234&lt;div id=&quot;app&quot;&gt; x:&#123;&#123;x&#125;&#125;&lt;br/&gt; y:&#123;&#123;y&#125;&#125; &lt;/div&gt; åŒæ—¶ï¼Œåœ¨setupå‡½æ•°ä¸­ï¼Œè¿›è¡Œå¦‚ä¸‹çš„ä¿®æ”¹ï¼š 1234567// const position=useMousePosition() const &#123;x,y&#125;=useMousePosition() return &#123; x, y &#125; &#125;, æˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬è°ƒç”¨useMousePositionæ–¹æ³•çš„æ—¶å€™ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªpositionå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…å«äº†xä¸yä¸¤ä¸ªå±æ€§ï¼Œé‚£ä¹ˆè¿™é‡Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè§£æ„å¤„ç†ã€‚ æœ€åå°†è§£æ„å‡ºæ¥çš„x,yè¿”å›ï¼Œè¿™æ ·åœ¨æ¨¡æ¿ä¸­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨x,y. ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬çš„é¼ æ ‡åœ¨æµè§ˆå™¨ä¸­ç§»åŠ¨çš„æ—¶å€™ï¼Œx,yçš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œè¯´æ˜å®ƒä»¬ä¸æ˜¯å“åº”å¼çš„äº†ã€‚ åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ åŸå› æ˜¯ï¼Œå½“å¯¹positionå¯¹è±¡è¿›è¡Œè§£æ„çš„æ—¶å€™ï¼Œå°±æ˜¯å®šä¹‰äº†ä¸¤ä¸ªå˜é‡x,yæ¥æ¥æ”¶è§£æ„å‡ºæ¥çš„å€¼ã€‚æ‰€ä»¥è¿™é‡Œçš„x,yå°±æ˜¯ä¸¤ä¸ªå˜é‡ï¼Œä¸åŸæœ‰çš„å¯¹è±¡æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯å¸Œæœ›å¯¹æ¨¡æ¿è¿›è¡Œä¿®æ”¹å‘¢ï¼Ÿ å¯ä»¥ä½¿ç”¨toRefs é¦–å…ˆå¯¼å…¥toRefs 1import &#123;createApp,reactive,onMounted,onUnmounted,toRefs&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; ç„¶ååœ¨useMousePositionæ–¹æ³•ä¸­ï¼Œå°†è¿”å›çš„positionå¯¹è±¡,é€šè¿‡toRefså‡½æ•°åŒ…æ‹¬èµ·æ¥ã€‚ 1return toRefs(position) toRefså‡½æ•°ï¼Œå¯ä»¥å°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§è½¬æ¢æˆå“åº”å¼çš„ã€‚ ç°åœ¨ï¼Œé€šè¿‡æµè§ˆå™¨è¿›è¡Œæµ‹è¯•ï¼Œå‘ç°æ²¡æœ‰ä»»ä½•çš„é—®é¢˜äº†ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹toRefsçš„å·¥ä½œåŸç†ï¼Œé¦–å…ˆä¼ é€’ç»™toRefså‡½æ•°çš„å‚æ•°ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªå“åº”å¼çš„å¯¹è±¡(ä»£ç†çš„å¯¹è±¡)ï¼Œè€Œpositionå°±æ˜¯ä¸€ä¸ªé€šè¿‡reactiveå‡½æ•°å¤„ç†åçš„ä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€‚åœ¨toRefsæ–¹æ³•å†…éƒ¨é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œç„¶åä¼šéå†ä¼ é€’è¿‡æ¥çš„å“åº”å¼å¯¹è±¡å†…çš„æ‰€æœ‰å±æ€§ï¼ŒæŠŠå±æ€§çš„å€¼éƒ½è½¬æ¢æˆå“åº”å¼å¯¹è±¡ï¼Œç„¶åå†æŒ‚è½½åˆ°toRefså‡½æ•°å†…éƒ¨æ‰€åˆ›å»ºçš„è¿™ä¸ªæ–°çš„å¯¹è±¡ä¸Šï¼Œæœ€åè¿”å›ã€‚ toRefså‡½æ•°æ˜¯æŠŠreactiveè¿”å›çš„å¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œéƒ½è½¬æ¢æˆäº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å“åº”å¼å¯¹è±¡è¿›è¡Œè§£æ„çš„æ—¶å€™ï¼Œè§£æ„å‡ºçš„æ¯ä¸€ä¸ªå±æ€§éƒ½æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡æ˜¯å¼•ç”¨ ä¼ é€’çš„ï¼Œæ‰€ä»¥è§£æ„å‡ºçš„æ•°æ®ä¾ç„¶æ˜¯å“åº”å¼çš„ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬è§£æ„toRefsè¿”å›çš„å¯¹è±¡ï¼Œè§£æ„å‡ºæ¥çš„æ¯ä¸ªå±æ€§éƒ½æ˜¯å“åº”å¼çš„ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å…ˆçŸ¥é“toRefså‡½æ•°çš„ä½œç”¨å°±æ˜¯ï¼šå¯ä»¥å°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§è½¬æ¢æˆå“åº”å¼çš„ã€‚ åé¢è¿˜ä¼šç»§ç»­æ¢è®¨å®ƒçš„åº”ç”¨ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹refå‡½æ•°çš„åº”ç”¨ refå‡½æ•°çš„ä½œç”¨å°±æ˜¯æŠŠæ™®é€šæ•°æ®è½¬æ¢æˆå“åº”å¼æ•°æ®ã€‚ä¸reactiveä¸åŒçš„æ˜¯ï¼Œreactiveæ˜¯æŠŠä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆå“åº”å¼æ•°æ®ã€‚ refå¯ä»¥æŠŠä¸€ä¸ªåŸºæœ¬ç±»å‹çš„æ•°æ®åŒ…è£…æˆå“åº”å¼å¯¹è±¡ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨refå‡½æ•°å®ç°ä¸€ä¸ªè‡ªå¢çš„æ¡ˆä¾‹ã€‚ 123456789101112131415161718192021222324252627282930313233&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;button @click=&quot;add&quot;&gt;å¢åŠ &lt;/button&gt; &lt;span&gt;&#123;&#123;count&#125;&#125;&lt;/span&gt; &lt;/div&gt; &lt;script type=&quot;module&quot;&gt; import&#123;createApp,ref&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; function useCount()&#123; const count=ref(0) return &#123; count, add:()=&gt;&#123; count.value++ &#125; &#125; &#125; createApp(&#123; setup()&#123; return &#123; ...useCount() &#125; &#125; &#125;).mount(&#x27;#app&#x27;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¸‹é¢ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç åšä¸€ä¸ªè§£æï¼š é¦–å…ˆåœ¨æ¨¡æ¿ä¸­æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œä¸å±•ç¤ºæ•°å­—çš„æ’å€¼è¡¨è¾¾å¼ã€‚ ä¸‹é¢å¯¼å…¥createAppä¸refå‡½æ•°ã€‚ è™½ç„¶è¿™ä¸ªæ¡ˆä¾‹ä¸­çš„ä¸šåŠ¡éå¸¸çš„ç®€å•ï¼Œä½†æ˜¯è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜æ˜¯å•ç‹¬çš„å°†å…¶å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­useCountä¸­ã€‚ å¦‚æœï¼Œæˆ‘ä»¬å†™çš„æ˜¯å¦‚ä¸‹ä»£ç ï¼š 1const count=0 é‚£ä¹ˆï¼Œcountå°±æ˜¯ä¸€ä¸ªåŸºæœ¬çš„æ•°æ®ç±»å‹çš„å˜é‡ã€‚ ä½†æ˜¯ï¼Œå¦‚æœå†™æˆå¦‚ä¸‹çš„å½¢å¼ï¼š 1const count=ref(0) countå°±æ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­ä¼šæœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œè¯¥å±æ€§å­˜å‚¨çš„å°±æ˜¯å…·ä½“çš„å€¼ã€‚è¯¥å±æ€§ä¸­åŒ…å«äº†getter/setter. useCountæ–¹æ³•å°†countä¸addæ–¹æ³•è¿”å›ã€‚ åœ¨setupæ–¹æ³•ä¸­è°ƒç”¨useCountæ–¹æ³•ï¼Œå¹¶ä¸”å°†è¯¥æ–¹æ³•è¿”å›çš„å†…å®¹è¿›è¡Œè§£æ„ï¼Œæ³¨æ„ï¼šè¿™é‡Œè§£æ„å‡ºæ¥çš„countå°±æ˜¯ä¸€ä¸ªå“åº”å¼çš„å¯¹è±¡ã€‚ è€Œåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨countå“åº”å¼å¯¹è±¡çš„æ—¶å€™ï¼Œä¸éœ€è¦æ·»åŠ valueå±æ€§ã€‚å½“æˆ‘ä»¬å•å‡»â€œå¢åŠ â€æŒ‰é’®çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œaddæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸­è®©countä¸­çš„valueå±æ€§å€¼åŠ 1,ç”±äºcountæ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå®ƒå†…éƒ¨çš„å€¼å‘ç”Ÿäº†å˜åŒ–åï¼Œè§†å›¾å°±ä¼šé‡æ–°æ¸²æŸ“ï¼Œå±•ç¤ºæ–°çš„æ•°æ®ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹refå‡½æ•°çš„å·¥ä½œåŸç†ã€‚ æˆ‘ä»¬çŸ¥é“ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå­˜å‚¨çš„æ˜¯å€¼ã€‚æ‰€ä»¥å®ƒä¸å¯èƒ½æ˜¯å“åº”å¼æ•°æ®ï¼Œæˆ‘ä»¬çŸ¥é“å“åº”å¼æ•°æ®éœ€è¦é€šè¿‡getteræ”¶é›†ä¾èµ–(watcherå¯¹è±¡)ï¼Œé€šè¿‡setterè§¦å‘æ›´æ–°ï¼Œ å¦‚æœrefçš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå†…éƒ¨ä¼šè°ƒç”¨reactiveè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬ç»™refä¼ é€’çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå†…éƒ¨è°ƒç”¨çš„å°±æ˜¯reactive å¦‚æœrefçš„å‚æ•°æ˜¯ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å€¼ï¼Œä¾‹å¦‚æˆ‘ä»¬æ¡ˆä¾‹ä¸­ä¼ é€’çš„0ï¼Œé‚£ä¹ˆåœ¨refå†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­åªæœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œè¯¥valueå±æ€§å…·æœ‰getter/setter.é€šè¿‡getteræ”¶é›†ä¾èµ–(watcherå¯¹è±¡)ï¼Œé€šè¿‡setterè§¦å‘æ›´æ–°. ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„å“åº”å¼å‡½æ•°ã€‚ reactiveï¼šæŠŠä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆå“åº”å¼å¯¹è±¡ ref:æŠŠåŸºæœ¬ç±»å‹æ•°æ®è½¬æ¢æˆå“åº”å¼å¯¹è±¡ toRefsï¼šæŠŠä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§éƒ½è½¬æ¢æˆå“åº”å¼å¯¹è±¡ï¼Œè¯¥å‡½æ•°å¤„ç†reactiveè¿”å›çš„å¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥è¿›è¡Œè§£æ„çš„æ“ä½œã€‚ 4ã€ComputedComputedæ˜¯è®¡ç®—å±æ€§ï¼Œè®¡ç®—å±æ€§çš„ä½œç”¨å°±æ˜¯ç®€åŒ–æ¨¡æ¿ä¸­çš„ä»£ç ï¼Œå¯ä»¥ç¼“å­˜è®¡ç®—çš„ç»“æœï¼Œå½“æ•°æ®å˜åŒ–åæ‰ä¼šé‡æ–°è¿›è¡Œè®¡ç®—ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Computedçš„ä½¿ç”¨ã€‚ Computedæœ‰ä¸¤ç§ç”¨æ³• ç¬¬ä¸€ç§ç”¨æ³•ï¼š ç»™computedä¼ å…¥è·å–å€¼çš„å‡½æ•°ï¼Œå‡½æ•°å†…éƒ¨ä¾èµ–å“åº”å¼çš„æ•°æ®ï¼Œå½“ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–åï¼Œä¼šé‡æ–°æ‰§è¡Œè¯¥å‡½æ•°æ¥è·å–æ•°æ®ã€‚ computedè¿”å›çš„æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å“åº”å¼å¯¹è±¡ï¼Œç±»ä¼¼äºä½¿ç”¨refåˆ›å»ºçš„å¯¹è±¡ï¼Œåªæœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œè·å–è®¡ç®—å±æ€§çš„å€¼ï¼Œéœ€è¦é€šè¿‡valueå±æ€§æ¥è·å–ã€‚å¦‚æœæ¨¡æ¿ä¸­ä½¿ç”¨å¯ä»¥çœç•¥value. 1computed(()=&gt;count.value+1) ç¬¬äºŒç§ç”¨æ³•ï¼š computedçš„ç¬¬äºŒç§ç”¨æ³•æ˜¯ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å…·æœ‰getter/setter,computedæ–¹æ³•è¿”å›ä¸€ä¸ªä¸å¯å˜çš„å“åº”å¼å¯¹è±¡ï¼Œå½“è·å–å€¼çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œgetter,å½“è®¾ç½®å€¼çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œè¯¥å¯¹è±¡ä¸­çš„setter,åé¢æˆ‘ä»¬ä¼šæ¼”ç¤ºè¿™ç§ç”¨æ³• 1234567const count=ref(1)const plusOne=computed(&#123; get:()=&gt;count.value+1 set:val=&gt;&#123; count.value=val-1&#125;&#125;) ä¸‹é¢æˆ‘ä»¬å…ˆæ¥ä½¿ç”¨ç¬¬ä¸€ç§ç”¨æ³• ä¸‹é¢è¿™ä¸ªæ¡ˆä¾‹ï¼Œä¼šä½¿ç”¨computedæ¥è®¡ç®—å‡ºæœªå¤„ç†çš„ä»»åŠ¡çš„ä¸ªæ•°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;button @click=&quot;push&quot;&gt;æŒ‰é’®&lt;/button&gt; æœªå®Œæˆ&#123;&#123;activeCount&#125;&#125; &lt;/div&gt; &lt;script type=&quot;module&quot;&gt; import &#123;createApp,reactive,computed&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; const data=[ &#123;text:&#x27;çœ‹ä¹¦&#x27;,completed:false&#125;, &#123;text:&#x27;ç¡è§‰&#x27;,completed:false&#125;, &#123;text:&#x27;ç©æ¸¸æˆ&#x27;,completed:true&#125;, ] createApp(&#123; setup()&#123; //åœ¨computedå†…éƒ¨ä¾èµ–çš„å¯¹è±¡å¿…é¡»æ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ const todos=reactive(data) //computedè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åªæœ‰ä¸€ä¸ªvalueå±æ€§ const activeCount=computed(()=&gt;&#123; return todos.filter(item=&gt;!item.completed).length &#125;) //computedè¿”å›çš„æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å“åº”å¼å¯¹è±¡ï¼Œç±»ä¼¼äºä½¿ç”¨refåˆ›å»ºçš„å¯¹è±¡ï¼Œåªæœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œè·å–è®¡ç®—å±æ€§çš„å€¼ï¼Œéœ€è¦é€šè¿‡valueå±æ€§æ¥è·å–ã€‚å¦‚æœæ¨¡æ¿ä¸­ä½¿ç”¨å¯ä»¥çœç•¥value. // console.log(&#x27;activeCount===&#x27;,activeCount.value) return &#123; activeCount, push:()=&gt;&#123; todos.push(&#123; text:&#x27;æ‰“çƒ&#x27;,completed:false &#125;) &#125; &#125; &#125; &#125;).mount(&#x27;#app&#x27;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åœ¨setupå‡½æ•°çš„å†…éƒ¨ï¼Œæˆ‘ä»¬é€šè¿‡reactiveå‡½æ•°å°†dataå¯¹è±¡è½¬æ¢æˆäº†å“åº”å¼çš„å¯¹è±¡ï¼Œtodoså°±æ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€‚ä¸‹é¢é€šè¿‡è®¡ç®—å±æ€§å¯¹å“åº”å¼å¯¹è±¡todosä¸­çš„å†…å®¹è¿›è¡Œè®¡ç®—ï¼Œè®¡ç®—å‡ºæœªå®Œæˆçš„ä»»åŠ¡çš„ä¸ªæ•°ï¼Œå¹¶ä¸”è¿”å›ã€‚å°†è¿”å›çš„æ•°é‡ä¿å­˜åˆ°äº†activeCountä¸­ï¼Œç„¶åå°†activeCountè¿”å›,è¿™æ ·åœ¨æ¨¡æ¿ä¸­å°±å¯ä»¥é€šè¿‡å·®å€¼è¡¨è¾¾å¼æ¥ä½¿ç”¨activeCount.åŒæ—¶ï¼Œå½“å•å‡»äº†æŒ‰é’®ä»¥åï¼Œä¼šå‘todoså“åº”å¼å¯¹è±¡ä¸­æ·»åŠ æ•°æ®ï¼Œè¿™æ—¶ä¼šé‡æ–°æ‰§è¡Œè®¡ç®—å±æ€§ï¼Œè®¡ç®—æ²¡æœ‰å®Œæˆçš„ä»»åŠ¡æ•°é‡ã€‚ 5ã€Watchæˆ‘ä»¬å¯ä»¥åœ¨setupå‡½æ•°ä¸­ä½¿ç”¨watchå‡½æ•°åˆ›å»ºä¸€ä¸ªä¾¦å¬å™¨ã€‚ç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œç„¶åæ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¯ä»¥è·å–åˆ°ç›‘å¬çš„æ•°æ®çš„æ–°å€¼ä¸æ—§å€¼ã€‚ watchçš„ä¸‰ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦ç›‘å¬çš„æ•°æ® ç¬¬äºŒä¸ªå‚æ•°ï¼šç›‘å¬åˆ°çš„æ•°æ®å˜åŒ–åæ‰§è¡Œçš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯æ–°å€¼å’Œæ—§å€¼ã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šé€‰é¡¹å¯¹è±¡ï¼Œdeep(æ·±åº¦ç›‘å¬)å’Œimmediateï¼ˆç«‹å³æ‰§è¡Œï¼‰ Watchå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½œç”¨æ˜¯ç”¨æ¥å–æ¶ˆç›‘å¬ã€‚ watchä¸ä»¥å‰çš„this.$watchçš„ä½¿ç”¨æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œä¸ä¸€æ ·çš„æ˜¯watchç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å­—ç¬¦ä¸²(this.$watchç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²)ï¼Œè€Œæ˜¯refå’Œreactiveè¿”å›çš„å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&#x27;app&#x27;&gt; &lt;p&gt; &lt;input v-model=&quot;question&quot;&gt; &lt;/p&gt; &lt;p&gt; &#123;&#123;answer&#125;&#125; &lt;/p&gt; &lt;/div&gt; &lt;script type=&quot;module&quot;&gt; import&#123;createApp,ref,watch&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; createApp(&#123; setup()&#123; const question=ref(&#x27;&#x27;) const answer=ref(&#x27;&#x27;) watch(question,async(newValue,oldValue)=&gt;&#123; const response=await fetch(&#x27;https://www.yesno.wtf/api&#x27;) const data=await response.json() answer.value=data.answer &#125;) return &#123; question, answer &#125; &#125; &#125;).mount(&#x27;#app&#x27;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œsetupå‡½æ•°å†…ï¼Œå®šä¹‰ä¸¤ä¸ªå“åº”å¼å¯¹è±¡åˆ†åˆ«æ˜¯questionä¸answer,è¿™ä¸¤é¡¹çš„å†…å®¹éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥é€šè¿‡refæ¥åˆ›å»ºã€‚ä½¿ç”¨watchæ¥ç›‘å¬questçš„å˜åŒ–ï¼Œç”±äºquestionä¸æ–‡æœ¬æ¡†è¿›è¡Œäº†åŒå‘ç»‘å®šï¼Œå½“åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥å†…å®¹åï¼Œquestionçš„å€¼ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå‘ç”Ÿå˜åŒ–åï¼Œå°±ä¼šæ‰§è¡Œwatchçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯å›è°ƒå‡½æ•°ã€‚è¯¥å›è°ƒå‡½æ•°å†…ï¼Œå‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œæ³¨æ„è¿™é‡Œä½¿ç”¨äº†fetchæ–¹æ³•ï¼Œå‘é€è¯·æ±‚ï¼Œè¯¥æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨äº†await,ä¸‹é¢è°ƒç”¨jsonæ–¹æ³•è·å–jsonå¯¹è±¡ï¼Œæ³¨æ„è¯¥æ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯promise,æ‰€ä»¥è¿™é‡Œä¹Ÿä½¿ç”¨äº†await,æœ€åæŠŠè·å–åˆ°çš„æ•°æ®ç»™äº†answerä¸­çš„valueå±æ€§ã€‚ 123456789101112131415161718192021222324252627282930&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;p&gt; &lt;input v-model=&quot;question&quot;&gt; &lt;/p&gt; &lt;/div&gt; &lt;script type=&quot;module&quot;&gt; import &#123;createApp,ref,watch&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; createApp(&#123; setup()&#123; const question =ref(&#x27;&#x27;) watch(question,(newValue,oldValue)=&gt;&#123; console.log(&#x27;newValue==&#x27;,newValue) console.log(&#x27;oldValue==&#x27;,oldValue) &#125;) return&#123; question &#125; &#125; &#125;).mount(&#x27;#app&#x27;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 6ã€WatchEffectåœ¨Vue3ä¸­è¿˜æä¾›äº†ä¸€ä¸ªæ–°çš„å‡½æ•°WatchEffect. WatchEffectæ˜¯Watchå‡½æ•°çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œä¹Ÿç”¨æ¥ç›‘è§†æ•°æ®çš„å˜åŒ–ï¼ŒWatchEffectæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç›‘å¬å‡½æ•°å†…å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡è¯¥å‡½æ•°ï¼Œå½“æ•°æ®å‘ç”Ÿäº†å˜åŒ–åï¼Œä¼šé‡æ–°è¿è¡Œè¯¥å‡½æ•°ã€‚è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªå–æ¶ˆç›‘å¬çš„å‡½æ•°ã€‚ 12345678910111213141516171819202122232425262728293031323334&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;button @click=&quot;add&quot;&gt;add&lt;/button&gt; &lt;button @click=&quot;stop&quot;&gt;stop&lt;/button&gt; &lt;br/&gt; &#123;&#123;count&#125;&#125; &lt;/div&gt; &lt;script type=&#x27;module&#x27;&gt; import &#123;createApp,ref,watchEffect&#125; from &#x27;./node_modules/vue/dist/vue.esm-browser.js&#x27; createApp(&#123; setup()&#123; const count=ref(0) const stop=watchEffect(()=&gt;&#123; console.log(count.value) &#125;) return &#123; count, stop, add:()=&gt;&#123; count.value++ &#125; &#125; &#125; &#125;).mount(&#x27;#app&#x27;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åœ¨setupå‡½æ•°ä¸­ï¼Œå®šä¹‰å“åº”å¼å¯¹è±¡count,åŒæ—¶ä½¿ç”¨watchEffectå‡½æ•°ç›‘å¬countçš„å˜åŒ–ï¼Œå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ‰“å¼€é¡µé¢çš„æ—¶å€™ï¼ŒwatchEffectä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºçš„å€¼ä¸º0,watchEffectè¿”å›çš„æ˜¯ä¸€ä¸ªå–æ¶ˆç›‘å¬çš„å‡½æ•°ï¼Œè¿™é‡Œå®šä¹‰stopæ¥æ¥æ”¶ã€‚ ä¸‹é¢å°†count,stop,addå‡½æ•°è¿”å›ï¼Œè¿™æ ·åœ¨æ¨¡æ¿ä¸­å°±å¯ä»¥ä½¿ç”¨äº†ã€‚å½“ç”¨æˆ·å•å‡»addæŒ‰é’®çš„æ—¶å€™ï¼Œcountçš„å€¼ç´¯åŠ (æ³¨æ„ä¿®æ”¹çš„æ˜¯countä¸­çš„valueå±æ€§çš„å€¼)ï¼Œè¿™æ—¶watchEffectå‡½æ•°æ‰§è¡Œï¼Œåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æ‰“å°countçš„å€¼ã€‚å¦‚æœï¼Œå•å‡»äº†stopæŒ‰é’®ï¼Œå†æ¬¡å•å‡»addçš„æŒ‰é’®ï¼Œcountçš„å€¼è¿˜ä¼šè¿›è¡Œç´¯åŠ ï¼Œä½†æ˜¯watchEffectå‡½æ•°ä¸æ‰§è¡Œï¼Œé‚£ä¹ˆæ§åˆ¶å°ä¸­ä¸ä¼šæ‰“å°countçš„å€¼ï¼Œä½†æ˜¯é¡µé¢ä¸­countçš„å€¼ä¸æ–­çš„å˜åŒ–ã€‚ ä¸‰ã€ToDoListæ¡ˆä¾‹æ•´ä¸ªæ¡ˆä¾‹å®ç°çš„åŠŸèƒ½å¦‚ä¸‹ï¼š æ·»åŠ ä»»åŠ¡ åˆ é™¤ä»»åŠ¡ ç¼–è¾‘ä»»åŠ¡ åˆ‡æ¢ä»»åŠ¡ å­˜å‚¨ä»»åŠ¡ï¼Œå®ç°æŒä¹…åŒ– 1ã€é¡¹ç›®ç»“æ„ä»è¿™ä¸ªæ¡ˆä¾‹å¼€å§‹ï¼Œæˆ‘ä»¬ä½¿ç”¨Vueçš„è„šæ‰‹æ¶æ¥åˆ›å»ºé¡¹ç›®ï¼Œé¦–å…ˆéœ€è¦å‡çº§Vue-cli,å‡çº§åˆ°4.5ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨vue3.0 å‡çº§vue-cli 1npm install -g @vue/cli æŸ¥çœ‹ç‰ˆæœ¬ï¼š 1vue -V é¡¹ç›®åˆ›å»º 1vue create todolist åœ¨åˆ›å»ºçš„æ—¶å€™é€‰æ‹©Vue3.0 åœ¨App.vueæ–‡ä»¶ä¸­ï¼Œæ„å»ºå‡ºåŸºæœ¬çš„ç»“æ„ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263&lt;template&gt; &lt;section id=&quot;app&quot; class=&quot;todoapp&quot;&gt; &lt;header class=&quot;header&quot;&gt; &lt;h1&gt;todos&lt;/h1&gt; &lt;input class=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot; autocomplete=&quot;off&quot; autofocus /&gt; &lt;/header&gt; &lt;section class=&quot;main&quot;&gt; &lt;input id=&quot;toggle-all&quot; class=&quot;toggle-all&quot; type=&quot;checkbox&quot; /&gt; &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt; &lt;ul class=&quot;todo-list&quot;&gt; &lt;li&gt; &lt;div class=&quot;view&quot;&gt; &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot; /&gt; &lt;label&gt;æµ‹è¯•æ•°æ®&lt;/label&gt; &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt; &lt;/div&gt; &lt;input class=&quot;edit&quot; type=&quot;text&quot; /&gt; &lt;/li&gt; &lt;li&gt; &lt;div class=&quot;view&quot;&gt; &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot; /&gt; &lt;label&gt;æµ‹è¯•æ•°æ®&lt;/label&gt; &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt; &lt;/div&gt; &lt;input class=&quot;edit&quot; type=&quot;text&quot; /&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/section&gt; &lt;footer class=&quot;footer&quot;&gt; &lt;span class=&quot;todo-count&quot;&gt; &lt;strong&gt;1&lt;/strong&gt; item left &lt;/span&gt; &lt;ul class=&quot;filters&quot;&gt; &lt;li&gt;&lt;a href=&quot;#/all&quot;&gt;All&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#/active&quot;&gt;Active&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#/completed&quot;&gt;Completed&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;button class=&quot;clear-completed&quot;&gt; Clear completed &lt;/button&gt; &lt;/footer&gt; &lt;/section&gt; &lt;footer class=&quot;info&quot;&gt; &lt;p&gt;Double-click to edit a todo&lt;/p&gt; &lt;/footer&gt;&lt;/template&gt;&lt;script&gt;import &quot;./assets/index.css&quot;;export default &#123; name: &quot;App&quot;, components: &#123;&#125;,&#125;;&lt;/script&gt;&lt;style&gt;&lt;/style&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¯¼å…¥äº†æ ·å¼ã€‚ 2ã€æ·»åŠ ä»»åŠ¡åœ¨æ¨¡æ¿çš„headerçš„å†…ï¼Œç»™æ–‡æœ¬æ¡†æ·»åŠ v-modelå®ç°åŒå‘ç»‘å®šï¼ŒåŒæ—¶ä¸ºå…¶æ·»åŠ ä¸€ä¸ªenteräº‹ä»¶ï¼Œè¯¥äº‹ä»¶è§¦å‘ï¼Œè¡¨æ˜ç”¨æˆ·æŒ‰ä¸‹äº†é”®ç›˜ä¸Šçš„å›è½¦é”®ï¼Œé‚£ä¹ˆè¿™é‡Œå°±éœ€è¦å°†ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥çš„å†…å®¹ä¿å­˜åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚ 1234567891011&lt;header class=&quot;header&quot;&gt; &lt;h1&gt;todos&lt;/h1&gt; &lt;input class=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot; autocomplete=&quot;off&quot; autofocus v-model=&quot;input&quot; @keyup.enter=&quot;addTodo&quot; /&gt; &lt;/header&gt; ä¸‹é¢ï¼Œå°†æ·»åŠ ä»»åŠ¡çš„ä¸šåŠ¡å•ç‹¬çš„å°è£…åˆ°ä¸€å‡½æ•°ä¸­å¤„ç†ã€‚ 12345678910111213141516171819202122232425262728293031&lt;script&gt;import &#123; ref &#125; from &quot;vue&quot;;import &quot;./assets/index.css&quot;;//1ã€æ·»åŠ ä»»åŠ¡const useAdd = (todos) =&gt; &#123; const input = ref(&quot;&quot;); const addTodo = () =&gt; &#123; const text = input.value &amp;&amp; input.value.trim(); if (text.length === 0) return; todos.value.unshift(&#123; text, completed: false, &#125;); input.value=&quot;&quot; &#125;; return &#123; input, addTodo, &#125;;&#125;;export default &#123; name: &quot;App&quot;, setup() &#123; const todos = ref([]); return &#123; ...useAdd(todos), &#125;; &#125;,&#125;;&lt;/script&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œåˆ›å»ºäº†useAddè¿™ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å®Œæˆä¿å­˜ä»»åŠ¡æ•°æ®ï¼Œæ‰€ä»¥è°ƒç”¨è¯¥å‡½æ•°çš„æ—¶å€™ï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªæ•°ç»„ã€‚ åœ¨è¯¥å‡½æ•°å†…ï¼Œåˆ›å»ºinputè¿™ä¸ªå“åº”å¼å¯¹è±¡ï¼ˆè¿™é‡Œinputçš„å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä½¿ç”¨refå‡½æ•°åˆ›å»ºå“åº”å¼å¯¹è±¡ï¼Œåœ¨è¿™é‡Œè¾“å…¥refï¼Œç„¶åæŒ‰ä¸‹tabé”®ï¼Œä¼šè‡ªåŠ¨å¯¼å…¥refå‡½æ•°ï¼‰ï¼Œæœ€åè¿”å›ï¼Œç„¶ååœ¨setup å‡½æ•°ä¸­ä¼šå°†å…¶è§£æ„å‡ºæ¥ï¼Œè¿™æ ·æ¨¡æ¿ä¸­å°±å¯ä»¥ä½¿ç”¨inputè¿™ä¸ªå“åº”å¼å¯¹è±¡ï¼Œè¯¥å“åº”å¼å¯¹è±¡ä¸­å­˜å‚¨äº†ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥çš„å€¼ã€‚ åœ¨userAddæ–¹æ³•å†…ï¼Œåˆ›å»ºaddTodoæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è·å–æ–‡æœ¬æ¡†ä¸­è¾“å…¥çš„å€¼ï¼Œå¹¶ä¸”æ„å»ºå‡ºä¸€ä¸ªå¯¹è±¡ï¼Œæ’å…¥åˆ°todosè¿™ä¸ªæ•°ç»„ä¸­ï¼Œè¿™é‡Œè¦æ±‚æ–°è¾“å…¥çš„æ•°æ®åœ¨æœ€å¼€å§‹è¿›è¡Œå±•ç¤ºï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨äº†unshifå‡½æ•°æ¥æ’å…¥å¯¹è±¡ã€‚æœ€åè¿”å›ã€‚ åœ¨setupå‡½æ•°ä¸­ï¼Œå¯¹useAddå‡½æ•°è¿”å›çš„ç»“æœè¿›è¡Œè§£æ„ï¼Œç„¶åè¿”å›ï¼Œè¿™æ ·åœ¨æ¨¡æ¿ä¸­å°±å¯ä»¥ä½¿ç”¨input å’ŒaddTodoæ–¹æ³•ã€‚å½“ç„¶è¿™é‡Œè°ƒç”¨useAddæ–¹æ³•çš„æ—¶å€™ï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªæ•°ç»„ï¼Œæ³¨æ„è¿™ä¸ªæ•°ç»„ä¹Ÿæ˜¯å“åº”å¼ï¼Œå› ä¸ºæˆ‘ä»¬æŠŠæ•°æ®æ·»åŠ åˆ°è¯¥æ•°ç»„ä»¥åï¼Œåˆ—è¡¨è¦é‡æ–°æ¸²æŸ“å±•ç¤ºæœ€æ–°çš„æ•°æ®ï¼Œåœ¨æœ€å¼€å§‹åˆ›å»ºæ•°ç»„çš„æ—¶å€™ï¼Œé»˜è®¤å°±æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚ åŒæ—¶ï¼Œè¿˜éœ€è¦æ³¨æ„åœ¨addTodoæ–¹æ³•ä¸­ï¼Œä½¿ç”¨çš„todosæ˜¯ä¸€ä¸ªå“åº”å¼çš„å¯¹è±¡(è¿™é‡Œæ˜¯é€šè¿‡ref([])åˆ›å»ºå‡ºæ¥ï¼Œç„¶åä¼ é€’åˆ°äº†addTodoæ–¹æ³•ä¸­)ï¼Œæƒ³ä½¿ç”¨å®ƒé‡Œé¢çš„å€¼ï¼Œéœ€è¦é€šè¿‡valueå±æ€§æ‰èƒ½è·å–åˆ°ï¼Œè¿™æ—¶è·å–åˆ°çš„æ‰æ˜¯çœŸæ­£çš„æ•°ç»„ã€‚ 1234todos.value.unshift(&#123; text, completed: false, &#125;); ä¸‹é¢ï¼ŒæŠŠtodosä¸­çš„æ•°æ®å±•ç¤ºå‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯åœ¨æ¨¡æ¿ä¸­éå†todosè¿™ä¸ªæ•°ç»„ã€‚ æ‰€ä»¥è¿™é‡Œéœ€è¦å°†todosè¿™ä¸ªæ•°ç»„ï¼Œåœ¨setupå‡½æ•°ä¸­è¿”å›ã€‚ 1234567setup() &#123; const todos = ref([]); return &#123; ...useAdd(todos), todos, &#125;; &#125;, ä¸‹é¢å¯¹åˆ—è¡¨è¿›è¡Œå¾ªç¯éå† 12345678910&lt;ul class=&quot;todo-list&quot;&gt; &lt;li v-for=&quot;item in todos&quot; :key=&quot;item.text&quot;&gt;//è¿™é‡Œå¯ä»¥å†™æˆitem &lt;div class=&quot;view&quot;&gt; &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot; /&gt; &lt;label&gt;&#123;&#123; item.text &#125;&#125;&lt;/label&gt; &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt; &lt;/div&gt; &lt;input class=&quot;edit&quot; type=&quot;text&quot; /&gt; &lt;/li&gt; &lt;/ul&gt; 3ã€åˆ é™¤ä»»åŠ¡åœ¨åˆ—è¡¨ä¸­æ‰¾åˆ°åˆ é™¤æŒ‰é’®ï¼Œå¹¶ä¸”ä¸ºå…¶æ·»åŠ å•å‡»äº‹ä»¶ï¼Œäº‹ä»¶è§¦å‘åè°ƒç”¨removeæ–¹æ³•ï¼Œç»™è¯¥æ–¹æ³•ä¼ é€’ä¼ é€’çš„æ˜¯è¦åˆ é™¤çš„ä»»åŠ¡ã€‚ 12345678910&lt;ul class=&quot;todo-list&quot;&gt; &lt;li v-for=&quot;item in todos&quot; :key=&quot;item.text&quot;&gt; &lt;div class=&quot;view&quot;&gt; &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot; /&gt; &lt;label&gt;&#123;&#123; item.text &#125;&#125;&lt;/label&gt; &lt;button class=&quot;destroy&quot; @click=&quot;remove(todo)&quot;&gt;&lt;/button&gt; &lt;/div&gt; &lt;input class=&quot;edit&quot; type=&quot;text&quot; /&gt; &lt;/li&gt; &lt;/ul&gt; å®šä¹‰useRemoveæ–¹æ³•ï¼Œå½“è°ƒç”¨è¯¥æ–¹æ³•çš„æ—¶å€™ï¼Œä¼ é€’todosæ•°ç»„ï¼Œç„¶ååœ¨è¯¥æ–¹æ³•ä¸­å®ç°removeæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°±æ˜¯æ ¹æ®ä¼ é€’è¿‡æ¥çš„è¦åˆ é™¤çš„todoï¼Œä»æ•°ç»„todosä¸­ï¼Œ æ‰¾åˆ°å¯¹åº”çš„ç´¢å¼•å€¼ï¼ˆæ³¨æ„todosæ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œtodos.valueæ‰æ˜¯çœŸæ­£çš„æ•°ç»„ï¼‰ï¼Œç„¶åè°ƒç”¨spliceæ–¹æ³•å°†å…¶ä»todosä¸­åˆ é™¤ã€‚ æœ€åè¿”å›removeè¿™ä¸ªæ–¹æ³•ã€‚ 12345678910// 2. åˆ é™¤ä»»åŠ¡const useRemove = (todos) =&gt; &#123; const remove = (todo) =&gt; &#123; const index = todos.value.indexOf(todo); todos.value.splice(index, 1); &#125;; return &#123; remove, &#125;;&#125;; ä¸‹é¢å›åˆ°setupè¿™ä¸ªå‡½æ•°ä¸­ï¼Œè°ƒç”¨useRemoveå‡½æ•°ï¼Œä¼ é€’todosè¿™ä¸ªå“åº”å¼å¯¹è±¡ï¼Œç„¶åå°†useRomoveå‡½æ•°çš„è¿”å›å€¼è§£æ„ï¼Œè§£æ„å‡ºæ¥çš„å°±æ˜¯removeå‡½æ•°ï¼Œè¿™æ ·åœ¨æ¨¡æ¿ä¸­å°±å¯ä»¥ä½¿ç”¨äº†ã€‚ 12345678setup() &#123; const todos = ref([]); return &#123; ...useAdd(todos), ...useRemove(todos), todos, &#125;;&#125;, 4ã€ç¼–è¾‘ä»»åŠ¡æ•´ä¸ªç¼–è¾‘æ“ä½œï¼Œè¦å®Œæˆçš„åŠŸèƒ½å¦‚ä¸‹ï¼š åŒå‡»ä»»åŠ¡é¡¹ï¼Œå±•ç¤ºç¼–è¾‘æ–‡æœ¬æ¡† æŒ‰å›è½¦é”®æˆ–è€…ç¼–è¾‘æ–‡æœ¬æ¡†å¤±å»ç„¦ç‚¹ï¼Œä¿®æ”¹æ•°æ® æŒ‰ä¸‹escé”®å–æ¶ˆç¼–è¾‘æ“ä½œ æŠŠç¼–è¾‘æ–‡æœ¬æ¡†å†…å®¹æ¸…ç©ºï¼Œç„¶åæŒ‰ä¸‹å›è½¦é”®ï¼Œåˆ é™¤è¿™ä¸€é¡¹ æ˜¾ç¤ºç¼–è¾‘æ–‡æœ¬æ¡†çš„æ—¶å€™è·å–ç„¦ç‚¹ ä¸‹é¢åˆ›å»ºç¼–è¾‘å‡½æ•°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041// 3ã€ç¼–è¾‘ä»»åŠ¡const useEdit = (remove) =&gt; &#123; //å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå­˜å‚¨è¦ç¼–è¾‘çš„ä»»åŠ¡é¡¹ï¼Œå½“å–æ¶ˆç¼–è¾‘çš„æ—¶å€™ï¼Œå¯ä»¥è¿›è¡Œè¿˜åŸã€‚ä¸éœ€è¦æ˜¯å“åº”å¼å¯¹è±¡ let beforeEditingText = &quot;&quot;; //å®šä¹‰ä¸€ä¸ªå¸¸é‡ï¼Œè®°å½•å½“å‰æ˜¯å¦ä¸ºç¼–è¾‘çŠ¶æ€ï¼Œå®ƒæ˜¯å“åº”å¼çš„ï¼Œå®ƒçš„å€¼çš„æ”¹å˜è¦æ§åˆ¶é¡µé¢ä¸­æ–‡æœ¬æ¡†çš„æ˜¾ç¤ºä¸éšè— const editingTodo = ref(null); //é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰è¦ç¼–è¾‘çš„æ•°æ® //editTodoæ–¹æ³•è®°å½•è¦ç¼–è¾‘çš„ä»»åŠ¡çš„æ–‡ä½“ï¼Œä»¥åŠè¦ç¼–è¾‘çš„çŠ¶æ€ //å‚æ•°todoå°±æ˜¯å½“å‰è¦ç¼–è¾‘çš„ä»»åŠ¡å¯¹è±¡ const editTodo = (todo) =&gt; &#123; beforeEditingText = todo.text; //editingTodoæ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œè¿™é‡Œéœ€è¦è°ƒç”¨valueå±æ€§ editingTodo.value = todo; &#125;; //å®ç°æŒ‰ä¸‹å›è½¦æˆ–è€…å¤±å»ç„¦ç‚¹åï¼Œä¿®æ”¹æ•°æ®çš„å‡½æ•°ï¼Œå‚æ•°ä¸ºè¦ç¼–è¾‘çš„ä»»åŠ¡å¯¹è±¡ const doneEdit = (todo) =&gt; &#123; //åˆ¤æ–­æ˜¯å¦ä¸ºç¼–è¾‘çš„çŠ¶æ€ï¼Œå¦‚æœeditingTodoä¸­æ²¡æœ‰å€¼ï¼Œè¡¨ç¤ºæ²¡æœ‰å¤„äºç¼–è¾‘çŠ¶æ€ï¼Œç›´æ¥è¿”å› if (!editingTodo.value) return; //è·å–åˆ°è¦ç¼–è¾‘çš„ä»»åŠ¡çš„æ–‡æœ¬æ•°æ®ï¼Œå»æ‰è¦ç¼–è¾‘çš„æ–‡æœ¬çš„å‰åç©ºæ ¼ todo.text = todo.text.trim(); //å¦‚æœæŒ‰ä¸‹å›è½¦é”®åï¼Œå‘ç°è¦ç¼–è¾‘çš„ä»»åŠ¡å¯¹è±¡ä¸­æ²¡æœ‰æ•°æ®ï¼Œè¡¨æ˜æ˜¯æŠŠå½“å‰è¦ç¼–è¾‘çš„ä»»åŠ¡å¯¹è±¡åˆ é™¤ã€‚ if (!todo.text) &#123; remove(todo); //åœ¨è°ƒç”¨useEditå‡½æ•°çš„æ—¶å€™å°†removeä¼ é€’è¿‡æ¥ã€‚ &#125; //ä¿®æ”¹å½“å‰çš„çŠ¶æ€ï¼Œç¼–è¾‘å®Œæˆåï¼ŒçŠ¶æ€å˜ä¸ºéç¼–è¾‘çŠ¶æ€ã€‚ editingTodo.value = null; &#125;; //å®šä¹‰å–æ¶ˆç¼–è¾‘çš„å‡½æ•° const cancelEdit = (todo) =&gt; &#123; //å°†editingTodoçš„å€¼è®¾ç½®ä¸ºnull, editingTodo.value = null; //è®©todoä¸­çš„textçš„å€¼è¿˜åŸä¸ºåŸæœ‰çš„å€¼ã€‚ todo.text = beforeEditingText; &#125;; return &#123; editingTodo, editTodo, doneEdit, cancelEdit, &#125;;&#125;; ä¸‹é¢ï¼Œåœ¨setupå‡½æ•°ä¸­å°†useEditæ–¹æ³•çš„è¿”å›å†…å®¹è§£æ„å‡ºæ¥ï¼Œè¿™æ ·åœ¨æ¨¡æ¿ä¸­å°±å¯ä»¥ä½¿ç”¨äº†ã€‚å½“ç„¶åœ¨è°ƒç”¨useEditæ–¹æ³•çš„æ—¶å€™ï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªremvoeå‡½æ•°ï¼Œè€Œè¯¥å‡½æ•°æ˜¯useRemoveæ–¹æ³•è§£æ„å‡ºæ¥çš„ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åœ¨returnè¿”å›ä¹‹å‰ï¼Œå…ˆæŠŠuseRemoveè¿”å›çš„removeè§£æ„å‡ºæ¥ï¼Œç„¶åä¼ é€’ç»™useEditæ–¹æ³•ï¼ŒåŒæ—¶removeæ–¹æ³•ä¹Ÿè¦è¿”å›ï¼Œå› ä¸ºåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨åˆ°äº†è¯¥æ–¹æ³•ã€‚ 12345678910111213export default &#123; name: &quot;App&quot;, setup() &#123; const todos = ref([]); const &#123; remove &#125; = useRemove(todos); return &#123; ...useAdd(todos), ...useEdit(remove), remove, todos, &#125;; &#125;,&#125;; ä¸‹é¢è¦å¤„ç†çš„å°±æ˜¯æ¨¡æ¿çš„å†…å®¹äº†ã€‚ 123456789101112131415161718192021&lt;ul class=&quot;todo-list&quot;&gt; &lt;li v-for=&quot;item in todos&quot; :key=&quot;item.text&quot; :class=&quot;&#123; editing: item === editingTodo &#125;&quot; &gt; &lt;div class=&quot;view&quot;&gt; &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot; /&gt; &lt;label @dblclick=&quot;editTodo(item)&quot;&gt;&#123;&#123; item.text &#125;&#125;&lt;/label&gt; &lt;button class=&quot;destroy&quot; @click=&quot;remove(item)&quot;&gt;&lt;/button&gt; &lt;/div&gt; &lt;input class=&quot;edit&quot; type=&quot;text&quot; v-model=&quot;item.text&quot; @keyup.enter=&quot;doneEdit(item)&quot; @blur=&quot;doneEdit(item)&quot; @keyup.esc=&quot;cancelEdit(item)&quot; /&gt; &lt;/li&gt; &lt;/ul&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç»™liæ·»åŠ äº†ä¸€ä¸ªç±»æ ·å¼ï¼Œediting,å¦‚æœå½“å‰çš„itemä¸editingTodoç›¸ç­‰ï¼Œè¡¨æ˜æ˜¯å½“å‰çš„è¿™ä¸ªä»»åŠ¡å¤„äºç¼–è¾‘çŠ¶æ€ï¼Œæ‰€ä»¥è¦æ˜¾ç¤ºæ–‡æœ¬æ¡†ã€‚ è¿™é‡Œæˆ‘ä»¬ç»™inputæ–‡æœ¬æ¡†æ·»åŠ äº†v-model,è¿™æ ·æ–‡æœ¬æ¡†ä¸­ä¼šå±•ç¤ºè¦ç¼–è¾‘çš„æ•°æ®ï¼Œå¦‚æœåœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥äº†æ–°æ•°æ®item.textä¸­çš„å€¼ä¸ºæ–°æ•°æ®ï¼Œï¼Œæ·»åŠ äº†@key.enteräº‹ä»¶ï¼ŒæŒ‰ä¸‹å›è½¦é”®è¯¥äº‹ä»¶è§¦å‘è°ƒç”¨doneEditæ–¹æ³•å®Œæˆæ›´æ–°ï¼Œè¿™æ—¶æŠŠå½“å‰çš„æ•°æ®é¡¹ä¼ é€’åˆ°äº†doneEditæ–¹æ³•ä¸­ï¼Œè¯¥æ–¹æ³•ä¸­ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹è¯­å¥ 1todo.text = todo.text.trim(); æŠŠæ•°æ®ä¸­çš„ç©ºæ ¼å»æ‰åæœ‰èµ‹å€¼ç»™äº†è‡ªå·±,ä¹Ÿå°±æ˜¯todo.text,ç„¶åï¼Œæ‰§è¡Œ 1editingTodo.value = null; è¿™æ—¶å€™ï¼Œä¸ºéç¼–è¾‘çŠ¶æ€ï¼Œä¸åœ¨æ˜¾ç¤ºæ–‡æœ¬æ¡†ï¼Œè€Œæ˜¾ç¤ºdiv,è€Œdivä¸­çš„labelä¸­å±•ç¤ºçš„æ•°æ®ä¸ºä¿®æ”¹åçš„æ•°æ®ã€‚ 1@blur=&quot;doneEdit(item)&quot; å¤±å»ç„¦ç‚¹çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯è°ƒç”¨doneEditæ–¹æ³•ã€‚ æŒ‰ä¸‹escé”®çš„æ—¶å€™ï¼Œæ‰§è¡ŒcancelEditæ–¹æ³•ï¼Œæ˜¾ç¤ºdivä¸­çš„å†…å®¹ä¸ï¼Œä¸åœ¨å±•ç¤ºæ–‡æœ¬æ¡†ï¼ŒåŒæ—¶å†…å®¹è¿˜æ˜¯åŸæ¥çš„å†…å®¹æ•°æ®ã€‚ ç»™divä¸­çš„labelæ·»åŠ åŒå‡»äº‹ä»¶ã€‚ 1&lt;label @dblclick=&quot;editTodo(item)&quot;&gt;&#123;&#123; item.text &#125;&#125;&lt;/label&gt; ç°åœ¨ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™å‡ºç°äº†ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå½“æˆ‘ä»¬åŒå‡»æ•°æ®é¡¹çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯labelæ ‡ç­¾çš„æ—¶å€™ï¼Œæ–‡æœ¬æ¡†å¯ä»¥å±•ç¤ºå‡ºæ¥ï¼Œä½†æ˜¯æ²¡æœ‰ç„¦ç‚¹ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬åé¢è§£å†³ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹å¦å®Œä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åŒå‡»ä»¥åï¼Œå‡ºç°æ–‡æœ¬æ¡†ï¼Œç„¶åå•å‡»ä¸€ä¸‹æœ‰ç„¦ç‚¹äº†ï¼Œç„¶åè¾“å…¥å†…å®¹ï¼Œå‘ç°ç„¦ç‚¹åˆæ²¡æœ‰äº†ã€‚ è¿™æ—¶ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ åŸå› æ˜¯liçš„keyçš„é—®é¢˜ 12345&lt;li v-for=&quot;item in todos&quot; :key=&quot;item.text&quot; :class=&quot;&#123; editing: item === editingTodo &#125;&quot; &gt; ä¸Šé¢çš„ä»£ç ä¸­keyç»‘å®šäº†item.text ç„¶åæ–‡æœ¬æ¡†ä¹Ÿç»‘å®šäº†item.text(v-modelç»‘å®šäº†item.text) 12345678&lt;input class=&quot;edit&quot; type=&quot;text&quot; v-model=&quot;item.text&quot; @key.enter=&quot;doneEdit(item)&quot; @blur=&quot;doneEdit(item)&quot; @keyup.esc=&quot;cancelEdit(item)&quot; /&gt; å½“æˆ‘ä»¬åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥å€¼çš„æ—¶å€™item.textçš„å€¼å‘ç”Ÿäº†å˜åŒ–ã€‚å½“keyå‘ç”Ÿäº†å˜åŒ–åï¼Œé‡æ–°æ¸²æŸ“çš„æ—¶å€™å‘ç°æ–°çš„liå¯¹åº”çš„vnodeï¼ˆè™šæ‹ŸDOMï¼‰ä¸åŸæœ‰çš„liçš„vnodeçš„keyä¸ç›¸åŒï¼Œæ­¤æ—¶ä¼šé‡æ–°ç”Ÿæˆli,å¯¼è‡´å…¶å†…éƒ¨çš„å­å…ƒç´ ä¹Ÿä¼šé‡æ–°ç”Ÿæˆã€‚ç”±äºé‡æ–°ç”Ÿæˆäº†æ–‡æœ¬æ¡†ï¼Œæ‰€ä»¥æ–‡æœ¬æ¡†å†…æ²¡æœ‰ç„¦ç‚¹ã€‚ å¦‚æœitemå¯¹è±¡å†…æœ‰idå±æ€§ï¼Œç»‘å®šè¯¥å±æ€§å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ï¼Œä½†æ˜¯è¿™é‡Œæ²¡æœ‰ï¼Œå¯ä»¥ç›´æ¥ç»‘å®šitem,å› ä¸ºæ¯ä¸ªitemå¯¹è±¡æ˜¯ä¸ç›¸ç­‰çš„ã€‚ 12345&lt;li v-for=&quot;item in todos&quot; :key=&quot;item&quot; :class=&quot;&#123; editing: item === editingTodo &#125;&quot; &gt; ç»è¿‡æµ‹è¯•ï¼Œå‘ç°è¿™æ—¶å°±è§£å†³äº†æˆ‘ä»¬åˆšæ‰æåˆ°çš„é—®é¢˜ï¼Œå› ä¸ºç”±äºkeyçš„å€¼ä¸ºitem,é‚£ä¹ˆåœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥å€¼çš„æ—¶å€™ï¼Œå¯¹åº”çš„itemå¯¹è±¡æ²¡æœ‰å˜åŒ–ï¼Œå˜åŒ–çš„æ˜¯itemä¸­çš„textå±æ€§ï¼Œå¯¹è±¡è¿˜æ˜¯åŸæ¥çš„å¯¹è±¡ï¼Œåªæ˜¯å…¶ä¸­çš„textçš„å±æ€§çš„å€¼å‘ç”Ÿäº†å˜åŒ–ã€‚é‚£ä¹ˆè¿™æ ·ç”±äºkeyçš„å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå°±ä¸ä¼šé‡æ–°ç”ŸæˆliÂ·ä»¥åŠå†…éƒ¨çš„æ–‡æœ¬æ¡†ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œè¾“å…¥å†…å®¹çš„æ–‡æœ¬æ¡†è¿˜æ˜¯åŸæ¥çš„æ–‡æœ¬æ¡†ã€‚ æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼Œå°±æ˜¯åŒå‡»ä»¥åï¼Œå‡ºç°æ–‡æœ¬æ¡†ï¼Œç„¶åè®©å…¶è·å–ç„¦ç‚¹ã€‚ 5ã€ç¼–è¾‘ä»»åŠ¡2ä¸ºäº†èƒ½å¤Ÿå®ç°åŒå‡»æ–‡æœ¬åï¼Œå‡ºç°æ–‡æœ¬æ¡†ï¼Œå¹¶ä¸”åœ¨æ–‡æœ¬æ¡†ä¸­æ˜¾ç¤ºç„¦ç‚¹ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°æŒ‡ä»¤æ¥å®ç°ã€‚ Vue3ä¸Vue2.xåœ¨è‡ªå®šä¹‰æŒ‡ä»¤çš„å·®åˆ«ï¼Œå°±æ˜¯åœ¨é’©å­å‡½æ•°çš„å‘½åä¸Šï¼Œvue3ä¸­æŠŠæŒ‡ä»¤çš„é’©å­å‡½æ•°ä¸ç»„ä»¶çš„é’©å­å‡½æ•°ä¿æŒä¸€è‡´,è¿™æ ·æ›´å®¹æ˜“ç†è§£ Vue2.xä¸­æŒ‡ä»¤çš„å®šä¹‰æ–¹å¼ 1234567Vue.directive(&#x27;editingFocus&#x27;,&#123; bind(el,binding,vnode,prevVnode)&#123;&#125;, inserted()&#123;&#125;, update()&#123;&#125;, componentUpdated()&#123;&#125;, unbind()&#123; &#125;&#125;) 12345bindï¼šå½“æŒ‡ä»¤ç»‘å®šåœ¨å¯¹åº”å…ƒç´ æ—¶è§¦å‘ã€‚åªä¼šè§¦å‘ä¸€æ¬¡ã€‚insertedï¼šå½“å¯¹åº”å…ƒç´ è¢«æ’å…¥åˆ° DOM çš„çˆ¶å…ƒç´ æ—¶è§¦å‘ã€‚updateï¼šå½“å…ƒç´ æ›´æ–°æ—¶ï¼Œè¿™ä¸ªé’©å­ä¼šè¢«è§¦å‘ï¼ˆæ­¤æ—¶å…ƒç´ çš„åä»£å…ƒç´ è¿˜æ²¡æœ‰è§¦å‘æ›´æ–°ï¼‰ã€‚componentUpdatedï¼šå½“æ•´ä¸ªç»„ä»¶ï¼ˆåŒ…æ‹¬å­ç»„ä»¶ï¼‰å®Œæˆæ›´æ–°åï¼Œè¿™ä¸ªé’©å­è§¦å‘ã€‚unbindï¼šå½“æŒ‡ä»¤è¢«ä»å…ƒç´ ä¸Šç§»é™¤æ—¶ï¼Œè¿™ä¸ªé’©å­ä¼šè¢«è§¦å‘ã€‚ä¹Ÿåªè§¦å‘ä¸€æ¬¡ã€‚ Vue3ä¸­æŒ‡ä»¤çš„å®šä¹‰æ–¹å¼ 12345678app.directive(&#x27;editingFocus&#x27;,&#123; beforeMount(el, binding, vnode, prevVnode) &#123;&#125;, mounted() &#123;&#125;, beforeUpdate() &#123;&#125;, updated() &#123;&#125;, beforeUnmount() &#123;&#125;, unmounted() &#123;&#125;,&#125;) 1234567bind =&gt; beforeMountinserted =&gt; mountedbeforeUpdate: æ–°çš„é’©å­ï¼Œä¼šåœ¨å…ƒç´ è‡ªèº«æ›´æ–°å‰è§¦å‘update =&gt; ç§»é™¤ï¼componentUpdated =&gt; updatedbeforeUnmount: æ–°çš„é’©å­ï¼Œå½“å…ƒç´ è‡ªèº«è¢«å¸è½½å‰è§¦å‘unbind =&gt; unmounted ä»¥ä¸Šæ˜¯è‡ªå®šä¹‰æŒ‡ä»¤çš„ç¬¬ä¸€ç§ç”¨æ³•ï¼Œåœ¨å®šä¹‰è‡ªå®šä¹‰æŒ‡ä»¤çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥ä¼ å‡½æ•°ã€‚è¿™æ ·ç”¨æ³•æ¯”è¾ƒç®€æ´ï¼Œè€Œä¸”æ›´åŠ å¸¸ç”¨ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å‡½æ•°çš„æ—¶å€™ï¼Œvue2ä¸vu3çš„ç”¨æ³•æ˜¯ä¸€æ ·çš„ã€‚ Vue2.x 123Vue.directive(&#x27;editingFocus&#x27;,(el,binding)=&gt;&#123; binding.value &amp;&amp; el.focus()&#125;) Vue3.0 123app.directive(&#x27;editingFocus&#x27;,(el,binding)=&gt;&#123; binding.value &amp;&amp; el.focus()&#125;) æŒ‡ä»¤åç§°åé¢çš„è¿™ä¸ªå‡½æ•°åœ¨vue3ä¸­æ˜¯åœ¨ï¼Œmountedä¸updatedçš„æ—¶å€™æ‰§è¡Œï¼Œä¸Vue2çš„æ‰§è¡Œæ—¶æœºæ˜¯ä¸€æ ·çš„ã€‚åœ¨Vue2ä¸­è¿™ä¸ªå‡½æ•°æ˜¯åœ¨bindä¸updateçš„æ—¶å€™æ‰§è¡Œã€‚ å‡½æ•°ä¸­çš„elå‚æ•°æ˜¯æŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œbindingä¸­å¯ä»¥è·å–æŒ‡ä»¤å¯¹åº”çš„å€¼ã€‚é€šè¿‡binding.valueæ¥è·å–ã€‚ ä¸‹é¢ï¼Œæ ¹æ–‡æœ¬æ¡†æ·»åŠ æŒ‡ä»¤ 123456789&lt;input class=&quot;edit&quot; type=&quot;text&quot; v-model=&quot;item.text&quot; v-editing-focus=&quot;item === editingTodo&quot; @key.enter=&quot;doneEdit(item)&quot; @blur=&quot;doneEdit(item)&quot; @keyup.esc=&quot;cancelEdit(item)&quot; /&gt; åœ¨inputæ ‡ç­¾ä¸Šæ·»åŠ äº†ä¸€ä¸ªv-eding-focusçš„æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤ä»¥v-å¼€å¤´ã€‚ä½†æ˜¯è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯ï¼Œå½“æ–‡æœ¬æ¡†å¤„äºç¼–è¾‘çŠ¶æ€çš„æ—¶å€™ï¼Œè¯¥æŒ‡ä»¤æ‰èµ·ä½œç”¨ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œï¼Œåˆ¤æ–­itemæ˜¯å¦ç­‰äºeditingTodoï¼Œå¦‚æœæˆç«‹ï¼Œä¹Ÿå°±æ˜¯ä¸ºtrue,è¡¨æ˜å¤„äºç¼–è¾‘çŠ¶æ€ï¼Œåˆ™è®©æ–‡æœ¬æ¡†è·å¾—ç„¦ç‚¹ã€‚ v-editing-focusæŒ‡ä»¤å®šä¹‰å¦‚ä¸‹ï¼š 1234567891011121314151617181920export default &#123; name: &quot;App&quot;, setup() &#123; const todos = ref([]); const &#123; remove &#125; = useRemove(todos); return &#123; ...useAdd(todos), ...useEdit(remove), remove, todos, &#125;; &#125;, directives: &#123; editingFocus: (el, binding) =&gt; &#123; if (binding.value) &#123; el.focus(); &#125; &#125;, &#125;,&#125;; æ³¨æ„ï¼šdirectivesä¸setupæ˜¯åŒçº§å®šä¹‰çš„ã€‚ åœ¨å®šä¹‰æŒ‡ä»¤çš„æ—¶å€™ï¼Œä¸éœ€è¦æ·»åŠ v-å‰ç¼€ã€‚åŒæ—¶åˆ¤æ–­ä¸€ä¸‹binding.valueä¸­çš„å€¼æ˜¯å¦ä¸ºtrue,å¦‚æœæ˜¯ï¼Œåœ¨è®©æ–‡æœ¬æ¡†è·å–ç„¦ç‚¹ï¼Œå› ä¸ºå½“å‰å¤„äºç¼–è¾‘çŠ¶æ€ã€‚ 6ã€åˆ‡æ¢ä»»åŠ¡çŠ¶æ€ ç‚¹å‡»å·¦ä¸Šè§’çš„å¤é€‰æ¡†(è¯¥å¤é€‰æ¡†çš„é«˜åº¦ä¸å®½åº¦éƒ½æ˜¯1px,ä¸ºäº†ç¾è§‚ï¼Œè¿™é‡Œå•å‡»çš„æ˜¯label),æ”¹å˜æ‰€æœ‰ä»»åŠ¡çš„çŠ¶æ€(è¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨æœªå®Œæˆ) å•å‡»åº•éƒ¨çš„All/Active/CompletedæŒ‰é’®ï¼Œå•å‡»AllæŒ‰é’®ï¼Œå±•ç¤ºæ‰€æœ‰çš„ä»»åŠ¡ã€‚å•å‡»Activeå±•ç¤ºçš„æ˜¯æ²¡æœ‰å®Œæˆçš„ä»»åŠ¡,Completedå±•ç¤ºçš„æ˜¯å·²ç»å®Œæˆçš„ä»»åŠ¡ æ˜¾ç¤ºæœªå®Œæˆçš„ä»»åŠ¡é¡¹ä¸ªæ•°ã€‚ ç§»é™¤æ‰€æœ‰å®Œæˆçš„é¡¹ç›® å¦‚æœæ²¡æœ‰ä»»åŠ¡é¡¹ï¼Œéšè—mainä¸footeråŒºåŸŸã€‚ 6.1 æ”¹å˜æ‰€æœ‰ä»»åŠ¡çš„çŠ¶æ€å•å‡»å·¦ä¸Šè§’çš„å¤é€‰æ¡†ï¼Œæ”¹å˜æ‰€æœ‰ä»»åŠ¡é¡¹çš„çŠ¶æ€ã€‚ 12345&lt;div class=&quot;view&quot;&gt; &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot; v-model=&quot;item.completed&quot; /&gt; &lt;label @dblclick=&quot;editTodo(item)&quot;&gt;&#123;&#123; item.text &#125;&#125;&lt;/label&gt; &lt;button class=&quot;destroy&quot; @click=&quot;remove(item)&quot;&gt;&lt;/button&gt; &lt;/div&gt; åœ¨liä¸­çš„æ¯ä¸ªä»»åŠ¡é¡¹åç§°å‰é¢éƒ½æœ‰ä¸€ä¸ªå¤é€‰æ¡†ï¼Œè¿™é‡Œå¤é€‰æ¡†çš„çŠ¶æ€æ˜¯æœ‰completedå±æ€§æ¥å†³å®šï¼Œæ‰€ä»¥è¿™é‡Œé€šè¿‡v-modelç»‘å®šcompletedå±æ€§ã€‚ æ ¹å·¦ä¸Šè§’çš„å¤é€‰æ¡†ç»‘å®šä¸€ä¸ªè®¡ç®—å±æ€§ 123456&lt;input id=&quot;toggle-all&quot; class=&quot;toggle-all&quot; type=&quot;checkbox&quot; v-model=&quot;allDone&quot; /&gt; 123456789101112131415161718192021222324252627282930//4ã€åˆ‡æ¢ä»»åŠ¡çš„çŠ¶æ€ã€‚//è¿™é‡Œå•å‡»å·¦ä¸Šè§’çš„å¤é€‰æ¡†åï¼Œä¼šæ”¹å˜æ‰€æœ‰ä»»åŠ¡é¡¹çš„çŠ¶æ€ï¼ŒåŒæ—¶ï¼Œå¦‚æœæ‰€æœ‰çš„ä»»åŠ¡é¡¹éƒ½é€‰ä¸­ï¼Œå·¦ä¸Šè§’çš„å¤é€‰æ¡†ä¹Ÿé€‰ä¸­//åªè¦æœ‰ä¸€ä¸ªæœªé€‰ä¸­ï¼Œåˆ™è¯¥å¤é€‰æ¡†ä¸é€‰ä¸­ã€‚è¿™é‡Œå¤é€‰æ¡†çš„çŠ¶æ€æ˜¯å—`todos`è¿™ä¸ªæ•°ç»„ä¸­çš„æ•°æ®çš„å½±å“ï¼Œæ‰€ä»¥é€šè¿‡è®¡ç®—å±æ€§æ¥å®Œæˆconst userFilter = (todos) =&gt; &#123; const allDone = computed(&#123; //æ¸²æŸ“å·¦ä¸Šè§’çš„checkboxçš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œ`get` //åœ¨`get`æ–¹æ³•ä¸­ï¼Œéå†`todos`ï¼Œè·å–æ¯ä¸ªä»»åŠ¡é¡¹çš„çŠ¶æ€ï¼Œä»è€Œå†³å®šå·¦ä¸Šè§’çš„å¤é€‰æ¡†çš„çŠ¶æ€ã€‚ //å¦‚æœ`todos`ä¸­çš„ä»»åŠ¡éƒ½å®Œæˆå¤„ç†ï¼Œè¿”å›true,åªæœ‰æœ‰ä¸€é¡¹æ²¡æœ‰å®Œæˆåˆ™è¿”å›false. get() &#123; //æ³¨æ„todosæ˜¯å“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡valueè·å–æ•°ç»„ã€‚ä¸‹é¢è¿™è¡Œä»£ç å¯ä»¥è·å–åˆ°todosæ•°ç»„ä¸­æ‰€æœ‰å®Œæˆçš„ä»»åŠ¡ã€‚ // return todos.value.filter((todo) =&gt; todo.completed); //è·å–çš„æ˜¯æ‰€æœ‰æœªå®Œæˆçš„ä»»åŠ¡çš„æ•°é‡ // return todos.value.filter((todo) =&gt; !todo.completed).length; // åœ¨todoså‰é¢åŠ ä¸Šäº†!,è¡¨ç¤ºçš„å«ä¹‰æ˜¯ï¼Œå¦‚æœæ‰€æœ‰çš„ä»»åŠ¡éƒ½å®Œæˆ(æ‰€æœ‰çš„ä»»åŠ¡éƒ½å®Œæˆï¼Œé‚£ä¹ˆé•¿åº¦lengthçš„å€¼ä¸º0ï¼Œå‰é¢å–åï¼Œåˆ™ä¸ºtrue)è¿”å›true.å¦‚æœæœ‰ä¸€é¡¹ä»»åŠ¡æ²¡æœ‰å®Œæˆï¼Œåˆ™è¿”å›false. //å½“å•å‡»æ¯ä¸ªä»»åŠ¡é¡¹å‰é¢çš„å¤é€‰æ¡†æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œè¯¥è®¡ç®—å±æ€§çš„getæ–¹æ³•ï¼Œå› ä¸ºæ¯ä¸€ä¸ªä»»åŠ¡é¡¹å‰é¢çš„å¤é€‰æ¡†é€šè¿‡`v-model`ç»‘å®šäº†todosä¸­çš„completedå±æ€§ï¼Œè¯¥å±æ€§å€¼çš„å˜åŒ–ï¼Œå¯¼è‡´`todos`è¿™ä¸ªæ•°ç»„ä¸­çš„æ•°æ®å˜åŒ–ï¼Œæ‰€ä»¥getæ–¹æ³•ä¼šæ‰§è¡Œã€‚ return !todos.value.filter((todo) =&gt; !todo.completed).length; &#125;, //å½“å•å‡»å·¦ä¸Šè§’çš„checkboxçš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œsetæ“ä½œã€‚åœ¨setæ–¹æ³•ä¸­ï¼Œè®¾ç½®æ¯ä¸ªä»»åŠ¡çš„çŠ¶æ€.ä¸å·¦ä¸Šè§’çš„checkboxçš„çŠ¶æ€ä¿æŒä¸€è‡´,è¯¥æ–¹æ³•çš„å‚æ•°value,è¡¨ç¤ºçš„æ˜¯å½“å•å‡»å·¦ä¸Šè§’çš„checkboxçš„æ—¶å€™ï¼Œä¼šå°†è¯¥checkboxçš„çŠ¶æ€ä¼ é€’è¿‡æ¥ã€‚æ‰€ä»¥valueå‚æ•°å­˜å‚¨çš„å°±æ˜¯å·¦ä¸Šè§’å¤é€‰æ¡†çš„çŠ¶æ€ã€‚é‚£ä¹ˆæ ¹æ®ä¼ é€’è¿‡æ¥çš„çŠ¶æ€ä¿®æ”¹&#x27;todos&#x27;ä¸­æ‰€æœ‰ä»»åŠ¡é¡¹çš„`completed`å±æ€§çš„å€¼ã€‚ //å½“todosä¸­çš„`completed`ä¸­çš„çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œä¼šé‡æ–°æ¸²æŸ“è§†å›¾ï¼ˆtodoså“åº”å¼æ•°æ®ï¼‰ã€‚ set(value) &#123; todos.value.forEach((todo) =&gt; &#123; todo.completed = value; &#125;); &#125;, &#125;); return &#123; allDone, &#125;;&#125;; ä¸‹é¢è¦è§£å†³çš„æ˜¯ï¼Œå½“å¤„ç†å®ŒæŸä¸ªä»»åŠ¡åï¼Œä¸ºå…¶æ·»åŠ ä¸Šå¯¹åº”çš„æ¨ªçº¿ã€‚ 12345&lt;li v-for=&quot;item in todos&quot; :key=&quot;item&quot; :class=&quot;&#123; editing: item === editingTodo, completed: item.completed &#125;&quot; &gt; å½“item.completedå±æ€§ä¸ºtrueçš„æ—¶å€™ï¼Œç»™åˆ—è¡¨æ·»åŠ completedæ ·å¼ã€‚ 6.2 åˆ‡æ¢çŠ¶æ€å•å‡»åº•éƒ¨çš„All/Active/CompletedæŒ‰é’®ï¼Œå•å‡»AllæŒ‰é’®ï¼Œå±•ç¤ºæ‰€æœ‰çš„ä»»åŠ¡ã€‚å•å‡»Activeå±•ç¤ºçš„æ˜¯æ²¡æœ‰å®Œæˆçš„ä»»åŠ¡,Completedå±•ç¤ºçš„æ˜¯å·²ç»å®Œæˆçš„ä»»åŠ¡ ä»¥ä¸Šä¸‰ä¸ªæŒ‰é’®ï¼Œéƒ½æ˜¯åŸºäºhashçš„é“¾æ¥ï¼Œå½“å•å‡»è¿™äº›é“¾æ¥çš„æ—¶å€™ï¼Œä¼šè§¦å‘hashchangeäº‹ä»¶ï¼Œåœ¨äº‹ä»¶çš„å¤„ç†å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°å¯¹åº”çš„hashå€¼ï¼Œç„¶åæ ¹æ®hashå€¼ï¼Œè°ƒç”¨ä¸åŒçš„è¿‡æ»¤æ–¹æ³•ï¼ŒæŸ¥è¯¢å¯¹åº”çš„æ•°æ®ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455const userFilter = (todos) =&gt; &#123; const allDone = computed(&#123; //æ¸²æŸ“å·¦ä¸Šè§’çš„checkboxçš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œ`get` //åœ¨`get`æ–¹æ³•ä¸­ï¼Œéå†`todos`ï¼Œè·å–æ¯ä¸ªä»»åŠ¡é¡¹çš„çŠ¶æ€ï¼Œä»è€Œå†³å®šå·¦ä¸Šè§’çš„å¤é€‰æ¡†çš„çŠ¶æ€ã€‚ //å¦‚æœ`todos`ä¸­çš„ä»»åŠ¡éƒ½å®Œæˆå¤„ç†ï¼Œè¿”å›true,åªæœ‰æœ‰ä¸€é¡¹æ²¡æœ‰å®Œæˆåˆ™è¿”å›false. get() &#123; console.log(&quot;abc&quot;); //æ³¨æ„todosæ˜¯å“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡valueè·å–æ•°ç»„ã€‚ä¸‹é¢è¿™è¡Œä»£ç å¯ä»¥è·å–åˆ°todosæ•°ç»„ä¸­æ‰€æœ‰å®Œæˆçš„ä»»åŠ¡ã€‚ // return todos.value.filter((todo) =&gt; todo.completed); //è·å–çš„æ˜¯æ‰€æœ‰æœªå®Œæˆçš„ä»»åŠ¡çš„æ•°é‡ // return todos.value.filter((todo) =&gt; !todo.completed).length; // åœ¨todoså‰é¢åŠ ä¸Šäº†!,è¡¨ç¤ºçš„å«ä¹‰æ˜¯ï¼Œå¦‚æœæ‰€æœ‰çš„ä»»åŠ¡éƒ½å®Œæˆ(æ‰€æœ‰çš„ä»»åŠ¡éƒ½å®Œæˆï¼Œé‚£ä¹ˆé•¿åº¦lengthçš„å€¼ä¸º0ï¼Œå‰é¢å–åï¼Œåˆ™ä¸ºtrue)è¿”å›true.å¦‚æœæœ‰ä¸€é¡¹ä»»åŠ¡æ²¡æœ‰å®Œæˆï¼Œåˆ™è¿”å›false. return !todos.value.filter((todo) =&gt; !todo.completed).length; &#125;, //å½“å•å‡»å·¦ä¸Šè§’çš„checkboxçš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œsetæ“ä½œã€‚åœ¨setæ–¹æ³•ä¸­ï¼Œè®¾ç½®æ¯ä¸ªä»»åŠ¡çš„çŠ¶æ€.ä¸å·¦ä¸Šè§’çš„checkboxçš„çŠ¶æ€ä¿æŒä¸€è‡´,è¯¥æ–¹æ³•çš„å‚æ•°value,è¡¨ç¤ºçš„æ˜¯å½“å•å‡»å·¦ä¸Šè§’çš„checkboxçš„æ—¶å€™ï¼Œä¼šå°†è¯¥checkboxçš„çŠ¶æ€ä¼ é€’è¿‡æ¥ã€‚æ‰€ä»¥valueå‚æ•°å­˜å‚¨çš„å°±æ˜¯å·¦ä¸Šè§’å¤é€‰æ¡†çš„çŠ¶æ€ã€‚ set(value) &#123; todos.value.forEach((todo) =&gt; &#123; todo.completed = value; &#125;); &#125;, &#125;); const filter = &#123; all: (list) =&gt; list, active: (list) =&gt; list.filter((todo) =&gt; !todo.completed), completed: (list) =&gt; list.filter((todo) =&gt; todo.completed), &#125;; const type = ref(&quot;all&quot;); const filterreadTodos = computed(() =&gt; filter[type.value](todos.value)); const onHashChange = () =&gt; &#123; const hash = window.location.hash.replace(&quot;#/&quot;, &quot;&quot;); if (filter[hash]) &#123; type.value = hash; &#125; else &#123; //æœ‰å¯èƒ½é¦–æ¬¡åŠ è½½ï¼Œæˆ–è€…è¾“å…¥äº†é”™è¯¯çš„hashå€¼ type.value = &quot;all&quot;; window.location.hash = &quot;&quot;; &#125; &#125;; onMounted(() =&gt; &#123; window.addEventListener(&quot;hashchange&quot;, onHashChange); onHashChange(); &#125;); onUnmounted(() =&gt; &#123; window.removeEventListener(&quot;hashchange&quot;, onHashChange); &#125;); return &#123; allDone, filterreadTodos, &#125;;&#125;; æ¨¡æ¿ä¸­éå†çš„æ˜¯filterreadTodos 12345&lt;li v-for=&quot;item in filterreadTodos&quot; :key=&quot;item&quot; :class=&quot;&#123; editing: item === editingTodo, completed: item.completed &#125;&quot; &gt; æ•´ä¸ªæ•°æ®çš„è¿‡æ»¤çš„æ“ä½œè¿˜æ˜¯å®šä¹‰åœ¨userFilteræ–¹æ³•ä¸­å®Œæˆã€‚åœ¨è¯¥æ–¹æ³•ä¸­ï¼ŒæŒ‡å®šonMountedé’©å­å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶æŒ‚è½½å®Œæ¯•åï¼Œå®Œæˆhashchangeäº‹ä»¶çš„ç»‘å®šï¼Œ äº‹ä»¶è§¦å‘ä»¥åæ‰§è¡Œ`` 1234onMounted(() =&gt; &#123; window.addEventListener(&quot;hashchange&quot;, onHashChange); onHashChange(); &#125;); å½“ç¬¬ä¸€æ¬¡è¿›å…¥é¡µé¢ï¼Œè¿˜æ²¡æœ‰å•å‡»é“¾æ¥çš„æ—¶å€™ï¼Œä¹Ÿè¦è°ƒç”¨ onHashChange();æ–¹æ³•,è¿›è¡Œæ•°æ®çš„è¿‡æ»¤ï¼Œå½“å•å‡»äº†é“¾æ¥ä»¥åï¼Œhashchangeäº‹ä»¶è§¦å‘ä¹Ÿè¦è°ƒç”¨onHashChangeæ–¹æ³•ï¼Œå®Œæˆæ•°æ®çš„è¿‡æ»¤ã€‚ åœ¨onUnmountedæ–¹æ³•ä¸­ç§»é™¤äº‹ä»¶çš„ç»‘å®šã€‚ 123onUnmounted(() =&gt; &#123; window.removeEventListener(&quot;hashchange&quot;, onHashChange); &#125;); ä¸‹é¢çœ‹ä¸€ä¸‹ onHashChange();æ–¹æ³•çš„å®ç° 12345678910const onHashChange = () =&gt; &#123; const hash = window.location.hash.replace(&quot;#/&quot;, &quot;&quot;); if (filter[hash]) &#123; type.value = hash; &#125; else &#123; //æœ‰å¯èƒ½é¦–æ¬¡åŠ è½½ï¼Œæˆ–è€…è¾“å…¥äº†é”™è¯¯çš„hashå€¼ type.value = &quot;all&quot;; window.location.hash = &quot;&quot;; &#125;&#125;; åœ¨onHashChangeæ–¹æ³•ä¸­ï¼Œé¦–å…ˆè·å–hashå€¼ï¼Œç„¶åå°†#/å»æ‰ï¼Œåªä¿ç•™allæˆ–è€…æ˜¯active,completed. ç„¶ååˆ¤æ–­åœ¨filterä¸­æ˜¯å¦å®šä¹‰äº†å¯¹åº”çš„è¿‡æ»¤æ–¹æ³•ã€‚ filterç±»çš„å®ç°å¦‚ä¸‹ï¼š 12345const filter = &#123; all: (list) =&gt; list, active: (list) =&gt; list.filter((todo) =&gt; !todo.completed), completed: (list) =&gt; list.filter((todo) =&gt; todo.completed),&#125;; åœ¨filterä¸­ï¼Œå®šä¹‰äº†ä¸åŒçš„è¿‡æ»¤æ–¹æ³•ã€‚ å¦‚æœæ ¹æ®è·å–åˆ°çš„hashå€¼èƒ½å¤Ÿä»filterä¸­æŸ¥è¯¢åˆ°å¯¹åº”çš„è¿‡æ»¤æ–¹æ³•ã€‚é‚£ä¹ˆæŠŠhashå€¼èµ‹å€¼ç»™type.value typeæ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œé»˜è®¤å€¼ä¸ºall 1const type = ref(&quot;all&quot;); typeçš„å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œå°±ä¼šé‡æ–°æ¸²æŸ“è§†å›¾ï¼Œæ¸²æŸ“è§†å›¾çš„æ—¶å€™ä¼šæ‰§è¡Œ v-for=&quot;item in filterreadTodos&quot;,è€ŒfilterreadTodosæ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ã€‚ 1const filterreadTodos = computed(() =&gt; filter[type.value](todos.value)); è¯¥è®¡ç®—å±æ€§ä¾èµ–çš„typeçš„å€¼å‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œcomputedå†…çš„å‡½æ•°ï¼Œæ ¹æ®typeä¸­å­˜å‚¨çš„å€¼ï¼Œä»filterä¸­æŸ¥è¯¢åˆ°å¯¹åº”çš„è¿‡æ»¤å‡½æ•°ï¼ŒæŠŠtodosæ•°ç»„ä¸­çš„å†…å®¹ä¼ é€’åˆ°è¯¥å‡½æ•°ä¸­è¿›è¡Œè¿‡æ»¤ã€‚ ä»¥ä¸Šæ˜¯åœ¨filterä¸­æ‰¾åˆ°å¯¹åº”çš„è¿‡æ»¤æ–¹æ³•çš„æƒ…å†µã€‚ å¦‚æœåœ¨filterä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„è¿‡æ»¤æ–¹æ³•ï¼Œä¼šæ‰§è¡Œï¼š 12type.value = &quot;all&quot;; window.location.hash = &quot;&quot;; æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œæœ‰å¯èƒ½æ˜¯é¦–æ¬¡åŠ è½½ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯è¾“å…¥çš„hashå€¼æ˜¯é”™è¯¯çš„ã€‚ è¿™æ—¶æŠŠtypeçš„å€¼ä¿®æ”¹æˆall,è¡¨ç¤ºåŠ è½½æ‰€æœ‰çš„ä»»åŠ¡æ•°æ®ã€‚å¹¶ä¸”æŠŠåœ°å€æ ä¸­çš„hashå€¼æ¸…ç©ºã€‚ æ³¨æ„ï¼šæœ€å¼€å¼€å§‹è¦å¯¼å…¥å¯¹åº”çš„é’©å­å‡½æ•°ã€‚ 1import &#123; ref, computed, onMounted, onUnmounted &#125; from &quot;vue&quot;; åŒæ—¶ï¼Œè¿˜éœ€è¦æ³¨æ„ï¼Œæœ€åä¸€å®šè¦å°†filterreadTodoså†…å®¹è¿”å›ã€‚ 1234return &#123; allDone, filterreadTodos,&#125;; 6.3 å‰©ä½™å†…å®¹å¤„ç† æ˜¾ç¤ºæœªå®Œæˆçš„ä»»åŠ¡é¡¹ä¸ªæ•°ã€‚ ç§»é™¤æ‰€æœ‰å®Œæˆçš„é¡¹ç›® å¦‚æœæ²¡æœ‰ä»»åŠ¡é¡¹ï¼Œéšè—mainä¸footeråŒºåŸŸã€‚ ä¸‹é¢å…ˆæ¥å®ç°ç¬¬ä¸€æ¡å†…å®¹ï¼šæ˜¾ç¤ºæœªå®Œæˆçš„ä»»åŠ¡é¡¹ä¸ªæ•°ã€‚ è¿™ä¸ªåŠŸèƒ½éœ€è¦é€šè¿‡è®¡ç®—å±æ€§æ¥å®Œæˆï¼Œä¹Ÿå°±æ˜¯ç»Ÿè®¡todosæ•°ç»„ä¸­æ•°æ®çš„å˜åŒ–æƒ…å†µã€‚ 12345&lt;footer class=&quot;footer&quot;&gt; &lt;span class=&quot;todo-count&quot;&gt; &lt;strong&gt;&#123;&#123; remainingCount &#125;&#125;&lt;/strong&gt; &#123;&#123; remainingCount &gt; 1 ? &quot;items&quot; : &quot;item&quot; &#125;&#125; left &lt;/span&gt; æ•´ä¸ªæ•°æ®çš„ç»Ÿè®¡æ˜¯æœ‰remainingCountè®¡ç®—å±æ€§å®Œæˆçš„ï¼Œè¯¥å±æ€§è¿”å›çš„å€¼å¦‚æœå¤§äº1,æ˜¾ç¤ºitemsï¼Œå¦åˆ™æ˜¾ç¤ºitem. å…³äºremainingCountè®¡ç®—å±æ€§çš„å®ç°è¿˜æ˜¯åœ¨userFilteræ–¹æ³•ä¸­å®Œæˆï¼Œè¯¥æ–¹æ³•éƒ½æ˜¯ä¸è¿‡æ»¤ç›¸å…³çš„ä¸šåŠ¡å†…å®¹ã€‚ 12const filterreadTodos = computed(() =&gt; filter[type.value](todos.value)); const remainingCount = computed(() =&gt; filter.active(todos.value).length); åœ¨åŸæœ‰çš„filterreadTodosæ•´ä¸ªè¿‡æ»¤å™¨çš„ä¸‹é¢ï¼Œå®šä¹‰äº†remainingCountè¿‡æ»¤å™¨ï¼Œè¯¥è¿‡æ»¤å™¨è°ƒç”¨äº†filterä¸­çš„activeæ–¹æ³•æ¥è·å–æœªå¤„ç†çš„ä»»åŠ¡é¡¹æ•°æ®ï¼Œç„¶åå†ç»Ÿè®¡å…¶ä¸ªæ•°ã€‚å½“ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œä¼šæ‰§è¡ŒremainingCountè®¡ç®—å±æ€§ï¼Œå½“todosæ•°ç»„ä¸­çš„æ•°æ®å‘ç”Ÿäº†å˜åŒ–åï¼Œè¿˜ä¼šæ‰§è¡Œè¯¥è®¡ç®—å±æ€§ï¼Œæ¥è¿›è¡Œæ•°æ®çš„ç»Ÿè®¡ã€‚ æœ€åéœ€è¦å°†remainingCountè®¡ç®—å±æ€§è¿”å›ï¼Œè¿™æ ·åœ¨æ¨¡æ¿ä¸­æ‰èƒ½ä½¿ç”¨ã€‚ 12345return &#123; allDone, filterreadTodos, remainingCount, &#125;; ä¸‹é¢è¦å®ç°çš„æ˜¯â€ç§»é™¤æ‰€æœ‰å®Œæˆçš„é¡¹ç›®â€ ç»™åº•éƒ¨å³ä¸‹è§’çš„æŒ‰é’®ç»‘å®šå•å‡»äº‹ä»¶ã€‚ 123&lt;button class=&quot;clear-completed&quot; @click=&quot;removeCompleted&quot;&gt; Clear completed &lt;/button&gt; removeCompletedæ–¹æ³•å®šä¹‰åœ¨useRemoveæ–¹æ³•ä¸­ï¼Œè¯¥æ–¹æ³•æ˜¯æœ‰å…³åˆ é™¤çš„ç›¸å…³ä¸šåŠ¡çš„å†…å®¹ã€‚ 12345678910111213141516// 2. åˆ é™¤ä»»åŠ¡const useRemove = (todos) =&gt; &#123; const remove = (todo) =&gt; &#123; const index = todos.value.indexOf(todo); todos.value.splice(index, 1); &#125;; //åˆ é™¤å·²ç»å®Œæˆçš„ä»»åŠ¡é¡¹æ•°æ® const removeCompleted = () =&gt; &#123; //è¿™é‡ŒæŠŠæœªå®Œæˆçš„æ•°æ®è¿‡æ»¤å‡ºæ¥ï¼Œå±•ç¤ºçš„é¡µé¢ä¸­å°±å¯ä»¥äº†ã€‚ todos.value = todos.value.filter((todo) =&gt; !todo.completed); &#125;; return &#123; remove, removeCompleted,//æœ€åè¦å°†removeCompletedå‡½æ•°è¿”å› &#125;;&#125;; åœ¨removeCompletedæ–¹æ³•ä¸­ï¼ŒæŠŠtodosæ•°ç»„ä¸­æœªå®Œæˆçš„æ•°æ®æŸ¥è¯¢å‡ºæ¥ï¼Œé‡æ–°èµ‹å€¼ç»™todosæ•°ç»„ï¼Œè¿™æ ·æ•°ç»„todosæ•°ç»„ä¸­å­˜å‚¨çš„å°±æ˜¯æœªå®Œæˆå¤„ç†çš„æ•°æ®ã€‚å½“todosä¸­çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–åï¼Œè®¡ç®—å±æ€§filterreadTodosä¹Ÿä¼šé‡æ–°æ‰§è¡Œï¼Œä»è€Œé‡æ–°æ¸²æŸ“åˆ—è¡¨ã€‚æ³¨æ„ï¼šæœ€åè¦å°†removeCompletedå‡½æ•°è¿”å› ä¸‹é¢ä¿®æ”¹ä¸€ä¸‹setupå‡½æ•°ä¸­çš„å†…å®¹ã€‚ 12345678910111213setup() &#123; const todos = ref([]); //å°†useRomveå‡½æ•°ä¸­å®šä¹‰çš„removeCompletedæ–¹æ³•è§£æ„å‡ºæ¥ const &#123; remove, removeCompleted &#125; = useRemove(todos); return &#123; ...useAdd(todos), ...useEdit(remove), ...userFilter(todos), remove, removeCompleted,//è¿”å›removeCompletedæ–¹æ³•ï¼Œè¿™æ ·æ¨¡æ¿ä¸­å°±å¯ä»¥ä½¿ç”¨äº†ã€‚ todos, &#125;; &#125;, å¦‚æœæ²¡æœ‰ä»»åŠ¡é¡¹ï¼Œéšè—mainä¸footeråŒºåŸŸã€‚ å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œåªæ˜¾ç¤ºè¾“å…¥çš„æ–‡æœ¬æ¡†ï¼Œéšè—å…¶å®ƒçš„ä½ç½® ä¸‹é¢ç»™footerä¸main,éƒ½å»æ·»åŠ v-show 12&lt;section class=&quot;main&quot; v-show=&quot;count&quot;&gt; &lt;footer class=&quot;footer&quot; v-show=&quot;count&quot;&gt; å½“countä¸­æœ‰å€¼ï¼Œåˆ™å±•ç¤ºmainä¸footerä¸­çš„å†…å®¹ï¼Œå¦åˆ™è¿›è¡Œéšè—ã€‚countä¸­çš„å€¼ä¸ºä»»åŠ¡çš„æ€»æ•°ã€‚ è¿™é‡Œçš„countå¿…é¡»æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œå› ä¸ºcountçš„å€¼ä¾èµ–å“åº”å¼æ•°æ®todos.todosçš„æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼Œéœ€è¦é‡æ–°è®¡ç®—countçš„å€¼ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬åœ¨userFilterä¸­å®ç°countè¿™ä¸ªè®¡ç®—å±æ€§ã€‚ 12const remainingCount = computed(() =&gt; filter.active(todos.value).length); const count = computed(() =&gt; todos.value.length); åœ¨remainingCountä¸‹é¢å®šä¹‰countè¿™ä¸ªè®¡ç®—å±æ€§ï¼ŒåŒæ—¶å°†countè¿”å›ã€‚ 123456return &#123; allDone, filterreadTodos, remainingCount, count,&#125;; 7ã€æœ¬åœ°å­˜å‚¨ä¸‹é¢è¦å°†æ•°æ®å­˜å‚¨èµ·æ¥ï¼Œå¦åˆ™å•å‡»æµè§ˆå™¨çš„åˆ·æ–°æŒ‰é’®ï¼Œæ•°æ®ä¼šä¸¢å¤±ã€‚è¿™é‡Œæ˜¯æŠŠä»»åŠ¡æ•°æ®å­˜å‚¨åˆ°localStorageä¸­ã€‚ åœ¨srcç›®å½•ä¸‹é¢å®šä¹‰utilsç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹é¢åˆ›å»ºuseLocalStorage.jsæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435function parse(str)&#123; let value; try&#123; value=JSON.parse(str) &#125;catch&#123; value=null &#125; return value&#125;function stringify(obj)&#123; let value try&#123; value=JSON.stringify(obj) &#125;catch&#123; value=null &#125; return value&#125;export default function useLocalStorage()&#123; function setItem(key,value)&#123; value=stringify(value) window.localStorage.setItem(key,value) &#125; function getItem(key)&#123; let value=window.localStorage.getItem(key) if(value)&#123; value=parse(value) &#125; return value &#125; return &#123; setItem, getItem &#125;&#125; åœ¨ä¸Šé¢çš„ä»£ç ä¸­åˆ›å»ºäº†parseå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†å­—ç¬¦ä¸²è½¬æ¢æˆå¯¹è±¡ï¼Œstringifyå‡½æ•°å°†å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚ åŒæ—¶å¯¼å‡ºäº†useLocalStorageå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸­å°è£…äº†å¯¹localStorageæ“ä½œçš„ä¸¤ä¸ªæ–¹æ³•ï¼ŒsetItemæ·»åŠ æ•°æ®åˆ°localStorageä¸­ï¼ŒgetItemæŠŠæ•°æ®ä»localStorageæ‰¾é‚£ä¸ªå–å‡ºæ¥ã€‚ æœ€åè¿”å›setItemä¸getItemè¿™ä¸¤ä¸ªæ–¹æ³•ã€‚ ç°åœ¨å›åˆ°App.vueæ–‡ä»¶ä¸­ã€‚ 12345import &#123; ref, computed, onMounted, onUnmounted, watchEffect &#125; from &quot;vue&quot;;import useLocalStorage from &quot;./utils/useLocalStorage&quot;;import &quot;./assets/index.css&quot;;const storage = useLocalStorage(); é¦–å…ˆå¯¼å…¥useLocalStorageå‡½æ•°ï¼Œæ¥ä¸‹æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼Œæˆ‘ä»¬çŸ¥é“è¯¥å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­å­˜å‚¨çš„æ˜¯getItemä¸setItem,è¿™é‡Œéƒ½å­˜å‚¨åˆ°å¸¸é‡storageä¸­ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–åï¼Œä¸ç®¡æ˜¯æ·»åŠ ï¼Œæ›´æ–°ï¼Œè¿˜æ˜¯åˆ é™¤ï¼Œéƒ½éœ€è¦å°†å˜åŒ–åçš„æ•°æ®é‡æ–°çš„ä¿å­˜åˆ°localStorageä¸­ï¼Œå“ªä¹ˆåº”è¯¥æ€æ ·å¤„ç†å‘¢ï¼Ÿå¦‚æœåœ¨æ·»åŠ ,åˆ é™¤ï¼Œæ›´æ–°çš„æ–¹æ³•ä¸­éƒ½å†™è¿™äº›ä»£ç ï¼Œé‚£ä¹ˆå°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œå®Œæˆå¯¹localStorageä¸­æ•°æ®æ›´æ–°çš„æ“ä½œã€‚ 123456789//5ã€å­˜å‚¨ä»»åŠ¡æ•°æ®const useStorage = () =&gt; &#123; const key = &quot;todokey&quot;; const todos = ref(storage.getItem(key) || []); watchEffect(() =&gt; &#123; storage.setItem(key, todos.value); &#125;); return todos;&#125;; åœ¨useStorageæ–¹æ³•ä¸­ï¼Œé¦–å…ˆè·å–localStorageä¸­çš„æ•°æ®ï¼Œè·å–åˆ°äº†ç»™todosï¼Œå¦‚æœæ²¡æœ‰è·å–åˆ°è¿”å›çš„å°±æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚æ³¨æ„è¿™é‡Œçš„todosæ˜¯ä¸€ä¸ªå“åº”å¼çš„å¯¹è±¡ã€‚ ä¸‹é¢æˆ‘ä»¬é€šè¿‡watchEffectå‡½æ•°æ£€æµ‹todosä¸­çš„æ•°æ®æ˜¯å¦æœ‰å˜åŒ–ï¼Œå¦‚æœæœ‰å˜åŒ–æ‰§è¡ŒwatchEffectå†…çš„å›è°ƒå‡½æ•°ï¼Œå°†æ•°æ®é‡æ–°ä¿å­˜åˆ°localStroageä¸­ã€‚æœ€åæŠŠå“åº”å¼å¯¹è±¡todosè¿”å›ã€‚ ä¸‹é¢ä¿®æ”¹setupæ–¹æ³•ä¸­çš„ä»£ç  123456789101112setup() &#123; const todos = useStorage(); const &#123; remove, removeCompleted &#125; = useRemove(todos); return &#123; ...useAdd(todos), ...useEdit(remove), ...userFilter(todos), remove, removeCompleted, todos, &#125;; &#125;, åœ¨setupè¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†useStorageæ–¹æ³•ï¼ŒæŠŠè¿”å›çš„å†…å®¹ç»™äº†todosè¿™ä¸ªå¸¸é‡ï¼Œæ³¨æ„ï¼šè¿™ä¸ªå¸¸é‡ä¹Ÿæ˜¯å“åº”å¼å¯¹è±¡ï¼Œå› ä¸ºuseStorageæ–¹æ³•è¿”å›çš„å°±æ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€‚å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œä»storageä¸­è·å–æ•°æ®ï¼ŒåæœŸtodosä¸­æ•°æ®æœ‰å˜åŒ–éƒ½ä¼šæ‰§è¡ŒwatchEffectè¿™ä¸ªå‡½æ•°ï¼Œç„¶åå°†æ•°æ®ä¿å­˜åˆ°localStorageä¸­ã€‚ ä»¥ä¸Šï¼Œå°±æ˜¯æ•´ä¸ªtodoListæ¡ˆä¾‹ï¼Œåœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘å°è£…åˆ°äº†ä¸åŒçš„å‡½æ•°ä¸­ï¼Œæ•´ä½“çš„ä»£ç ç»“æ„éå¸¸çš„æƒ…å½¢ã€‚"},{"title":"PiniaåŸºæœ¬ä½¿ç”¨","path":"2025/05/12/Pinia/","text":"PiniaåŸºæœ¬ä½¿ç”¨Piniaä¸­æ–‡æ–‡æ¡£ï¼šhttps://pinia.web3doc.top/ Piniaçš„ä»‹ç» Piniaæœ€åˆæ˜¯ä¸ºäº†æ¢ç´¢Vuexä¸‹ä¸€æ¬¡è¿­ä»£è€Œäº§ç”Ÿçš„ï¼Œç»“åˆäº†Vue5æ ¸å¿ƒå›¢é˜Ÿçš„å¾ˆå¤šæƒ³æ³•ã€‚æœ€ç»ˆå›¢é˜Ÿæ„è¯†åˆ°Piniaå·²ç»å®ç°äº†Vue5çš„å¤§éƒ¨åˆ†å†…å®¹ï¼Œå†³å®šå®éªŒPiniaæ¥æ›¿ä»£Vuexã€‚ Piniaä¸Vuexçš„å¯¹æ¯” mutationsä¸åœ¨å­˜åœ¨ã€‚ Piniaä¸Vuexçš„å¯¹æ¯”ï¼ŒPiniaæä¾›äº†æ›´ç®€å•çš„apiï¼Œå¹¶ä¸”ä¸tsä¸€èµ·ä½¿ç”¨æ—¶å…·æœ‰æ›´å¯é çš„ç±»å‹åˆ¤æ–­ã€‚ æ²¡æœ‰æ¨¡å—åµŒå¥—å’Œå‘½åç©ºé—´ï¼Œä¸åœ¨éœ€è¦è®°ä½ä»–ä»¬ä¹‹é—´çš„å…³ç³»ã€‚ å®‰è£…Pinia123yarn add pinia# æˆ–è€…ä½¿ç”¨ npmnpm install pinia å®šä¹‰Storethis å¯ä»¥è®¿é—®åˆ° æ•´ä¸ª store çš„å®ä¾‹ 12345678910111213141516171819202122232425import &#123; defineStore &#125; from &#x27;pinia&#x27;// useStore å¯ä»¥æ˜¯ useUserã€useCart ä¹‹ç±»çš„ä»»ä½•ä¸œè¥¿// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åº”ç”¨ç¨‹åºä¸­ store çš„å”¯ä¸€ idï¼Œå®˜æ–¹çš„çº¦æŸæ˜¯use***ï¼Œä»¥use+nameçš„ä¸€ä¸ªçº¦å®šï¼Œä¸æ˜¯å¿…é¡»ï¼Œåªæ˜¯å»ºè®®export const useStore = defineStore(&#x27;main&#x27;, &#123; state: () =&gt; &#123; // æ•°æ® return &#123; // æ‰€æœ‰è¿™äº›å±æ€§éƒ½å°†è‡ªåŠ¨æ¨æ–­å…¶ç±»å‹ counter: 0, name: &#x27;Eduardo&#x27;, isAdmin: true, &#125; &#125;, getters: &#123; // åŒè®¡ç®—å±æ€§ doubleCount: (state) =&gt; state.counter * 2, &#125;, actions: &#123; increment() &#123; this.counter++ &#125;, randomizeCounter() &#123; this.counter = Math.round(100 * Math.random()) &#125;, &#125;,&#125;) ä¿®æ”¹Storeçš„æ•°æ® æ³¨æ„ï¼šä¿®æ”¹çš„æ•°æ®å¦‚æœç›´æ¥ç»“æ„ï¼Œæ•°æ®ä¸æ˜¯å“åº”å¼çš„ ä½¿ç”¨Vueçš„toRefs()æˆ–Piniaçš„storeToRefs() åœ¨ç»„ä»¶ä¸­å¼•å…¥Storeç›´æ¥ä¿®æ”¹ 123456// ç®€å•ç²—æš´import &#123;Store&#125; from &#x27;../store/index&#x27;const store = Store()const handleClick = () =&gt; &#123; store.count++&#125; ä½¿ç”¨$patchå¯¹è±¡ 12345678// å¤šæ•°æ®ä¿®æ”¹åšè¿‡ä¼˜åŒ–import &#123;Store&#125; from &#x27;../store/index&#x27;const store = Store()const handleClick = () =&gt; &#123; store.$patch(&#123; count:store.count+2 &#125;)&#125; ä½¿ç”¨$patchå‡½æ•° 12345678// ä½¿ç”¨çš„æ˜¯å‡½æ•°ï¼Œå¯ä»¥å¤„ç†å¤åˆ¶çš„ä¸šåŠ¡import &#123;Store&#125; from &#x27;../store/index&#x27;const store = Store()const handleClick = () =&gt; &#123; store.$patch((state)=&gt;&#123; state.count++ &#125;)&#125; åœ¨actionsä¸­ä¿®æ”¹ 12345678// ç”¨äºå¤æ‚æˆ–å¤šå¤„ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•actions: &#123; changeState()&#123; this.count++ &#125;&#125;// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨store.changeState() Piniaä¸­çš„gettersä½¿ç”¨ä¸Vueçš„è®¡ç®—å±æ€§ä¸€æ ·ï¼Œä¿®æ”¹çš„æ•°æ®æœ‰ç¼“å­˜ï¼Œå¯¹æ€§èƒ½ä¼˜åŒ–æœ‰å¥½å¤„ 123456getters: &#123; // åŒè®¡ç®—å±æ€§ doubleCount: (state) =&gt; state.counter * 2, phoneHidden: (state) =&gt; state.phone.toString().replace(/^(\\d&#123;3&#125;)\\d&#123;4&#125;(\\d&#123;4&#125;)$/,&#x27;$1****$2&#x27;)&#125;// ç»„ä»¶ä¸­ä½¿ç”¨store.doubleCount Piniaä¸­Storeçš„äº’ç›¸è°ƒç”¨ ä¸åŒçš„Storeçš„ç›¸äº’è°ƒç”¨éå¸¸ç®€å•ï¼Œå’Œç»„ä»¶ä½¿ç”¨ç›¸åŒ 1234import &#123;userInfo&#125; from &#x27;../store/userInfo&#x27;const store = userInfo()store.xxxéœ€è¦åœ¨å“ªä½¿ç”¨ç›´æ¥æ‹¿å³å¯ Piniaç»„åˆå¼ ä¸Šé¢çš„ä½¿ç”¨æ–¹æ³•æ›´é€‚åˆVue2çš„å½¢å¼ï¼Œåœ¨Vue3ä¸­æ›´ä½¿ç”¨ç»„åˆå¼ å°†defineStoreçš„ç¬¬äºŒä¸ªå‚æ•°æ”¹ä¸ºå‡½æ•°ï¼Œéœ€è¦ä½¿ç”¨çš„å€¼è¿”å›å‡ºå» 1234567891011121314151617181920212223242526272829import &#123; defineStore &#125; from &quot;pinia&quot;;import &#123; ref &#125; from &quot;vue&quot;;// å®šä¹‰ Storeï¼Œä½¿ç”¨å‡½æ•°ï¼Œæ›´é€‚åˆVue3ï¼Œæ³¨æ„è¦ä½¿ç”¨refå¹¶å°†éœ€è¦çš„æ•°æ®æˆ–å‡½æ•°è¿”å›å‡ºå»export const useTestStore = defineStore( &quot;test&quot;, () =&gt; &#123; // å®šä¹‰çš„å˜é‡ä½¿ç”¨ref const testText = ref&lt;string&gt;(&quot;&quot;); // ä¿å­˜ä¼šå‘˜ä¿¡æ¯ï¼Œç™»å½•æ—¶ä½¿ç”¨ const setTestText = (val: string) =&gt; &#123; testText.value = val; &#125;; // æ¸…ç†ä¼šå‘˜ä¿¡æ¯ï¼Œé€€å‡ºæ—¶ä½¿ç”¨ const clearsetTestText = () =&gt; &#123; testText.value = &quot;&quot;; &#125;; // è¿”å›éœ€è¦ä½¿ç”¨çš„å˜é‡ï¼Œå’Œsetupå‡½æ•°ä¸€æ · return &#123; testText, setTestText, clearsetTestText, &#125;; &#125;); æŒä¹…åŒ– piniaçš„æ•°æ®é»˜è®¤æƒ…å†µä¸‹åˆ·æ–°åä¼šä¸¢å¤± pinia-plugin-persistedstateï¼šå¸®åŠ©piniaæŒä¹…åŒ–çš„æ’ä»¶ uniappçš„ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314// index.tsimport &#123; createPinia &#125; from &quot;pinia&quot;;import persist from &quot;pinia-plugin-persistedstate&quot;;// åˆ›å»º pinia å®ä¾‹const pinia = createPinia();// ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨æ’ä»¶pinia.use(persist);// é»˜è®¤å¯¼å‡ºï¼Œç»™ main.ts ä½¿ç”¨export default pinia;// ç»Ÿä¸€å¯¼å‡ºexport * from &quot;./modules/test&quot;; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// modules/test.tsimport &#123; defineStore &#125; from &quot;pinia&quot;;import &#123; ref &#125; from &quot;vue&quot;;// å®é™…ä¸Šå¯ä»¥ç›´æ¥ä½¿ç”¨ uni.getStorageSync() ,ä½†æ˜¯ä½¿ç”¨åŸç”Ÿçš„æ–¹å¼ç†è®ºä¸Šæ€§èƒ½ä¼šå¥½ä¸€ç‚¹ï¼ˆä¸éœ€è¦ç»è¿‡uniappçš„ç¼–è¯‘/å¤„ç†ï¼‰let persist;// #ifdef H5 || WEBpersist = true;// #endif// #ifndef H5 || WEBpersist = &#123; storage: &#123; getItem(key: string) &#123; return uni.getStorageSync(key); &#125;, setItem(key: string, value: any) &#123; uni.setStorageSync(key, value); &#125;, &#125;,&#125;;// #endif// å®šä¹‰ Storeï¼Œä½¿ç”¨å‡½æ•°ï¼Œæ›´é€‚åˆVue3ï¼Œæ³¨æ„è¦ä½¿ç”¨refå¹¶å°†éœ€è¦çš„æ•°æ®æˆ–å‡½æ•°è¿”å›å‡ºå»export const useTestStore = defineStore( &quot;test&quot;, () =&gt; &#123; const testText = ref&lt;string&gt;(&quot;&quot;); // ä¿å­˜ä¼šå‘˜ä¿¡æ¯ï¼Œç™»å½•æ—¶ä½¿ç”¨ const setTestText = (val: string) =&gt; &#123; testText.value = val; &#125;; // æ¸…ç†ä¼šå‘˜ä¿¡æ¯ï¼Œé€€å‡ºæ—¶ä½¿ç”¨ const clearsetTestText = () =&gt; &#123; testText.value = &quot;&quot;; &#125;; // è®°å¾— return return &#123; testText, setTestText, clearsetTestText, &#125;; &#125;, &#123; persist, &#125;);"},{"title":"Vue2æ‡’åŠ è½½ä¸‹æ‹‰ç»„ä»¶","path":"2025/05/12/Vue2æ‡’åŠ è½½ä¸‹æ‹‰ç»„ä»¶/","text":"Vue2æ‡’åŠ è½½ä¸‹æ‹‰ç»„ä»¶ éœ€è¦å®‰è£…element æˆ–è€…æŒ‰ç…§è¿™ä¸ªæ€è·¯å°è£…å…¶ä»–çš„ç»„ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127&lt;template&gt; &lt;el-select :value=&quot;value&quot; size=&quot;small&quot; clearable filterable :multiple=&quot;multiple&quot; placeholder=&quot;è¯·è¾“å…¥å…³é”®è¯&quot; v-el-select-loadmore=&quot;loadmore&quot; :filter-method=&quot;handleSearch&quot; @change=&quot;handleChange&quot;&gt; &lt;template v-if=&quot;lazyData&amp;&amp;lazyData.length&gt;0&quot;&gt; &lt;el-option v-for=&quot;item in lazyData&quot; :key=&quot;item[prop.key||&#x27;id&#x27;]&quot; :label=&quot;item[prop.label||&#x27;label&#x27;]&quot; :value=&quot;item[prop.value||&#x27;id&#x27;]&quot;&gt; &lt;/el-option&gt; &lt;/template&gt; &lt;/el-select&gt;&lt;/template&gt;&lt;script&gt;export default &#123; props: &#123; value: &#123; type: [String, Number, Array] &#125;, data: &#123; type: [], default: () =&gt; [] &#125;, multiple: &#123; type: Boolean, default: false &#125;, prop: &#123; type: Object, default: () =&gt; (&#123; key: &#x27;id&#x27;, label: &#x27;label&#x27;, value: &#x27;id&#x27;, &#125;) &#125; &#125;, model: &#123; prop: &#x27;value&#x27;, event: &#x27;change&#x27; &#125;, data() &#123; return &#123; keyWord: &#x27;&#x27;, pageData: &#123; pageIndex: 1, pageSize: 10 &#125;, lazyData: null, completeData: null &#125; &#125;, directives: &#123; &#x27;el-select-loadmore&#x27;: &#123; bind(el, binding) &#123; const SELECTWRAP_DOM = el.querySelector( &#x27;.el-select-dropdown .el-select-dropdown__wrap&#x27; ); SELECTWRAP_DOM.addEventListener(&#x27;scroll&#x27;, function () &#123; const condition = this.scrollHeight - this.scrollTop &lt;= this.clientHeight; if (condition) &#123; binding.value(); &#125; &#125;); &#125; &#125; &#125;, watch: &#123; data: &#123; deep: true, immediate: true, handler(val) &#123; if (val.length &gt; 0) &#123; this.lazyData = val.slice(0, this.pageData.pageSize) this.completeData = JSON.parse(JSON.stringify(val)) this.updateLazyData(this.value) &#125; &#125;, &#125;, value: &#123; immediate: true, handler(val) &#123; this.updateLazyData(val) &#125; &#125; &#125;, methods: &#123; handleChange(val) &#123; this.$emit(&#x27;change&#x27;, val) &#125;, // è‡ªå®šä¹‰æœç´¢ handleSearch(key) &#123; this.keyWord = key.trim() if (key) &#123; this.lazyData = this.completeData.filter(item =&gt; &#123; return item.name.includes(key) &#125;) &#125; else &#123; this.lazyData = this.completeData.slice(0, this.pageData.pageSize) &#125; &#125;, // æ‡’åŠ è½½ loadmore() &#123; // å¦‚æœæœ‰æœç´¢å…³é”®å­—ï¼Œåˆ™ä¸åŠ è½½æ‡’åŠ è½½æ•°æ® if (this.keyWord) &#123; this.pageData.pageIndex = 1 return &#125; this.pageData.pageIndex++; let num = this.pageData.pageIndex * this.pageData.pageSize; this.lazyData = this.completeData.filter((item, index, arr) =&gt; &#123; return index &lt; num; //è¿™é‡Œé»˜è®¤allDataå·²ç»å–åˆ°äº†æ•°æ® &#125;); &#125;, // æœ‰ value æ—¶æ›´æ–°æ‡’åŠ è½½æ•°æ® updateLazyData(val) &#123; if (val &amp;&amp; this.completeData &amp;&amp; this.lazyData) &#123; let isShow = this.lazyData.some(item =&gt; item.id == val) if (!isShow) &#123; let index = this.completeData.findIndex(item =&gt; item.id == val) let item = this.completeData.splice(index, 1) this.lazyData = [...this.lazyData, ...item] &#125; &#125; &#125; &#125;&#125;&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;"},{"title":"NuxtJSåŸºç¡€","path":"2025/05/12/NuxtJS/","text":"NuxtJSä¸­æ–‡ç½‘ï¼šhttps://www.nuxtjs.cn/ æœ€å¸¸è§çš„å°±æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ï¼Œä¸ä¼ ç»Ÿçš„ Vue SPA ç›¸æ¯”ï¼Œä½¿ç”¨ SSR å°†å¸¦æ¥å·¨å¤§çš„ SEO æå‡ã€æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œæ›´å¤šçš„æœºä¼šã€‚ ä¹Ÿæœ‰ç”Ÿæˆé™æ€ç«™ç‚¹å’Œå•é¡µåº”ç”¨ç¨‹åº (SPA)ï¼Œç›¸å¯¹æ¥è®²ç”¨çš„æ²¡æœ‰é‚£ä¹ˆå¤š å®‰è£…ä¸ºäº†å¿«é€Ÿå…¥é—¨ï¼ŒNuxt.js å›¢é˜Ÿåˆ›å»ºäº†è„šæ‰‹æ¶å·¥å…· create-nuxt-appã€‚ ç¡®ä¿å®‰è£…äº† npxï¼ˆnpx åœ¨ NPM ç‰ˆæœ¬ 5.2.0 é»˜è®¤å®‰è£…äº†ï¼‰ï¼š 1npx create-nuxt-app &lt;é¡¹ç›®å&gt; æˆ–è€…ç”¨ yarn ï¼š 1yarn create nuxt-app &lt;é¡¹ç›®å&gt; ä»å¤´å¼€å§‹æ–°å»ºé¡¹ç›®å¦‚æœä¸ä½¿ç”¨ Nuxt.js æä¾›çš„ starter æ¨¡æ¿ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»å¤´å¼€å§‹æ–°å»ºä¸€ä¸ª Nuxt.js åº”ç”¨é¡¹ç›®ï¼Œè¿‡ç¨‹éå¸¸ç®€å•ï¼Œåªéœ€è¦ 1 ä¸ªæ–‡ä»¶å’Œ 1 ä¸ªç›®å½•ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š 12mkdir &lt;é¡¹ç›®å&gt;cd &lt;é¡¹ç›®å&gt; æ–°å»º package.json æ–‡ä»¶package.json æ–‡ä»¶ç”¨æ¥è®¾å®šå¦‚ä½•è¿è¡Œ nuxtï¼š 123456&#123; &quot;name&quot;: &quot;my-app&quot;, &quot;scripts&quot;: &#123; &quot;dev&quot;: &quot;nuxt&quot; &#125;&#125; ä¸Šé¢çš„é…ç½®ä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œ npm run dev æ¥è¿è¡Œ nuxtã€‚ å®‰è£… nuxtä¸€æ—¦ package.json åˆ›å»ºå¥½ï¼Œ å¯ä»¥é€šè¿‡ä»¥ä¸‹ npm å‘½ä»¤å°† nuxt å®‰è£…è‡³é¡¹ç›®ä¸­ï¼š 1npm install --save nuxt pages ç›®å½•Nuxt.js ä¼šä¾æ® pages ç›®å½•ä¸­çš„æ‰€æœ‰ *.vue æ–‡ä»¶ç”Ÿæˆåº”ç”¨çš„è·¯ç”±é…ç½®ã€‚ åˆ›å»º pages ç›®å½•ï¼š 1mkdir pages åˆ›å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªé¡µé¢ pages/index.vueï¼š 123&lt;template&gt; &lt;h1&gt;Hello world!&lt;/h1&gt;&lt;/template&gt; ç„¶åå¯åŠ¨é¡¹ç›®ï¼š 1npm run dev ç°åœ¨æˆ‘ä»¬çš„åº”ç”¨è¿è¡Œåœ¨ http://localhost:3000 ä¸Šè¿è¡Œã€‚ è·¯ç”± è¦åœ¨é¡µé¢ä¹‹é—´ä½¿ç”¨è·¯ç”±ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨æ ‡ç­¾ã€‚ 1&lt;nuxt-link to=&quot;/&quot;&gt;é¦–é¡µ&lt;/nuxt-link&gt; ä½¿ç”¨aé“¾æ¥è·³è½¬ä¼šåˆ·æ–°é¡µé¢ 1&lt;a href=&quot;/&quot;&gt;é¦–é¡µ&lt;/a&gt; ç¼–ç¨‹å¼å¯¼èˆªå’ŒVueçš„ä¸€æ ·ï¼Œå°±æ˜¯ç”¨çš„Router 1234567&lt;button @click=&quot;goto&quot;&gt;é¦–é¡µ&lt;/button&gt;Â·Â·Â·methods:&#123; goto()&#123; this.$router.push(&#x27;/&#x27;) &#125;&#125; åŸºç¡€è·¯ç”±å‡è®¾ pages çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š 12345pages/--| user/-----| index.vue-----| one.vue--| index.vue é‚£ä¹ˆï¼ŒNuxt.js è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±é…ç½®å¦‚ä¸‹ï¼š 12345678910111213141516171819router: &#123; routes: [ &#123; name: &#x27;index&#x27;, path: &#x27;/&#x27;, component: &#x27;pages/index.vue&#x27; &#125;, &#123; name: &#x27;user&#x27;, path: &#x27;/user&#x27;, component: &#x27;pages/user/index.vue&#x27; &#125;, &#123; name: &#x27;user-one&#x27;, path: &#x27;/user/one&#x27;, component: &#x27;pages/user/one.vue&#x27; &#125; ]&#125; åŠ¨æ€è·¯ç”±åœ¨ Nuxt.js é‡Œé¢å®šä¹‰å¸¦å‚æ•°çš„åŠ¨æ€è·¯ç”±ï¼Œéœ€è¦åˆ›å»ºå¯¹åº”çš„ä»¥ä¸‹åˆ’çº¿ä½œä¸ºå‰ç¼€çš„ Vue æ–‡ä»¶ æˆ– ç›®å½•ã€‚ ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š 1234567pages/--| _slug/-----| comments.vue-----| index.vue--| users/-----| _id.vue--| index.vue Nuxt.js ç”Ÿæˆå¯¹åº”çš„è·¯ç”±é…ç½®è¡¨ä¸ºï¼š 123456789101112131415161718192021222324router: &#123; routes: [ &#123; name: &#x27;index&#x27;, path: &#x27;/&#x27;, component: &#x27;pages/index.vue&#x27; &#125;, &#123; name: &#x27;users-id&#x27;, path: &#x27;/users/:id?&#x27;, component: &#x27;pages/users/_id.vue&#x27; &#125;, &#123; name: &#x27;slug&#x27;, path: &#x27;/:slug&#x27;, component: &#x27;pages/_slug/index.vue&#x27; &#125;, &#123; name: &#x27;slug-comments&#x27;, path: &#x27;/:slug/comments&#x27;, component: &#x27;pages/_slug/comments.vue&#x27; &#125; ]&#125; ä½ ä¼šå‘ç°åç§°ä¸º users-id çš„è·¯ç”±è·¯å¾„å¸¦æœ‰ :id? å‚æ•°ï¼Œè¡¨ç¤ºè¯¥è·¯ç”±æ˜¯å¯é€‰çš„ã€‚å¦‚æœä½ æƒ³å°†å®ƒè®¾ç½®ä¸ºå¿…é€‰çš„è·¯ç”±ï¼Œéœ€è¦åœ¨ users/_id ç›®å½•å†…åˆ›å»ºä¸€ä¸ª index.vue æ–‡ä»¶ã€‚ åµŒå¥—è·¯ç”±ä½ å¯ä»¥é€šè¿‡ vue-router çš„å­è·¯ç”±åˆ›å»º Nuxt.js åº”ç”¨çš„åµŒå¥—è·¯ç”±ã€‚ åˆ›å»ºå†…åµŒå­è·¯ç”±ï¼Œä½ éœ€è¦æ·»åŠ ä¸€ä¸ª Vue æ–‡ä»¶ï¼ŒåŒæ—¶æ·»åŠ ä¸€ä¸ªä¸è¯¥æ–‡ä»¶åŒåçš„ç›®å½•ç”¨æ¥å­˜æ”¾å­è§†å›¾ç»„ä»¶ã€‚ Warning: åˆ«å¿˜äº†åœ¨çˆ¶ç»„ä»¶(.vueæ–‡ä»¶) å†…å¢åŠ  &lt;nuxt-child/&gt; ç”¨äºæ˜¾ç¤ºå­è§†å›¾å†…å®¹ã€‚ å‡è®¾æ–‡ä»¶ç»“æ„å¦‚ï¼š 12345pages/--| users/-----| _id.vue-----| index.vue--| users.vue Nuxt.js è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±é…ç½®å¦‚ä¸‹ï¼š 1234567891011121314151617181920router: &#123; routes: [ &#123; path: &#x27;/users&#x27;, component: &#x27;pages/users.vue&#x27;, children: [ &#123; path: &#x27;&#x27;, component: &#x27;pages/users/index.vue&#x27;, name: &#x27;users&#x27; &#125;, &#123; path: &#x27;:id&#x27;, component: &#x27;pages/users/_id.vue&#x27;, name: &#x27;users-id&#x27; &#125; ] &#125; ]&#125; åŠ¨æ€åµŒå¥—è·¯ç”±è¿™ä¸ªåº”ç”¨åœºæ™¯æ¯”è¾ƒå°‘è§ï¼Œä½†æ˜¯ Nuxt.js ä»ç„¶æ”¯æŒï¼šåœ¨åŠ¨æ€è·¯ç”±ä¸‹é…ç½®åŠ¨æ€å­è·¯ç”±ã€‚ å‡è®¾æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š 123456789pages/--| _category/-----| _subCategory/--------| _id.vue--------| index.vue-----| _subCategory.vue-----| index.vue--| _category.vue--| index.vue Nuxt.js è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±é…ç½®å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536router: &#123; routes: [ &#123; path: &#x27;/&#x27;, component: &#x27;pages/index.vue&#x27;, name: &#x27;index&#x27; &#125;, &#123; path: &#x27;/:category&#x27;, component: &#x27;pages/_category.vue&#x27;, children: [ &#123; path: &#x27;&#x27;, component: &#x27;pages/_category/index.vue&#x27;, name: &#x27;category&#x27; &#125;, &#123; path: &#x27;:subCategory&#x27;, component: &#x27;pages/_category/_subCategory.vue&#x27;, children: [ &#123; path: &#x27;&#x27;, component: &#x27;pages/_category/_subCategory/index.vue&#x27;, name: &#x27;category-subCategory&#x27; &#125;, &#123; path: &#x27;:id&#x27;, component: &#x27;pages/_category/_subCategory/_id.vue&#x27;, name: &#x27;category-subCategory-id&#x27; &#125; ] &#125; ] &#125; ]&#125; æ›´å¤šçš„è·¯ç”±é…ç½®å¼‚æ­¥æ•°æ®Nuxt.js æ‰©å±•äº† Vue.jsï¼Œå¢åŠ äº†ä¸€ä¸ªå« asyncData çš„æ–¹æ³•ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨è®¾ç½®ç»„ä»¶çš„æ•°æ®ä¹‹å‰èƒ½å¼‚æ­¥è·å–æˆ–å¤„ç†æ•°æ®ã€‚ 1234async asyncData(&#123; params &#125;) &#123; const &#123; data &#125; = await axios.get(`https://my-api/posts/$&#123;params.id&#125;`) return &#123; title: data.title &#125;&#125; ä¸Šä¸‹æ–‡å¯¹è±¡å¯é€šè¿‡ API context æ¥äº†è§£è¯¥å¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚"},{"title":"004.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯--JavaScript","path":"2025/05/12/004.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯--JavaScript/","text":"004.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯â€“JavaScript JavaScriptå†…å®¹éå¸¸å¤šï¼Œä½†æ˜¯å¸¸ç”¨çš„å°±æ˜¯ä¸€äº›å­—ç¬¦ä¸²å’Œæ•°ç»„çš„æ–¹æ³•å·²ç»Domå’ŒBOMçš„äº‹ä»¶ åªæœ‰å¤šç”¨å¤šçœ‹ï¼Œæ²¡æœ‰é€Ÿé€šçš„æ–¹æ³• å¤ä¹ æ—¶å¯ä»¥é€‰æ‹©æ€§çš„çœ‹ä¸€äº›ä¹¦ç± JavaScriptåŠçŸ¥åŠè§£ JavaScriptåŸºç¡€æ•™ç¨‹ JavaScriptæƒå¨æŒ‡å— JavaScripté«˜çº§ç¨‹åºè®¾è®¡ ES6æ ‡å‡†å…¥é—¨ ä½ ä¸çŸ¥é“çš„JavaScript ç­‰ç­‰ å¸¸è§„å†…å®¹1. åŸºç¡€éƒ¨åˆ† å˜é‡:ç”¨æ¥å­˜æ”¾æ•°æ®,ä¿å­˜çš„æ•°æ®å¯ä»¥ä¿®æ”¹ å¸¸é‡:ç”¨æ¥å­˜æ”¾æ•°æ®,ä¿å­˜çš„æ•°æ®ä¸å¯ä¿®æ”¹ å˜é‡å’Œå¸¸é‡çš„æœ¬è´¨,æ— è®ºæ˜¯å˜é‡è¿˜æ˜¯å¸¸é‡,å…¶æœ¬èº«éƒ½æ˜¯æ•°æ®,ä¹Ÿéœ€è¦åœ¨å†…å­˜ä¸­å ç”¨å†…å­˜ç©ºé—´,ä¿å­˜åœ¨å†…å­˜çš„æ ˆç»“æ„åˆ†åŒºä¸­ ECMAScriptæ ‡å‡†å®šä¹‰äº†8ç§æ•°æ®ç±»å‹ 1. 7ç§åŸå§‹æ•°æ®ç±»å‹ï¼šString,Numbr,Boolean,Undefined,null,Symbol,BigInt Object å¼•ç”¨æ•°æ®ç±»å‹ Object,Function,Array,Date,RegExp typeof è¿ç®—ç¬¦(åˆ¤æ–­æ•°æ®çš„ç±»å‹) ä½œç”¨:ç”¨æ¥è·å–å½“å‰å˜é‡ä¸­å­˜å‚¨çš„æ•°æ®çš„ç±»å‹ typeofçš„è¿”å›å€¼æœ‰å¤šå°‘ä¸ª String,Number,Boolean,Undefined,Object,Function ç‰¹æ®Šçš„æœ‰ä¸¤ä¸ª:nullå’Œarrayçš„ç»“æœéƒ½æ˜¯Object instanceOf è¿ç®—ç¬¦(åŸç”ŸJSåˆ¤æ–­å®ä¾‹çš„ç±»å‹) ä½œç”¨:ç”¨æ¥åˆ¤æ–­å½“å‰å®ä¾‹å¯¹è±¡æ˜¯ä¸æ˜¯æŸç§æ•°æ®ç±»å‹ åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹åœ¨å†…å­˜ä¸­,å†…å­˜ç©ºé—´æ˜¯å¦‚ä½•å­˜å‚¨æ•°æ®çš„ é™¤ Object ä»¥å¤–çš„æ‰€æœ‰ç±»å‹éƒ½æ˜¯ä¸å¯å˜çš„ï¼ˆå€¼æœ¬èº«æ— æ³•è¢«æ”¹å˜ï¼‰,JavaScript ä¸­å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼ˆè¯‘æ³¨ï¼šå¦‚ï¼ŒJavaScript ä¸­å¯¹å­—ç¬¦ä¸²çš„æ“ä½œä¸€å®šè¿”å›äº†ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼ŒåŸå§‹å­—ç¬¦ä¸²å¹¶æ²¡æœ‰è¢«æ”¹å˜ï¼‰ã€‚æˆ‘ä»¬ç§°è¿™äº›ç±»å‹çš„å€¼ä¸ºâ€œåŸå§‹å€¼â€ã€‚ åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼åœ¨æ ˆç©ºé—´ä¸­å­˜å‚¨,å¦‚æœä¿®æ”¹äº†æ•°æ®,åˆ™æ˜¯æŠŠåŸæ¥çš„å€¼ç›´æ¥å¹²æ‰,é‡æ–°å­˜æ”¾æ–°çš„å€¼ å¼•ç”¨æ•°æ®ç±»å‹çš„å¯¹è±¡åœ¨å †ç©ºé—´ä¸­å­˜å‚¨,è¯¥ç©ºé—´çš„åœ°å€åœ¨æ ˆç©ºé—´ä¸­å­˜å‚¨,å¦‚æœä¿®æ”¹æ ˆç©ºé—´å­˜å‚¨çš„åœ°å€,åˆ™æŒ‡å‘å‘ç”Ÿå˜åŒ–,ä¹Ÿå«å¼•ç”¨å‘ç”Ÿäº†å˜åŒ–,æ­¤æ—¶æ˜¯åœ¨å †ç©ºé—´ä¸­é‡æ–°æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å†…å­˜ç©ºé—´(å­˜å‚¨äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡) åŸºæœ¬ç±»å‹ä¹‹é—´çš„å€¼å¦‚ä½•ä¼ é€’? ä¼ é€’çš„æ˜¯æ•°å€¼ å¼•ç”¨ç±»å‹ä¹‹é—´çš„å€¼å¦‚ä½•ä¼ é€’? ä¼ é€’çš„æ˜¯å¼•ç”¨(åœ°å€) å†…å­˜:ç”¨äºæš‚æ—¶å­˜æ”¾CPUä¸­çš„è¿ç®—æ•°æ®ä»¥åŠä¸ç¡¬ç›˜ç­‰å¤–éƒ¨å­˜å‚¨å™¨äº¤æ¢çš„æ•°æ® è®¡ç®—æœºåœ¨è¿è¡Œä¸­ï¼ŒCPUå°±ä¼šæŠŠéœ€è¦è¿ç®—çš„æ•°æ®è°ƒåˆ°å†…å­˜ä¸­è¿›è¡Œè¿ç®—ï¼Œå½“è¿ç®—å®ŒæˆåCPUå†å°†ç»“æœä¼ é€å‡ºæ¥ï¼Œå†…å­˜çš„è¿è¡Œä¹Ÿå†³å®šäº†è®¡ç®—æœºçš„ç¨³å®šè¿è¡Œã€‚ å†…å­˜é€šç”µåäº§ç”Ÿçš„å­˜å‚¨ç©ºé—´(ä¸´æ—¶çš„) äº§ç”Ÿå’Œæ­»äº¡:å†…å­˜æ¡(é›†æˆç”µè·¯æ¿)â€”&gt;é€šç”µâ€”&gt;äº§ç”Ÿä¸€å®šçš„å®¹é‡å­˜å‚¨ç©ºé—´â€”&gt;å­˜å‚¨å„ç§æ•°æ®â€”&gt;æ–­ç”µâ€”&gt;å†…å­˜ç©ºé—´å…¨éƒ¨æ¶ˆå¤± å†…å­˜çš„ç©ºé—´æ˜¯ä¸´æ—¶çš„,è€Œç¡¬ç›˜çš„ç©ºé—´æ˜¯æŒä¹…çš„ å†…å­˜åŒ…å«2ä¸ªæ•°æ®:å†…å­˜å­˜å‚¨çš„æ•°æ®(ä¸€èˆ¬æ•°æ®/åœ°å€æ•°æ®)å’Œå†…å­˜åœ°å€å€¼æ•°æ® å†…å­˜åˆ†ç±»: - æ ˆç»“æ„: å…¨å±€å˜é‡ï¼Œå±€éƒ¨å˜é‡(ç©ºé—´è¾ƒå°) - å †ç»“æ„(åˆ—è¡¨ç»“æ„): å¯¹è±¡ (ç©ºé—´è¾ƒå¤§) 2. å¯¹è±¡ å…·æœ‰ä¸€å®šçš„å±æ€§æˆ–è€…æ–¹æ³•,ç‰¹æŒ‡çš„æŸä¸ªäº‹ç‰© çœ‹å¾—è§æˆ–è€…æ˜¯æ‘¸å¾—åˆ°,ç‰¹æŒ‡çš„æŸä¸ªä¸œè¥¿ è¯†åˆ«å¯¹è±¡,æŠ½è±¡å‡ºå¯¹è±¡æœ‰ä»€ä¹ˆç‰¹å¾å’Œè¡Œä¸º æŠ½è±¡å‡ºå½“å‰çš„å¯¹è±¡å±äºä»€ä¹ˆç±»åˆ« ä»¥ä¸Šéƒ½æ˜¯æŠ½è±¡å‡ºå¯¹è±¡å’Œç±»åˆ«çš„è¿‡ç¨‹,æŠ½è±¡æ€§ æŠ½è±¡çš„è¿‡ç¨‹è¦è½¬å˜æˆä»£ç çš„æ–¹å¼,å†™ä»£ç :å…ˆæœ‰ç±»åˆ«(æ„é€ å‡½æ•°),åˆ›å»ºå¯¹è±¡å¹¶è®¾ç½®å¯¹è±¡çš„å±æ€§åŠæ–¹æ³•çš„åˆå§‹å€¼,å¯¹è±¡çš„åˆå§‹åŒ–è¿‡ç¨‹,æœ€ç»ˆå¯¹è±¡è°ƒç”¨ç›¸å…³æ–¹æ³•,æ“ä½œç›¸å…³å±æ€§åŠæŸäº›è¡Œä¸º ç‰¹å¾å°±æ˜¯å±æ€§,è¡Œä¸ºå°±æ˜¯æ–¹æ³•,ç±»åˆ«å°±æ˜¯æ„é€ å‡½æ•°,åˆ›å»ºå¯¹è±¡å°±æ˜¯å®ä¾‹åŒ–çš„è¿‡ç¨‹(åˆå§‹åŒ–å±æ€§åŠæ–¹æ³•çš„ä¸­) å·¥å‚æ¨¡å¼:è‡ªå®šä¹‰å‡½æ•°å®ç°å¯¹è±¡çš„åˆ›å»º é€šè¿‡æ„é€ å‡½æ•°å®ç°å¯¹è±¡çš„åˆ›å»º å­—é¢é‡çš„æ–¹å¼åˆ›å»ºå¯¹è±¡ 1234567891011121314151617181920212223// 1.é€šè¿‡å­—é¢é‡åˆ›å»ºå¯¹è±¡var obj =&#123;&#125;// 2.é€šè¿‡å·¥å‚æ¨¡å¼åˆ›å»ºå¯¹è±¡function createObject(name,age)&#123; var obj = new Object() obj.name = name obj.age = age return obj&#125;var obj1 =createObject(&#x27;å°æ˜&#x27;,10)var obj2 =createObject(&#x27;å°çº¢&#x27;,20)console.log(obj1,obj2)// 3.æ„é€ å‡½æ•°çš„æ–¹å¼åˆ›å»ºå¯¹è±¡function Person(name,gender)&#123; this.name = name this.gender = gender this.sayHi=function()&#123; console.log(&#x27;æ‚¨å¥½,æˆ‘æ˜¯:&#x27;+this.name) &#125;&#125;var per = new Person(&#x27;å°æ˜&#x27;,&#x27;ç”·&#x27;)per.sayHi()console.log(per) é€šè¿‡ES6ä¸­çš„classæ¥åˆ›å»º 12345678910111213141516// ç±»çš„æ–¹å¼class Student&#123; constructor(name,age,gender)&#123; this.name = name this.age =age this.gender = gender &#125; // åœ¨åŸå‹ä¸Š sayHi()&#123; console.log(`æ‚¨å¥½,æˆ‘æ˜¯$&#123;this.name&#125;,å‡ å¹´$&#123;this.age&#125;å²äº†,æ˜¯$&#123;this.gender&#125;ç”Ÿ`) &#125; // åœ¨å®ä¾‹ä¸Š eat=()=&gt;&#123; console.log(&#x27;åƒä¸œè¥¿å•Š&#x27;) &#125;&#125; å•ä¾‹æ¨¡å¼ 123456789101112131415function createObj() &#123; var instance = null return function (name) &#123; if (!instance) &#123; instance = new Object() instance.name =name &#125; return instance &#125;&#125;var getObj = createObj()var obj1 = getObj(&#x27;å°æ˜&#x27;)var obj2 = getObj(&#x27;å°çº¢&#x27;)console.log(obj1,obj2)console.log(obj1===obj2) 123451. å¯¹è±¡.å±æ€§åå­—2. å¯¹è±¡[&#x27;å±æ€§åå­—&#x27;]3. ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å¯¹è±¡[å±æ€§åå­—]çš„å†™æ³• - ä¸ç¡®å®šå±æ€§åå­—æ˜¯ä»€ä¹ˆ(å±æ€§åå­—æ˜¯å˜é‡) - å±æ€§åå­—ä¸å¤ªè§„èŒƒçš„æ—¶å€™ 123456jsæ˜¯å¼±ç±»å‹è¯­è¨€,å£°æ˜å˜é‡éƒ½ç”¨varjsæ˜¯è„šæœ¬è¯­è¨€ ç›´æ¥æ‰§è¡Œjsæ˜¯è§£é‡Šæ€§è¯­è¨€ ç›´æ¥è§£é‡Šjsæ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ å˜é‡åœ¨æ‰§è¡Œçš„æ—¶å€™æ‰çŸ¥é“å…·ä½“çš„ç±»å‹,å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§,ç‚¹äº†,å°±æœ‰äº†jsæ˜¯å•çº¿ç¨‹è¯­è¨€ æ‰§è¡Œçš„æ—¶å€™å®‰è£…ä¸€å®šçš„é¡ºåº,ä¹‹å‰çš„ä»£ç æ‰§è¡Œå®Œæ¯•å,åé¢æ‰æ‰§è¡Œjsæ˜¯åŸºäºå¯¹è±¡çš„è¯­è¨€,æœ€ç»ˆæ‰€æœ‰çš„å¯¹è±¡éƒ½æŒ‡å‘äº†object 3. åŸå‹ åŸå‹å°±æ˜¯å¯¹è±¡,JSä¸­åŸå‹ä¸€å…±æœ‰ä¸¤ä¸ª,ä¸€ä¸ªæ˜¯prototypeï¼Œä¸€ä¸ªæ˜¯**__proto__å±æ€§** 1234567891011121314151617181920 - prototype: æµè§ˆå™¨çš„æ ‡å‡†å±æ€§,ç¨‹åºå‘˜ä½¿ç”¨çš„,æ˜¾ç¤ºåŸå‹,å­˜åœ¨äºå‡½æ•°ä¸­ - __proto__: æµè§ˆå™¨çš„éæ ‡å‡†å±æ€§,æµè§ˆå™¨ä½¿ç”¨çš„,éšå¼åŸå‹,å­˜åœ¨äºå®ä¾‹å¯¹è±¡ä¸­ - å‡½æ•°ä¸­æœ‰prototype,å®ä¾‹å¯¹è±¡ä¸­æœ‰__proto__ - å®ä¾‹å¯¹è±¡ä¹Ÿæ˜¯å¯¹è±¡,é‡Œé¢å°±æœ‰__proto__ - å®ä¾‹çš„__proto__ä¸å¯¹åº”å‡½æ•°çš„prototypeéƒ½æŒ‡å‘åŸå‹å¯¹è±¡ - æ— è®ºæ˜¯æ„é€ å‡½æ•°è¿˜æ˜¯æ™®é€šå‡½æ•°,æˆ–è€…æ˜¯æ–¹æ³•,åªè¦æ˜¯å‡½æ•°,å†…éƒ¨å°±æœ‰prototype2. åŸå‹çš„ä½œç”¨ä¹‹ä¸€:å…±äº«æ•°æ®,èŠ‚çœå†…å­˜ç©ºé—´ 1.å®ä¾‹å¯¹è±¡ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œåˆ›å»ºçš„,å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™åšçš„å››ä»¶äº‹: - var per = new Person(&#x27;å¡å¡è¥¿&#x27;,20) 1) ç”³è¯·ä¸€å—ç©ºé—²çš„ç©ºé—´,ç”¨æ¥å­˜å‚¨å½“å‰çš„å®ä¾‹å¯¹è±¡ 2) è®¾ç½®thisä¸ºå½“å‰çš„å®ä¾‹å¯¹è±¡(ä¿®æ”¹thisçš„æŒ‡å‘) 3) åˆå§‹åŒ–å®ä¾‹å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•çš„å€¼ 4) æŠŠthisä½œä¸ºå½“å‰å¯¹è±¡è¿›è¡Œè¿”å› 2. åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰çš„å±æ€§åŠæ–¹æ³•,ä»…ä»…æ˜¯ç¼–å†™ä»£ç è¿›è¡Œå®šä¹‰è€Œå·²,è€Œå®é™…ä¸Šé‡Œé¢å®šä¹‰çš„å±æ€§åŠæ–¹æ³•æ˜¯å±äºæ¯ä¸ªå®ä¾‹å¯¹è±¡çš„,æ‰€ä»¥,åˆ›å»ºå¤šä¸ªå¯¹è±¡,å°±ä¼šå¼€è¾Ÿå¤šä¸ªç©ºé—´,æ¯ä¸ªç©ºé—´ä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„å±æ€§åŠæ–¹æ³•,å¤§é‡åˆ›å»ºå¯¹è±¡,å¯¹è±¡çš„æ–¹æ³•éƒ½ä¸æ˜¯åŒä¸€ä¸ªæ–¹æ³•(æ–¹æ³•ä¹Ÿæ˜¯å‡½æ•°,å‡½æ•°ä»£ç ä¹Ÿå ç”¨ç©ºé—´),ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´,é‚£ä¹ˆå¯ä»¥ä½¿ç”¨åŸå‹çš„æ–¹å¼,å®ç°æ•°æ®å…±äº«,èŠ‚çœå†…å­˜ç©ºé—´ 3. åŸå‹çš„ä½œç”¨ä¹‹äºŒ:å®ç°JSä¸­çš„ç»§æ‰¿ 1). é€šè¿‡æ”¹å˜åŸå‹æŒ‡å‘å®ç°ç»§æ‰¿ 2). å€Ÿç”¨æ„é€ å‡½æ•°æ˜¾ç¤ºç»§æ‰¿ 3). ç»„åˆç»§æ‰¿ 4). æ‹·è´ç»§æ‰¿:æµ…æ‹·è´å’Œæ·±æ‹·è´(é€’å½’åå†è¯´) åŸå‹å¯¹è±¡ä¸Šæœ‰ä¸€ä¸ªconstructorå±æ€§æŒ‡å‘å¯¹åº”çš„æ„é€ å‡½æ•° function Fn () {} const fn = new Fn() : åŒºåˆ«æ‰§è¡Œå‡½æ•°å®šä¹‰ä¸æ‰§è¡Œå‡½æ•° æ‰§è¡Œå‡½æ•°å®šä¹‰: ä¹Ÿå°±æ˜¯å»åˆ›å»ºå‡½æ•°å¯¹è±¡, åªæ˜¯æœ‰å¯èƒ½è¢«JSå¼•æ“æå‡é¢„å¤„ç†æ‰§è¡Œ æ‰§è¡Œå‡½æ•°: æ‰§è¡Œå‡½æ•°ä½“ä¸­æ‰€æœ‰è¯­å¥ å…ˆæœ‰å‡½æ•°å®šä¹‰çš„æ‰§è¡Œ,æ‰æœ‰æ‰§è¡Œå‡½æ•° å¸¸è§çš„å›è°ƒ DOMäº‹ä»¶çš„å›è°ƒ å®šæ—¶å™¨ä¸­çš„å›è°ƒ ajaxå›è°ƒå‡½æ•°(åé¢è®²) ç”Ÿå‘½å‘¨æœŸçš„å›è°ƒ(åé¢è®²) ç«‹å³æ‰§è¡Œå‡½æ•°(Immediately-Invokey Function Expression) åŒ¿åå‡½æ•°è‡ªè°ƒç”¨ ä½œç”¨:éšè—å†…éƒ¨å®ç°,å‡å°‘å‘½åç©ºé—´çš„æ±¡æŸ“ è¯´è¯´å‡½æ•°å¯¹è±¡ä¸Šçš„prototypeå±æ€§?(prototypeä»€ä¹ˆæ—¶å€™å‡ºç°,æ‰§è¡Œå‡½æ•°å®šä¹‰çš„æ—¶å€™) æ‰§è¡Œå‡½æ•°å®šä¹‰å®šä¹‰(æœ‰å¯èƒ½è¢«æå‡æ‰§è¡Œ)åˆ›å»ºå‡½æ•°å¯¹è±¡ ç»™å‡½æ•°å¯¹è±¡æ·»åŠ prototypeå±æ€§, å±æ€§å€¼ä¸ºç©ºçš„Objectå®ä¾‹å¯¹è±¡, ä¹Ÿå°±æ˜¯åŸå‹å¯¹è±¡ ç»™åŸå‹å¯¹è±¡æ·»åŠ constructorå±æ€§, å€¼ä¸ºå‡½æ•° ä¼ªä»£ç : 123456789// ç»™å‡½æ•°å¯¹è±¡æ·»åŠ prototypeå±æ€§, å±æ€§å€¼ä¸ºç©ºçš„Objectå®ä¾‹å¯¹è±¡, ä¹Ÿå°±æ˜¯åŸå‹å¯¹è±¡function Fn()&#123;&#125;console.dir(Fn)var obj =&#123;&#125;console.log(obj.__proto__===Object.prototype)console.log(Fn.prototype.__proto__===Object.prototype)// ä¼ªä»£ç this.prototype = &#123;&#125; // thiså°±æ˜¯å‡½æ•°å¯¹è±¡this.prototype.constructor = Fn è¯´è¯´å®ä¾‹å¯¹è±¡ä¸Šçš„**__proto__å±æ€§**?(_proto-ä»€ä¹ˆæ—¶å€™å‡ºç°,å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™) â€‹ JSå¼•æ“åœ¨åˆ›å»ºå®ä¾‹å¯¹è±¡æ—¶å†…éƒ¨è‡ªåŠ¨æ‰§è¡Œæ—¶, ä¼šè‡ªåŠ¨ç»™å®ä¾‹å¯¹è±¡æ·»åŠ __proto__å±æ€§, å€¼ä¸ºæ„é€ å‡½æ•°çš„ prototypeå±æ€§çš„å€¼ 1this.__proto__ = Fn.prototype // thisæ˜¯å®ä¾‹å¯¹è±¡ åŸå‹é“¾(å®é™…ä¸Šæ˜¯éšå¼åŸå‹é“¾,è¨€å¤–ä¹‹æ„å°±æ˜¯å’Œæ˜¾ç¤ºåŸå‹æ²¡æ¯›å…³ç³»,æ˜¾ç¤ºåŸå‹äº§ç”Ÿå®ä¾‹çš„ä¸€ç¬é—´èµ·çš„ä½œç”¨) ä»å¯¹è±¡çš„__proto__å¼€å§‹, è¿æ¥çš„æ‰€æœ‰å¯¹è±¡, å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åŸå‹é“¾, ä¹Ÿå¯ç§°ä¸ºéšå¼åŸå‹é“¾ æŸ¥æ‰¾å¯¹è±¡å±æ€§ç®€å•è¯´: å…ˆåœ¨è‡ªèº«ä¸ŠæŸ¥æ‰¾, æ‰¾ä¸åˆ°å°±æ²¿ç€åŸå‹é“¾æŸ¥æ‰¾,å¦‚æœè¿˜æ‰¾ä¸åˆ°è¿”å›undefined æŸ¥æ‰¾å¯¹è±¡ä¸Šå±æ€§çš„åŸºæœ¬æµç¨‹ å…ˆåœ¨å¯¹è±¡è‡ªèº«ä¸ŠæŸ¥æ‰¾, å¦‚æœæœ‰, ç›´æ¥è¿”å› å¦‚æœæ²¡æœ‰, æ ¹æ®__proto__åœ¨åŸå‹å¯¹è±¡ä¸ŠæŸ¥æ‰¾, å¦‚æœæœ‰, ç›´æ¥è¿”å› å¦‚æœæ²¡æœ‰æ ¹æ®åŸå‹å¯¹è±¡çš„__proto__åœ¨åŸå‹å¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸ŠæŸ¥æ‰¾, ä¸€ç›´æŸ¥æ‰¾åˆ°ObjectåŸå‹å¯¹è±¡ä¸ºæ­¢ å¦‚æœæ‰¾åˆ°äº†è¿”å›, å¦‚æœæŸ¥æ‰¾ä¸åˆ°ç”±äºå®ƒçš„__proto__ä¸ºnull, åªèƒ½è¿”å›undefined æŸ¥æ‰¾å¯¹è±¡å±æ€§æ—¶å€™,ä¼šä¸ä¼šè¯»å‡½æ•°çš„prototype?(ä¼šè¿˜æ˜¯ä¸ä¼š) 123456789101112// ç®€å•çš„åŸå‹é“¾function F1()&#123;&#125;F1.prototype.number =100function F2()&#123;&#125;F2.prototype=new F1()F2.prototype.number =200function F3()&#123;&#125;F3.prototype=new F2()F3.prototype.number =300var f3 = new F3()console.log(f3.number)console.dir(f3) è¡¨è¾¾å¼a.bçš„è§£ææµç¨‹ æŸ¥çœ‹aå˜é‡: ä½œç”¨åŸŸé“¾æŸ¥çœ‹ ä¸å­˜åœ¨ ==&gt; æŠ¥é”™ å­˜åœ¨, å¾—åˆ°å®ƒçš„å€¼ åŸºæœ¬ç±»å‹(var a=null/a=undefined,æ­¤æ—¶a.bæŠ¥é”™) null/undefined ===&gt; æŠ¥é”™ number/string/boolean ==&gt; åˆ›å»ºä¸€ä¸ªåŒ…å«æ­¤å€¼çš„åŒ…è£…ç±»å‹å¯¹è±¡, è¿›å…¥ä¸‹é¢æµç¨‹ åœ°å€å€¼ ===&gt; è§£æ.b ===&gt; æŸ¥æ‰¾bå±æ€§ å…ˆåœ¨è‡ªèº«æ‰¾, æ‰¾åˆ°äº†è¿”å›, å¦‚æœæ²¡æœ‰æ‰¾åˆ° åŸå‹é“¾æŸ¥æ‰¾ æ‰¾åˆ°äº†è¿”å› æ²¡æ‰¾åˆ°, è¿”å›undefined instanceOf ä½œç”¨: åˆ¤æ–­ä¸€ä¸ªä»»æ„ç±»å‹å¯¹è±¡çš„å…·ä½“ç±»å‹ å¦‚ä½•åˆ¤æ–­? å¯¹äº A instanceof B Aæ˜¯å®ä¾‹å¯¹è±¡, Bæ˜¯æ„é€ å‡½æ•° å¦‚æœBçš„prototypeå±æ€§æ‰€æŒ‡å‘çš„åŸå‹å¯¹è±¡æ˜¯Aå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾æ¥ä¸Šçš„æŸä¸ªå¯¹è±¡, è¿”å›true, å¦åˆ™è¿”å›false åŸå‹ä¸åŸå‹é“¾ç»“æ„å›¾ 123456789101112131415function Foo() &#123; &#125;const f1 = new Foo()const f2 = new Foo() const o1 = new Object()const o2 = &#123;&#125;// ä¸‹é¢çš„ç»“æœconsole.log(Foo instanceof Object)console.log(Foo instanceof Function)console.log(Object instanceof Object)console.log(Function instanceof Function)console.log(Function instanceof Object)console.log(Object instanceof Foo)console.log(f1 instanceof Function)console.log(f1 instanceof Object) 1234561. å¯¹è±¡ä¸­æœ‰__proto__,å‡½æ•°ä¸­æœ‰prototype - å®ä¾‹å¯¹è±¡ä¸­__proto__æŒ‡å‘çš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡å¯¹åº”çš„æ„é€ å‡½æ•°ä¸­çš„prototype - è€Œæ¯ä¸ªprototypeéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡,æ‰€ä»¥,å†…éƒ¨å¿…ç„¶æœ‰__proto__ï¼Œæ™®é€šå‡½æ•°ä¸­çš„prototypeçš„__proto__æŒ‡å‘çš„æ˜¯Objectçš„prototype - æ¯ä¸ªå‡½æ•°æ˜¯Functionçš„å®ä¾‹å¯¹è±¡,æ‰€ä»¥,åªè¦æ˜¯å‡½æ•°,é‚£ä¹ˆå‡½æ•°å¯¹è±¡ä¸­__proto__æŒ‡å‘çš„éƒ½æ˜¯Functionçš„prototype,é‚£ä¹ˆè¿™ä¸ªprototypeä¸­çš„__proto__æŒ‡å‘çš„ä»ç„¶æ˜¯Objectçš„prototype - ä½†æ˜¯,Objectè¿™ä¸ªæ„é€ å‡½æ•°ä¹Ÿæ˜¯å‡½æ•°,æ‰€ä»¥,Objectçš„__proto__æŒ‡å‘çš„æ˜¯Functionçš„prototype - Functionè¿™ä¸ªæ„é€ å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡,æ‰€ä»¥é‡Œé¢çš„__proto__æŒ‡å‘çš„æ˜¯Functionçš„prototype ç»§æ‰¿(æ”¹å˜åŸå‹æŒ‡å‘/å€Ÿç”¨æ„é€ å‡½æ•°/ç»„åˆ/æ‹·è´) æ–¹å¼ä¸€: åŸºäºæ„é€ å‡½æ•°çš„ç»§æ‰¿: åŸå‹é“¾ + å€Ÿç”¨æ„é€ å‡½æ•°çš„ç»„åˆå¼ç»§æ‰¿ å€Ÿç”¨çˆ¶ç±»å‹æ„é€ å‡½æ•°: Person.call(this, name, age) è®©å­ç±»çš„åŸå‹ä¸ºçˆ¶ç±»çš„å®ä¾‹: Student.prototype = new Person() è®©å­ç±»å‹åŸå‹çš„æ„é€ å™¨ä¸ºå­ç±»å‹: Student.prototype.constructor = Student 12345678910111213141516171819202122232425262728// é€šè¿‡åŸå‹å®ç°ç»§æ‰¿function Person(name,age,gender)&#123; this.name = name this.age =age this.gender = gender&#125;Person.prototype.sayHi=function()&#123; console.log(&#x27;æ‚¨å¥½&#x27;)&#125;Person.prototype.eat=function()&#123; console.log(&#x27;å¥½åƒ&#x27;)&#125;function Student(name,age,gender,score)&#123; // å€Ÿç”¨æ„é€ å‡½æ•°å®ç°å±æ€§çš„ç»§æ‰¿ Person.call(this,name,age,gender) this.score = score&#125;// åŸå‹å®ç°æ–¹æ³•çš„ç»§æ‰¿Student.prototype=new Person()Student.prototype.constructor = Student// é‡å†™æ–¹æ³•Student.prototype.eat=function()&#123; console.log(&#x27;å­¦ç”Ÿåƒ&#x27;)&#125;var stu = new Student(&#x27;å°æ˜&#x27;,20,&#x27;ç”·&#x27;,100)stu.sayHi()stu.eat()console.log(stu) æ–¹å¼äºŒ: åŸºäºclass/ç±»çš„ç»§æ‰¿ å­ç±» extends çˆ¶ç±»: class Teacher extends Person2 å­ç±»æ„é€ å™¨ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ : super(name, age) 12345678910111213141516171819202122232425262728293031323334353637// ES6çš„æ–¹å¼å®ç°ç»§æ‰¿class Person&#123; constructor(name,age)&#123; this.name = name this.age = age &#125; // åŸå‹ä¸Šçš„æ–¹æ³• sayHi()&#123; console.log(&#x27;æ‚¨å¥½&#x27;) &#125; // èµ‹å€¼çš„å†™æ³•å°±æ˜¯ç»™å®ä¾‹æ·»åŠ å±æ€§æˆ–è€…æ–¹æ³•-------- // å®ä¾‹å±æ€§ sex = &#x27;ç”·&#x27; // å®ä¾‹ä¸Šçš„æ–¹æ³• run =function()&#123;&#125; eat=()=&gt;&#123; console.log(&#x27;å¥½åƒå•Š&#x27;) &#125; // é™æ€å±æ€§ static gender=&#x27;ç”·&#x27;&#125;var per = new Person(&#x27;å°æ˜æ˜&#x27;,30)console.log(per)console.dir(Person) class Student extends Person&#123; constructor(name,age,gender)&#123; super(name,age) this.gender = gender &#125; // é‡å†™çˆ¶ç±»ä¸­çš„æ–¹æ³• sayHi()&#123; console.log(&#x27;æˆ‘å¾ˆå¥½&#x27;) &#125;&#125;var stu = new Student(&#x27;å°æ˜&#x27;,20,&#x27;ç”·&#x27;)console.log(stu) 4. é¢„è§£æ jså¼•æ“åœ¨jsä»£ç æ­£å¼æ‰§è¡Œä¹‹å‰ä¼šåšä¸€äº›é¢„è§£æçš„æ“ä½œ å…ˆæ‰¾å…³é”®å­—var,function æ‰¾åˆ°varä»¥åå°†varåé¢çš„å˜é‡æå‰å£°æ˜,ä½†æ˜¯ä¸èµ‹å€¼ æ‰¾åˆ°functionä»¥åå°†functionåé¢çš„å‡½æ•°æå‰å£°æ˜,ä½†æ˜¯ä¸èµ‹å€¼,ä¹Ÿå°±æ˜¯è¯´å‡½æ•°åœ¨è§£æä¹‹å‰å·²ç»å®šä¹‰å®Œæ¯•äº† å˜é‡çš„æå‡ - æµè§ˆå™¨åœ¨è§£æjsä»£ç ä¹‹å‰,å…ˆæŠŠå˜é‡çš„å£°æ˜æå‡ 6. å‡½æ•°çš„æå‡ - æµè§ˆå™¨åœ¨è§£æjsä»£ç ä¹‹å‰,å…ˆæŠŠå‡½æ•°çš„å£°æ˜æå‡ - å‡½æ•°æå‡ ==&gt; å˜é‡æå‡, åŒåçš„å˜é‡å¿½ç•¥ 1234567// å…ˆæå‡çš„è°?a()var a = 100function a()&#123; console.log(&#x27;å‡½æ•°&#x27;)&#125;console.log(a) â€‹â€‹ 7. æ³¨æ„:f2() var f2=function()&#123;&#125;; æŠ¥é”™:å› ä¸ºf2æ˜¯undefined 8. é¢„è§£æ:å…¨å±€é¢„è§£æå’Œå±€éƒ¨é¢„è§£æ 5. æ‰§è¡Œä¸Šä¸‹æ–‡ æ‰§è¡Œä¸Šä¸‹æ–‡(åŠ¨æ€çš„):å°±æ˜¯ä¸€ä¸ªä»£ç çš„æ‰§è¡Œç¯å¢ƒ(å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å’Œå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡,evalå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡) 123456789101112131. æ‰§è¡Œä¸Šä¸‹æ–‡æ¦‚å¿µ:ä»£è¡¨äº†ä»£ç æ‰§è¡Œçš„ç¯å¢ƒ,åŒ…å«:æ‰§è¡Œç¯å¢ƒ,å˜é‡å¯¹è±¡,this,ä½œç”¨åŸŸé“¾2. æµç¨‹:- jså¼•æ“åœ¨jsä»£ç æ­£å¼æ‰§è¡Œå‰ä¼šå…ˆåˆ›å»ºä¸€ä¸ªæ‰§è¡Œç¯å¢ƒ- è¿›å…¥è¯¥ç¯å¢ƒä»¥åä¼šåˆ›å»ºä¸€ä¸ªå˜é‡å¯¹è±¡,è¯¥å¯¹è±¡ç”¨äºæ”¶é›†:å˜é‡,å‡½æ•°,å‡½æ•°çš„å‚æ•°,this- æ‰¾å…³é”®å­—var,function- ç¡®è®¤this- åˆ›å»ºä½œç”¨åŸŸé“¾3. åœ¨å…¨å±€ä»£ç æ‰§è¡Œå‰,jså¼•æ“å°±ä¼šåˆ›å»ºä¸€ä¸ªæ ˆæ¥å­˜å‚¨ç®¡ç†æ‰€æœ‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡4. åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡(window)ç¡®å®šå,å°†å…¶æ·»åŠ åˆ°æ ˆä¸­(å‹æ ˆ)5. åœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºå,å°†å…¶æ·»åŠ åˆ°æ ˆä¸­(å‹æ ˆ)6. åœ¨å½“å‰å‡½æ•°æ‰§è¡Œå®Œæ¯•å,å°†æ ˆé¡¶çš„å¯¹è±¡ç§»é™¤(å‡ºæ ˆ)7. å½“æ‰€æœ‰çš„ä»£ç æ‰§è¡Œå®Œæ¯•å,æ ˆä¸­åªå‰©ä¸‹window8. é‡ç‚¹:æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯åŠ¨æ€åˆ›å»ºçš„,å°¤å…¶æ˜¯é’ˆå¯¹å‡½æ•°,æ¯è°ƒç”¨ä¸€æ¬¡å‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€æ¬¡æ‰§è¡Œä¸Šä¸‹æ–‡ æ€»ç»“æ‰§è¡Œä¸Šä¸‹æ–‡: å½“ä»£ç è¦æ‰§è¡Œ,ä½†æ˜¯æ²¡æœ‰æ‰§è¡Œ,æˆ–è€…å°†è¦æ‰§è¡Œ,åœ¨é¢„è§£æä¹‹å,æ­¤æ—¶å‡ºç°äº†å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒ(å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡),åˆ›å»ºäº†ä¸€ä¸ªå˜é‡å¯¹è±¡,ç”¨æ¥æ”¶é›†var , function ,å‡½æ•°å‚æ•°,ç¡®å®šthisçš„æŒ‡å‘,é»˜è®¤å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ç¡®å®šäº†thisæ˜¯window,è¿™ä¸ªå˜é‡å¯¹è±¡ä¼šè¢«å‹å…¥åˆ°æ ˆä¸­(å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åœ¨æ ˆä¸­çš„æœ€ä¸‹é¢),å¦‚æœå‡ºç°äº†å‡½æ•°è°ƒç”¨,æ­¤æ—¶å‡ºç°äº†å±€éƒ¨æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒ(å±€éƒ¨æ‰§è¡Œä¸Šä¸‹æ–‡),å†æ¬¡åˆ›å»ºä¸€ä¸ªå˜é‡å¯¹è±¡,ç”¨æ¥æ”¶é›†å‡½æ•°å‚æ•°,var ,function,æ”¹å˜thisçš„æŒ‡å‘,è¿™ä¸ªå˜é‡å¯¹è±¡ä¼šè¢«å†æ¬¡å‹å…¥æ ˆä¸­,åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡çš„ä¸Šé¢,å¦‚æœå½“å‰å‡½æ•°è°ƒç”¨å®Œæ¯•,æ­¤æ—¶å‡ºæ ˆ(æŠŠå±€éƒ¨ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡å¹²æ‰),ä¾æ¬¡å¼¹å‡ºå˜é‡å¯¹è±¡,å°±ç»“æŸäº† 6. ä½œç”¨åŸŸ æ¦‚å¿µ:å˜é‡çš„ä½¿ç”¨èŒƒå›´,é™æ€çš„(ç¼–å†™ä»£ç çš„æ—¶å€™å°±å·²ç»ç¡®å®šäº†) å…¨å±€ä½œç”¨åŸŸå’Œå±€éƒ¨ä½œç”¨åŸŸ å…¨å±€ä½œç”¨åŸŸ:å‡½æ•°å¤–éƒ¨å˜é‡çš„ä½¿ç”¨èŒƒå›´ å±€éƒ¨ä½œç”¨åŸŸ:å‡½æ•°å†…å˜é‡çš„ä½¿ç”¨èŒƒå›´(ä¸€ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªä½œç”¨åŸŸ) å—çº§ä½œç”¨åŸŸ(ES6æ–°å¢): const / let ä½œç”¨:éš”ç¦»å˜é‡,ä¸åŒçš„ä½œç”¨åŸŸä¸‹åŒåçš„å˜é‡ä¸ä¼šå†²çª å˜é‡åˆ†ä¸º:å…¨å±€å˜é‡(éå‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡)å’Œå±€éƒ¨å˜é‡(å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡) å¤šä¸ªåµŒå¥—çš„ä½œç”¨åŸŸå½¢æˆçš„ç”±å†…å‘å¤–çš„ç»“æ„, ç”¨äºæŸ¥æ‰¾å˜é‡ ä½œç”¨åŸŸäºæ‰§è¡Œä¸Šä¸‹æ–‡ 123456789101112131415161718192021221. å…¨å±€ä½œç”¨åŸŸä¹‹å¤–,æ¯ä¸ªå‡½æ•°éƒ½ä¼šåˆ›å»ºè‡ªå·±çš„ä½œç”¨åŸŸ,ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰æ—¶å·²ç»ç¡®å®šäº†,è€Œä¸æ˜¯å‡½æ•°è°ƒç”¨æ—¶2. å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒåœ¨å…¨å±€ä½œç”¨åŸŸç¡®å®šä¹‹å,jsä»£ç é©¬ä¸Šæ‰§è¡Œä¹‹å‰åˆ›å»º3. å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒæ˜¯åœ¨è°ƒç”¨å‡½æ•°æ—¶,å‡½æ•°ä½“ä»£ç æ‰§è¡Œä¹‹å‰åˆ›å»º4. ä½œç”¨åŸŸæ˜¯é™æ€çš„,åªè¦å‡½æ•°å®šä¹‰å¥½äº†å°±ä¸€ç›´å­˜åœ¨,ä¸”ä¸ä¼šå†å˜åŒ–5. æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯åŠ¨æ€çš„,è°ƒç”¨å‡½æ•°æ—¶åˆ›å»º,å‡½æ•°è°ƒç”¨ç»“æŸæ—¶ä¸Šä¸‹æ–‡ç¯å¢ƒå°±ä¼šé‡Šæ”¾6. ä¸Šä¸‹æ–‡ç¯å¢ƒ(å¯¹è±¡)æ˜¯ä»å±äºæ‰€åœ¨çš„ä½œç”¨åŸŸ7. å…¨å±€ä¸Šä¸‹æ–‡ç¯å¢ƒ--&gt;å…¨å±€ä½œç”¨åŸŸ8. ä½œç”¨åŸŸé“¾ 1. ç”¨æ¥å†³å®šä»£ç æ‰§è¡Œçš„èŒƒå›´,å˜é‡çš„ä½œç”¨èŒƒå›´ 2. ä½œç”¨åŸŸæ˜¯ä»£ç å®šä¹‰çš„æ—¶å€™å†³å®šçš„ 3. ä½œç”¨åŸŸé“¾æ˜¯å¦‚ä½•äº§ç”Ÿçš„ - å‡½æ•°åœ¨å®šä¹‰çš„æ—¶å€™è‡ªåŠ¨æ·»åŠ ä¸€ä¸ªå±æ€§&#x27;[[Scopes]]&#x27;è¯¥å±æ€§ä¿å­˜çš„æ˜¯å…¶ä¸Šçº§ä½œç”¨åŸŸé“¾ - å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™,è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒ,å°†åˆ›å»ºçš„å˜é‡å¯¹è±¡æ·»åŠ åˆ°&#x27;[[Scopes]]&#x27;æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®,å½¢æˆæ–°çš„æ•°ç»„ 4. æŸ¥æ‰¾å˜é‡çš„è§„åˆ™ - å…ˆåœ¨å½“å‰ä½œç”¨åŸŸçš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾,æ‰¾åˆ°åˆ™ä½¿ç”¨ - å¦‚æœæ²¡æœ‰åˆ™æ²¿ç€ä½œç”¨åŸŸé“¾çš„æ•°ç»„å»ä¸Šçº§ä½œç”¨åŸŸä¸­çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾ - æ‰¾åˆ°å°±è¿”å›å¯¹åº”çš„å€¼,å¦‚æœæ²¡æœ‰ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾,çŸ¥é“æ‰¾åˆ°æœ€åä¸€ä¸ªå˜é‡å¯¹è±¡(å…¨å±€çš„å˜é‡å¯¹è±¡),å¦‚æœæ²¡æœ‰åˆ™æŠ¥é”™å˜é‡çš„æŸ¥æ‰¾:ä»£ç ç¼–å†™çš„æ—¶å€™ç¡®å®šäº†å½“å‰å…¨å±€ä½œç”¨åŸŸåŠå±€éƒ¨ä½œç”¨åŸŸåœ¨ä»£ç é©¬ä¸Šæ‰§è¡Œ,è¿˜æ²¡æ‰§è¡Œ,æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒå°±å‡ºç°äº†,å‡½æ•°è°ƒç”¨å®Œæ¯•å,å±€éƒ¨æ‰§è¡Œä¸Šä¸‹æ–‡æ²¡äº†,æ•´ä¸ªä»£ç ç»“æŸ,å…¨å±€çš„æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒä¹Ÿæ²¡äº†å…¨å±€ä½œç”¨åŸŸ----&gt;é¢„è§£æ---&gt;å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒ---&gt;å…¨å±€çš„å˜é‡å¯¹è±¡&#123;var ,function ,å‡½æ•°å‚æ•°,thisçš„æŒ‡å‘&#125;-----&gt;å‡½æ•°å®šä¹‰----&gt;å±€éƒ¨ä½œç”¨åŸŸ----&gt;å‡ºç°äº†å‡½æ•°è°ƒç”¨-----&gt;å±€éƒ¨å±€è§£æ---&gt;å±€éƒ¨çš„æ‰§è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒ----&gt;å±€éƒ¨çš„å˜é‡å¯¹è±¡&#123;var ,function ,å‡½æ•°å‚æ•°,thisçš„æŒ‡å‘&#125; 7. é—­åŒ…- ç†è§£: - å½“åµŒå¥—çš„å†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å‡½æ•°çš„å˜é‡æ—¶å°±äº§ç”Ÿäº†é—­åŒ…(æ‰§è¡Œå¤–éƒ¨å‡½æ•°,ä¸ä¸€å®šå°±ä¼šäº§ç”Ÿé—­åŒ…) - ä»€ä¹ˆæ—¶å€™äº§ç”Ÿçš„é—­åŒ…? æ‰§è¡Œå†…éƒ¨å‡½æ•°å®šä¹‰(åˆ›å»ºå†…éƒ¨å‡½æ•°å¯¹è±¡)å - é€šè¿‡chromeå·¥å…·å¾—çŸ¥: é—­åŒ…æœ¬è´¨æ˜¯å†…éƒ¨å‡½æ•°ä¸­çš„ä¸€ä¸ªå¯¹è±¡(éjsçš„å®¹å™¨), è¿™ä¸ªå®¹å™¨ä¸­åŒ…å«å¼•ç”¨çš„å˜é‡ 1. é—­åŒ…å†…éƒ¨åŒ…å«äº†è¢«å¼•ç”¨å˜é‡(å‡½æ•°)çš„å¯¹è±¡ 2. è¯´ç™½äº†,é—­åŒ…å…¶å®å°±æ˜¯ä¸€ç§å¼•ç”¨å…³ç³»,å¼•ç”¨å…³ç³»å­˜åœ¨äºå†…éƒ¨å‡½æ•°ä¸­,å¼•ç”¨çš„æ˜¯å¤–éƒ¨å‡½æ•°çš„å˜é‡çš„å¯¹è±¡(æ·±å…¥ç†è§£) 2. å‡½æ•°å†…éƒ¨æœ¬èº«æ˜¯ä¸ªå±€éƒ¨ä½œç”¨åŸŸ,å¦‚æœå‡ºç°é—­åŒ…,å»¶é•¿äº†å±€éƒ¨ä½œç”¨åŸŸçš„ç”Ÿå‘½å‘¨æœŸ 3. é—­åŒ…å»¶é•¿å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸå,å¦‚æœä¸åŠæ—¶é‡Šæ”¾ä¼šå‡ºç°å†…å­˜æ³„æ¼ 4. é—­åŒ…ä½œç”¨: - é—­åŒ…çš„ä½œç”¨:å»¶é•¿å¤–éƒ¨å‡½æ•°å˜é‡å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ - è®©å‡½æ•°å¤–éƒ¨å¯ä»¥æ“ä½œ(è¯»å†™)å‡½æ•°å†…éƒ¨çš„æ•°æ®(å˜é‡/å‡½æ•°) 5. é—­åŒ…ä»€ä¹ˆäº§ç”Ÿçš„? - é—­åŒ…åœ¨åµŒå¥—å†…éƒ¨å‡½æ•°å®šä¹‰æ‰§è¡Œå®Œæˆæ—¶å°±äº§ç”Ÿäº†(ä¸æ˜¯è°ƒç”¨) 6. é—­åŒ…ä»€ä¹ˆæ—¶å€™æŒ‚çš„? - åœ¨åµŒå¥—çš„å†…éƒ¨å‡½æ•°æˆä¸ºåƒåœ¾å¯¹è±¡çš„æ—¶å€™ 7. é—­åŒ…çš„ä¼˜ç‚¹/ç¼ºç‚¹åŠå¦‚ä½•æ¸…é™¤é—­åŒ… - ä¼˜ç‚¹/ç¼ºç‚¹: å»¶é•¿å¤–éƒ¨å‡½æ•°å˜é‡å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ(ä¸åŠæ—¶æ¸…é™¤å®¹æ˜“é€ æˆå†…å­˜æº¢å‡ºã€æ³„æ¼) - é‡Šæ”¾é—­åŒ…: è®©å†…éƒ¨å‡½æ•°å¯¹è±¡æˆä¸ºåƒåœ¾å¯¹è±¡, æ–­å¼€æŒ‡å‘å®ƒçš„æ‰€æœ‰å¼•ç”¨ æ³¨æ„é—®é¢˜:å‡½æ•°ä¸­å®šä¹‰å‡½æ•°,å†…éƒ¨å‡½æ•°æ²¡æœ‰è°ƒç”¨,åˆ™ä¸ä¼šå‡ºç°åœ¨å±€éƒ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­ â€‹â€‹â€‹ 123456789101112131415161718192021222324function fn1() &#123; var a = 2; function fn2() &#123; a++; console.log(a); &#125; return fn2;&#125;// æ­¤æ—¶fn2é‡Šæ”¾äº†æ²¡æœ‰å‘¢?var f = fn1();// äº§ç”Ÿä¸€ä¸ªé—­åŒ…f();// äº§ç”Ÿä¸€ä¸ªé—­åŒ…f();var f2 = ff = nullfunction showDedelay (time, msg) &#123; setTimeout(() =&gt; &#123; alert(msg) &#125;, time)&#125;showDelay(1000) é—­åŒ…ä»€ä¹ˆæ—¶å€™äº§ç”Ÿçš„? æ‰§è¡Œå‡½æ•°å®šä¹‰äº§ç”Ÿå¼•ç”¨å˜é‡çš„çš„æ—¶å€™äº§ç”Ÿé—­åŒ… ä¸‹é¢çš„æ²¡æœ‰äº§ç”Ÿé—­åŒ…(æ²¡æœ‰äº§ç”Ÿå†…éƒ¨å‡½æ•°å¼•ç”¨å˜é‡,å‡½æ•°å¼•ç”¨å˜é‡æ˜¯æ‰§è¡Œå‡½æ•°å®šä¹‰æ‰èƒ½æœ‰è¯¥åº”ç”¨å˜é‡,fn2å°±æ˜¯å†…éƒ¨å¼•ç”¨å˜é‡) é—­åŒ…çš„åº”ç”¨: ä¸¾åˆ é™¤åˆ é™¤åˆ—è¡¨ä¸­çš„çš„æŸä¸ªå•†å“çš„ä¾‹å­(å¸¦ç¡®å®šæ¡†) å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼ 1. å†…å­˜æ³„éœ² ï¼šæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜åï¼Œæ— æ³•é‡Šæ”¾å·²ç”³è¯·çš„å†…å­˜ç©ºé—´å°±é€ æˆäº†å†…å­˜æ³„æ¼ï¼Œä¸€æ¬¡å†…å­˜æ³„æ¼ä¼¼ä¹ä¸ä¼šæœ‰å¤§çš„å½±å“ï¼Œä½†å†…å­˜æ³„æ¼å †ç§¯åçš„åæœå°±æ˜¯å†…å­˜æº¢å‡ºã€‚ 2. å†…å­˜æº¢å‡ºï¼š æŒ‡ç¨‹åºç”³è¯·å†…å­˜æ—¶ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ä¾›ç”³è¯·è€…ä½¿ç”¨ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ¯å­é‡Œä½ éè¦è£…ä¸€æ¡¶çš„æ°´ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯å†…å­˜ä¸å¤Ÿç”¨ï¼Œå³æ‰€è°“çš„å†…å­˜æº¢å‡ºï¼Œç®€å•æ¥è¯´å°±æ˜¯è‡ªå·±æ‰€éœ€è¦ä½¿ç”¨çš„ç©ºé—´æ¯”æˆ‘ä»¬æ‹¥æœ‰çš„å†…å­˜å¤§å†…å­˜ä¸å¤Ÿä½¿ç”¨æ‰€é€ æˆçš„å†…å­˜æº¢å‡ºã€‚ thisåœ¨ä¸åŒåœºæ™¯ä¸‹çš„å–å€¼? thiså­¦ä¹ çš„2ä¸ªç›®æ ‡: èƒ½åˆ¤æ–­å‡ºå‡½æ•°ä¸­çš„thisæ˜¯è° èƒ½æ§åˆ¶å‡½æ•°çš„thisæ˜¯éœ€è¦çš„ç‰¹å®šå¯¹è±¡ å¸¸è§„æƒ…å†µä¸‹, å‡½æ•°ä¸­çš„thiså–å†³äºæ‰§è¡Œå‡½æ•°çš„æ–¹å¼ fn(): ç›´æ¥è°ƒç”¨ ==&gt; thisæ˜¯? window new fn(): newè°ƒç”¨ ==&gt; thisæ˜¯? æ–°å»ºçš„å¯¹è±¡ obj.fn(): é€šè¿‡å¯¹è±¡è°ƒç”¨ ==&gt; thisæ˜¯? obj obj.fn()() fn.call/apply(obj): é€šè¿‡å‡½æ•°å¯¹è±¡çš„call/applyæ¥è°ƒç”¨ ==&gt; thisæ˜¯? obj (è°ƒç”¨fnè¿™ä¸ªå‡½æ•°,æŒ‡å®šæˆ–ç»‘å®šäº†å†…éƒ¨çš„thisä¸ºobj) ç‰¹æ®Šæƒ…å†µ: bind(obj)è¿”å›çš„å‡½æ•° ==&gt; thisæ˜¯? obj ç®­å¤´å‡½æ•° ==&gt; thisæ˜¯? å¤–éƒ¨ä½œç”¨åŸŸçš„this å›è°ƒå‡½æ•° å®šæ—¶å™¨/ajax/promise/æ•°ç»„éå†ç›¸å…³æ–¹æ³•å›è°ƒ ==&gt; thisæ˜¯? window(éä¸¥æ ¼æ¨¡å¼,å¦åˆ™éƒ½æ˜¯undefined) vueæ§åˆ¶çš„å›è°ƒå‡½æ•° ==&gt; thisæ˜¯? ç»„ä»¶çš„å®ä¾‹ Reactæ§åˆ¶çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒ, äº‹ä»¶ç›‘å¬å›è°ƒ ==&gt; thisæ˜¯? ç»„ä»¶å¯¹è±¡ / undefined å¦‚ä½•æ§åˆ¶å‡½æ•°çš„this? åˆ©ç”¨å‡½æ•°çš„bind() åˆ©ç”¨ç®­å¤´å‡½æ•° ä¹Ÿå¯ä»¥ç”¨å¤–éƒ¨ä¿å­˜äº†thisçš„å˜é‡ 12345678910111213141516171819202122 var m = 1 function f1()&#123; console.log(this.m) return 3 &#125; var obj = &#123;m:2&#125; f1.bind(obj) // ç»“æœ? f1() // ç»“æœ?? f1.bind(obj)()// ç»“æœ??? console.log(f1.bind(obj)()) // è‡ªå·±å®ç°bind Function.prototype.bind = function (obj) &#123; console.log(&#x27;myBind&#x27;) return () =&gt; &#123; return this.call(obj) &#125; &#125; 12345678910111213var obj2= &#123; test()&#123; const f1=()=&gt;&#123; console.log(&#x27;+++&#x27;,this) // è°? &#125; f1() const f2 = function()&#123; console.log(&#x27;----&#x27;,this) // è°? &#125; f2() &#125;&#125;obj2.test() 9. åŒæ­¥/å¼‚æ­¥è¿›ç¨‹: ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œ,å®ƒå æœ‰ä¸€ç‰‡ç‹¬æœ‰çš„å†…å­˜ç©ºé—´ çº¿ç¨‹: CPUçš„åŸºæœ¬è°ƒåº¦å•ä½,æ˜¯ç¨‹åºæ‰§è¡Œçš„ä¸€ä¸ªå®Œæ•´æµç¨‹ 1. ä¸€ä¸ªè¿›ç¨‹ä¸­ä¸€èˆ¬è‡³å°‘æœ‰ä¸€ä¸ªè¿è¡Œçš„çº¿ç¨‹:ä¸»çº¿ç¨‹ 2. ä¸€ä¸ªè¿›ç¨‹ä¸­ä¹Ÿå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹,æˆ‘ä»¬ä¼šè¯´ç¨‹åºæ˜¯å¤šçº¿ç¨‹çš„ 3. ä¸€ä¸ªè¿›ç¨‹ä¸­çš„æ•°æ®å¯ä»¥ä¾›å…¶å¤šä¸ªçº¿ç¨‹ç›´æ¥å…±äº« 4. å¤šä¸ªè¿›è¡Œè´¨æ£€çš„æ•°æ®æ˜¯ä¸èƒ½ç›´æ¥å…±äº«çš„ æµè§ˆå™¨è¿è¡Œæ˜¯å•è¿›ç¨‹è¿˜æ˜¯å¤šè¿›ç¨‹ 1. æœ‰çš„æ˜¯å•è¿›ç¨‹çš„ - firefox - è€ç‰ˆæœ¬IE 2. æœ‰çš„æ˜¯å¤šè¿›ç¨‹ - chrome - æ–°ç‰ˆIE - æ–°ç‰ˆç«ç‹ 3. å¦‚ä½•æŸ¥çœ‹æµè§ˆå™¨æ˜¯å¦æ˜¯å¤šè¿›ç¨‹è¿è¡Œçš„ - ä»»åŠ¡ç®¡ç†å™¨-----&gt;è¿›ç¨‹ - éƒ½æ˜¯å¤šçº¿ç¨‹è¿è¡Œçš„ æµè§ˆå™¨å†…æ ¸ 1234567891011121. æ”¯æŒæµè§ˆå™¨è¿è¡Œçš„æ ¸å¿ƒçš„ç¨‹åº2. ä¸åŒçš„æµè§ˆå™¨å†…æ ¸ä¸å¤ªä¸€æ · - IEæµè§ˆå™¨å†…æ ¸ï¼šTridentå†…æ ¸ï¼Œä¹Ÿæ˜¯ä¿—ç§°çš„IEå†…æ ¸ï¼› - Chromeæµè§ˆå™¨å†…æ ¸ï¼šç»Ÿç§°ä¸ºChromiumå†…æ ¸æˆ–Chromeå†…æ ¸ï¼Œä»¥å‰æ˜¯Webkitå†…æ ¸ï¼Œç°åœ¨æ˜¯Blinkå†…æ ¸ï¼› - Firefoxæµè§ˆå™¨å†…æ ¸ï¼šGeckoå†…æ ¸ï¼Œä¿—ç§°Firefoxå†…æ ¸ï¼› - Safariæµè§ˆå™¨å†…æ ¸ï¼šWebkitå†…æ ¸ï¼› - Operaæµè§ˆå™¨å†…æ ¸ï¼šæœ€åˆæ˜¯è‡ªå·±çš„Prestoå†…æ ¸ï¼Œåæ¥åŠ å…¥è°·æ­Œå¤§å†›ï¼Œä»Webkitåˆåˆ°äº†Blinkå†…æ ¸ï¼› - 360æµè§ˆå™¨ã€çŒè±¹æµè§ˆå™¨å†…æ ¸ï¼šIE+ChromeåŒå†…æ ¸ï¼› - æœç‹—ã€é¨æ¸¸ã€QQæµè§ˆå™¨å†…æ ¸ï¼šTridentï¼ˆå…¼å®¹æ¨¡å¼ï¼‰+Webkitï¼ˆé«˜é€Ÿæ¨¡å¼ï¼‰ï¼› - ç™¾åº¦æµè§ˆå™¨ã€ä¸–ç•Œä¹‹çª—å†…æ ¸ï¼šIEå†…æ ¸ï¼› - 2345æµè§ˆå™¨å†…æ ¸ï¼šå¥½åƒä»¥å‰æ˜¯IEå†…æ ¸ï¼Œç°åœ¨ä¹Ÿæ˜¯IE+ChromeåŒå†…æ ¸äº†ï¼› - UCæµè§ˆå™¨å†…æ ¸ï¼šè¿™ä¸ªä¼—å£ä¸ä¸€ï¼ŒUCè¯´æ˜¯ä»–ä»¬è‡ªå·±ç ”å‘çš„U3å†…æ ¸ï¼Œä½†å¥½åƒè¿˜æ˜¯åŸºäºWebkitå’ŒTridentï¼Œè¿˜æœ‰è¯´æ˜¯åŸºäºç«ç‹å†…æ ¸ã€‚ã€‚ jsæ˜¯å•çº¿ç¨‹çš„ 1234567891011121. å¦‚ä½•è¯æ˜JSæ‰§è¡Œæ˜¯å•çº¿ç¨‹çš„ - setImteout()çš„å›è°ƒå‡½æ•°æ˜¯åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„ - å®šæ—¶å™¨å›è°ƒå‡½æ•°åªæœ‰åœ¨è¿è¡Œæ ˆä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæ¯•åæ‰æœ‰å¯èƒ½æ‰§è¡Œ2. ä¸ºä»€ä¹ˆJSè¦ç”¨å•çº¿ç¨‹æ¨¡å¼ï¼Œè€Œä¸æ˜¯å¤šçº¿ç¨‹æ¨¡å¼ - JSçš„å•çº¿ç¨‹ä¸å®ƒçš„ç”¨é€” - ä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€,JSçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨,ä»¥åŠæ“ä½œDOM - è¿™å†³å®šäº†å®ƒåªèƒ½æ˜¯å•çº¿ç¨‹,å¦åˆ™ä¼šå¸¦æ¥å¾ˆå¤æ‚çš„åŒæ­¥é—®é¢˜ - åŒæ­¥ä¼šé˜»å¡ä»£ç æ‰§è¡Œ - å¼‚æ­¥ä¸ä¼šé˜»å¡ä»£ç æ‰§è¡Œ JSæ˜¯å•çº¿ç¨‹ç¼–ç¨‹è¯­è¨€, åªèƒ½åŒæ—¶åšä¸€ä»¶äº‹(æ™®é€šäºº-&gt;å•çº¿ç¨‹,å½±åˆ†èº«â€“&gt;å¤šçº¿ç¨‹) 12345678910111213141516171819202122// åŒæ­¥å›è°ƒ [1, 2, 3].forEach(item =&gt; &#123; console.log(item) &#125;) console.log(&#x27;forEach()ä¹‹å&#x27;) new Promise((resolve, reject) =&gt; &#123; // excutor æ‰§è¡Œå™¨å‡½æ•°,ä½œç”¨:æ‰§è¡Œå¼‚æ­¥ä»£ç  console.log(&#x27;æ‰§è¡Œexcutor&#x27;) // æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ &#125;) console.log(&#x27;new Promise()ä¹‹å&#x27;) // å¼‚æ­¥å›è°ƒ,å®ä»»åŠ¡ setTimeout(() =&gt; &#123; console.log(&#x27;æ‰§è¡Œtimoutå›è°ƒ&#x27;) &#125;, 0); console.log(&#x27;setTimeout()ä¹‹å&#x27;)// å¾®ä»»åŠ¡ Promise.resolve(1).then(() =&gt; &#123; console.log(&#x27;promiseæˆåŠŸçš„å›è°ƒ&#x27;) &#125;) console.log(&#x27;.thenä¹‹å&#x27;) jså¼•æ“æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹(å¯ä»¥ç§°ä¸ºJSçº¿ç¨‹)ä¸Šè§£ææ‰§è¡Œjsä»£ç çš„(web workeré™¤å¤–), æ— è®ºæ˜¯åŒæ­¥ä»£ç è¿˜æ˜¯å¼‚æ­¥ä»£ç  ç•Œé¢ç¬¬ä¸€æ¬¡æ¸²æŸ“: åˆå§‹åŒ–åŒæ­¥ä»£ç  ==&gt; æ‰€æœ‰çš„å¾®ä»»åŠ¡==&gt; æ¸²æŸ“ç•Œé¢==&gt; æ‰§è¡Œç¬¬ä¸€ä¸ªå®ä»»åŠ¡ â€‹ ==&gt; æ‰€æœ‰çš„å¾®ä»»åŠ¡==&gt; æ¸²æŸ“ç•Œé¢==&gt; æ‰§è¡Œç¬¬ä¸€ä¸ªå®ä»»åŠ¡ ç•Œé¢æ›´æ–°æ¸²æŸ“: æ‰€æœ‰çš„å¾®ä»»åŠ¡==&gt; æ¸²æŸ“ç•Œé¢==&gt; æ‰§è¡Œç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ€»ç»“: æ¸…ç©ºå¾®é˜Ÿåˆ—ä¸­æ‰€æœ‰å¾®ä»»åŠ¡ ==&gt; æ¸²æŸ“ç•Œ(UIçº¿ç¨‹) ==&gt; æ‰§è¡Œå®é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå®ä»»åŠ¡ æµè§ˆå™¨åœ¨å¦ä¸€ä¸ªçº¿ç¨‹(GUIæ¸²æŸ“çº¿ç¨‹)è¿›è¡Œé¡µé¢æ¸²æŸ“æ“ä½œ, GUIæ¸²æŸ“çº¿ç¨‹ä¸jsçº¿ç¨‹æ˜¯äº’æ–¥(ä¸ä¼šåŒæ—¶æ‰§è¡Œ), å› ä¸º JS å¯ä»¥ä¿®æ”¹ DOM ç»“æ„ é‡åˆ°éœ€è¦ç­‰å¾… (ç½‘ç»œè¯·æ±‚, å®šæ—¶ä»»åŠ¡) ä¸èƒ½å¡ä½ï¼Œéœ€è¦å¼‚æ­¥ å›è°ƒcallbackå‡½æ•° æµè§ˆå™¨å¤šçº¿ç¨‹æ¼”ç¤º 12345678910111213141516171819202122232425262728293031&lt;ul&gt; &lt;li&gt;aaa&lt;/li&gt; &lt;li&gt;bbb&lt;/li&gt; &lt;li&gt;ccc&lt;/li&gt; &lt;/ul&gt; &lt;button id=&quot;test&quot;&gt;test&lt;/button&gt; &lt;div id=&quot;content&quot;&gt; aaaaaaa &lt;/div&gt; &lt;script&gt; Promise.resolve().then(() =&gt; &#123; // å¾®ä»»åŠ¡ alert(&#x27;promise1&#x27;) // é¡µé¢æ¸²æŸ“äº†å—? &#125;) Promise.resolve().then(() =&gt; &#123; // å¾®ä»»åŠ¡ alert(&#x27;promise2&#x27;) // é¡µé¢æ¸²æŸ“äº†å—? &#125;) setTimeout(() =&gt; &#123;// å®ä»»åŠ¡ alert(document.getElementById(&#x27;content&#x27;).innerHTML) // é¡µé¢æ¸²æŸ“äº†å—? &#125;, 0) document.getElementById(&#x27;test&#x27;).onclick = () =&gt; &#123;// å®ä»»åŠ¡ document.getElementById(&#x27;content&#x27;).innerHTML = &#x27;xxxx&#x27; // domæ¸²æŸ“ setTimeout(() =&gt; &#123;// å®ä»»åŠ¡ alert(document.getElementById(&#x27;content&#x27;).innerHTML) // é¡µé¢æ›´æ–°æ¸²æŸ“äº†å—? &#125;, 0); Promise.resolve().then(() =&gt; &#123; // å¾®ä»»åŠ¡ alert(&#x27;promise3&#x27;) //é¡µé¢æ›´æ–°æ¸²æŸ“äº†å—? &#125;) &#125; alert(&#x27;1111&#x27;) // é¡µé¢æ¸²æŸ“äº†å—? &lt;/script&gt; ä½¿ç”¨Promiseè§£å†³å›è°ƒåœ°ç‹±é—®é¢˜(å¯é˜…è¯»æ€§å¾ˆå·®,ä»ç„¶è¦ç”¨å›è°ƒ,ä½†æ˜¯æ²¡æœ‰åµŒå¥—äº†) Promiseç›¸å¯¹çº¯å›è°ƒå½¢å¼, æŒ‡å®šå›è°ƒå‡½æ•°çš„æ—¶æœºæ›´çµæ´»(å¯ä»¥åœ¨å‘é€è¯·æ±‚åæˆ–è¯·æ±‚ç»“æŸå) â€‹ 10. äº‹ä»¶è½®è¯¢æœºåˆ¶event loop1(å¼‚æ­¥å®ç°çš„åŸç†ç»Ÿç§°:äº‹ä»¶å¾ªç¯(è½®è¯¢æœºåˆ¶))â€‹ JSæ˜¯é€šè¿‡äº‹ä»¶å¾ªç¯æœºåˆ¶æ¥å®ç°JSçš„å•çº¿ç¨‹å¼‚æ­¥ jsç¡®å®æ˜¯å•çº¿ç¨‹çš„,ä¹Ÿç¡®å®å¯ä»¥å¼‚æ­¥æ‰§è¡Œå‡½æ•°,ä¹‹æ‰€ä»¥èƒ½åšåˆ°(æµè§ˆå™¨ä¸­æœ‰è¾…åŠ©å®ƒå•çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œçš„åˆ†çº¿ç¨‹ç®¡ç†æ¨¡å—) jsæ˜¯å•çº¿ç¨‹è¿è¡Œçš„ å¼‚æ­¥è¦åŸºäºå›è°ƒæ¥å®ç° event loop å°±æ˜¯å¼‚æ­¥å›è°ƒçš„å®ç°åŸç† ![](004.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯â€“JavaScript.assets/event loop(åªæœ‰å®ä»»åŠ¡).png) äº‹ä»¶å¾ªç¯æœºåˆ¶çš„2ä¸ªé‡è¦éƒ¨åˆ† â€‹ åœ¨åˆ†çº¿ç¨‹æ‰§è¡Œçš„ç®¡ç†æ¨¡å—: å®šæ—¶å™¨/ajax/domäº‹ä»¶ â€‹ ä¿å­˜å¾…æ‰§è¡Œçš„å›è°ƒå‡½æ•°çš„äº‹ä»¶é˜Ÿåˆ—(Event queue)/ä»»åŠ¡é˜Ÿåˆ—(Task queue) äº‹ä»¶è½®è¯¢çš„æ‰§è¡Œè¿‡ç¨‹:é¦–å…ˆæ‰§è¡Œåˆå§‹åŒ–ä»£ç ,å°±æ˜¯å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ,æ‰§è¡ŒåŒæ­¥ä»£ç çš„æ—¶å€™,æœ‰å¯èƒ½å¯åŠ¨å®šæ—¶å™¨,æœ‰å¯èƒ½å‘é€ajaxè¯·æ±‚,æœ‰å¯èƒ½ç»‘å®šäº‹ä»¶ç›‘å¬,æ‰§è¡Œè¿™äº›ä»£ç çš„æ—¶å€™,ä¼šæŠŠå›è°ƒå‡½æ•°äº¤ç»™å¯¹åº”çš„ç®¡ç†æ¨¡å—è¿›è¡Œç®¡ç†,è€Œå¯¹åº”çš„ç®¡ç†æ¨¡å—åœ¨åˆ†çº¿ç¨‹æ‰§è¡Œ,ä¸ä¼šå½±å“jsæ‰§è¡Œ,jsä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œ,æ¯”å¦‚å¯åŠ¨ä¸€ä¸ªsetTimeoutå®šæ—¶å™¨(æœ‰ä¸ªå®šæ—¶å™¨çš„ç®¡ç†æ¨¡å—),å‡è®¾1ç§’åæ‰§è¡Œ,å°±ä¼šåœ¨1ç§’åæŠŠå›è°ƒæ”¾åœ¨å¾…æ‰§è¡Œçš„å›è°ƒé˜Ÿåˆ—é‡Œ,æ­¤æ—¶jsæœ‰å¯èƒ½è¿˜åœ¨æ‰§è¡Œåˆå§‹åŒ–ä»£ç ,åªæœ‰åˆå§‹åŒ–ä»£ç å…¨éƒ¨çš„æ‰§è¡Œå®Œæ¯•å,ä¸€ä¸ªä¸€ä¸ª,ä¾æ¬¡çš„å–å‡ºæ‰§è¡Œ å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡(ä»»åŠ¡å°±æ˜¯å›è°ƒ,ä»»åŠ¡çš„æœ¬è´¨å°±æ˜¯å›è°ƒ) å®ä»»åŠ¡: setTimeout, setInterval, Ajax, DOMäº‹ä»¶ç›‘å¬ å¾®ä»»åŠ¡: Promise, async/await, mutationobserver(H5)(ç”¨æ¥ç›‘è§†æ ‡ç­¾çš„å˜åŒ–çš„,æ ‡ç­¾åªè¦æœ‰ä»»ä½•çš„å˜åŒ–,å¯¹åº”çš„å›è°ƒå°±ä¼šå¾®ä»»åŠ¡å¼‚æ­¥æ‰§è¡Œ) å®é˜Ÿåˆ—ä¸å¾®é˜Ÿåˆ—(é˜Ÿåˆ—æœ¬è´¨å°±æ˜¯æ•°ç»„) å®é˜Ÿåˆ—: ç”¨æ¥ä¿å­˜nä¸ªå®ä»»åŠ¡çš„é˜Ÿåˆ—å®¹å™¨ å¾®é˜Ÿåˆ—: ç”¨æ¥ä¿å­˜nä¸ªå¾®ä»»åŠ¡çš„é˜Ÿåˆ—å®¹å™¨ event loop2 js-webä¸­çš„domäº‹ä»¶å›è°ƒ, å®šæ—¶å™¨å›è°ƒä¸ajaxå›è°ƒå¼‚æ­¥æ‰§è¡Œ, éƒ½æ˜¯åŸºäºevent loop ===&gt; å®ä»»åŠ¡ H5æ–°çš„MutationObserverä¹ŸåŸºäºevent loop ==&gt; å¾®ä»»åŠ¡ promiseæˆåŠŸå’Œå¤±è´¥çš„å›è°ƒä¹Ÿæ˜¯å¼‚æ­¥æ‰§è¡Œçš„, ä¹Ÿæ˜¯åŸºäºevent loop ==&gt; å¾®ä»»åŠ¡ æ‰§è¡Œé¡ºåº: ç¬¬ä¸€æ­¥: å…ˆæ‰§è¡Œscriptä¸‹çš„æ‰€æœ‰åŒæ­¥ä»£ç  ç¬¬äºŒæ­¥: å†ä¾æ¬¡å–å‡ºå¾®åˆ—ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡æ‰§è¡Œ ç¬¬ä¸‰æ­¥: å†å–å‡ºå®é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œ å†å¾ªç¯ç¬¬äºŒæ­¥ä¸ç¬¬ä¸‰æ­¥ ![](004.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯â€“JavaScript.assets/event loop(å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡).png) 12345678910111213å®šæ—¶å™¨æ³¨æ„:1. åƒä¸‡ä¸è¦åœ¨å®šæ—¶å™¨åé¢æ”¾å¤§é‡çš„ä»£ç å—(ä¼šé˜»å¡å®šæ—¶å™¨,å¯¼è‡´å®šæ—¶å™¨ä¸å‡†ç¡®çš„)2. å®šæ—¶å™¨æ¨¡å—ä½•æ—¶å¼€å§‹è®¡æ—¶: - å¼€å®šæ—¶å™¨çš„æ—¶å€™äº¤ç»™å®šæ—¶å™¨ç®¡ç†æ¨¡å—å°±æ‰§è¡Œ H5è§„èŒƒæä¾›äº†jsåˆ†çº¿ç¨‹çš„å®ç°,å–å:Web Workers(äº†è§£)1. Worker:æ„é€ å‡½æ•°,åŠ è½½åˆ†çº¿ç¨‹æ‰§è¡Œçš„jsæ–‡ä»¶2. Worker.prototype.onmessage:ç”¨äºæ¥æ”¶å¦ä¸€ä¸ªçº¿ç¨‹çš„å›è°ƒå‡½æ•°3. Worker.prototype.postMessage:å‘å¦ä¸€ä¸ªçº¿ç¨‹å‘é€æ¶ˆæ¯4. ä¸è¶³ - Worker å†…ä»£ç ä¸èƒ½æ“ä½œDOM(æ›´æ–°UI) - ä¸èƒ½è·¨åŸŸåŠ è½½JS - ä¸æ˜¯æ¯ä¸ªæµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸ªæ–°ç‰¹æ€§ 11. Promise ES6æ¨å‡ºçš„æ–°çš„æ›´å¥½çš„å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ(ç›¸å¯¹äºçº¯å›è°ƒçš„æ–¹å¼) å¯ä»¥å¼‚æ­¥æ“ä½œå¯åŠ¨åæˆ–å®Œæˆå, å†æŒ‡å®šå›è°ƒå‡½æ•°å¾—åˆ°å¼‚æ­¥ç»“æœæ•°æ® è§£å†³åµŒå¥—å›è°ƒçš„å›è°ƒåœ°ç‹±é—®é¢˜ â€”promiseé“¾å¼è°ƒç”¨ promiseå¯¹è±¡æœ‰3ç§çŠ¶æ€ pending resolved/fulfilled rejected promiseçŠ¶æ€çš„2ç§å˜åŒ– pending â€“&gt; resolved pending â€“&gt; rejected æ³¨æ„: å˜åŒ–æ˜¯ä¸å¯é€† 4..promiseçš„then()çš„ç†è§£ then()æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„promise æ–°promiseçš„ç»“æœçŠ¶æ€ç”±thenæŒ‡å®šçš„å›è°ƒå‡½æ•°æ‰§è¡Œçš„ç»“æœå†³å®š æŠ›å‡ºé”™è¯¯ è¿”å›å¤±è´¥çš„promise è¿”å›æˆåŠŸçš„promise è¿”å›å…¶å®ƒä»»ä½•å€¼ 12345678910111213141516171819202122232425262728293031323334353637 /* .then()è¿”å›çš„promiseçš„ç»“æœçŠ¶æ€ç”±ä»€ä¹ˆå†³å®š? ç®€å•è¯´: ç”±.then()æŒ‡å®šå¹¶æ‰§è¡Œçš„å›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœå†³å®š è¯¦ç»†è¯´: ä»€ä¹ˆæƒ…å†µå¯¼è‡´promiseæ˜¯å¤±è´¥çš„? æ‰§è¡Œå‡ºé”™(æŠ›å¼‚å¸¸äº†), å¤±è´¥çš„reasonå°±æ˜¯æŠ›å‡ºçš„é”™è¯¯ è¿”å›ä¸€ä¸ªå¤±è´¥çš„promise, å¤±è´¥çš„reasonå°±æ˜¯è¿”å›çš„promiseçš„reason ä»€ä¹ˆæƒ…å†µå¯¼è‡´promiseæ˜¯æˆåŠŸçš„? è¿”å›ä¸€ä¸ªæˆåŠŸçš„promise, æˆåŠŸçš„valueå°±æ˜¯è¿”å›promiseçš„value è¿”å›ä¸€ä¸ªépromiseä»»åŠ¡å€¼, ä¹Ÿå¯ä»¥ä¸è¿”å›(è¿”å›undefined), æˆåŠŸçš„valueå°±æ˜¯è¿”å›å€¼ */new Promise((resolve, reject) =&gt; &#123; // æˆåŠŸ // resolve(1) // å¤±è´¥ reject(2) &#125;).then( value =&gt; &#123; console.log(&#x27;onResolved1&#x27;, value) &#125;, // onResolved reason =&gt; &#123; console.log(&#x27;onRejected1&#x27;, reason) // æŠ›å‡ºé”™è¯¯ // throw 100 // è¿”å›ä¸€ä¸ªå¤±è´¥çš„promise // return Promise.reject(200) // è¿”å›ä¸€ä¸ªæˆåŠŸçš„promise // return Promise.resolve(300) // è¿”å›ä¸€ä¸ªå…¶ä»–çš„å€¼ // return 1000 Promise.resolve(2000) &#125; ).then(value=&gt;&#123; console.log(&#x27;onResolved1&#x27;, value) &#125;,reason=&gt;&#123; console.log(&#x27;onRejected2&#x27;, reason) &#125;) 12345678910111213141516171819202122232425262728293031 5.Promise.all([promise1, promise2, promise3]) - æ‰¹é‡/ä¸€æ¬¡æ€§å‘é€å¤šä¸ªå¼‚æ­¥è¯·æ±‚ - å½“éƒ½æˆåŠŸæ—¶, è¿”å›çš„promiseæ‰æˆåŠŸ - ä¸€æ—¦æœ‰ä¸€ä¸ªå¤±è´¥çš„, è¿”å›çš„promiseå°±å¤±è´¥äº† é—®é¢˜: å‘3è¯·æ±‚æˆåŠŸåå†4ä¸ªè¯·æ±‚ ```js function ajax(url) &#123; return axios.get(url) &#125; const p1 = ajax(url1) const p2 = ajax(url2) const p3 = ajax(url3) Promise.all([p1, p2, p3])// valueså’Œæ•°ç»„ä¸­æ•°æ®çš„é¡ºåºæœ‰å…³ç³» .then(values =&gt; &#123; return ajax(url4) &#125;) .then(value =&gt; &#123; console.log(value) // å°±æ˜¯ç¬¬4ä¸ªè¯·æ±‚æˆåŠŸçš„value &#125;) .catch(error =&gt; &#123; &#125;) 6.async/awaitä¸promiseçš„å…³ç³» async/awaitæ˜¯æ¶ˆç­å¼‚æ­¥å›è°ƒçš„ç»ˆææ­¦å™¨ ä½œç”¨: ç®€åŒ–promiseå¯¹è±¡çš„ä½¿ç”¨, ä¸ç”¨å†ä½¿ç”¨then/catchæ¥æŒ‡å®šå›è°ƒå‡½æ•° ä½†å’ŒPromiseå¹¶ä¸äº’æ–¥ åè€Œ, ä¸¤è€…ç›¸è¾…ç›¸æˆ æ‰§è¡Œasyncå‡½æ•°, è¿”å›promiseå¯¹è±¡ awaitç›¸å½“äºpromiseçš„then tryâ€¦catchå¯æ•è·å¼‚å¸¸, ç›¸å½“äºpromiseçš„catch 1234567891011121314151617181920212223242526272829303132333435// function ajax(url) &#123; // return axios.get(url)// &#125; // async function getProduct() &#123; // try &#123; // const response = await ajax(&#x27;/product2.json&#x27;) // return response.data // &#125; catch (error) &#123; // console.log(&#x27;è¯·æ±‚å‡ºé”™&#x27;, error.message) // // throw error // return Promise.reject(error) // &#125; // &#125; // // ç­‰åŒäºä¸Šé¢async&amp;awaitçš„å‡½æ•° // function getProduct() &#123; // return ajax(&#x27;/product.json&#x27;) // .then(response =&gt; &#123; // return response.data // &#125;) // .catch(error =&gt; &#123; // console.log(&#x27;è¯·æ±‚å‡ºé”™&#x27;, error.message) // // throw error // return Promise.reject(error) // &#125;) // &#125; // function test() &#123; // getProduct().then(value =&gt; &#123; // console.log(value) // &#125;).catch(error =&gt; &#123; // console.log(&#x27;error&#x27;, error.message) // &#125;) // &#125; // test() 1234 ##12.ES6 ECMAç»„ç»‡:æ¬§æ´²è®¡ç®—æœºåˆ¶é€ å•†åä¼š,åˆ¶å®šå’Œå‘å¸ƒçš„è„šæœ¬è¯­è¨€è§„èŒƒ ECMAscriptæ˜¯åŸºäºNetscape javaScriptçš„ä¸€ç§æ ‡å‡†è„šæœ¬è¯­è¨€ã€‚ JavaScriptåŒ…å«3ä¸ªéƒ¨åˆ†:1)ECMAScriptæ ¸å¿ƒ(JSæ ‡å‡†è¯­æ³•)2)æµè§ˆå™¨ç«¯çš„æ‰©å±• BOM(æµè§ˆå™¨å¯¹è±¡æ¨¡å‹) DOM(æ–‡æ¡£å¯¹è±¡æ¨¡å‹)3)æœåŠ¡å™¨ç«¯çš„æ‰©å±• Node.js ESçš„å‡ ä¸ªé‡è¦ç‰ˆæœ¬ES5:09å¹´å‘å¸ƒES6:15å¹´å‘å¸ƒ,ä¹Ÿå«ECMA2015ES7:16å¹´å‘å¸ƒ,ä¹Ÿå«ECMA2016 ES5ç»™Objectæ‰©å±•äº†ä¸€äº›é™æ€æ–¹æ³•,å¸¸ç”¨çš„2ä¸ª: Object.create(prototype,[descriptors]) åˆ›å»ºå¯¹è±¡å¹¶ç»§æ‰¿ ä½œç”¨: ä»¥æŒ‡å®šå¯¹è±¡ä¸ºåŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ ä¸ºæ–°çš„å¯¹è±¡æŒ‡å®šæ–°çš„å±æ€§,å¹¶å¯¹å±æ€§è¿›è¡Œæè¿° value: æŒ‡å®šçš„å€¼ weitable:æ ‡è¯†å½“å‰å±æ€§å€¼æ˜¯å¦æ˜¯å¯ä¿®æ”¹çš„,é»˜è®¤ä¸ºfalse configurable:æ ‡è¯†å½“å‰å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤,é»˜è®¤æ˜¯false enumberable: æ ‡è¯†å½“å‰å±æ€§æ˜¯å¦èƒ½ç”¨for in æšä¸¾,é»˜è®¤ä¸ºfalse for-in(æ€§èƒ½é—®é¢˜)ä¸ä»…æšä¸¾è‡ªèº«å±æ€§,ä¹Ÿå¯ä»¥æšä¸¾åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§,ä¸€èˆ¬é…åˆå¯¹è±¡.hasOwnProperty()æ–¹æ³• 12345678910var person = &#123;name: &#x27;å°æ˜&#x27;,sayHi: function () &#123; console.log(&#x27;æ‚¨å¥½&#x27;) &#125;&#125;// æ–°åˆ›å»ºçš„stuå¯¹è±¡å’Œpersonå¯¹è±¡æ˜¯ç»§æ‰¿å…³ç³»var stu = Object.create(person) // stu.__proto__----&gt;personconsole.log(stu.name)stu.sayHi() Objectt.defineProperties(object, descriptors) ä½œç”¨:ä¸ºæŒ‡å®šå¯¹è±¡å®šä¹‰æ‰©å±•å¤šä¸ªå±æ€§ get: ç”¨æ¥è·å–å½“å‰å±æ€§å€¼çš„å›è°ƒå‡½æ•° set: ä¿®æ”¹å½“å‰å±æ€§å€¼çš„è§¦å‘çš„å›è°ƒå‡½æ•°,å¹¶ä¸”å®å‚ä¸ºä¿®æ”¹åçš„å€¼ å­˜å‚¨å™¨å±æ€§: settter,getterä¸€ä¸ªç”¨æ¥å­˜å€¼,ä¸€ä¸ªç”¨æ¥å–å€¼ å¯¹è±¡æœ¬èº«æœ‰ä¸¤ä¸ªæ–¹æ³• get propertyName(){} ç”¨æ¥å¾—åˆ°å½“å‰å±æ€§å€¼çš„å›è°ƒå‡½æ•° set propertyName(){} ç”¨æ¥ç›‘è§†å½“å‰å±æ€§å€¼å˜åŒ–çš„å›è°ƒå‡½ Arrayçš„æ–¹æ³•æ‰©å±• 123451. Array.prototype.indexOf(value):å¾—åˆ°æ•°ç»„ä¸­çš„æŸä¸ªæ•°æ®çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡,ç”¨æ¥æ‰¾æ•°æ®çš„2. Array.prototype.lastIndexOf(value):å¾—åˆ°æ•°ç»„ä¸­æŸä¸ªæ•°æ®çš„æœ€åä¸€ä¸ªå°æ ‡3. Array.prototype.forEach(function(item,index)&#123;&#125;):éå†æ•°ç»„4. Array.prototype.map(function(item,index)&#123;&#125;):éå†æ•°ç»„,è¿”å›æ–°æ•°ç»„5. Array.prototype.filter(function(item,index)&#123;&#125;):éå†æ•°ç»„,è¿‡æ»¤åçš„æ•°ç»„ ES6+ ç®­å¤´å‡½æ•° ä½œç”¨: å®šä¹‰åŒ¿åå‡½æ•° åŸºæœ¬è¯­æ³•: ()=&gt;{console.log(â€˜xxxxâ€™)} ä¸€ä¸ªå‚æ•°: msg=&gt; msg+2 å¤šä¸ªå‚æ•°: (m,n)=&gt;m+n å‡½æ•°ä½“ä¸ç”¨å¤§æ‹¬å·:é»˜è®¤æœ‰è¿”å›ç»“æœ å‡½æ•°ä½“å¦‚æœæœ‰å¤šä¸ªè¯­å¥,éœ€è¦ä½¿ç”¨{}åŒ…è£¹,å¦‚æœå†…éƒ¨æœ‰éœ€è¦è¿”å›çš„å€¼,åˆ™æ‰‹åŠ¨return ä½¿ç”¨åœºæ™¯: å¤šç”¨æ¥å®šä¹‰å›è°ƒå‡½æ•° ç®­å¤´å‡½æ•°çš„ç‰¹å®š: ç®€æ´ ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„this,ç®­å¤´å‡½æ•°çš„thisä¸æ˜¯è°ƒç”¨çš„æ—¶å€™å†³å®šçš„,è€Œæ˜¯åœ¨å®šä¹‰çš„æ—¶å€™å¤„åœ¨è‡ªå·±å¯¹è±¡å°±æ˜¯å®ƒçš„this æ‰©å±•ç†è§£: ç®­å¤´å‡½æ•°çš„thisçœ‹å¤–å±‚çš„æ˜¯å¦æœ‰å‡½æ•°,å¦‚æœæœ‰,å¤–å±‚å‡½æ•°çš„thiså°±æ˜¯å†…éƒ¨ç®­å¤´å‡½æ•°çš„this,å¦‚æœæ²¡æœ‰åˆ™thisæ˜¯window 7.ä¸‰ç‚¹è¿ç®—ç¬¦: æ‹†åŒ…å’Œæ‰“åŒ… 8.å½¢å‚é»˜è®¤å€¼: ç®€åŒ–å‡½æ•°çš„å½¢å‚è¯­æ³• 9.Symbol: 1. ES5ä¸­å¯¹è±¡çš„å±æ€§åéƒ½æ˜¯å­—ç¬¦ä¸²,å®¹æ˜“é€ æ‰¿é‡å,æ±¡æŸ“ç¯å¢ƒ 2. æ¦‚å¿µ:ES6ä¸­çš„æ·»åŠ äº†ä¸€ç§åŸå§‹æ•°æ®ç±»å‹Symbol(å·²æœ‰çš„åŸå§‹æ•°æ®ç±»å‹:String,Number,Boolean,null,undefined,å¯¹è±¡) 3. ç‰¹ç‚¹: - Symbol å±æ€§å¯¹åº”çš„å€¼æ˜¯å”¯ä¸€çš„,è§£å†³å‘½åå†²çªé—®é¢˜ - Symbol å€¼ä¸èƒ½ä¸å…¶ä»–æ•°æ®è¿›è¡Œè®¡ç®—,åŒ…æ‹¬åŒå­—ç¬¦ä¸²æ‹¼ä¸² - for in , for of éå†æ—¶ä¸ä¼šéå†symbol å±æ€§ 4. ä½¿ç”¨: - è°ƒç”¨Symbol å‡½æ•°å¾—åˆ°symbol å€¼ - let symbol =Symbol() - let obj =&#123;&#125; - obj[symbol]=&#39;hello&#39;; 5. ä¼ å‚æ ‡è¯† - let symbol = Symbol(&#39;one&#39;) - let symbol2 = Symbol(&#39;two&#39;) - console.log(symbol) // Symbol(&#39;one&#39;) - console.log(symbol2) // Symbol(&#39;two&#39;) 6. å®šä¹‰å¸¸é‡æ ‡è¯† - å¯ä»¥å®šä¹‰å¸¸é‡,å°±æ˜¯æ ‡è¯† - const person_key = Symbol(&#39;person_key&#39;) - console.log(person_key) 7. å†…ç½®Symbolå€¼ - é™¤äº†å®šä¹‰è‡ªå·±ä½¿ç”¨çš„Symbolå€¼ä»¥å¤–,ES6è¿˜æä¾›äº†11ä¸ªå†…ç½®çš„Symbolå€¼,æŒ‡å‘è¯­è¨€å†…éƒ¨ä½¿ç”¨çš„æ–¹æ³• - Symbol.iterator - å¯¹è±¡çš„Symbol.iteratorå±æ€§,æŒ‡å‘è¯¥å¯¹è±¡çš„é»˜è®¤éå†å™¨æ–¹æ³•(å¾ˆå¿«å°±è®²äº†) 10.iterator æ˜¯ä¸€ç§æ¥å£æœºåˆ¶,ä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ 1. ä½œç”¨: - ä¸ºå„ç§æ•°æ®ç»“æ„,æä¾›ä¸€ä¸ªç»Ÿä¸€çš„ï¼Œç®€ä¾¿çš„è®¿é—®æ¥å£ - ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ— - ES6åˆ›é€ äº†ä¸€ç§æ–°çš„éå†å‘½ä»¤,for..ofå¾ªç¯,Iteratoræ¥å£ä¸»è¦æä¾›for...ofæ¶ˆè´¹ 2. å·¥ä½œåŸç† - åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡(éå†å™¨å¯¹è±¡),æŒ‡å‘æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½® - ç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•,æŒ‡é’ˆè‡ªåŠ¨æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ - æ¥ä¸‹æ¥ä¸æ–­è°ƒç”¨nextæ–¹æ³•,æŒ‡é’ˆä¼šä¸€ç›´å¾€åç§»åŠ¨,çŸ¥é“æŒ‡å‘æœ€åä¸€ä¸ªæˆå‘˜ - æ¯è°ƒç”¨nextæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…å«valueå’Œdoneçš„å¯¹è±¡,&#123;value:å½“å‰æˆå‘˜çš„å€¼,done:å¸ƒå°”å€¼&#125; - valueè¡¨ç¤ºå½“å‰æˆå‘˜çš„å€¼,doneå¯¹åº”çš„å¸ƒå°”å€¼è¡¨ç¤ºå½“å‰çš„æ•°æ®çš„ç»“æ„æ˜¯å¦éå†ç»“æŸ - å½“éå†ç»“æŸçš„æ—¶å€™è¿”å›çš„valueå€¼æ˜¯undefine,doneå€¼ä¸ºfalse - åŸç”Ÿå…·å¤‡iteratoræ¥å£çš„æ•°æ®(å¯ç”¨for oféå†) - æ‰©å±•ç†è§£: - å½“æ•°æ®ç»“æ„ä¸Šéƒ¨ç½²äº†Symbol.iteratoræ¥å£,è¯¥æ•°æ®å¯ä»¥ç”¨for-oféå† - å½“ä½¿ç”¨for ofå»éå†ç›®æ ‡æ•°æ®çš„æ—¶å€™,è¯¥æ•°æ®ä¼šè‡ªåŠ¨å»æ‰¾Symbol.iterator - Symbol.iteratorå±æ€§æŒ‡å‘å¯¹è±¡çš„é»˜è®¤éå†å™¨æ–¹æ³•(iteratoræ¥å£) - Array - arguments - setå®¹å™¨ - mapå®¹å™¨ - String .... 123456789101112131415161718192021// æ¨¡æ‹Ÿéå†å™¨å¯¹è±¡(æŒ‡é’ˆå¯¹è±¡)function myIterator(arr) &#123; // iteratoræ¥å£ let nextIndex = 0 // é»˜è®¤ç¬¬ä¸€æ¬¡è®°å½•æŒ‡é’ˆçš„ä½ç½® return &#123; // éå†å™¨å¯¹è±¡ next: function () &#123; return nextIndex &lt; arr.length ? &#123; value: arr[nextIndex++], done: false &#125; : &#123; value: undefined, done: true &#125; &#125; &#125;&#125;let arr = [1, 2, 3, 4, 5]let interatorObj = myIterator(arr)console.log(interatorObj.next())console.log(interatorObj.next())console.log(interatorObj.next())console.log(interatorObj.next())console.log(interatorObj.next())console.log(interatorObj.next()) 11.Generatorå‡½æ•° 1. æ¦‚å¿µ: - ES6æä¾›çš„è§£å†³å¼‚æ­¥ç¼–ç¨‹çš„æ–¹æ¡ˆä¹‹ä¸€ - Generatorå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€,å†…éƒ¨å°è£…äº†ä¸åŒçŠ¶æ€æ•°æ® - ç”¨æ¥ç”Ÿæˆéå†å¯¹è±¡ - å¯æš‚åœå‡½æ•°(æƒ°æ€§æ±‚å€¼),yieldå¯æš‚åœ,nextæ–¹æ³•å¯å¯åŠ¨,æ¯æ¬¡è¿”å›çš„æ˜¯yieldåçš„è¡¨è¾¾å¼ç»“æœ 2. ç‰¹ç‚¹: - function ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå· - å†…éƒ¨ç”¨yieldè¡¨è¾¾å¼æ¥å®šä¹‰ä¸åŒçš„çŠ¶æ€ - ä¾‹å¦‚: function * generatorExample()&#123; let result = yield &#39;hello&#39;; // çŠ¶æ€å€¼ä¸ºhello yield &#39;generator&#39;; // çŠ¶æ€å€¼ä¸ºgenerator &#125; - generatorå‡½æ•°è¿”å›çš„æ˜¯æŒ‡é’ˆå¯¹è±¡(æ¥iterator),è€Œä¸ä¼šæ‰§è¡Œå‡½æ•°å†…éƒ¨é€»è¾‘ - è°ƒç”¨nextæ–¹æ³•å‡½æ•°å†…éƒ¨é€»è¾‘å¼€å§‹æ‰§è¡Œ,é‡åˆ°yieldè¡¨è¾¾å¼åœæ­¢,è¿”å›&#123;value:yieldåçš„è¡¨è¾¾å¼ç»“æœ/undefined,done:true&#125; - å†æ¬¡è°ƒç”¨nextæ–¹æ³•ä¼šä»ä¸Šä¸€æ¬¡åœæ­¢æ—¶çš„yieldå¤„å¼€å§‹,ç›´åˆ°æœ€å - yieldè¯­å¥è¿”å›ç»“æœé€šå¸¸ä¸ºundefine,å½“è°ƒç”¨nextæ–¹æ³•æ—¶ä¼ å‚å†…å®¹ä¼šä½œä¸ºå¯åŠ¨æ—¶yieldè¯­å¥çš„è¿”å›å€¼ 1234567891011121314151617181920// éœ€æ±‚,å…ˆåšç¬¬ä¸€ä»¶äº‹,ç„¶ååšç¬¬äºŒä»¶äº‹,æœ€åæœ€ç¬¬ä¸‰ä»¶äº‹ function* generator()&#123; setTimeout(function()&#123; console.log(&#x27;ç¬¬ä¸€ä»¶æ˜¯åšå®Œäº†&#x27;) iterator.next(&#x27;aaaa&#x27;) &#125;,1000); let result=yield; console.log(result) setTimeout(function()&#123; console.log(&#x27;ç¬¬äºŒä»¶æ˜¯åšå®Œäº†&#x27;) iterator.next(&#x27;bbbb&#x27;) &#125;,2000); let result2=yield; console.log(result2) setTimeout(function()&#123; console.log(&#x27;ç¬¬ä¸‰ä»¶æ˜¯åšå®Œäº†&#x27;) &#125;,3000); &#125; let iterator = generator() iterator.next() 12.async å‡½æ•°æ˜¯generatorå‡½æ•°çš„è¯­æ³•ç³– 1. æ¦‚å¿µ: çœŸæ­£æ„ä¹‰ä¸Šå»è§£å†³å¼‚æ­¥å›è°ƒé—®é¢˜,åŒæ­¥æµç¨‹è¡¨è¾¾å¼‚æ­¥æ“ä½œ 2. æœ¬è´¨: Generatorçš„è¯­æ³•ç³– 3. è¯­æ³•: - async function foo()&#123; await å¼‚æ­¥æ“ä½œ; await å¼‚æ­¥æ“ä½œ; &#125; 4. ç‰¹ç‚¹: - ä¸éœ€è¦åƒGeneratorå»è°ƒç”¨nextæ–¹æ³•,é‡åˆ°awaitç­‰å¾…,å½“æ°ä½ çš„å¼‚æ­¥æ“ä½œå®Œæˆå°±å¾€ä¸‹æ‰§è¡Œ - è¿”å›çš„æ€»æ˜¯Promiseå¯¹è±¡,å¯ä»¥ç”¨thenæ–¹æ³•è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ - async å–ä»£Generatorå‡½æ•°çš„æ˜Ÿå·*,await å–ä»£Generatorçš„yield - è¯­ä¹‰ä¸Šæ›´ä¸ºæ˜ç¡®,ä½¿ç”¨ç®€å•,ç»ä¸´åºŠéªŒè¯,æš‚æ—¶æ²¡æœ‰å‰¯ä½œç”¨åŠä¸è‰¯ååº” 1. await æ˜¯æš‚åœ,ä½†æ˜¯å¿…é¡»è·Ÿç€promiseå¯¹è±¡æ‰ä¼šæš‚åœ,å…¶ä»–çš„éƒ½ä¸æš‚åœ 1234567891011121314151617// async å‡½æ•° async function f1() &#123; console.log(&#x27;å‡½æ•°å¼€å§‹æ‰§è¡Œ&#x27;) await setTimeout(function()&#123; console.log(&#x27;å®šæ—¶å™¨&#x27;) &#125;,2000); console.log(&#x27;å‡½æ•°æ‰§è¡Œä¸­&#x27;) await 456; console.log(&#x27;å‡½æ•°æ‰§è¡Œç»“æŸ&#x27;) &#125; f1() // åªæœ‰åœ¨awaitåé¢æœ‰promiseæ‰ä¼šæš‚åœ,å¦‚æœè¦ç»§ç»­æ‰§è¡Œ,ä¿®æ”¹promiseå¯¹è±¡çš„çŠ¶æ€(æš‚åœåˆ°promiseå¯¹è±¡çŠ¶æ€ä¸ºæˆåŠŸçš„æƒ…å†µ,å¦‚æœæ˜¯å¤±è´¥çŠ¶æ€,åˆ™ç›´æ¥æŠ¥é”™) // resolve(value) valueå°±ä¼šä½œä¸ºawaitçš„è¿”å›å€¼è¿”å› // async å‡½æ•°è°ƒç”¨è¿”å›çš„æ˜¯Promiseå¯¹è±¡ // é»˜è®¤æ˜¯pedingçŠ¶æ€ // å½“async å‡½æ•°æ‰€æœ‰ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæ¯•,å¹¶ä¸”æ²¡æœ‰å‡ºé”™,æ­¤æ—¶å°±ä¼šå˜æˆæˆåŠŸçŠ¶æ€ // å½“async å‡½æ•°ä»£ç å‡ºé”™äº†,å°±ä¼šå˜æˆå¤±è´¥çŠ¶æ€ 12.å­—ç¬¦ä¸²æ‰©å±• 1. includes(str) åˆ¤æ–­æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­—ç¬¦ä¸² 2. startsWith(str) åˆ¤æ–­æ˜¯å¦ä»¥æŒ‡å®šå­—ç¬¦ä¸²å¼€å¤´ 3. endsWith(str) åˆ¤æ–­æ˜¯å¦ä»¥æŒ‡å®šå­—ç¬¦ä¸²ç»“å°¾ 4. repeat(count) é‡å¤æŒ‡å®šçš„æ¬¡æ•° 13.äºŒè¿›åˆ¶ä¸å…«è¿›åˆ¶æ•°å€¼è¡¨ç¤ºæ³•:äºŒè¿›åˆ¶ç”¨0b,å…«è¿›åˆ¶ç”¨0o 1. Number.isFinite(i) åˆ¤æ–­æ˜¯å¦æ˜¯æœ‰é™å¤§çš„æ•° 2. Number.isNaN(i) åˆ¤æ–­æ˜¯å¦æ˜¯NaN 3. Number.isInteger(i) åˆ¤æ–­æ˜¯å¦æ˜¯æ•´æ•° 4. Number.parseInt(str) å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹åº”çš„æ•°å€¼ 5. Math.trunc(i) ç›´æ¥å»é™¤å°æ•°éƒ¨åˆ† 14.æ•°ç»„æ‰©å±• 1. Array.form(ä¼ªæ•°ç»„) ä¼ªæ•°ç»„è½¬çœŸæ•°ç»„ 2. Array.of(val1,val2,val3)å°†ä¸€äº›åˆ—æ•°å€¼è½¬æ¢ä¸ºæ•°ç»„ 3. find(å›è°ƒ) æ‰¾å‡ºç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´  4. findIndex(å›è°ƒ) æ‰¾å‡ºç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ çš„ä¸‹æ ‡ 15.å¯¹è±¡æ‰©å±• 1. Object.is(v1,v2) 2. Object.assign(target,obj1,obj2) å°†å¯¹è±¡çš„å±æ€§å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ä¸Š 3. ç›´æ¥æ“ä½œ__proto__å±æ€§ - let obj2=&#123;&#125; - obj2.__proto__=obj1 16.æ‹·è´æ•°æ® 1. åŸºæœ¬æ•°æ®ç±»å‹ - æ‹·è´åæ‚”ç”Ÿæˆä¸€ä»½æ–°çš„æ•°æ®,ä¿®æ”¹æ‹·è´ä»¥åçš„æ•°æ®ä¸ä¼šå½±å“åŸæ•°æ® 2. å¯¹è±¡/æ•°ç»„ - æ‹·è´åä¸ä¼šç”Ÿæˆæ–°çš„æ•°æ®,è€Œæ˜¯æ‹·è´çš„æ˜¯å¼•ç”¨,ä¿®æ”¹æ‹·è´ä»¥åçš„æ•°æ®ä¼šå½±å“åŸæ¥çš„æ•°æ® 3. æ‹·è´æ•°æ®çš„æ–¹æ³•: - ç›´æ¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ æµ…æ‹·è´ - Object.assgin() æµ…æ‹·è´ - Array.prototype.concat() æµ…æ‹·è´ - Array.pototype.slice() æµ…æ‹·è´ - JSON.parse(JSON.stringify()) æ·±æ‹·è´(æ·±åº¦å…‹éš†),æ‹·è´çš„æ•°æ®é‡Œä¸èƒ½æœ‰å‡½æ•°,å¤„ç†ä¸äº† 4. æµ…æ‹·è´(å¯¹è±¡/æ•°ç»„) - ç‰¹ç‚¹: æ‹·è´å¼•ç”¨,ä¿®æ”¹æ‹·è´ä»¥åçš„æ•°æ®ä¼šå½±å“åŸæ•°æ® 5. æ·±æ‹·è´(æ·±åº¦å…‹éš†) - ç‰¹ç‚¹: æ‹·è´çš„æ—¶å€™ç”Ÿæˆæ–°æ•°æ®,ä¿®æ”¹æ‹·è´ä»¥åçš„æ•°æ®ä¸ä¼šå½±å“åŸæ•°æ® - æ·±åº¦å…‹éš†ä¼šè¿›è¡Œæ·±åº¦çš„éå†(ä¼šç”¨åˆ°é€’å½’) - éœ€è¦è¿›è¡Œç±»å‹çš„æ£€æµ‹ : typeof è¿”å›æ•°æ®ç±»å‹:String,Number,Boolean,Undefined,Object,Function - Object.prototype.toString.call(obj) è¿”å›çš„æ˜¯è¯¥å¯¹è±¡åˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹ - console.log(Object.prototype.toString.call(result)) - æˆªå–è·å–çš„çœŸæ­£çš„æ•°æ®ç±»å‹ - console.log(Object.prototype.toString.call(result).slice(8, -1)) - for-inå¾ªç¯ å¯¹è±¡(å±æ€§å) æ•°ç»„(ä¸‹æ ‡) 17.Setå®¹å™¨:æ— åºä¸å¯é‡å¤çš„å¤šä¸ªå€¼çš„é›†åˆä½“ 1. Set() 2. Set(array) 3. add(value) 4. delete(value) 5. has(value) 6. clear() 7. size 18.Mapå®¹å™¨: æ— åºçš„keyä¸é‡å¤çš„å¤šä¸ªkey-valueçš„é›†åˆä½“ 1. Map() 2. Map(array) 3. set(key,value) æ·»åŠ  4. get(key) 5. delete(key) 6. has(key) 7. clear() 8. size 19.for-ofå¾ªç¯å¯ä»¥éå†ä¸‹é¢å†…å®¹: 1. éå†æ•°ç»„ 2. éå†Set 3. éå†Map 4. éå†å­—ç¬¦ä¸² 5. éå†ä¼ªæ•°ç»„ 20.ES7 Array.prototype.includes() åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„value æŒ‡æ•°è¿ç®—ç¬¦(å¹‚): ** 21.ES8 Object.values(å¯¹è±¡) è·å–å¯¹è±¡ä¸­æ‰€æœ‰çš„å±æ€§çš„å€¼ Object.entries(å¯¹è±¡) æŠŠå¯¹è±¡è½¬æ•°ç»„ 22.ES9 Promise.finally let promise = new Promise((resolve,reject)=&gt;&#123; console.log(&#39;å¼€å§‹æ‰§è¡Œ&#39;) resolve(&#39;111&#39;) console.log(&#39;ç»“æŸæ‰§è¡Œ&#39;) &#125;) promise.then((data)=&gt;&#123; console.log(&#39;æˆåŠŸ:&#39;+data) &#125;).catch((errorMsg)=&gt;&#123; console.log(&#39;æŠ¥é”™å•¦:&#39;+errorMsg) &#125;).finally(()=&gt;&#123; console.log(&#39;æˆåŠŸå¤±è´¥éƒ½ä¼šæ‰§è¡Œçš„&#39;) &#125;) 23.æ€»ç»“ES6+é¢è¯•é¢˜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109ES6+å¸¸ç”¨è¯­æ³•åˆ—å‡ºæ•´ä½“ES6+æ–°è¯­æ³•åˆ—è¡¨è¯´æ˜: è·Ÿé¢è¯•å®˜äº¤æµES6, å…ˆå¿«é€Ÿè¯´å‡ºè¿™å¥—åˆ—è¡¨, å†é€‰æ‹©å‡ ä¸ªå¸¸ç”¨çš„/æœ‰äº›éš¾åº¦çš„/æœ‰è¯´å¤´çš„è¯´, æˆ–è€…çœ‹é¢è¯•å®˜å…³æ³¨å“ªæ–¹é¢çš„1. constä¸let2. è§£æ„èµ‹å€¼==================1. å­—ç¬¦ä¸²çš„æ‰©å±•2. æ•°å€¼çš„æ‰©å±•3. å‡½æ•°çš„æ‰©å±•4. æ•°ç»„çš„æ‰©å±•5. å¯¹è±¡çš„æ‰©å±•====================6. ç±»è¯­æ³•7. æ¨¡å—åŒ–è¯­æ³•8. å¼‚æ­¥è¯­æ³•9. æ–°å®¹å™¨è¯­æ³•10. ä»£ç†(Proxy)ä¸åå°„(Reflect)è¯­æ³•===================================constä¸let- constå®šä¹‰å¸¸é‡, letå®šä¹‰å˜é‡- ç›¸å¯¹äºvar - æœ‰å—ä½œç”¨åŸŸ - æ²¡æœ‰å˜é‡æå‡ - ä¸ä¼šæ·»åŠ åˆ°windowä¸Š - ä¸èƒ½é‡å¤å£°æ˜==============================è§£æ„èµ‹å€¼- è§£æ„å¯¹è±¡: const &#123;id, name&#125; = this.product- è§£æ„æ•°ç»„: const [count, setCount] = useState() - å½¢å‚è§£æ„: add (&#123; id, title &#125;) &#123;&#125;- å¼•å…¥æ¨¡å—è§£æ„: import &#123; getProductList &#125; from &#x27;@/api&#x27;===================================å­—ç¬¦ä¸²çš„æ‰©å±•- æ¨¡æ¿å­—ç¬¦ä¸²: æˆ‘æ˜¯$&#123;name&#125;, ä»Šå¹´$&#123;age&#125;- æ–¹æ³•: includes() / startsWith() / endswith()æ•°å€¼çš„æ‰©å±•- å®Œå–„äºŒè¿›åˆ¶(0b)ä¸å…«è¿›åˆ¶(0o)è¡¨ç¤º- ç»™Mathæ·»åŠ æ–¹æ³•: parseInt()ä¸parseFloat() (åŸæœ¬windowä¸Šæœ‰)- æŒ‡æ•°è®¡ç®—: **å‡½æ•°çš„æ‰©å±•- ç®­å¤´å‡½æ•° - æ²¡æœ‰è‡ªå·±çš„this, ä½¿ç”¨å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„this, ä¸èƒ½é€šè¿‡bindæ¥ç»‘å®šthis - ä¸èƒ½é€šè¿‡newæ¥åˆ›å»ºå®ä¾‹å¯¹è±¡ - å†…éƒ¨æ²¡æœ‰arguments, å¯ä»¥é€šè¿‡restå‚æ•°æ¥ä»£æ›¿- å½¢å‚é»˜è®¤å€¼: fn (a=2, b=&#123;&#125;) &#123;&#125;- restå‚æ•°: fn (a, ...args) &#123;&#125; / fn (a, ...args) &#123;&#125; fn(1, 2, 3, 4)æ•°ç»„çš„æ‰©å±•- æ‰©å±•è¿ç®—ç¬¦ - æµ…æ‹·è´æ•°ç»„: const arr2 = [...arr] - åˆå¹¶å¤šä¸ªæ•°ç»„: const arr3 = [...arr1, ...arr2]- é™æ€æ–¹æ³• - Array.from(): å°†ç±»æ•°ç»„å¯¹è±¡å’Œå¯éå†å¯¹è±¡è½¬ä¸ºçœŸæ•°ç»„ - Array.from(new Set(arr)) - [...new Set(arr)] - Array.of(1, 2, 3): å°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„- å®ä¾‹æ–¹æ³• - find() / findIndex(): æŸ¥æ‰¾åŒ¹é…çš„å…ƒç´ æˆ–ä¸‹æ ‡ - arr.flat(): å°†å¤šç»´æ•°ç»„è½¬ä¸ºä¸€ç»´æ•°ç»„(ä¹Ÿç§°ä¸º: æ•°ç»„æ‰å¹³åŒ–)å¯¹è±¡çš„æ‰©å±•- æ‰©å±•è¿ç®—ç¬¦ - æµ…æ‹·è´å¯¹è±¡: const obj2 = &#123;...obj1&#125; - åˆå¹¶å¤šä¸ªå¯¹è±¡: const obj3 = &#123;...obj1, ...obj2&#125;- å±æ€§/æ–¹æ³•çš„ç®€æ´å†™æ³•: &#123;name, getName () &#123;&#125;&#125;- éå†å†…éƒ¨å±æ€§ - for..of: éå†å¯¹è±¡åŠå…¶åŸå‹é“¾ä¸Šæ‰€æœ‰å±æ€§ - Object.keys(obj): å¾—åˆ°å¯¹è±¡è‡ªèº«å¯éå†çš„æ‰€æœ‰å±æ€§åçš„æ•°ç»„- é™æ€æ–¹æ³•: - Object.is(value1, value2): åˆ¤æ–­2ä¸ªå€¼æ˜¯å¦å®Œå…¨ä¸€æ · - Object.assign(target, ...sources): å°†åé¢ä»»æ„å¤šä¸ªå¯¹è±¡åˆå¹¶åˆ°targetå¯¹è±¡ä¸Š ç±»è¯­æ³•- class- extends- constructor- super() / super.xxx()- staticæ¨¡å—åŒ–è¯­æ³•- export - export default value- import: é™æ€å¯¼å…¥, åˆå¹¶ä¸€èµ·æ‰“åŒ…- import(): åŠ¨æ€å¯¼å…¥, æ‹†åˆ†æ‰“åŒ…, ç”¨äºæ‡’åŠ è½½ const Home = () =&gt; import(&#x27;./views/Home.vue&#x27;) import(&#x27;./views/Home.vue&#x27;).then((module) =&gt; &#123; // ä½¿ç”¨moduleå— module.default module.xxx &#125;)å¼‚æ­¥è¯­æ³•- Promise- async å‡½æ•°- await è¡¨è¾¾å¼æ–°å®¹å™¨è¯­æ³•- Map- Setä»£ç†(Proxy)ä¸åå°„(Reflect)è¯­æ³•- Proxy- Reflecté¢è¯•å¯è¯´çš„: ES6å¸¸ç”¨è¯­æ³•- constä¸let- ç®­å¤´å‡½æ•°- è§£æ„èµ‹å€¼- å½¢å‚é»˜è®¤å€¼- rest/å‰©ä½™å‚æ•°- ç±»è¯­æ³•: class / extends / constructor / static /super- æ‰©å±•è¿ç®—ç¬¦: ...- æ¨¡æ¿å­—ç¬¦ä¸²- å¼‚æ­¥è¯­æ³•: promise / async &amp; await- å¯¹è±¡çš„å±æ€§ä¸æ–¹æ³•ç®€å†™- set / map- æ¨¡å—åŒ–è¯­æ³•: export / default / import / import() JSå…¶ä»–å†…å®¹äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶å§”æ‰˜1) äº‹ä»¶å†’æ³¡çš„æµç¨‹ åŸºäºDOMæ ‘å½¢ç»“æ„ äº‹ä»¶åœ¨ç›®æ ‡å…ƒç´ ä¸Šå¤„ç†å, ä¼šç”±å†…å‘å¤–(ä¸Š)é€å±‚ä¼ é€’ åº”ç”¨åœºæ™¯: äº‹ä»¶ä»£ç†/å§”æ‰˜/å§”æ´¾ 2) äº‹ä»¶å§”æ‰˜ å‡å°‘å†…å­˜å ç”¨(äº‹ä»¶ç›‘å¬å›è°ƒä»nå˜ä¸º1) åŠ¨æ€æ·»åŠ çš„å†…éƒ¨å…ƒç´ ä¹Ÿèƒ½å“åº” ä¸è¦æ»¥ç”¨ 3) å°è£…ä¸€ä¸ªç»‘å¸¦äº‹ä»¶ç›‘å¬çš„å‡½æ•°(æœ‰éš¾åº¦)1234567891011121314151617181920212223242526272829303132333435363738/* ç»‘å®šäº‹ä»¶ç›‘å¬çš„é€šç”¨å‡½æ•°(ä¸å¸¦å§”æ‰˜)*/function bindEvent1 (ele, type, fn) &#123; ele.addEventListener(type, fn)&#125;/* ç»‘å®šäº‹ä»¶ç›‘å¬çš„é€šç”¨å‡½æ•°(å¸¦å§”æ‰˜)*/function bindEvent2(ele, type, fn, selector) &#123; ele.addEventListener(type, event =&gt; &#123; // å¾—åˆ°å‘ç”Ÿäº‹ä»¶çš„ç›®æ ‡ const target = event.target if (selector) &#123; // å¦‚æœå…ƒç´ è¢«æŒ‡å®šçš„é€‰æ‹©å™¨å­—ç¬¦ä¸²é€‰æ‹©, è¿”å›true; å¦åˆ™è¿”å›falseã€‚ if (target.matches(selector)) &#123; // å§”æ‰˜ç»‘å®šè°ƒç”¨ fn.call(target, event) &#125; &#125; else &#123; // æ™®é€šç»‘å®šè°ƒç”¨ fn.call(ele, event) // fn(event) // thisä¸å¯¹ &#125; &#125;)&#125;&lt;ul&gt; &lt;span&gt; &lt;li&gt; &lt;li&gt;&lt;/ul&gt; bindEvent2(ul, &#x27;click&#x27;, (event) =&gt; &#123;&#125;, &#x27;li&#x27;)bindEvent2(ul, &#x27;click&#x27;, (event) =&gt; &#123;&#125;) ajaxxhr.status 2XX: è¡¨ç¤ºæˆåŠŸå¤„ç†è¯·æ±‚, å¦‚200, 201 3XX: éœ€è¦ç”Ÿå®šå‘, æµè§ˆå™¨ç›´æ¥è·³è½¬, å¦‚302 4XX: å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯, å¦‚: 401, 404 5XX: æœåŠ¡å™¨ç«¯é”™è¯¯, å¦‚: 500 åŒºåˆ«ajaxè¯·æ±‚ä¸ä¸€èˆ¬HTTPè¯·æ±‚ ajaxè¯·æ±‚æ˜¯ä¸€ç§ç‰¹åˆ«çš„httpè¯·æ±‚ å¯¹æœåŠ¡å™¨ç«¯æ¥è¯´, æ²¡æœ‰ä»»ä½•åŒºåˆ«, åŒºåˆ«åœ¨æµè§ˆå™¨ç«¯ æµè§ˆå™¨ç«¯å‘è¯·æ±‚: åªæœ‰XHRæˆ–fetchå‘å‡ºçš„æ‰æ˜¯ajaxè¯·æ±‚, å…¶å®ƒæ‰€æœ‰çš„éƒ½æ˜¯éajaxè¯·æ±‚ æµè§ˆå™¨ç«¯æ¥æ”¶åˆ°å“åº” ä¸€èˆ¬è¯·æ±‚: æµè§ˆå™¨ä¸€èˆ¬ä¼šç›´æ¥æ˜¾ç¤ºå“åº”ä½“æ•°æ®, ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åˆ·æ–°/è·³è½¬é¡µé¢ ajaxè¯·æ±‚: æµè§ˆå™¨ä¸ä¼šå¯¹ç•Œé¢è¿›è¡Œä»»ä½•æ›´æ–°æ“ä½œ, åªæ˜¯è°ƒç”¨ç›‘è§†çš„å›è°ƒå‡½æ•°å¹¶ä¼ å…¥å“åº”ç›¸å…³æ•°æ® å°è£…ä¸€ä¸ªç®€æ˜“çš„ajaxå¼‚æ­¥è¯·æ±‚å‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101/* xhr + promise å°è£…ä¸€ä¸ªå¼‚æ­¥ajaxè¯·æ±‚çš„é€šç”¨å‡½æ•° ç®€æ´ç‰ˆ*/function ajax(url) &#123; return new Promise((resolve, reject) =&gt; &#123; // åˆ›å»ºä¸€ä¸ªXHRå¯¹è±¡ const xhr = new XMLHttpRequest() // åˆå§‹åŒ–ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚(è¿˜æ²¡å‘è¯·æ±‚) xhr.open(&#x27;GET&#x27;, url, true) xhr.onreadystatechange = function () &#123; /* ajaxå¼•æ“å¾—åˆ°å“åº”æ•°æ®å å°†xhrçš„readyStateå±æ€§æŒ‡å®šä¸º4 å°†å“åº”æ•°æ®ä¿å­˜åœ¨response / responseTextå±æ€§ä¸Š è°ƒç”¨æ­¤å›è°ƒå‡½æ•° */ // å¦‚æœçŠ¶æ€å€¼ä¸ä¸º4, ç›´æ¥ç»“æŸ(è¯·æ±‚è¿˜æ²¡æœ‰ç»“æŸ) if (xhr.readyState !== 4) &#123; return &#125; // å¦‚æœå“åº”ç åœ¨200~~299ä¹‹é—´, è¯´æ˜è¯·æ±‚éƒ½æ˜¯æˆåŠŸçš„ if (xhr.status&gt;=200 &amp;&amp; xhr.status&lt;300) &#123; // æŒ‡å®špromiseæˆåŠŸåŠç»“æœå€¼ resolve(JSON.parse(xhr.responseText)) &#125; else &#123; // è¯·æ±‚å¤±è´¥äº† // æŒ‡å®špromiseå¤±è´¥åŠç»“æœå€¼ reject(new Error(&#x27;request error staus &#x27;+ request.status)) &#125; &#125; xhr.send(null) &#125;)&#125;/* xhr + promise å°è£…ä¸€ä¸ªå¼‚æ­¥ajaxè¯·æ±‚çš„é€šç”¨å‡½æ•° åŠ å¼ºç‰ˆ è¿”å›å€¼: promise å‚æ•°ä¸ºé…ç½®å¯¹è±¡ url: è¯·æ±‚åœ°å€ params: åŒ…å«æ‰€æœ‰queryè¯·æ±‚å‚æ•°çš„å¯¹è±¡ data: åŒ…å«æ‰€æœ‰è¯·æ±‚ä½“å‚æ•°æ•°æ®çš„å¯¹è±¡ method: ä¸ºè¯·æ±‚æ–¹å¼*/function axios(&#123;url, params=&#123;&#125;, data=&#123;&#125;, method=&#x27;GET&#x27;&#125;) &#123; // è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ return new Promise((resolve, reject) =&gt; &#123; // åˆ›å»ºä¸€ä¸ªXHRå¯¹è±¡ const request = new XMLHttpRequest() // æ ¹æ®paramsæ‹¼æ¥queryå‚æ•° let queryStr = Object.keys(params).reduce((pre, key) =&gt; &#123; pre += `&amp;$&#123;key&#125;=$&#123;params[key]&#125;` return pre &#125;, &#x27;&#x27;) if (queryStr.length&gt;0) &#123; queryStr = queryStr.substring(1) url += &#x27;?&#x27; + queryStr &#125; // è¯·æ±‚æ–¹å¼è½¬æ¢ä¸ºå¤§å†™ method = method.toUpperCase() // åˆå§‹åŒ–ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚(è¿˜æ²¡å‘è¯·æ±‚) request.open(method, url, true) // ç»‘å®šè¯·æ±‚çŠ¶æ€æ”¹å˜çš„ç›‘å¬ request.onreadystatechange = function () &#123; // å¦‚æœçŠ¶æ€å€¼ä¸ä¸º4, ç›´æ¥ç»“æŸ(è¯·æ±‚è¿˜æ²¡æœ‰ç»“æŸ) if (request.readyState !== 4) &#123; return &#125; // å¦‚æœå“åº”ç åœ¨200~~299ä¹‹é—´, è¯´æ˜è¯·æ±‚éƒ½æ˜¯æˆåŠŸçš„ if (request.status&gt;=200 &amp;&amp; request.status&lt;300) &#123; // å‡†å¤‡å“åº”æ•°æ®å¯¹è±¡ const responseData = &#123; data: JSON.parse(request.response), status: request.status, statusText: request.statusText &#125; // æŒ‡å®špromiseæˆåŠŸåŠç»“æœå€¼ resolve(responseData) &#125; else &#123; // è¯·æ±‚å¤±è´¥äº† // æŒ‡å®špromiseå¤±è´¥åŠç»“æœå€¼ const error = new Error(&#x27;request error staus &#x27;+ request.status) reject(error) &#125; &#125; // å¦‚æœæ˜¯post/putè¯·æ±‚ if (method===&#x27;POST&#x27; || method===&#x27;PUT&#x27; || method===&#x27;DELETE&#x27;) &#123; // è®¾ç½®è¯·æ±‚å¤´: ä½¿è¯·æ±‚ä½“å‚æ•°ä»¥jsonå½¢å¼ä¼ é€’ request.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/json;charset=utf-8&#x27;) // åŒ…å«æ‰€æœ‰è¯·æ±‚å‚æ•°çš„å¯¹è±¡è½¬æ¢ä¸ºjsonæ ¼å¼ const dataJson = JSON.stringify(data) // å‘é€è¯·æ±‚, æŒ‡å®šè¯·æ±‚ä½“æ•°æ® request.send(dataJson) &#125; else &#123;// GETè¯·æ±‚ // å‘é€è¯·æ±‚ request.send(null) &#125; &#125;)&#125; è·¨åŸŸ ä»€ä¹ˆæ˜¯è·¨åŸŸ(åŒæºç­–ç•¥) JSONP CORS ä»£ç†æœåŠ¡å™¨ åŒæºç­–ç•¥ åŒæº: åè®®, åŸŸå, ç«¯å£, ä¸‰è€…éƒ½ç›¸åŒ ajaxè¯·æ±‚æ—¶, æµè§ˆå™¨è¦æ±‚å½“å‰ç½‘é¡µå’ŒServerå¿…é¡»åŒæº(å®‰å…¨), å¦åˆ™ä¼šæŠ›å‡ºè·¨åŸŸçš„é”™è¯¯ åŠ è½½image/link/scriptä¸å—åŒæºç­–ç•¥é™åˆ¶ JSONPåŸç† å‰å°: &lt;script src=&quot;ç›®æ ‡url?callback=fn&quot; /&gt; æ¥æ”¶å“åº”æ•°æ®çš„å‡½æ•°: function fn (data) {} åå° å¤„ç†è¯·æ±‚, äº§ç”Ÿéœ€è¦è¿”å›çš„æ•°æ®data è¯»å–callbackè¯·æ±‚å‚æ•°å¾—åˆ°å‰å°å¤„ç†å“åº”æ•°æ®çš„å‡½æ•°åfn è¿”å›æ‰§è¡Œå‡½æ•°fnçš„jsä»£ç : â€˜fn &amp;&amp; fn(data)â€™ ä¸è¶³ åªèƒ½å¤„ç†GETè¯·æ±‚ æ¯ä¸ªè¯·æ±‚åœ¨åå°éƒ½è¦åšå¤„ç†, éº»çƒ¦ 12345678910111213// å‘é€jsonpè¯·æ±‚çš„å‡½æ•°function jsonp() &#123; var script = document.createElement(&#x27;script&#x27;) script.type = &#x27;text/javascript&#x27; // ä¼ å‚å¹¶æŒ‡å®šå›è°ƒæ‰§è¡Œå‡½æ•°ä¸ºbackFn script.src = &#x27;http://localhost:4000/getUserInfo?id=100&amp;callback=fn&#x27; document.body.appendChild(script)&#125;// å›è°ƒå‡½æ•°, æ¥æ”¶å“åº”æ•°æ®function fn(data) &#123; console.log(data)&#125; CORSåŸç† åå°: è¿”å›å…è®¸æµè§ˆå™¨åœ¨æŸä¸ªåŸŸä¸Šå‘é€è·¨åŸŸè¯·æ±‚çš„ç›¸å…³å“åº”å¤´ 123456789101112// ä½¿ç”¨cors, å…è®¸è·¨åŸŸ, ä¸”å…è®¸æºå¸¦è·¨åŸŸcookieapp.use(function (req, res, next) &#123; // console.log(&#x27;----&#x27;) // å…è®¸è·¨åŸŸçš„åœ°å€ res.header(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;http://localhost:5500&#x27;) // ä¸è¦æ˜¯* // å…è®¸æºå¸¦å‡­è¯(ä¹Ÿå°±æ˜¯cookie) res.header(&#x27;Access-Control-Allow-Credentials&#x27;, &#x27;true&#x27;) // å…è®¸è·¨åŸŸçš„è¯·æ±‚å¤´ res.set(&quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type&quot;) // æ”¾è¡Œ next()&#125;) å‰å°: ä¸éœ€è¦åšç‰¹åˆ«ä»»ä½•å¤„ç† 12axios.defaults.withCredentials = true // å…è®¸æºå¸¦cookiexhr.withCredentials = true ä»£ç†æœåŠ¡å™¨ å¼€å‘ç¯å¢ƒ: åˆ©ç”¨webpack-dev-serverä¸­çš„http-proxy-middle è¿›è¡Œæ­£å‘ä»£ç† vueè„šæ‰‹æ¶é¡¹ç›® reactè„šæ‰‹æ¶é¡¹ç›® è‡ªå®šä¹‰webpacké…ç½® ç›´æ¥ä½¿ç”¨http-proxy-middleé…ç½® ç”Ÿäº§ç¯å¢ƒ: åˆ©ç”¨nigix è¿›è¡Œåå‘ä»£ç† https://www.cnblogs.com/taostaryu/p/10547132.html ä½¿ç”¨axioså‘é€ajaxè¯·æ±‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162axios(url)axios(&#123; method: &#x27;&#x27;, url: &#x27;&#x27;, // å¦‚æœæœ‰paramså‚æ•°å¿…é¡»æ‹¼æ¥åœ¨urlä¸­ params: &#123;&#125;, // queryå‚æ•° data: &#123;&#125; // è¯·æ±‚ä½“å‚æ•°&#125;)axios.get(url, &#123;é…ç½®&#125;)axios.post(url, data, &#123;é…ç½®&#125;)axios.put(url, data, &#123;é…ç½®&#125;)axios.delete(url, &#123;é…ç½®&#125;)const service = axios.create(&#123; baseURL: &#x27;&#x27;, timeout: 20000,&#125;)service.interceptors.request.use((config) =&gt; &#123; // æ·»åŠ è¯·æ±‚å¤´ config.headers[&#x27;token&#x27;] = tokenå€¼ return config // å¿…é¡»è¿”å›config&#125;)xhr.send()service.interceptors.response.use( response =&gt; &#123; // return response return response.data &#125;, error =&gt; &#123; &#125;)service(&#123;&#125;).then(data =&gt; &#123; &#125;)Promise.resolve(config) .then((config) =&gt; &#123; // è¯·æ±‚æ‹¦æˆªå™¨çš„å›è°ƒ return config &#125;) .then((config) =&gt; &#123; // ç”¨æ¥å‘ajaxçš„å›è°ƒ return new Promise((resolve, reject) =&gt; &#123; // æ ¹æ®configä½¿ç”¨xhrå‘è¯·æ±‚ resolve(response) &#125;) &#125;) .then( // å“åº”æ‹¦æˆªå™¨ (response) =&gt; &#123; return response.data &#125;, (error) =&gt; &#123; &#125; ) .then((data) =&gt; &#123; // æœ€ç»ˆå‘å…·ä½“è¯·æ±‚çš„æˆåŠŸå›è°ƒ &#125;) axiosäºŒæ¬¡å°è£… é…ç½®é€šç”¨çš„åŸºç¡€è·¯å¾„å’Œè¶…æ—¶ æ˜¾ç¤ºè¯·æ±‚è¿›åº¦æ¡ æ˜¾ç¤ºè¿›åº¦æ¡: è¯·æ±‚æ‹¦æˆªå™¨å›è°ƒ ç»“æŸè¿›åº¦æ¡: å“åº”æ‹¦æˆªå™¨å›è°ƒ æˆåŠŸè¿”å›çš„æ•°æ®ä¸å†æ˜¯response, è€Œç›´æ¥æ˜¯å“åº”ä½“æ•°æ®response.data ç»Ÿä¸€å¤„ç†è¯·æ±‚é”™è¯¯, å…·ä½“è¯·æ±‚ä¹Ÿå¯ä»¥é€‰æ‹©å¤„ç†æˆ–ä¸å¤„ç† æ¯ä¸ªè¯·æ±‚è‡ªåŠ¨æºå¸¦userTempIdçš„è¯·æ±‚å¤´: åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­å®ç° å¦‚æœå½“å‰æœ‰token, è‡ªåŠ¨æºå¸¦tokençš„è¯·æ±‚å¤´ å¯¹tokenè¿‡æœŸçš„é”™è¯¯è¿›è¡Œå¤„ç† 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879import axios from &#x27;axios&#x27;import NProgress from &#x27;nprogress&#x27;import &#x27;nprogress/nprogress.css&#x27;import store from &#x27;@/store&#x27;import router from &#x27;@/router&#x27;NProgress.configure(&#123; showSpinner: false &#125;) // éšè—å³ä¾§çš„æ—‹è½¬è¿›åº¦æ¡// åˆ›å»ºinstanceconst instance = axios.create(&#123; // baseURL: &#x27;http://182.92.128.115/api&#x27;, baseURL: &#x27;/api&#x27;, timeout: 20000&#125;)// æŒ‡å®šè¯·æ±‚æ‹¦æˆªå™¨instance.interceptors.request.use(config =&gt; &#123; // æ˜¾ç¤ºè¿›åº¦æ¡: è¯·æ±‚æ‹¦æˆªå™¨å›è°ƒ NProgress.start() /* æ¯ä¸ªè¯·æ±‚è‡ªåŠ¨æºå¸¦userTempIdçš„è¯·æ±‚å¤´: åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­å®ç° */ const userTempId = store.state.user.userTempId config.headers.userTempId = userTempId /* 6. å¦‚æœå½“å‰æœ‰token, è‡ªåŠ¨æºå¸¦tokençš„è¯·æ±‚å¤´ */ const token = store.state.user.token if (token) &#123; config.headers.token = token &#125; return config // å¿…é¡»è¿”å›config&#125;) // æŒ‡å®šå“åº”æ‹¦æˆªå™¨instance.interceptors.response.use( response =&gt; &#123; // æˆåŠŸçš„å›è°ƒ // ç»“æŸè¿›åº¦æ¡: å“åº”æ‹¦æˆªå™¨å›è°ƒ NProgress.done() // æˆåŠŸè¿”å›çš„æ•°æ®ä¸å†æ˜¯response, è€Œç›´æ¥æ˜¯å“åº”ä½“æ•°æ®response.data return response.data &#125;, async error =&gt; &#123; // å¤±è´¥çš„å›è°ƒ // ç»“æŸè¿›åº¦æ¡: å“åº”æ‹¦æˆªå™¨å›è°ƒ NProgress.done() // ç»Ÿä¸€å¤„ç†è¯·æ±‚é”™è¯¯, å…·ä½“è¯·æ±‚ä¹Ÿå¯ä»¥é€‰æ‹©å¤„ç†æˆ–ä¸å¤„ç† // alert(&#x27;è¯·æ±‚å‡ºé”™: &#x27; + error.message||&#x27;æœªçŸ¥é”™è¯¯&#x27;) // å–å‡ºå“åº”å¯¹è±¡ const &#123; response &#125; = error // å¦‚æœæ˜¯è¯·æ±‚å¤„ç†å‡ºé”™ if (response &amp;&amp; response.status) &#123; // 401è¯´æ˜tokenéæ³• if (response.status === 401) &#123; // å¦‚æœå½“å‰æ²¡åœ¨ç™»é™†é¡µ if (router.currentRoute.path!==&#x27;/login&#x27;) &#123; // åˆ†å‘actionå»æ¸…é™¤ç”¨æˆ·tokenä¿¡æ¯ await store.dispatch(&#x27;logout&#x27;) // è·³è½¬åˆ°ç™»é™†é¡µé¢ router.replace(&#x27;/login&#x27;) // æç¤º message.error(&#x27;ç™»é™†å·²è¿‡æœŸ, è¯·é‡æ–°ç™»é™†&#x27;) &#125; &#125; else &#123; message.error(&#x27;è¯·æ±‚å‡ºé”™: &#x27; + error.message||&#x27;æœªçŸ¥é”™è¯¯&#x27;) &#125; &#125; else if (!response) &#123; // ç½‘ç»œè¿æ¥ä¸ä¸ŠæœåŠ¡å™¨ message.error(&#x27;æ‚¨çš„ç½‘ç»œå‘ç”Ÿå¼‚å¸¸ï¼Œæ— æ³•è¿æ¥æœåŠ¡å™¨&#x27;) &#125; // throw error return Promise.reject(error) // å°†é”™è¯¯å‘ä¸‹ä¼ é€’ &#125;)// å‘å¤–æš´éœ²instanceexport default instance Restless API ä¸ Restful API Restless API ä¼ ç»Ÿçš„API, æŠŠæ¯ä¸ªurlå½“ä½œä¸€ä¸ªåŠŸèƒ½æ“ä½œ /deleteUser åŒä¸€ä¸ªurl, åå°åªè¿›è¡ŒCRUDçš„æŸä¸€ç§æ“ä½œ è¯·æ±‚æ–¹å¼ä¸å†³å®šè¯·æ±‚çš„CRUDæ“ä½œ ä¸€ä¸ªè¯·æ±‚è·¯å¾„åªå¯¹åº”ä¸€ä¸ªæ“ä½œ ä¸€èˆ¬åªæœ‰GET/POST Restful API æ–°å¼çš„API, æŠŠæ¯ä¸ªurlå½“ä½œä¸€ä¸ªå”¯ä¸€èµ„æº /user/2 åŒä¸€ä¸ªurl, å¯ä»¥é€šè¿‡ä¸åŒç±»å‹çš„è¯·æ±‚å¯¹åå°èµ„æºæ•°æ®è¿›è¡ŒCRUDå››ç§æ“ä½œ è¯·æ±‚æ–¹å¼æ¥å†³å®šäº†è¯·æ±‚åœ¨åå°è¿›è¡ŒCRUDçš„å“ªç§æ“ä½œ GET: æŸ¥è¯¢ POST: æ·»åŠ  PUT: æ›´æ–° DELETE: åˆ é™¤ åŒä¸€ä¸ªè¯·æ±‚è·¯å¾„å¯ä»¥è¿›è¡Œå¤šä¸ªæ“ä½œ è¯·æ±‚æ–¹å¼ä¼šç”¨åˆ°GET/POST/PUT/DELETE æµ‹è¯•: å¯ä»¥ä½¿ç”¨json-serverå¿«é€Ÿæ­å»ºæ¨¡æ‹Ÿçš„rest api æ¥å£ å‰å°æ•°æ®å­˜å‚¨å­˜å‚¨æ–¹å¼ cookie sessionStorage localStorage æ³¨æ„: sessionåå°æ•°æ®å­˜å‚¨ cookie æœ¬èº«ç”¨äºæµè§ˆå™¨å’ŒServeré€šè®¯ è¢« â€œå€Ÿç”¨â€ åˆ°æœ¬åœ°å­˜å‚¨ å¯ç”¨document.cookieè¯»å–æˆ–ä¿å­˜ å¯ä»¥åˆ©ç”¨cookieså·¥å…·åº“ç®€åŒ–ç¼–ç  cookieçš„ç¼ºç‚¹ å­˜å‚¨å¤§å°æœ‰é™, æœ€å¤§4KB httpè¯·æ±‚æ—¶ä¼šè‡ªåŠ¨å‘é€ç»™æœåŠ¡å™¨, å¢åŠ äº†è¯·æ±‚çš„æ•°æ®é‡ åŸç”Ÿçš„æ“ä½œè¯­æ³•ä¸å¤ªæ–¹ä¾¿æ“ä½œcookie æµè§ˆå™¨å¯ä»¥è®¾ç½®ç¦ç”¨ localStoargeä¸sessionStorage ç›¸åŒç‚¹: çº¯æµè§ˆå™¨ç«¯å­˜å‚¨, å¤§å°ä¸å—é™åˆ¶, è¯·æ±‚æ—¶ä¸ä¼šè‡ªåŠ¨æºå¸¦ åªèƒ½ä¿å­˜æ–‡æœ¬, å¦‚æœæ˜¯å¯¹è±¡æˆ–æ•°ç»„, éœ€è¦è½¬æ¢ä¸ºJSON APIç›¸åŒ: setItem(key, value) getItem(key, value) removeitem(key, value) æµè§ˆå™¨ä¸èƒ½ç¦ç”¨ ä¸åŒç‚¹: localStorageä¿å­˜åœ¨æœ¬åœ°æ–‡ä»¶ä¸­, é™¤éç¼–ç æˆ–æ‰‹åŠ¨åˆ é™¤, å¦åˆ™ä¸€ç›´å­˜åœ¨ sessonStorageæ•°æ®ä¿å­˜åœ¨å½“å‰ä¼šè¯å†…å­˜ä¸­, å…³é—­æµè§ˆå™¨åˆ™æ¸…é™¤ åŒºåˆ«cookie ä¸ localStorageå’ŒsessionStorage å®¹é‡ è¯·æ±‚æ—¶æ˜¯å¦è‡ªåŠ¨æºå¸¦ APIæ˜“ç”¨æ€§ æµè§ˆå™¨æ˜¯å¦å¯ç¦ç”¨ åŒºåˆ«cookieä¸session cookieä¿å­˜åœ¨æµè§ˆå™¨ç«¯(å‰å°å¯ä»¥æ“ä½œ) sessionä¿å­˜åœ¨æœåŠ¡å™¨ç«¯(å‰å°ä¸èƒ½æ“ä½œ) sessionä¾èµ–äºcookie(sessionçš„idä»¥cookieçš„å½¢å¼ä¿å­˜åœ¨æµè§ˆå™¨ç«¯) ä»è¾“å…¥urlåˆ°æ¸²æŸ“å‡ºé¡µé¢çš„æ•´ä¸ªè¿‡ç¨‹http://www.baidu.com DNS è§£æï¼ˆæŸ¥è¯¢ï¼‰ï¼šå°†åŸŸååœ°å€è§£æ ip åœ°å€ æµè§ˆå™¨ DNS ç¼“å­˜ è®¡ç®—æœº DNS ç¼“å­˜ è·¯ç”±å™¨ DNS ç¼“å­˜ ç½‘ç»œè¿è¥å•† DNS ç¼“å­˜ é€’å½’æŸ¥è¯¢ TCP é“¾æ¥ï¼šTCP ä¸‰æ¬¡æ¡æ‰‹ ===&gt; å»ºç«‹è¿æ¥ å®¢æˆ·ç«¯å‘é€æœåŠ¡ç«¯ï¼šæˆ‘å‡†å¤‡å¥½äº†ï¼Œè¯·ä½ å‡†å¤‡ä¸€ä¸‹ æœåŠ¡ç«¯å‘é€å®¢æˆ·ç«¯ï¼šæˆ‘ä¹Ÿå‡†å¤‡å¥½äº†ï¼Œè¯·ä½ ç¡®è®¤ä¸€ä¸‹ å®¢æˆ·ç«¯å‘é€æœåŠ¡ç«¯ï¼šç¡®è®¤å®Œæ¯• å‘é€è¯·æ±‚ å°†è¯·æ±‚æŠ¥æ–‡å‘é€è¿‡å» è¿”å›å“åº” å°†å“åº”æŠ¥æ–‡å‘é€è¿‡æ¥ è§£ææ¸²æŸ“é¡µé¢ é‡åˆ° HTMLï¼Œè°ƒç”¨ HTML è§£æå™¨ï¼Œè§£ææˆ DOM æ ‘ é‡åˆ° CSSï¼Œè°ƒç”¨ CSS è§£æå™¨ï¼Œè§£ææˆ CSSOM æ ‘ é‡åˆ° JSï¼Œè°ƒç”¨ JS è§£æå™¨ï¼ˆJS å¼•æ“ï¼‰ï¼Œè§£æ JS ä»£ç  å¯èƒ½è¦ä¿®æ”¹å…ƒç´ èŠ‚ç‚¹ï¼Œé‡æ–°è°ƒç”¨ HTML è§£æå™¨ï¼Œè§£ææ›´æ–°DOM æ ‘ å¯èƒ½è¦ä¿®æ”¹æ ·å¼èŠ‚ç‚¹ï¼Œé‡æ–°è°ƒç”¨ CSS è§£æå™¨ï¼Œè§£ææ›´æ–° CSSOM æ ‘ å°† DOM + CSSOM = Render Treeï¼ˆæ¸²æŸ“æ ‘ï¼‰ layout å¸ƒå±€ï¼šè®¡ç®—å…ƒç´ çš„ä½ç½®å’Œå¤§å°ä¿¡æ¯ render æ¸²æŸ“ï¼šå°†é¢œè‰²/æ–‡å­—/å›¾ç‰‡ç­‰æ¸²æŸ“ä¸Šå» æ–­å¼€é“¾æ¥ï¼šTCP å››æ¬¡æŒ¥æ‰‹ (æ–­å¼€è¯·æ±‚é“¾æ¥ 2 æ¬¡, æ–­å¼€å“åº”é“¾æ¥ 2 æ¬¡) å®¢æˆ·ç«¯å‘é€æœåŠ¡ç«¯ï¼šè¯·æ±‚æ•°æ®å‘é€å®Œæ¯•ï¼Œå¯ä»¥æ–­å¼€äº† æœåŠ¡ç«¯å‘é€å®¢æˆ·ç«¯ï¼šè¯·æ±‚æ•°æ®æ¥å—å®Œæ¯•ï¼Œå¯ä»¥æ–­å¼€äº† æœåŠ¡ç«¯å‘é€å®¢æˆ·ç«¯ï¼šå“åº”æ•°æ®å‘é€å®Œæ¯•ï¼Œå¯ä»¥æ–­å¼€äº† å®¢æˆ·ç«¯å‘é€æœåŠ¡ç«¯ï¼šå“åº”æ•°æ®æ¥å—å®Œæ¯•ï¼Œå¯ä»¥æ–­å¼€äº† æ‰‹å†™ä»£ç å‡½æ•°çš„call() / apply() / bind()1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/* è‡ªå®šä¹‰å‡½æ•°å¯¹è±¡çš„callæ–¹æ³•*/function call (fn, obj, ...args) &#123; // å¦‚æœä¼ å…¥çš„æ˜¯null/undefined, thisæŒ‡å®šä¸ºwindow if (obj===null || obj===undefined) &#123; obj = obj || window &#125; // ç»™objæ·»åŠ ä¸€ä¸ªæ–¹æ³•: å±æ€§åä»»æ„, å±æ€§å€¼å¿…é¡»å½“å‰è°ƒç”¨callçš„å‡½æ•°å¯¹è±¡ obj.tempFn = fn // é€šè¿‡objè°ƒç”¨è¿™ä¸ªæ–¹æ³• const result = obj.tempFn(...args) // åˆ é™¤æ–°æ·»åŠ çš„æ–¹æ³• delete obj.tempFn // è¿”å›å‡½æ•°è°ƒç”¨çš„ç»“æœ return result&#125;/* è‡ªå®šä¹‰å‡½æ•°å¯¹è±¡çš„applyæ–¹æ³•*/function apply (fn, obj, args) &#123; // å¦‚æœä¼ å…¥çš„æ˜¯null/undefined, thisæŒ‡å®šä¸ºwindow if (obj===null || obj===undefined) &#123; obj = obj || window &#125; // ç»™objæ·»åŠ ä¸€ä¸ªæ–¹æ³•: å±æ€§åä»»æ„, å±æ€§å€¼å¿…é¡»å½“å‰è°ƒç”¨callçš„å‡½æ•°å¯¹è±¡ obj.tempFn = fn // é€šè¿‡objè°ƒç”¨è¿™ä¸ªæ–¹æ³• const result = obj.tempFn(...args) // åˆ é™¤æ–°æ·»åŠ çš„æ–¹æ³• delete obj.tempFn // è¿”å›å‡½æ•°è°ƒç”¨çš„ç»“æœ return result&#125;/* è‡ªå®šä¹‰å‡½æ•°å¯¹è±¡çš„bindæ–¹æ³• é‡è¦æŠ€æœ¯: é«˜é˜¶å‡½æ•° é—­åŒ… call() ä¸‰ç‚¹è¿ç®—ç¬¦*/function bind (fn, obj, ...args) &#123; if (obj===null || obj===undefined) &#123; obj = obj || window &#125; return function (...args2) &#123; return call(fn, obj, ...args, ...args2) &#125;&#125; å‡½æ•°çš„èŠ‚æµ(throttle)ä¸é˜²æŠ–(debounce)12345678910111213141516171819202122232425262728293031323334353637/* å®ç°å‡½æ•°èŠ‚æµçš„å‡½æ•°*/function throttle(callback, delay) &#123; let start = 0 // å¿…é¡»ä¿å­˜ç¬¬ä¸€æ¬¡ç‚¹å‡»ç«‹å³è°ƒç”¨ return function (event) &#123; // äº‹ä»¶å›è°ƒå‡½æ•° // thisæ˜¯å‘ç”Ÿäº‹ä»¶çš„domå…ƒç´  console.log(&#x27;throttle äº‹ä»¶&#x27;) const current = Date.now() if (current - start &gt; delay) &#123; // ä»ç¬¬2æ¬¡ç‚¹å‡»å¼€å§‹, éœ€è¦é—´éš”æ—¶é—´è¶…è¿‡delay callback.call(this, event) // å°†å½“å‰æ—¶é—´æŒ‡å®šä¸ºstart, ==&gt; ä¸ºåé¢çš„æ¯”è¾ƒåšå‡†å¤‡ start = current &#125; &#125;&#125;/* å®ç°å‡½æ•°é˜²æŠ–çš„å‡½æ•°*/function debounce(callback, delay) &#123; return function (event) &#123; console.log(&#x27;debounce äº‹ä»¶...&#x27;) // æ¸…é™¤å¾…æ‰§è¡Œçš„å®šæ—¶å™¨ä»»åŠ¡ if (callback.timeoutId) &#123; clearTimeout(callback.timeoutId) &#125; // æ¯éš”delayçš„æ—¶é—´, å¯åŠ¨ä¸€ä¸ªæ–°çš„å»¶è¿Ÿå®šæ—¶å™¨, å»å‡†å¤‡è°ƒç”¨callback callback.timeoutId = setTimeout(() =&gt; &#123; callback.call(this, event) // å¦‚æœå®šæ—¶å™¨å›è°ƒæ‰§è¡Œäº†, åˆ é™¤æ ‡è®° delete callback.timeoutId &#125;, delay) &#125;&#125; æ•°ç»„å»é‡(unique)12345678910111213141516171819202122232425262728293031323334353637383940/*æ–¹æ³•1: åˆ©ç”¨forEach()å’ŒindexOf() è¯´æ˜: æœ¬è´¨æ˜¯åŒé‡éå†, æ•ˆç‡å·®äº›*/function unique1 (array) &#123; const arr = [] array.forEach(item =&gt; &#123; if (arr.indexOf(item)===-1) &#123; // å†…éƒ¨åœ¨éå†åˆ¤æ–­å‡ºæ¥çš„ arr.push(item) &#125; &#125;) return arr&#125;/*æ–¹æ³•2: åˆ©ç”¨forEach() + å¯¹è±¡å®¹å™¨ è¯´æ˜: åªéœ€ä¸€é‡éå†, æ•ˆç‡é«˜äº›*/function unique2 (array) &#123; const arr = [] const obj = &#123;&#125; array.forEach(item =&gt; &#123; if (!obj.hasOwnProperty(item)) &#123;// ä¸ç”¨éå†å°±èƒ½åˆ¤æ–­å‡ºæ˜¯å¦å·²ç»æœ‰äº† obj[item] = true arr.push(item) &#125; &#125;) return arr&#125;/*æ–¹æ³•3: åˆ©ç”¨ES6è¯­æ³• 1). from + Set 2). ... + Set è¯´æ˜: ç¼–ç ç®€æ´*/function unique3 (array) &#123; // return Array.from(new Set(array)) return [...new Set(array)]&#125; æ•°ç»„æ‰å¹³åŒ–(flatten)123456789101112131415161718192021222324252627282930/* æ•°ç»„æ‰å¹³åŒ–: å–å‡ºåµŒå¥—æ•°ç»„(å¤šç»´)ä¸­çš„æ‰€æœ‰å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ–°æ•°ç»„(ä¸€ç»´)ä¸­ å¦‚: [1, [3, [2, 4]]] ==&gt; [1, 3, 2, 4]*//*æ–¹æ³•ä¸€: é€’å½’ + reduce() + concat()*/function flatten1 (array) &#123; return array.reduce((pre, item) =&gt; &#123; if (Array.isArray(item) &amp;&amp; item.some((cItem =&gt; Array.isArray(cItem)))) &#123; return pre.concat(flatten1(item)) &#125; else &#123; return pre.concat(item) &#125; &#125;, [])&#125;/*æ–¹æ³•äºŒ: ... + some() + concat()*/function flatten2 (array) &#123; let arr = [].concat(...array) while (arr.some(item =&gt; Array.isArray(item))) &#123; arr = [].concat(...arr) &#125; return arr&#125; æ·±æ‹·è´123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119/* æ·±åº¦å…‹éš†1). å¤§ä¼—ä¹ä¸ç‰ˆ é—®é¢˜1: å‡½æ•°å±æ€§ä¼šä¸¢å¤± é—®é¢˜2: å¾ªç¯å¼•ç”¨ä¼šå‡ºé”™2). é¢è¯•åŸºç¡€ç‰ˆæœ¬ è§£å†³é—®é¢˜1: å‡½æ•°å±æ€§è¿˜æ²¡ä¸¢å¤±3). é¢è¯•åŠ å¼ºç‰ˆæœ¬ è§£å†³é—®é¢˜2: å¾ªç¯å¼•ç”¨æ­£å¸¸4). é¢è¯•åŠ å¼ºç‰ˆæœ¬2(ä¼˜åŒ–éå†æ€§èƒ½) æ•°ç»„: while | for | forEach() ä¼˜äº for-in | keys()&amp;forEach() å¯¹è±¡: for-in ä¸ keys()&amp;forEach() å·®ä¸å¤š*/const obj = &#123; a: &#123; &#125;, b: [], fn: function ()&#123;&#125;&#125;obj.a.c = obj.bobj.b[0] = obj.a/* 1). å¤§ä¼—ä¹ä¸ç‰ˆ é—®é¢˜1: å‡½æ•°å±æ€§ä¼šä¸¢å¤± é—®é¢˜2: å¾ªç¯å¼•ç”¨ä¼šå‡ºé”™*/export function deepClone1(target) &#123; return JSON.parse(JSON.stringify(target))&#125;/* è·å–æ•°æ®çš„ç±»å‹å­—ç¬¦ä¸²å*/function getType(data) &#123; return Object.prototype.toString.call(data).slice(8, -1) // -1ä»£è¡¨æœ€åä¸€ä½ // [object Array] ===&gt; Array [object Object] ==&gt; Object&#125;/*2). é¢è¯•åŸºç¡€ç‰ˆæœ¬ è§£å†³é—®é¢˜1: å‡½æ•°å±æ€§è¿˜æ²¡ä¸¢å¤±*/function deepClone2(target) &#123; const type = getType(target) if (type===&#x27;Object&#x27; || type===&#x27;Array&#x27;) &#123; const cloneTarget = type === &#x27;Array&#x27; ? [] : &#123;&#125; for (const key in target) &#123; if (target.hasOwnProperty(key)) &#123; cloneTarget[key] = deepClone2(target[key]) &#125; &#125; return cloneTarget &#125; else &#123; return target &#125;&#125;/* 3). é¢è¯•åŠ å¼ºç‰ˆæœ¬ è§£å†³é—®é¢˜2: å¾ªç¯å¼•ç”¨æ­£å¸¸*/function deepClone3(target, map = new Map()) &#123; const type = getType(target) if (type===&#x27;Object&#x27; || type===&#x27;Array&#x27;) &#123; // ä»mapå®¹å™¨å–å¯¹åº”çš„cloneå¯¹è±¡ let cloneTarget = map.get(target) // å¦‚æœæœ‰, ç›´æ¥è¿”å›è¿™ä¸ªcloneå¯¹è±¡ if (cloneTarget) &#123; return cloneTarget &#125; cloneTarget = type===&#x27;Array&#x27; ? [] : &#123;&#125; // å°†cloneäº§ç”Ÿçš„å¯¹è±¡ä¿å­˜åˆ°mapå®¹å™¨ map.set(target, cloneTarget) for (const key in target) &#123; if (target.hasOwnProperty(key)) &#123; cloneTarget[key] = deepClone3(target[key], map) &#125; &#125; return cloneTarget &#125; else &#123; return target &#125;&#125;/* 4). é¢è¯•åŠ å¼ºç‰ˆæœ¬2(ä¼˜åŒ–éå†æ€§èƒ½) æ•°ç»„: while | for | forEach() ä¼˜äº for-in | keys()&amp;forEach() å¯¹è±¡: for-in ä¸ keys()&amp;forEach() å·®ä¸å¤š*/function deepClone4(target, map = new Map()) &#123; const type = getType(target) if (type===&#x27;Object&#x27; || type===&#x27;Array&#x27;) &#123; let cloneTarget = map.get(target) if (cloneTarget) &#123; return cloneTarget &#125; if (type===&#x27;Array&#x27;) &#123; cloneTarget = [] map.set(target, cloneTarget) target.forEach((item, index) =&gt; &#123; cloneTarget[index] = deepClone4(item, map) &#125;) &#125; else &#123; cloneTarget = &#123;&#125; map.set(target, cloneTarget) Object.keys(target).forEach(key =&gt; &#123; cloneTarget[key] = deepClone4(target[key], map) &#125;) &#125; return cloneTarget &#125; else &#123; return target &#125;&#125; è‡ªå®šä¹‰newå’Œinstanceofå·¥å…·å‡½æ•°12345678910111213141516171819202122232425262728293031323334353637383940414243/* è‡ªå®šä¹‰newå·¥å…·å‡½æ•° è¯­æ³•: newInstance(Fn, ...args) åŠŸèƒ½: åˆ›å»ºFnæ„é€ å‡½æ•°çš„å®ä¾‹å¯¹è±¡ å®ç°: åˆ›å»ºç©ºå¯¹è±¡obj, è°ƒç”¨FnæŒ‡å®šthisä¸ºobj, è¿”å›obj*/function newInstance(Fn, ...args) &#123; // åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ const obj = &#123;&#125; // æ‰§è¡Œæ„é€ å‡½æ•° const result = Fn.apply(obj, args) // ç›¸å½“äº: obj.Fn() // å¦‚æœæ„é€ å‡½æ•°æ‰§è¡Œçš„ç»“æœæ˜¯å¯¹è±¡, è¿”å›è¿™ä¸ªå¯¹è±¡ if (result instanceof Object) &#123; return result &#125; // å¦‚æœä¸æ˜¯, è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ obj.__proto__.constructor = Fn // è®©åŸå‹å¯¹è±¡çš„æ„é€ å™¨å±æ€§æŒ‡å‘Fn return obj&#125;/* è‡ªå®šä¹‰instanceofå·¥å…·å‡½æ•°: è¯­æ³•: myInstanceOf(obj, Type) åŠŸèƒ½: åˆ¤æ–­objæ˜¯å¦æ˜¯Typeç±»å‹çš„å®ä¾‹ å®ç°: Typeçš„åŸå‹å¯¹è±¡æ˜¯å¦æ˜¯objçš„åŸå‹é“¾ä¸Šçš„æŸä¸ªå¯¹è±¡, å¦‚æœæ˜¯è¿”å›true, å¦åˆ™è¿”å›false*/function myInstanceOf(obj, Type) &#123; // å¾—åˆ°åŸå‹å¯¹è±¡ let protoObj = obj.__proto__ // åªè¦åŸå‹å¯¹è±¡å­˜åœ¨ while(protoObj) &#123; // å¦‚æœåŸå‹å¯¹è±¡æ˜¯Typeçš„åŸå‹å¯¹è±¡, è¿”å›true if (protoObj === Type.prototype) &#123; return true &#125; // æŒ‡å®šåŸå‹å¯¹è±¡çš„åŸå‹å¯¹è±¡ protoObj = protoObj.__proto__ &#125; return false&#125; å­—ç¬¦ä¸²å¤„ç†12345678910111213141516171819202122232425262728/* 1. å­—ç¬¦ä¸²å€’åº: reverseString(str) ç”Ÿæˆä¸€ä¸ªå€’åºçš„å­—ç¬¦ä¸²2. å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡: palindrome(str) å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²æ˜¯å›æ–‡ï¼Œåˆ™è¿”å› true ï¼›å¦åˆ™è¿”å› false3. æˆªå–å­—ç¬¦ä¸²: truncate(str, num) å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦è¶…è¿‡äº†num, æˆªå–å‰é¢numé•¿åº¦éƒ¨åˆ†, å¹¶ä»¥...ç»“æŸ*//* 1. å­—ç¬¦ä¸²å€’åº: reverseString(str) ç”Ÿæˆä¸€ä¸ªå€’åºçš„å­—ç¬¦ä¸²*/function reverseString(str) &#123; // return str.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) // return [...str].reverse().join(&#x27;&#x27;) return Array.from(str).reverse().join(&#x27;&#x27;)&#125;/* 2. å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡: palindrome(str) å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²æ˜¯å›æ–‡ï¼Œåˆ™è¿”å› true ï¼›å¦åˆ™è¿”å› false*/function palindrome(str) &#123; return str === reverseString(str)&#125;/* 3. æˆªå–å­—ç¬¦ä¸²: truncate(str, num) å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦è¶…è¿‡äº†num, æˆªå–å‰é¢numé•¿åº¦éƒ¨åˆ†, å¹¶ä»¥...ç»“æŸ*/function truncate(str, num) &#123; return str.length &gt; num ? str.slice(0, num) + &#x27;...&#x27; : str&#125; ç®€å•æ’åº: å†’æ³¡ / é€‰æ‹© / æ’å…¥12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/* å†’æ³¡æ’åºçš„æ–¹æ³•*/function bubbleSort (array) &#123; // 1.è·å–æ•°ç»„çš„é•¿åº¦ var length = array.length; // 2.åå‘å¾ªç¯, å› æ­¤æ¬¡æ•°è¶Šæ¥è¶Šå°‘ for (var i = length - 1; i &gt;= 0; i--) &#123; // 3.æ ¹æ®içš„æ¬¡æ•°, æ¯”è¾ƒå¾ªç¯åˆ°iä½ç½® for (var j = 0; j &lt; i; j++) &#123; // 4.å¦‚æœjä½ç½®æ¯”j+1ä½ç½®çš„æ•°æ®å¤§, é‚£ä¹ˆå°±äº¤æ¢ if (array[j] &gt; array[j + 1]) &#123; // äº¤æ¢ // const temp = array[j+1] // array[j+1] = array[j] // array[j] = temp [array[j + 1], array[j]] = [array[j], array[j + 1]]; &#125; &#125; &#125; return arr;&#125;/* é€‰æ‹©æ’åºçš„æ–¹æ³•*/function selectSort (array) &#123; // 1.è·å–æ•°ç»„çš„é•¿åº¦ var length = array.length // 2.å¤–å±‚å¾ªç¯: ä»0ä½ç½®å¼€å§‹å–å‡ºæ•°æ®, ç›´åˆ°length-2ä½ç½® for (var i = 0; i &lt; length - 1; i++) &#123; // 3.å†…å±‚å¾ªç¯: ä»i+1ä½ç½®å¼€å§‹, å’Œåé¢çš„å†…å®¹æ¯”è¾ƒ var min = i for (var j = min + 1; j &lt; length; j++) &#123; // 4.å¦‚æœiä½ç½®çš„æ•°æ®å¤§äºjä½ç½®çš„æ•°æ®, è®°å½•æœ€å°çš„ä½ç½® if (array[min] &gt; array[j]) &#123; min = j &#125; &#125; if (min !== i) &#123; // äº¤æ¢ [array[min], array[i]] = [array[i], array[min]]; &#125; &#125; return arr;&#125;/* æ’å…¥æ’åºçš„æ–¹æ³•*/function insertSort (array) &#123; // 1.è·å–æ•°ç»„çš„é•¿åº¦ var length = array.length // 2.å¤–å±‚å¾ªç¯: å¤–å±‚å¾ªç¯æ˜¯ä»1ä½ç½®å¼€å§‹, ä¾æ¬¡éå†åˆ°æœ€å for (var i = 1; i &lt; length; i++) &#123; // 3.è®°å½•é€‰å‡ºçš„å…ƒç´ , æ”¾åœ¨å˜é‡tempä¸­ var j = i var temp = array[i] // 4.å†…å±‚å¾ªç¯: å†…å±‚å¾ªç¯ä¸ç¡®å®šå¾ªç¯çš„æ¬¡æ•°, æœ€å¥½ä½¿ç”¨whileå¾ªç¯ while (j &gt; 0 &amp;&amp; array[j - 1] &gt; temp) &#123; array[j] = array[j - 1] j-- &#125; // 5.å°†é€‰å‡ºçš„jä½ç½®, æ”¾å…¥tempå…ƒç´  array[j] = temp &#125; return array&#125;"},{"title":"002.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯--CSS","path":"2025/05/12/002.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯--CSS/","text":"002.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯â€“CSS å­¦ä¹ æ²¡æœ‰åŠ¨åŠ›å°±å¯ä»¥çœ‹çœ‹æ‹›è˜ç½‘ç«™ä¸Šé¢çš„è–ªèµ„ï¼Œå¯ä»¥å¯¹æ¯”å…¶ä»–çš„å·¥ä½œç¯å¢ƒ CSS MDNæ–‡æ¡£ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/CSS w3schoolæ–‡æ¡£ï¼šhttps://www.w3school.com.cn/css/index.asp w3schoolæ‰‹å†Œï¼šhttps://www.w3school.com.cn/cssref/index.asp CSSçš„å†…å®¹éå¸¸å¤šï¼Œåªèƒ½é æ…¢æ…¢ç§¯ç´¯ è¯­æ³• é€‰æ‹©å™¨CSS é€‰æ‹©å™¨åˆ†ä¸ºäº”ç±»ï¼š ç®€å•é€‰æ‹©å™¨ï¼ˆæ ¹æ®åç§°ã€idã€ç±»æ¥é€‰å–å…ƒç´ ï¼‰ ç»„åˆå™¨é€‰æ‹©å™¨ï¼ˆæ ¹æ®å®ƒä»¬ä¹‹é—´çš„ç‰¹å®šå…³ç³»æ¥é€‰å–å…ƒç´ ï¼‰ ä¼ªç±»é€‰æ‹©å™¨ï¼ˆæ ¹æ®ç‰¹å®šçŠ¶æ€é€‰å–å…ƒç´ ï¼‰ ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼ˆé€‰å–å…ƒç´ çš„ä¸€éƒ¨åˆ†å¹¶è®¾ç½®å…¶æ ·å¼ï¼‰ å±æ€§é€‰æ‹©å™¨ï¼ˆæ ¹æ®å±æ€§æˆ–å±æ€§å€¼æ¥é€‰å–å…ƒç´ ï¼‰ é€‰æ‹©å™¨çš„æƒé‡é—®é¢˜ æƒé‡ï¼šå¬è°ï¼Œå¤šä¸ªé€‰æ‹©å™¨å¯ä»¥å åŠ  é€‰æ‹©å™¨ æƒé‡ æƒé‡çš„ç­‰çº§ ï¼important æ— ç©·å¤§ 0 style å±æ€§ 1,0,0,0 1 id é€‰æ‹©å™¨ 0,1,0,0 2 ç±»ã€ä¼ªç±»ã€ç»“æ„ä¼ªç±»ã€å±æ€§é€‰æ‹©å™¨ 0,0,1,0 3 æ ‡ç­¾ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨ 0,0,0,1 4 é€šé…ç¬¦é€‰æ‹©å™¨ 0,0,0,0 5 ç»§æ‰¿çš„æ ·å¼ æ²¡æœ‰æƒé‡ 6 å±æ€§é€‰æ‹©å™¨ ç”¨çš„å°‘ï¼Œä¸€èˆ¬åªé’ˆå¯¹ç‰¹æ®Šåœºæ™¯æœ‰å¥‡æ•ˆ [attr*=val]ï¼šå±æ€§åŒ…å«æŸä¸€ä¸ªvalå€¼ [attr^=val]ï¼šå±æ€§ä»¥æŸä¸€ä¸ªvalå¼€å¤´ [attr$=val]ï¼šå±æ€§ä»¥æŸä¸€ä¸ªvalç»“å°¾ [attr|=val]ï¼šå±æ€§ç­‰äºvalæˆ–valå¼€å¤´å¹¶ä¸”ç´§è·Ÿè¿æ¥ç¬¦- [attr~=val]ï¼šå±æ€§åŒ…å«valï¼Œå¦‚æœæœ‰å…¶ä»–å€¼å¿…é¡»ä»¥ç©ºæ ¼ä¸valåˆ†å‰² BFC å¯ä»¥è§£å†³é«˜åº¦åå¡Œï¼Œå¤–è¾¹è·é‡å ï¼Œè‡ªé€‚åº”å¸ƒå±€ https://fanyouf.gitee.io/interview/css/02.html#%E7%AE%80%E7%89%88 HTML æ ¹å…ƒç´  position ä¸º absolute æˆ– fixed float å±æ€§ä¸ä¸º noneï¼ˆå¸¸ç”¨ï¼‰ overflow ä¸ä¸º visibleï¼ˆå¸¸ç”¨ï¼‰ display ä¸º inline-blockï¼Œ table-cellï¼Œ table-captionï¼Œ flexï¼ˆå¸¸ç”¨) ç»å¯¹å®šä½çš„é«˜åº¦åå¡Œä¸è¡Œï¼Œå¾—ä½¿ç”¨js åª’ä½“æŸ¥è¯¢ å¯ä»¥æ ¹æ®ä¸åŒçš„è®¾å¤‡æˆ–å®½åº¦å¤§å°ç­‰ç‰¹æ€§æ¥ä¿®æ”¹æ ·å¼ ä¸‰å¤§ä½¿ç”¨æ–¹æ³• é€šè¿‡@mediaå’Œ@importä½¿ç”¨ä¸åŒçš„cssè§„åˆ™ 1@import url(./css/index.css) (max-width:800px) åœ¨linkã€styleç­‰æ ‡ç­¾ä¸­ä½¿ç”¨mediaå±æ€§æŒ‡å®šåª’ä½“æŸ¥è¯¢ 1&lt;link res=&quot;stylesheet&quot; media=&quot;(max-width:800px)&quot; href=&quot;./css/index.css&quot;&gt; ä½¿ç”¨@media 12345@media (max-width:800px)&#123; div&#123; color:red; &#125;&#125; åª’ä½“ç±»å‹ å€¼ æè¿° all ç”¨äºæ‰€æœ‰åª’ä½“ç±»å‹è®¾å¤‡ã€‚ print ç”¨äºæ‰“å°æœºã€‚ screen ç”¨äºè®¡ç®—æœºå±å¹•ã€å¹³æ¿ç”µè„‘ã€æ™ºèƒ½æ‰‹æœºç­‰ç­‰ã€‚ speech ç”¨äºå¤§å£°â€œè¯»å‡ºâ€é¡µé¢çš„å±å¹•é˜…è¯»å™¨ã€‚ åª’ä½“ç‰¹æ€§ å€¼ æè¿° width å¯åŠ max minå‰ç¼€ height å¯åŠ max minå‰ç¼€ device-width å¯åŠ max minå‰ç¼€ orientation portraitç«–å±/landscapeæ¨ªå± æ›´å¤šè§„åˆ™ï¼šhttps://www.w3school.com.cn/cssref/pr_mediaquery.asp em/rem emï¼šç›¸å¯¹è‡ªèº«çš„å­—ä½“å¤§å°ï¼Œå¦‚æœå¯¹è‡ªèº«å­—ä½“å¤§å°è®¾ç½®ï¼Œåˆ™ç›¸å¯¹çˆ¶å…ƒç´ å¤§å° remï¼šç›¸å¯¹æ ¹å…ƒç´ ï¼ˆhtmlï¼‰å¤§å° ç§»åŠ¨ç«¯é€‚é…1&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0,user-scalable=no&quot;&gt; å€¼ å¯èƒ½çš„é™„åŠ å€¼ æè¿° width æ­£æ•´æ•°æˆ–å­—ç¬¦ä¸²device-width å®šä¹‰viewportçš„å®½åº¦ height æ­£æ•´æ•°æˆ–å­—ç¬¦ä¸²device-height å®šä¹‰viewportçš„é«˜åº¦ã€‚æœªè¢«ä»»ä½•æµè§ˆå™¨ä½¿ç”¨ initial-scale 0.0-10.0ä¹‹é—´ è®¾å¤‡ä¸viewportçš„ç¼©æ”¾æ¯”ä¾‹ maximum-scale 0.0-10.0ä¹‹é—´ å®šä¹‰ç¼©æ”¾çš„æœ€å¤§å€¼å¿…é¡»å¤§äºç­‰äºmaximum-scaleï¼Œå¦åˆ™è¡¨ç°ä¸å¯é¢„æµ‹ minimum-scale 0.0-10.0ä¹‹é—´ å®šä¹‰ç¼©æ”¾çš„æœ€å¤§å€¼å¿…é¡»å¤§äºç­‰äºminimum-scaleï¼Œå¦åˆ™è¡¨ç°ä¸å¯é¢„æµ‹ user-scalable yesæˆ–no æ˜¯å¦å…è®¸ç¼©æ”¾ï¼Œé»˜è®¤yesã€‚éƒ¨åˆ†æµè§ˆå™¨å¿½è§†è¿™ä¸ªè§„åˆ™ ç§»åŠ¨ç«¯é€šå¸¸ä½¿ç”¨åª’ä½“æŸ¥è¯¢æˆ–è€…remï¼Œä¹Ÿå¯èƒ½ä½¿ç”¨uniappæ¥åš é‡ç‚¹ flexå¸ƒå±€ï¼šhttps://www.ruanyifeng.com/blog/2015/07/flex-grammar.html gridå¸ƒå±€ï¼šhttps://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html gridè§†é¢‘æ•™ç¨‹ï¼šhttps://www.bilibili.com/video/BV1w84y1r7X8/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=b307bf90a5b243266e19ff3e3d323e66 æ ·å¼ç©¿é€ æ ·å¼ç©¿é€ 1. &gt;&gt;&gt;é€‚ç”¨ä¸ cssã€stylusï¼Œä¸å¤ªæ¨èï¼Œå¯èƒ½ä¼šæœ‰é—®é¢˜å¤–å±‚ç±» &gt;&gt;&gt; æƒ³è¦ä¿®æ”¹ç±»å {ä¿®æ”¹æ ·å¼} 2. /deep/é€‚ç”¨äº scssã€lesså¤–å±‚ç±» /deep/ æƒ³è¦ä¿®æ”¹ç±»å {ä¿®æ”¹æ ·å¼} 3. ::v-deepé€šç”¨ï¼Œæ®è¯´å¯ä»¥åŠ å¿«ç¼–è¯‘é€Ÿåº¦::deep æƒ³è¦ä¿®æ”¹ç±»å {ä¿®æ”¹æ ·å¼} csså‡½æ•° csså‡½æ•° var(â€“name,value)ï¼šå…¨å±€å˜é‡ nameå‰ç¼€å¿…é¡»æ˜¯â€“ valueæ˜¯é»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°nameæ—¶ä½¿ç”¨ ç¤ºä¾‹ï¼š 123456:root&#123; --blue: #1e90ff&#125;div&#123; color: var(--blue)&#125; calc()ï¼šcsså››åˆ™è¿ç®— ç¤ºä¾‹ï¼š 123div&#123; width: calc(100% - 80px);&#125; classå‘½å å‚è€ƒå•è¯ headeré¡µçœ‰ bodyé¡µèº« footeré¡µè„šcontaineré›†è£…ç®± asideä¾§è¾¹æ  mainä¸»ä½“ submainå‰¯ä¸»ä½“leftå·¦ä¾§ centerä¸­é—´ rightå³ä¾§topä¸Šéƒ¨ middleä¸­éƒ¨ bottomåº•éƒ¨group åˆ†ç»„ rowè¡Œ colåˆ— listç»„max æœ€å¤§ plusè¶…å¤§ mediumä¸­ç­‰ smallå° miniæå°primary ä¸»è¦çš„ successæˆåŠŸçš„ warningè­¦å‘Šçš„ dangerå±é™©çš„ defaulté»˜è®¤çš„infoä¿¡æ¯ textæ–‡æœ¬ linké“¾æ¥ tipså°è´´æ¡activeæ´»è·ƒçš„ disabledç¦ç”¨çš„ readonlyåªè¯»çš„ highlighté«˜äº®çš„heighté«˜ widthå®½ weightç²— æ›´å¤šæŸ¥çœ‹ï¼šhttps://guide.aotu.io/index.html å±æ€§ä¹¦å†™é¡ºåºå»ºè®®éµå¾ªä»¥ä¸‹é¡ºåºï¼š å¸ƒå±€å®šä½å±æ€§ï¼šdisplay / position / float / clear / visibility / overflow è‡ªèº«å±æ€§ï¼šwidth / height / margin / padding / border / background æ–‡æœ¬å±æ€§ï¼šcolor / font / text-decoration / text-align / vertical-align / white- space / break-word å…¶ä»–å±æ€§ï¼ˆCSS3ï¼‰ï¼šcontent / cursor / border-radius / box-shadow / text-shadow / background:linear-gradient â€¦ æ›´å¤šä»£ç è§„èŒƒæŸ¥çœ‹ï¼šhttps://guide.aotu.io/index.html"},{"title":"003.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯--Less","path":"2025/05/12/003.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯--Less/","text":"003.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯â€“Less å­¦ä¹ æ²¡æœ‰åŠ¨åŠ›å°±å¯ä»¥çœ‹çœ‹æ‹›è˜ç½‘ç«™ä¸Šé¢çš„è–ªèµ„ï¼Œå¯ä»¥å¯¹æ¯”å…¶ä»–çš„å·¥ä½œç¯å¢ƒ Less cssé¢„å¤„ç†å™¨ ä¸­æ–‡æ–‡æ¡£ï¼šhttps://less.bootcss.com/ æµè§ˆå™¨ç¯å¢ƒä¸­ä½¿ç”¨ åŸç”Ÿ 12&lt;link rel=&quot;stylesheet/less&quot; type=&quot;text/css&quot; href=&quot;styles.less&quot; /&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/npm/less@4&quot; &gt;&lt;/script&gt; åœ¨vueä¸­ä½¿ç”¨ npm/yarn 1npm install --save less less-loader åœ¨main.jsä¸­å¼•å…¥ 12import less from &#x27;less&#x27;Vue.use(less) æˆ–è€…åœ¨webpack.base.config.jsä¸­é…ç½® 12345678910111213141516171819const &#123; defineConfig &#125; = require(&#x27;@vue/cli-service&#x27;)module.exports = defineConfig(&#123; transpileDependencies: true, devServer: &#123; open: true, host: &#x27;localhost&#x27;, port: 8080 &#125;, module: &#123; rules: [ // lessé…ç½® &#123; test: /\\.less$/, loader: &quot;style-loader!css-loader!less-loader&quot;, options: &#123; sourceMap: true &#125; &#125; ] &#125;&#125;) åŸºæœ¬ä½¿ç”¨å˜é‡1234567@width: 10px;@height: @width + 10px;#header &#123; width: @width; height: @height;&#125; åµŒå¥—123456789#header &#123; color: black;&#125;#header .navigation &#123; font-size: 12px;&#125;#header .logo &#123; width: 300px;&#125; è¿ç®— ä¸æ¨èä½¿ç”¨ï¼Œlessè¿ç®—æœ‰çš„åªè®¤ç¬¬ä¸€ä¸ªå•ä½ 123@conversion-1: 5cm + 10mm; // ç»“æœæ˜¯ 6cm@conversion-2: 2 - 3cm - 5mm; // ç»“æœæ˜¯ -1.5cm@base: 2cm * 3mm; // ç»“æœæ˜¯ 6cm æ··å…¥12345678910111213141516171819202122232425262728293031323334353637383940414243444546åŸºæœ¬ä½¿ç”¨.bordered &#123; border-top: dotted 1px black; border-bottom: solid 2px black;&#125;#menu a &#123; color: #111; .bordered();&#125;.post a &#123; color: red; .bordered();&#125;æºå¸¦å‚æ•°.bordered (@color:#fff)&#123; // @color:#fffé»˜è®¤å€¼ border-top: dotted 1px black; border-bottom: solid 2px black; color:@color;&#125;#menu a &#123; color: #111; .bordered(#999);&#125;.post a &#123; color: red; .bordered();&#125;ç»“åˆæ˜ å°„.bordered ()&#123; border-top: dotted 1px black; border-bottom: solid 2px black; color:#fff;&#125;#menu a &#123; color: .bordered()[color]; // color: .bordered[color]; // ç¼©å†™ï¼Œä½†æ˜¯ä¸æ–¹ä¾¿é˜…è¯»çœ‹ä¸ªäººæˆ–å›¢é˜Ÿ&#125;.post a &#123; color: red; .bordered();&#125; å¼•å…¥12@import &quot;library&quot;; // library.less@import &quot;typo.css&quot;; å…¶ä»–å†…å®¹æŸ¥çœ‹æ–‡æ¡£ï¼šhttps://less.bootcss.com/ Sass/Scss ä¸lessç±»ä¼¼ï¼Œä½¿ç”¨åŸºæœ¬æ˜¯ä¸€æ ·çš„ æ–‡æ¡£ï¼šhttps://www.sass.hk/"},{"title":"001.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯--HTML","path":"2025/05/12/001.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯--HTML/","text":"001.ä»é›¶å¼€å§‹å¤ä¹ å‰ç«¯â€“HTML å­¦ä¹ æ²¡æœ‰åŠ¨åŠ›å°±å¯ä»¥çœ‹çœ‹æ‹›è˜ç½‘ç«™ä¸Šé¢çš„è–ªèµ„ï¼Œå¯ä»¥å¯¹æ¯”å…¶ä»–çš„å·¥ä½œç¯å¢ƒ å®‰è£…VScode æœç´¢VScodeå®˜ç½‘ä¸‹è½½ï¼Œå…è´¹çš„ä½†æ˜¯å®ƒæ˜¯å¤–ç½‘ä¼šå¯èƒ½ä¼šå¾ˆæ…¢ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å›½å†…çš„ç¬¬ä¸‰æ–¹ä¸‹è½½ï¼ˆä¸å»ºè®®å¯èƒ½æœ‰å¹¿å‘Šï¼‰ å®‰è£…æ’ä»¶ è½¬æˆä¸­æ–‡ï¼šChinese (Simplified) (ç®€ä½“ä¸­æ–‡) Language Pack for Visual Studio Cod ä¸éœ€è¦åˆ·æ–°å°±èƒ½æ›´æ–°ï¼šLive Server è‡ªåŠ¨ä¿®æ”¹ç»“æŸæ ‡ç­¾ï¼šAuto Rename Tag ä¿®æ”¹é»˜è®¤é…ç½® è‡ªåŠ¨ä¿å­˜ï¼šåœ¨VScodeå·¦ä¸Šè§’ç‚¹å‡»æ–‡ä»¶æ‰“å¼€è‡ªåŠ¨ä¿å­˜ ä¿®æ”¹å­—ä½“å¤§å°ï¼šåœ¨è®¾ç½®é‡Œé¢æ‰¾åˆ°Font Size è‡ªåŠ¨æ¢è¡Œï¼šåœ¨è®¾ç½®é‡Œé¢æ‰¾åˆ°Word Wrap å±•ç¤ºç©ºæ ¼ï¼šåœ¨è®¾ç½®é‡Œé¢æ‰¾åˆ°Render Whitespace è·³è½¬tabç¼©è¿›ï¼šåœ¨è®¾ç½®é‡Œé¢æ‰¾åˆ°Tab Size Tabå‘åç¼©è¿›ã€shift+Tabå‘å‰ç¼©è¿› HTML MDNé“¾æ¥ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/HTML w3schoolï¼šhttps://www.w3school.com.cn/html/index.asp å…ƒç´ çš„ä¸»è¦éƒ¨åˆ†æœ‰ï¼š å¼€å§‹æ ‡ç­¾ï¼ˆOpening tagï¼‰ï¼šåŒ…å«å…ƒç´ çš„åç§°ï¼ˆæœ¬ä¾‹ä¸º pï¼‰ï¼Œè¢«å¤§äºå·ã€å°äºå·æ‰€åŒ…å›´ã€‚è¡¨ç¤ºå…ƒç´ ä»è¿™é‡Œå¼€å§‹æˆ–è€…å¼€å§‹èµ·ä½œç”¨ â€”â€” åœ¨æœ¬ä¾‹ä¸­å³æ®µè½ç”±æ­¤å¼€å§‹ã€‚ ç»“æŸæ ‡ç­¾ï¼ˆClosing tagï¼‰ï¼šä¸å¼€å§‹æ ‡ç­¾ç›¸ä¼¼ï¼Œåªæ˜¯å…¶åœ¨å…ƒç´ åä¹‹å‰åŒ…å«äº†ä¸€ä¸ªæ–œæ ã€‚è¿™è¡¨ç¤ºç€å…ƒç´ çš„ç»“å°¾ â€”â€” åœ¨æœ¬ä¾‹ä¸­å³æ®µè½åœ¨æ­¤ç»“æŸã€‚åˆå­¦è€…å¸¸å¸¸ä¼šçŠ¯å¿˜è®°åŒ…å«ç»“æŸæ ‡ç­¾çš„é”™è¯¯ï¼Œè¿™å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›å¥‡æ€ªçš„ç»“æœã€‚ å†…å®¹ï¼ˆContentï¼‰ï¼šå…ƒç´ çš„å†…å®¹ï¼Œæœ¬ä¾‹ä¸­å°±æ˜¯æ‰€è¾“å…¥çš„æ–‡æœ¬æœ¬èº«ã€‚ å…ƒç´ ï¼ˆElementï¼‰ï¼šå¼€å§‹æ ‡ç­¾ã€ç»“æŸæ ‡ç­¾ä¸å†…å®¹ç›¸ç»“åˆï¼Œä¾¿æ˜¯ä¸€ä¸ªå®Œæ•´çš„å…ƒç´ ã€‚ å±æ€§åº”è¯¥åŒ…å«ï¼š åœ¨å±æ€§ä¸å…ƒç´ åç§°ï¼ˆæˆ–ä¸Šä¸€ä¸ªå±æ€§ï¼Œå¦‚æœæœ‰è¶…è¿‡ä¸€ä¸ªå±æ€§çš„è¯ï¼‰ä¹‹é—´çš„ç©ºæ ¼ç¬¦ã€‚ å±æ€§çš„åç§°ï¼Œå¹¶æ¥ä¸Šä¸€ä¸ªç­‰å·ã€‚ ç”±å¼•å·æ‰€åŒ…å›´çš„å±æ€§å€¼ã€‚ ç©ºå…ƒç´  ä¸åŒ…å«ä»»ä½•å†…å®¹çš„å…ƒç´ ç§°ä¸ºç©ºå…ƒç´ ã€‚æ¯”å¦‚ img å…ƒç´  h(1-6)æ ‡ç­¾ hæ ‡ç­¾å’Œseoä¼˜åŒ–æœ‰å…³ åˆç†çš„ä½¿ç”¨æ˜¯å¯èƒ½æé«˜ç½‘ç«™çš„æƒé‡çš„ã€æé«˜ç½‘ç«™åœ¨æœç´¢å¼•æ“çš„æ’å imgæ ‡ç­¾ altå±æ€§ éƒ½çŸ¥é“å›¾ç‰‡åŠ è½½å¤±è´¥æ˜¾ç¤ºæ–‡å­—è¦ä½¿ç”¨altï¼Œä½†æ˜¯ä¸è¦å¿½ç•¥ä½¿ç”¨é˜…è¯»å™¨æ—¶ä¹Ÿä¼šæè¿°altçš„å†…å®¹ titleé¼ æ ‡æ‚¬åœæ˜¾ç¤ºæ–‡å­— å¯èƒ½ä¼šé‡åˆ°å›¾ç‰‡403é—®é¢˜ ç”¨ &lt;a&gt;ã€&lt;area&gt;ã€&lt;img&gt;ã€&lt;iframe&gt;ã€&lt;script&gt; æˆ–è€… &lt;link&gt; å…ƒç´ ä¸Šçš„ referrerpolicy å±æ€§ä¸ºå…¶è®¾ç½®ç‹¬ç«‹çš„è¯·æ±‚ç­–ç•¥ï¼Œä¾‹å¦‚ï¼š 1&lt;img src=&quot;http://â€¦â€¦&quot; referrerPolicy=&quot;no-referrer&quot;&gt; æˆ–è€…ç›´æ¥åœ¨HTMl é¡µé¢å¤´ä¸­é€šè¿‡meta å±æ€§å…¨å±€é…ç½®ï¼š 1&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; aæ ‡ç­¾ target _selfï¼šå½“å‰é¡µé¢åŠ è½½ _blankï¼šæ–°çª—å£æ‰“å¼€ _parentï¼šçˆ¶çº§é¡µé¢æ‰“å¼€ï¼Œæ²¡æœ‰çˆ¶çº§é¡µé¢å’Œ_selfæ•ˆæœç›¸åŒï¼ˆiframeåµŒå¥—ï¼‰ _topï¼šé¡¶çº§é¡µé¢æ‰“å¼€ï¼Œæ²¡æœ‰çˆ¶çº§é¡µé¢å’Œ_selfæ•ˆæœç›¸åŒï¼ˆiframeåµŒå¥—å¤šçº§ï¼‰ href æŒ‡å®šåœ°å€ é”šç‚¹ ä¸‹è½½æ–‡ä»¶ï¼ˆxxx.zipï¼‰ mailto:&#55;&#x36;&#54;&#x31;&#x38;&#x37;&#51;&#x39;&#x37;&#x40;&#113;&#x71;&#x2e;&#x63;&#x6f;&#109;ï¼ˆåè®®åœ°å€ï¼‰ iframeæ ‡ç­¾ ç”¨äºåµŒå…¥å…¶ä»–é¡µé¢ å…¨å±€å±æ€§ ä¸ä»…ä»…å±äºæŸä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾çš„å±æ€§ classï¼šè®¾ç½®æ ·å¼ç±»å data-*ï¼šè‡ªå®šä¹‰æ•°æ®å±æ€§ HTMLElement.datasetè·å– è¯¥åç§°ä¸èƒ½ä»¥xmlå¼€å¤´ï¼Œæ— è®ºè¿™äº›å­—æ¯æ˜¯å¤§å†™è¿˜æ˜¯å°å†™ï¼› è¯¥åç§°ä¸èƒ½åŒ…å«ä»»ä½•åˆ†å· (U+003A)ï¼› è¯¥åç§°ä¸èƒ½åŒ…å« A è‡³ Z çš„å¤§å†™å­—æ¯ã€‚ idï¼šå”¯ä¸€æ ‡è¯† langï¼šè¯­ä¹‰åŒ–å®šä¹‰ styleï¼šæ ·å¼ titleï¼šé¼ æ ‡æ‚¬æµ®çš„åç§° è¡Œå…ƒç´ å—å…ƒç´ è¡Œå†…å…ƒç´ : å°±æ˜¯åœ¨webé¡µé¢å¸ƒå±€æ—¶å¯ä»¥ä¸å…¶ä»–å…ƒç´ ä¸€å—å…±äº«ä¸€è¡Œçš„å…ƒç´  å—å…ƒç´ ï¼š å°±æ˜¯æ¯ä¸€ä¸ªå…ƒç´ ,å æœ‰ä¸€è¡Œ,å³ä½¿è‡ªå·±çš„å†…å®¹ä¸å¤Ÿå¤šä¹Ÿä¸è®©å…¶ä»–å…ƒç´ ä¾µçŠ¯è‡ªå·±çš„åº•ç›˜"}]